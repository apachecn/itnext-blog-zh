<html>
<head>
<title>Learn how to use Azure Functions to process data from Azure Event Hubs and persist to Azure Cosmos DB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">äº†è§£å¦‚ä½•ä½¿ç”¨Azureå‡½æ•°å¤„ç†æ¥è‡ªAzure Event Hubsçš„æ•°æ®ï¼Œå¹¶æŒä¹…åŒ–åˆ°Azure Cosmos DB</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/learn-how-to-use-azure-functions-to-process-data-from-azure-event-hubs-and-persist-to-azure-cosmos-e61794776dd?source=collection_archive---------3-----------------------#2020-03-31">https://itnext.io/learn-how-to-use-azure-functions-to-process-data-from-azure-event-hubs-and-persist-to-azure-cosmos-e61794776dd?source=collection_archive---------3-----------------------#2020-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d645" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/azure-event-hubs-multi-protocol-support-d0e41834510b">ä¹‹å‰çš„ä¸€ç¯‡åšå®¢</a>è®²è¿°äº†<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Event Hubs </a>å¦‚ä½•æ”¯æŒ<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-exchange-events-different-protocols?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å¤šåè®®</a>è¿›è¡Œæ•°æ®äº¤æ¢çš„ä¸€äº›æ¦‚å¿µã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹å®ƒçš„å®é™…åº”ç”¨ã€‚å€ŸåŠ©ç¤ºä¾‹åº”ç”¨ç¨‹åºï¼Œæ‚¨å°†çœ‹åˆ°å¦‚ä½•å°†å®æ—¶æ•°æ®æ¥æ”¶ç»„ä»¶ä¸æ— æœåŠ¡å™¨å¤„ç†å±‚ç»“åˆèµ·æ¥ã€‚</p><p id="b631" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¤ºä¾‹åº”ç”¨ç¨‹åºå…·æœ‰ä»¥ä¸‹ç»„ä»¶:</p><ul class=""><li id="c917" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">Azureäº‹ä»¶ä¸­å¿ƒ<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å’ŒKafkaç«¯ç‚¹</a></li><li id="a808" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">å°†æ•°æ®æ¨é€åˆ°äº‹ä»¶ä¸­å¿ƒä¸»é¢˜çš„ç”Ÿäº§è€…åº”ç”¨ç¨‹åº</li><li id="cc9f" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">ä¸€ä¸ªä½¿ç”¨<a class="ae kl" href="https://docs.microsoft.com/azure/azure-functions/?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Functions </a>æ„å»ºçš„æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œå®ƒä»äº‹ä»¶ä¸­å¿ƒæ¶ˆè´¹ã€ä¸°å¯Œå¹¶æœ€ç»ˆå­˜å‚¨åœ¨<a class="ae kl" href="https://docs.microsoft.com/azure/cosmos-db/?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Cosmos DB </a>ä¸­</li></ul><p id="b93f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†è·Ÿè¿›å¹¶å°†è¯¥è§£å†³æ–¹æ¡ˆéƒ¨ç½²åˆ°Azureï¼Œæ‚¨å°†éœ€è¦ä¸€ä¸ª<a class="ae kl" href="https://docs.microsoft.com/azure/cosmos-db/create-cosmosdb-resources-portal?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Microsoft Azure </a>å¸æˆ·ã€‚<a class="ae kl" href="https://azure.microsoft.com/free/?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">è¿˜æ²¡æœ‰çš„å¯ä»¥å…è´¹æŠ¢ä¸€ä¸ª</a>ï¼</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="a1b2" class="lh li iq bd lj lk ll dn lm ln lo dp lp jy lq lr ls kc lt lu lv kg lw lx ly lz bi translated">åº”ç”¨ç¨‹åºç»„ä»¶</h2><p id="8e67" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">è®©æˆ‘ä»¬æ¥çœ‹çœ‹åº”ç”¨ç¨‹åºçš„å„ä¸ªç»„ä»¶</p><blockquote class="mf mg mh"><p id="2423" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><em class="iq">ä¸€å¦‚æ—¢å¾€çš„ï¼Œ</em> <a class="ae kl" href="https://github.com/abhirockzz/eventhubs-functions-cosmosdb-example" rel="noopener ugc nofollow" target="_blank"> <em class="iq">ä»£ç åœ¨GitHub </em> </a>ä¸Šå¯ç”¨</p></blockquote><p id="d40c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">ç”Ÿäº§è€…æˆåˆ†</strong></p><p id="4df8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™éå¸¸ç®€å•â€”â€”è¿™æ˜¯ä¸€ä¸ªGoåº”ç”¨ç¨‹åºï¼Œå®ƒä½¿ç”¨<a class="ae kl" href="https://github.com/Shopify/sarama" rel="noopener ugc nofollow" target="_blank"> Sarama Kafkaå®¢æˆ·ç«¯</a>å‘Azure Event Hubs (Kafkaä¸»é¢˜)å‘é€(æ¨¡æ‹Ÿ)<code class="fe mm mn mo mp b">"orders"</code>ã€‚ä¸ºä¾¿äºä½¿ç”¨ï¼Œå®ƒä»¥<a class="ae kl" href="https://hub.docker.com/r/abhirockzz/eventhubs-kafka-producer" rel="noopener ugc nofollow" target="_blank"> Dockerå›¾åƒ</a>çš„å½¢å¼æä¾›(è¯¦æƒ…è§ä¸‹ä¸€èŠ‚)</p><p id="58bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä»¥ä¸‹æ˜¯ç›¸å…³çš„ä»£ç ç‰‡æ®µ:</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="d2c2" class="lh li iq mp b gy my mz l na nb">order := Order{OrderID: "order-1234", CustomerID: "customer-1234", Product: "product-1234"}</span><span id="e4c1" class="lh li iq mp b gy nc mz l na nb">b, err := json.Marshal(order)</span><span id="b658" class="lh li iq mp b gy nc mz l na nb">msg := &amp;sarama.ProducerMessage{Topic: eventHubsTopic, Key: sarama.StringEncoder(oid), Value: sarama.ByteEncoder(b)}<br/>producer.SendMessage(msg)</span></pre><p id="c953" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">(ä»ä¸Šé¢çš„ç‰‡æ®µä¸­)çœç•¥äº†å¾ˆå¤šç»†èŠ‚â€”â€”ä½ å¯ä»¥åœ¨è¿™é‡Œæœç´¢<a class="ae kl" href="https://github.com/abhirockzz/eventhubs-functions-cosmosdb-example/blob/master/eventhubs-kafka-producer/producer.go" rel="noopener ugc nofollow" target="_blank">çš„å®Œæ•´ä»£ç </a>ã€‚æ€»è€Œè¨€ä¹‹ï¼Œåˆ›å»ºä¸€ä¸ª<code class="fe mm mn mo mp b">Order</code>ï¼Œå°†å…¶è½¬æ¢(ç¼–ç»„)æˆJSON ( <code class="fe mm mn mo mp b">bytes</code>)å¹¶å‘é€åˆ°äº‹ä»¶ä¸­å¿ƒKafka endpointã€‚</p><p id="1354" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">æ— æœåŠ¡å™¨ç»„ä»¶</strong></p><p id="668c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mm mn mo mp b">Serverless</code>éƒ¨åˆ†æ˜¯ä¸€ä¸ª<a class="ae kl" href="https://docs.microsoft.com/azure/azure-functions/functions-reference-java?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Java Azureå‡½æ•°</a>ã€‚å®ƒåˆ©ç”¨äº†ä»¥ä¸‹åŠŸèƒ½:</p><ul class=""><li id="3092" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated"><a class="ae kl" href="https://docs.microsoft.com/azure/azure-functions/functions-bindings-event-hubs-trigger?tabs=java&amp;WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azureäº‹ä»¶ä¸­å¿ƒè§¦å‘</a>ï¼Œä»¥åŠ</li><li id="ecf2" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><a class="ae kl" href="https://docs.microsoft.com/azure/azure-functions/functions-bindings-cosmosdb-v2-output?tabs=java&amp;WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Cosmos DBè¾“å‡ºç»‘å®š</a></li></ul><p id="fdd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mi">è§¦å‘å™¨</em>å…è®¸Azureå‡½æ•°é€»è¾‘åœ¨<code class="fe mm mn mo mp b">order</code>äº‹ä»¶è¢«å‘é€åˆ°Azureäº‹ä»¶ä¸­å¿ƒæ—¶è¢«è°ƒç”¨ã€‚<em class="mi">è¾“å‡ºç»‘å®š</em>è´Ÿè´£æ‰€æœ‰ç¹é‡çš„å·¥ä½œï¼Œæ¯”å¦‚å»ºç«‹æ•°æ®åº“è¿æ¥ã€ä¼¸ç¼©ã€å¹¶å‘ç­‰ã€‚å‰©ä¸‹æˆ‘ä»¬è¦æ„å»ºçš„å°±æ˜¯ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒéå¸¸ç®€å•â€”â€”åœ¨ä»Azure Event Hubsæ¥æ”¶åˆ°<code class="fe mm mn mo mp b">order</code>æ•°æ®åï¼Œè¯¥å‡½æ•°ç”¨é¢å¤–çš„ä¿¡æ¯(åœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯å®¢æˆ·å’Œäº§å“åç§°)ä¸°å¯Œå®ƒï¼Œå¹¶å°†å®ƒä¿å­˜åœ¨ä¸€ä¸ª<a class="ae kl" href="https://docs.microsoft.com/azure/cosmos-db/databases-containers-items?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Cosmos DBå®¹å™¨</a>ä¸­ã€‚</p><p id="043d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ å¯ä»¥åœ¨Github ä¸ŠæŸ¥çœ‹<code class="fe mm mn mo mp b"><a class="ae kl" href="https://github.com/abhirockzz/eventhubs-functions-cosmosdb-example/blob/master/consumer-azure-function/src/main/java/com/abhirockzz/OrderProcessor.java" rel="noopener ugc nofollow" target="_blank">OrderProcessor</a></code> <a class="ae kl" href="https://github.com/abhirockzz/eventhubs-functions-cosmosdb-example/blob/master/consumer-azure-function/src/main/java/com/abhirockzz/OrderProcessor.java" rel="noopener ugc nofollow" target="_blank">ä»£ç ï¼Œä¸è¿‡è¿™é‡Œæ˜¯è¦ç‚¹:</a></p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="e36e" class="lh li iq mp b gy my mz l na nb">@FunctionName("storeOrders")<br/>public void storeOrders(</span><span id="654d" class="lh li iq mp b gy nc mz l na nb">  @EventHubTrigger(name = "orders", eventHubName = "", connection = <br/>  "EventHubConnectionString", cardinality = Cardinality.ONE) <br/>  OrderEvent orderEvent,</span><span id="9758" class="lh li iq mp b gy nc mz l na nb">  @CosmosDBOutput(name = "databaseOutput", databaseName = "AppStore", <br/>  collectionName = "orders", connectionStringSetting = <br/>  "CosmosDBConnectionString") <br/>  OutputBinding&lt;Order&gt; output,</span><span id="2314" class="lh li iq mp b gy nc mz l na nb">  final ExecutionContext context) {<br/>....</span><span id="6ac0" class="lh li iq mp b gy nc mz l na nb">Order order = new Order(orderEvent.getOrderId(),Data.CUSTOMER_DATA.get(orderEvent.getCustomerId()), orderEvent.getCustomerId(),Data.PRODUCT_DATA.get(orderEvent.getProduct());<br/>output.setValue(order);</span><span id="15b5" class="lh li iq mp b gy nc mz l na nb">....<br/>}</span></pre><p id="453a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mm mn mo mp b">storeOrders</code>æ–¹æ³•ç”¨<code class="fe mm mn mo mp b"><a class="ae kl" href="https://docs.microsoft.com/java/api/com.microsoft.azure.functions.annotation.functionname?view=azure-java-stable&amp;WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">@FunctionName</a></code>æ³¨é‡Šï¼Œå®ƒä»¥<code class="fe mm mn mo mp b">OrderEvent</code>å¯¹è±¡çš„å½¢å¼ä»äº‹ä»¶ä¸­å¿ƒæ¥æ”¶æ•°æ®ã€‚å¤šäºäº†<code class="fe mm mn mo mp b"><a class="ae kl" href="https://docs.microsoft.com/java/api/com.microsoft.azure.functions.annotation.eventhubtrigger?view=azure-java-stable&amp;WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">@EventHubTrigger</a></code>æ³¨é‡Šï¼Œå¹³å°è´Ÿè´£å°†äº‹ä»¶ä¸­å¿ƒçš„æœ‰æ•ˆè´Ÿè½½è½¬æ¢æˆJava <code class="fe mm mn mo mp b">POJO</code>(ç±»å‹ä¸º<code class="fe mm mn mo mp b">OrderEvent</code>)å¹¶æ­£ç¡®è·¯ç”±å®ƒã€‚<code class="fe mm mn mo mp b">connection = "EventHubConnectionString"</code>éƒ¨åˆ†æŒ‡å®š<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">äº‹ä»¶é›†çº¿å™¨è¿æ¥å­—ç¬¦ä¸²</a>åœ¨åä¸º<code class="fe mm mn mo mp b">EventHubConnectionString</code>çš„<a class="ae kl" href="https://docs.microsoft.com/azure/azure-functions/functions-how-to-use-azure-function-app-settings?WT.mc_id=devto-blog-abhishgu#settings" rel="noopener ugc nofollow" target="_blank">åŠŸèƒ½é…ç½®/è®¾ç½®</a>ä¸­å¯ç”¨</p><p id="6048" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mm mn mo mp b"><a class="ae kl" href="https://docs.microsoft.com/java/api/com.microsoft.azure.functions.annotation.cosmosdboutput?view=azure-java-stable&amp;WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">@CosmosDBOutput</a></code>æ³¨é‡Šç”¨äºæŒä¹…åŒ–Azure Cosmos DBä¸­çš„æ•°æ®ã€‚å®ƒåŒ…å«Cosmos DBæ•°æ®åº“å’Œå®¹å™¨åï¼Œä»¥åŠå°†ä»å‡½æ•°ä¸­çš„<code class="fe mm mn mo mp b">CosmosDBConnectionString</code>é…ç½®å‚æ•°ä¸­é€‰å–çš„è¿æ¥å­—ç¬¦ä¸²ã€‚POJO(åœ¨æœ¬ä¾‹ä¸­æ˜¯<code class="fe mm mn mo mp b">Order</code>)é€šè¿‡å¯¹<code class="fe mm mn mo mp b"><a class="ae kl" href="https://docs.microsoft.com/java/api/com.microsoft.azure.functions.outputbinding?view=azure-java-stable&amp;WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">OutputBinding</a></code>å¯¹è±¡çš„ä¸€ä¸ª<code class="fe mm mn mo mp b">setValue</code>æ–¹æ³•è°ƒç”¨è¢«æŒä¹…åŒ–åˆ°Cosmos DBâ€”â€”è¿™ä¸ªå¹³å°è®©è¿™å˜å¾—éå¸¸ç®€å•ï¼Œä½†æ˜¯åœ¨å¹•åè¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšï¼</p><p id="bbb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬æ¢ä¸ªè¯é¢˜ï¼Œå­¦ä¹ å¦‚ä½•å°†è§£å†³æ–¹æ¡ˆéƒ¨ç½²åˆ°Azure</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="ce9e" class="lh li iq bd lj lk ll dn lm ln lo dp lp jy lq lr ls kc lt lu lv kg lw lx ly lz bi translated">å…ˆå†³æ¡ä»¶</h2><p id="50c1" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><em class="mi">æ³¨</em></p><ul class=""><li id="a943" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated"><em class="mi">ç†æƒ³æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç»„ä»¶(äº‹ä»¶ä¸­å¿ƒã€Cosmos DBã€å­˜å‚¨å’ŒAzureåŠŸèƒ½)åº”è¯¥åœ¨åŒä¸€ä¸ªåŒºåŸŸ</em></li><li id="2927" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><em class="mi">å»ºè®®</em> <a class="ae kl" href="https://docs.microsoft.com/cli/azure/group?view=azure-cli-latest&amp;WT.mc_id=devto-blog-abhishgu#az-group-create" rel="noopener ugc nofollow" target="_blank"> <em class="mi">åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºç»„</em> </a> <em class="mi">å¯¹è¿™äº›æœåŠ¡è¿›è¡Œåˆ†ç»„ï¼Œä»¥ä¾¿äºå®šä½å’Œåˆ é™¤</em></li></ul><p id="c89e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä»¥ä¸‹æ˜¯å…ˆå†³æ¡ä»¶:</p><ul class=""><li id="9873" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated"><a class="ae kl" href="https://docs.microsoft.com/azure/cosmos-db/create-cosmosdb-resources-portal?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å¾®è½¯Azure </a>è´¦å·(å¦‚å¼€å¤´æ‰€è¿°)</li><li id="c362" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-quickstart-kafka-enabled-event-hubs?WT.mc_id=devto-blog-abhishgu#create-a-kafka-enabled-event-hubs-namespace" rel="noopener ugc nofollow" target="_blank">åˆ›å»ºä¸€ä¸ªæ”¯æŒKafkaçš„äº‹ä»¶ä¸­å¿ƒå‘½åç©ºé—´</a></li><li id="0f99" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><a class="ae kl" href="https://docs.microsoft.com/azure/cosmos-db/create-cosmosdb-resources-portal?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">åˆ›å»ºAzure Cosmos DBç»„ä»¶</a>:è´¦æˆ·ã€æ•°æ®åº“å’Œå®¹å™¨(è¯·ç¡®ä¿Cosmos DBæ•°æ®åº“çš„åç§°æ˜¯<code class="fe mm mn mo mp b">AppStore</code>å¹¶ä¸”å®¹å™¨è¢«å‘½åä¸º<code class="fe mm mn mo mp b">orders</code>ï¼Œå› ä¸ºè¿™æ˜¯Azureå‡½æ•°é€»è¾‘ä½¿ç”¨çš„)</li><li id="96a4" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">åˆ›å»ºä¸€ä¸ªAzureå­˜å‚¨å¸æˆ· â€”è¿™å°†ç”±Azureå‡½æ•°ä½¿ç”¨</li></ul></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="806e" class="lh li iq bd lj lk ll dn lm ln lo dp lp jy lq lr ls kc lt lu lv kg lw lx ly lz bi translated">éƒ¨ç½²è®¢å•å¤„ç†å™¨åŠŸèƒ½</h2><p id="8079" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†<a class="ae kl" href="https://github.com/microsoft/azure-maven-plugins/wiki/Azure-Functions" rel="noopener ugc nofollow" target="_blank"> Azure Functions Mavenæ’ä»¶</a>è¿›è¡Œéƒ¨ç½²ã€‚é¦–å…ˆï¼Œæ›´æ–°<code class="fe mm mn mo mp b">pom.xml</code>æ¥æ·»åŠ æ‰€éœ€çš„é…ç½®ã€‚</p><p id="d10f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ›´æ¢<code class="fe mm mn mo mp b">&lt;appSettings&gt;</code>éƒ¨åˆ†ï¼Œæ›´æ¢<code class="fe mm mn mo mp b">AzureWebJobsStorage</code>ã€<code class="fe mm mn mo mp b">EventHubConnectionString</code>å’Œ<code class="fe mm mn mo mp b">CosmosDBConnectionString</code>å‚æ•°å€¼</p><blockquote class="mf mg mh"><p id="02ee" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><a class="ae kl" href="https://docs.microsoft.com/cli/azure/?view=azure-cli-latest&amp;WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">ä½¿ç”¨Azure CLI </em> </a> <em class="iq">è½»æ¾è·å–æ‰€éœ€çš„è¯¦ç»†ä¿¡æ¯</em></p></blockquote><ul class=""><li id="3b52" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated">å¯¹äº<code class="fe mm mn mo mp b">AzureWebJobsStorage</code>:è·å–<a class="ae kl" href="https://docs.microsoft.com/cli/azure/storage/account?view=azure-cli-latest&amp;WT.mc_id=devto-blog-abhishgu#az-storage-account-show-connection-string" rel="noopener ugc nofollow" target="_blank"> Azureå­˜å‚¨è¿æ¥å­—ç¬¦ä¸²</a></li><li id="f325" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">å¯¹äº<code class="fe mm mn mo mp b">EventHubConnectionString</code>:è·å–<a class="ae kl" href="https://docs.microsoft.com/cli/azure/eventhubs/eventhub/authorization-rule/keys?view=azure-cli-latest&amp;WT.mc_id=devto-blog-abhishgu#az-eventhubs-eventhub-authorization-rule-keys-list" rel="noopener ugc nofollow" target="_blank">äº‹ä»¶ä¸­æ¢è¿æ¥å­—ç¬¦ä¸²</a></li><li id="e9ab" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">å¯¹äº<code class="fe mm mn mo mp b">CosmosDBConnectionString</code>:è·å–<a class="ae kl" href="https://docs.microsoft.com/cli/azure/cosmosdb/keys?view=azure-cli-latest&amp;WT.mc_id=devto-blog-abhishgu#az-cosmosdb-keys-list" rel="noopener ugc nofollow" target="_blank"> Cosmos DBè¿æ¥å­—ç¬¦ä¸²</a></li></ul><p id="b6ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯¹äº<code class="fe mm mn mo mp b">configuration</code>éƒ¨åˆ†ï¼Œæ›´æ–°ä»¥ä¸‹å†…å®¹:</p><ul class=""><li id="bce2" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated"><code class="fe mm mn mo mp b">resourceGroup</code>:è¦éƒ¨ç½²åŠŸèƒ½çš„èµ„æºç»„</li><li id="70a4" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><code class="fe mm mn mo mp b">region</code>:æ‚¨è¦éƒ¨ç½²åŠŸèƒ½çš„AzureåŒºåŸŸ(<a class="ae kl" href="https://docs.microsoft.com/cli/azure/account?view=azure-cli-latest&amp;WT.mc_id=devto-blog-abhishgu#az-account-list-locations" rel="noopener ugc nofollow" target="_blank">è·å–ä½ç½®åˆ—è¡¨</a>)</li></ul><p id="0034" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦è¿›è¡Œéƒ¨ç½²ï¼Œæ‚¨éœ€è¦ä¸¤ä¸ªå‘½ä»¤:</p><ul class=""><li id="9efd" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated"><code class="fe mm mn mo mp b">mvn clean package</code> -å‡†å¤‡éƒ¨ç½²ç¥å™¨</li><li id="8b72" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><code class="fe mm mn mo mp b">mvn azure-functions:deploy</code> -éƒ¨ç½²åˆ°Azure</li></ul><blockquote class="mf mg mh"><p id="8ce8" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><em class="iq">æ‚¨å¯ä»¥ä½¿ç”¨Azure CLI </em> <code class="fe mm mn mo mp b"><a class="ae kl" href="https://docs.microsoft.com/cli/azure/functionapp?view=azure-cli-latest&amp;WT.mc_id=devto-blog-abhishgu#az-functionapp-list" rel="noopener ugc nofollow" target="_blank"><em class="iq">az functionapp list --query "[?name=='orders-processor']"</em></a></code> <em class="iq">æˆ–é—¨æˆ·</em>è¿›è¡Œç¡®è®¤</p></blockquote></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="c735" class="lh li iq bd lj lk ll dn lm ln lo dp lp jy lq lr ls kc lt lu lv kg lw lx ly lz bi translated">è¿è¡Œäº‹ä»¶ä¸­å¿ƒç”Ÿæˆå™¨</h2><p id="5102" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">è®¾ç½®ç¯å¢ƒå˜é‡:</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="0279" class="lh li iq mp b gy my mz l na nb">export EVENTHUBS_BROKER=&lt;namespace&gt;.servicebus.windows.net:9093<br/>export EVENTHUBS_TOPIC=&lt;event-hub-name&gt;<br/>export EVENTHUBS_CONNECTION_STRING="Endpoint=sb://&lt;namespace&gt;.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=&lt;primary_key&gt;"</span></pre><p id="d626" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿è¡ŒDockeræ˜ åƒ</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="9e3f" class="lh li iq mp b gy my mz l na nb">docker run -e EVENTHUBS_BROKER=$EVENTHUBS_BROKER -e EVENTHUBS_TOPIC=$EVENTHUBS_TOPIC -e EVENTHUBS_CONNECTION_STRING=$EVENTHUBS_CONNECTION_STRING abhirockzz/eventhubs-kafka-producer</span></pre><blockquote class="mf mg mh"><p id="78bf" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><em class="iq">æŒ‰</em> <code class="fe mm mn mo mp b"><em class="iq">ctrl+c</em></code> <em class="iq">åœæ­¢ç”Ÿäº§äº‹ä»¶</em></p></blockquote></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="bbc9" class="lh li iq bd lj lk ll dn lm ln lo dp lp jy lq lr ls kc lt lu lv kg lw lx ly lz bi translated">åœ¨Azure Cosmos DBä¸­ç¡®è®¤ç»“æœ</h2><p id="7a4b" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">æ‚¨å¯ä»¥ä½¿ç”¨<a class="ae kl" href="https://docs.microsoft.com/azure/cosmos-db/data-explorer?WT.mc_id=devto-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Cosmos DBæ•°æ®æµè§ˆå™¨</a> (webç•Œé¢)æ¥æ£€æŸ¥å®¹å™¨ä¸­çš„é¡¹ç›®ã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„ç»“æœ:</p><figure class="mq mr ms mt gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nd"><img src="../Images/00c63ef6e10768b28ccb6ff6b8240855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*crTvCh6x2d9_sbjo.png"/></div></div></figure></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="91bf" class="lh li iq bd lj lk ll dn lm ln lo dp lp jy lq lr ls kc lt lu lv kg lw lx ly lz bi translated">æ‰“æ‰«</h2><p id="37dc" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">å‡è®¾æ‚¨å°†æ‰€æœ‰æœåŠ¡æ”¾åœ¨åŒä¸€ä¸ªèµ„æºç»„ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ª<a class="ae kl" href="https://docs.microsoft.com/cli/azure/group?view=azure-cli-latest&amp;WT.mc_id=devto-blog-abhishgu#az-group-delete" rel="noopener ugc nofollow" target="_blank">å‘½ä»¤</a>åˆ é™¤å®ƒä»¬:</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="35b4" class="lh li iq mp b gy my mz l na nb">export RESOURCE_GROUP_NAME=&lt;enter the name&gt;<br/>az group delete --name $RESOURCE_GROUP_NAME --no-wait</span></pre><p id="5f62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ„Ÿè°¢é˜…è¯»ğŸ™‚å¾ˆé«˜å…´é€šè¿‡Twitterè·å¾—æ‚¨çš„åé¦ˆï¼Œæˆ–è€…å‘è¡¨è¯„è®ºğŸ™ğŸ»æ•¬è¯·å…³æ³¨æ›´å¤šå†…å®¹ï¼</p></div></div>    
</body>
</html>