# çº¤è–„çš„ Web ç»„ä»¶â€” 5.4KB

> åŸæ–‡ï¼š<https://itnext.io/svelte-web-component-5-4kb-4afe46590d99?source=collection_archive---------2----------------------->

è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•åˆ¶ä½œçœŸå®çš„ Web ç»„ä»¶ï¼Œå¹¶å°†å…¶ä¸ä½¿ç”¨ä¸åŒæ¡†æ¶åˆ›å»ºçš„ç±»ä¼¼ Web ç»„ä»¶è¿›è¡Œæ¯”è¾ƒã€‚

![](img/b23380237f24514c5033b9940f03f2cf.png)

å£°æ˜:è¿™ä¸æ˜¯è‹—æ¡å’Œæ£±è§’çš„å¯¹æ¯”ã€‚è¿™æ˜¯å¦‚ä½•åˆ›å»ºè‹—æ¡çš„ç½‘é¡µç»„ä»¶ï¼Œä½œä¸ºä¸€ä¸ªæ—æ³¨ï¼Œæˆ‘åˆ†äº«äº†ç±»ä¼¼çš„ç½‘é¡µç»„ä»¶ç”¨ Angular åˆ›å»ºã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œå®ƒä»¬æ˜¯éå¸¸ä¸åŒçš„ï¼Œè¿™ä¸æ˜¯ä¸€ç¯‡æ¯”è¾ƒæ¡†æ¶çš„æ–‡ç« ã€‚

# ä»€ä¹ˆæ˜¯è‹—æ¡ï¼Ÿ

> â€œè‹—æ¡æ˜¯æ„å»ºç”¨æˆ·ç•Œé¢çš„ä¸€ç§å…¨æ–°æ–¹å¼ã€‚React å’Œ Vue ç­‰ä¼ ç»Ÿæ¡†æ¶åœ¨*æµè§ˆå™¨*ä¸­å®Œæˆå¤§éƒ¨åˆ†å·¥ä½œï¼Œè€Œ Svelte å°†è¿™äº›å·¥ä½œè½¬å˜ä¸º*ç¼–è¯‘æ­¥éª¤*ï¼Œè¿™å‘ç”Ÿåœ¨ä½ æ„å»ºåº”ç”¨çš„æ—¶å€™ã€‚â€

è¿™ä¸ªè§£é‡Šç›´æ¥æ¥è‡ª [Svelte.dev](https://svelte.dev/) ç½‘ç«™ã€‚è¯·è®¿é—®ç½‘ç«™äº†è§£æ›´å¤šä¿¡æ¯ã€‚

**æŸ¥çœ‹ GitHub repo å’Œ Readme äº†è§£æ›´å¤šä¿¡æ¯**

> *ğŸ‘¨â€ğŸ’»* [*ç˜¦ Web ç»„ä»¶ GitHub åº“*](https://github.com/gogakoreli/svelte-snake-web-component) *ğŸ®* [*è¿™é‡Œçœ‹ä¸€ä¸‹æˆå“*](https://gogakoreli.github.io/svelte-snake-web-component/)**ğŸ“** [*é˜…è¯»ç¬¬äºŒç¯‡:* *æ£±è§’åˆ†æ˜çš„è›‡ç½‘ç»„ä»¶â€” 51KB*](/angular-9-snake-web-component-96f61e63b158)

# å¦‚ä½•åˆ›å»ºè‹—æ¡çš„ Web ç»„ä»¶ï¼Ÿ

## 1.è®¾ç½®è‹—æ¡é¡¹ç›®

ä» Svelte æä¾›çš„å…‹éš†æ¨¡æ¿å’Œè®¾ç½®è½¯ä»¶åŒ…å¼€å§‹

```
npx degit sveltejs/template svelte-web-component
cd svelte-web-component
npm install
npm run dev
```

## 2.ä½¿ç”¨ TypeScript(å¯é€‰)

å°½ç®¡ Svelte è¿˜æ²¡æœ‰å¯¹ TypeScript çš„å®˜æ–¹æ”¯æŒï¼Œä½†æ˜¯æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åšåˆ°ã€‚ç¤¾åŒºé‡Œæœ‰ VS ä»£ç æ‰©å±•å’Œæ¨¡æ¿ã€‚ä½†æ˜¯ç°åœ¨æˆ‘å°†åšæŒä½¿ç”¨ JavaScriptï¼Œæˆ‘å°†ç‹¬ç«‹åœ°ä½¿ç”¨ TypeScript æ¥ç¼–å†™å’Œç¼–è¯‘ TS æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬ç”¨ä½œ JS æ–‡ä»¶ã€‚çœ‹çœ‹å®˜æ–¹[è·¯çº¿å›¾](https://github.com/sveltejs/svelte/issues/4518)ã€‚

`tsc --init`å°†åˆ›å»º`tsconfig.json`æ–‡ä»¶ï¼Œæ‚¨éœ€è¦æŒ‡å®šå‡ ä¸ªé€‰é¡¹ã€‚`"outDir": "./src", "rootDir": "./ts", "baseUrl": "./ts",`è¿™æ ·ä½ å°±å¯ä»¥æŠŠ ts æ–‡ä»¶æ”¾åœ¨ TS æ–‡ä»¶å¤¹é‡Œï¼Œåœ¨ TS watcher çš„å¸®åŠ©ä¸‹ï¼Œå®ƒä»¬ä¼šè¢«ç¼–è¯‘å¹¶ä¿å­˜åˆ° src æ–‡ä»¶å¤¹é‡Œã€‚

```
npm install *typescript* --save-dev
tsc --init
tsc --watch
```

## 3.åˆ›å»ºè‹—æ¡çš„ç»„ä»¶

`App.svelte`ç»„ä»¶å°†ä½äºæ¥è‡ªæ¨¡æ¿çš„ src æ–‡ä»¶å¤¹ä¸­ã€‚å®ƒå°†è¢«å¯¼å…¥åˆ°åˆ›å»ºå’Œå¯¼å‡ºåº”ç”¨ç¨‹åºçš„`main.js`æ–‡ä»¶ä¸­ã€‚

*   é¦–å…ˆä½ éœ€è¦æ›´æ–°`rollup.config.js`:

```
plugins: [
  svelte({
    **customElement: true,**
```

*   ç„¶åæˆ‘æ”¹åä¸º`**App.svelte -> snake.svelte**` å¹¶ç›¸åº”åœ°æ›´æ–°äº†`main.js`
*   æ‚¨éœ€è¦å‘Šè¯‰ Svelteï¼Œæ‚¨å°†æŠŠæ‚¨çš„ç»„ä»¶å¯¼å‡ºä¸º Web ç»„ä»¶ã€‚åœ¨ç»†é•¿ç»„ä»¶ä¸­ä½¿ç”¨è¿™ä¸€è¡Œ:
    `**<svelte:options tag=â€svelte-snakeâ€ immutable={true} />**`
    æ— è®ºæ‚¨åœ¨æ ‡ç­¾ä¸­æ”¾å…¥ä»€ä¹ˆï¼Œéƒ½ä¼šåœ¨æœ€åçš„`bundle.js`ä¸­æˆä¸ºå®é™…çš„ web ç»„ä»¶æ ‡ç­¾ã€‚**å¦å¤–ï¼Œè¯·æ³¨æ„æˆ‘ä½¿ç”¨çš„æ˜¯** `**immutable={true}**`ï¼Œå› ä¸ºæˆ‘çš„çŠ¶æ€æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ Svelte ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ£€æŸ¥æ¥æé«˜æ€§èƒ½ã€‚
*   æ‚¨ä¸éœ€è¦åœ¨`main.js`ä¸­å®é™…åˆ›å»ºç»„ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬å°†å¯¼å‡ºä¸º web ç»„ä»¶ã€‚æ‚¨åªéœ€è¦å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶ã€‚çœ‹ä¸€ä¸‹æˆ‘ä¸¾çš„`main.js` :
    `**import Snake from â€˜./snake.svelteâ€™;
    export default Snake;**`çš„ä¾‹å­
*   æ›´æ–°`public/index.html`ä»¥ä½¿ç”¨æˆ‘ä»¬çš„ Web ç»„ä»¶ï¼Œä»¥ä¾¿å®ƒåœ¨å¼€å‘è¿‡ç¨‹ä¸­æ­£ç¡®æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸­ã€‚
    `**<body> <svelte-snake></svelte-snake> </body>**`

æ‚¨å·²ç»å‡†å¤‡å¥½å¼€å‘`snake.svelte`ç»„ä»¶ï¼Œç„¶åæˆ‘ä»¬å°†æŠŠå®ƒå¯¼å‡ºä¸º Web ç»„ä»¶ã€‚

## 4.æ„å»ºå’Œéƒ¨ç½²

æ‰§è¡Œ`**npm run build**`å’Œ`bundle.js`æ–‡ä»¶å°†åœ¨`public/build`æ–‡ä»¶å¤¹ä¸­åˆ›å»ºã€‚å®ƒåŒ…å«æˆ‘ä»¬å®Œæˆçš„ç½‘é¡µç»„ä»¶çš„é£æ ¼å’Œ Svelte çš„é¢å¤–ä»£ç ï¼Œä½¿å…¶å·¥ä½œã€‚

æˆ‘å°† Web ç»„ä»¶å‘å¸ƒåˆ° GitHub é¡µé¢ã€‚ä½ ä¹Ÿå¯ä»¥è¿™æ ·åšï¼Œçœ‹çœ‹[GitHub å…¥é—¨é¡µé¢](https://help.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site)ã€‚å®ƒä¹Ÿå°†æœåŠ¡äº`bundle.js`æ–‡ä»¶ gzippedï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¸è‡ªå·±åšã€‚

*   åœ¨é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ä¸­åˆ›å»º`docs`æ–‡ä»¶å¤¹
*   å°†`bundle.js`å¤åˆ¶åˆ°æ–‡æ¡£æ–‡ä»¶å¤¹ä¸­
*   åˆ›å»º`index.html`æ–‡ä»¶å¹¶æ”¾å…¥`docs`æ–‡ä»¶å¤¹ã€‚å®ƒéœ€è¦é€‚å½“çš„åŸºç¡€ href å’Œè„šæœ¬å¯¼å…¥ã€‚çœ‹ä¸€ä¸‹æˆ‘çš„ä¾‹å­:
    `<base href=â€https://gogakoreli.github.io/svelte-snake-web-component/">
    <script defer src=â€™bundle.jsâ€™></script>`
*   æœ€åä½ å¯ä»¥ä½¿ç”¨:`<body> <svelte-snake></svelte-snake> </body>`
*   ä½ å¯ä»¥å‘Šè¯‰ GitHub ä»ä½ çš„é¡¹ç›®çš„`docs`æ–‡ä»¶å¤¹ä¸­æä¾›é™æ€æ–‡ä»¶ã€‚
    è¿›å…¥ GitHub åº“è®¾ç½®- >é€‰é¡¹- > GitHub é¡µé¢- >æ¥æº- > `master branch /docs folder`

## 5.æ†ç»‘å¤§å°

é¡¹ç›®çš„`src`æ–‡ä»¶å¤¹åŒ…å«å‡ ä¸ª JS æ–‡ä»¶å’Œä¸€ä¸ª Svelte ç»„ä»¶ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬çš„å°ºå¯¸:

*   `**input.js, main.js, map.js, models.js, snake.js, store.js**` **: ~10.7KBï¼Œ~2.6KB (Gzipped)**
*   `**snake.svelte**` **: ~3.5KBï¼Œ~1.2KB (Gzipped)**

åœ¨`npm run build`ä¹‹åï¼ŒSvelte å°†æ‰€æœ‰çš„æºæ–‡ä»¶ç¼–è¯‘æˆä¸€ä¸ª`bundle.js`æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«äº†ä½¿ Web ç»„ä»¶å·¥ä½œæ‰€éœ€çš„æ‰€æœ‰ Svelte å‡½æ•°ã€‚åœ¨ Svelte ä¸­æ²¡æœ‰è¿è¡Œæ—¶ï¼Œæœ‰ä¸€äº›åŠŸèƒ½å¯ä»¥ä½¿æ¨¡æ¿æ ¹æ®å˜åŒ–è¿›è¡Œç›¸åº”çš„æ›´æ–°ï¼Œæ‰€æœ‰çš„ååº”ä»£ç éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚è¿™æ®µä»£ç æ˜¯åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆçš„ã€‚æˆ‘æ²¡æœ‰ä½¿ç”¨çš„ä»»ä½•ä¸œè¥¿éƒ½ä¸ä¼šå‡ºç°åœ¨`bundle.js`ä¸­ã€‚è¿˜æœ‰`bundle.js`è¢«ç¼©å°å˜ä¸‘ã€‚

*   `**bundle.js**` **: ~13.7KBï¼Œ~ 5.4 kb(gzip)**

## 6ã€‚è‡ªå·±å°è¯•è‹—æ¡çš„ç½‘ç»œç»„ä»¶

`bundle.js`åŒ…å«ä½¿`svelte-snake` Web ç»„ä»¶å·¥ä½œæ‰€éœ€çš„æ‰€æœ‰ä»£ç ã€‚æ‚¨å¯ä»¥åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šåˆ›å»ºæ ·æœ¬`index.html`ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å®ƒï¼Œå¹¶æŸ¥çœ‹æˆå“å’Œæ†å°ºå¯¸ã€‚ä»¥ä¸‹åˆ—`index.html`ä¸ºä¾‹:

index.html æ ·æœ¬

## 7.ä¸æœ‰è§’è›‡å½¢è…¹æ¿éƒ¨ä»¶ç›¸æ¯”

**ğŸ“** [**Angular Snake Web ç»„ä»¶â€” 51KB**](/angular-9-snake-web-component-96f61e63b158) **:** é˜…è¯»æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼Œåœ¨é‚£é‡Œæˆ‘åˆ›å»ºäº†ä¸ Angular 9 å®Œå…¨ç›¸åŒçš„ Web ç»„ä»¶ã€‚Angular çš„æœ€ç»ˆåŒ…å¤§å°è¦å¤§å¾—å¤š:å¤§çº¦ 51KB (Gzipped)å¯¹å¤§çº¦ 5.4KB (Gzipped)ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ Angular æˆ– Svelte åœ¨åˆ›å»º Web ç»„ä»¶æ–¹é¢æ›´å¥½ã€‚

*   Angular é™„å¸¦äº†è¿è¡Œæ—¶ï¼Œç”±äº RxJSï¼Œbundle ä¹Ÿå˜å¤§äº†ã€‚Angular æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œå³ä½¿åœ¨äº§å“æ„å»ºæœŸé—´æœ‰ä¸€ä¸ªéå¸¸å¥½çš„æ ‘æ‘‡åŠ¨è¿‡ç¨‹ï¼ŒAngular ä¹Ÿæ˜¯æœ‰æˆæœ¬çš„ã€‚å½“æ„å»ºæœ€å°çš„åŒ…å¤§å°ä¸æ˜¯æœ€ä¼˜å…ˆè€ƒè™‘çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œè¿™ä¸ªæˆæœ¬å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚Angular æ‹¥æœ‰éå¸¸å®Œå–„çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæ‹¥æœ‰æ›´å¤§çš„è¶³è¿¹æ˜¯æœ‰é“ç†çš„ã€‚åœ¨æˆ‘çœ‹æ¥ï¼ŒAngular Web ç»„ä»¶æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå®ƒä»¬æœ‰è‡ªå·±çš„ç›®æ ‡ç”¨ä¾‹ã€‚
*   å› ä¸ºæ²¡æœ‰è¿è¡Œæ—¶ï¼Œæ‰€ä»¥ Svelte çš„å ç”¨ç©ºé—´æ›´å°ã€‚Svelte è®¾æ³•åœ¨ç¼–è¯‘æ—¶ç¡®å®šç»„ä»¶å·¥ä½œæ‰€éœ€çš„å†…å®¹ã€‚ç„¶åæ³¨å…¥ç‰¹å®šçš„ç˜¦å‡½æ•°ï¼Œä½¿æ¨¡æ¿ã€ç»‘å®šå’Œååº”ä»£ç å·¥ä½œã€‚æ²¡æœ‰å•ç‹¬çš„è¿è¡Œæ—¶æ¥æŸ¥æ‰¾å¯¹æ›´æ–°æ¨¡æ¿çš„æ›´æ”¹ã€‚ä½ å†™ååº”å¼ä»£ç ï¼ŒSvelte æŠŠå®ƒå˜æˆå‘½ä»¤å¼çš„å¯¹åº”ç‰©ä»¥è·å¾—æ€§èƒ½ã€‚

**æŸ¥çœ‹ GitHub repo å’Œ Readme äº†è§£æ›´å¤šä¿¡æ¯**

> *ğŸ‘¨â€ğŸ’»* [*ç˜¦ Web ç»„ä»¶ GitHub åº“*](https://github.com/gogakoreli/svelte-snake-web-component) *ğŸ®* [*è¿™é‡Œçœ‹ä¸€ä¸‹æˆå“*](https://gogakoreli.github.io/svelte-snake-web-component/)**ğŸ“** [*é˜…è¯»ç¬¬äºŒç¯‡:* *æ£±è§’åˆ†æ˜çš„è›‡ç½‘ç»„ä»¶â€” 51KB*](/angular-9-snake-web-component-96f61e63b158)

ä½ è®¤ä¸ºè¿™ç¯‡æ–‡ç« æœ‰è¶£å—ï¼Ÿ

**å•å‡»ğŸ‘æŒ‰é’®**ä¼ æ’­æ–‡ç« 
[**åœ¨ Twitter ä¸Šå…³æ³¨æˆ‘@ gogakoreli**](https://twitter.com/GogaKoreli)åœ¨ Medium ä¸Šå…³æ³¨æˆ‘[æˆˆåŠ  Koreli](https://medium.com/u/9d3b09790759?source=post_page-----4afe46590d99--------------------------------)