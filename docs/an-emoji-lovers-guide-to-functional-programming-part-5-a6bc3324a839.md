# ä¸ºé£Ÿè‚‰åŠ¨ç‰©è¿‡æ»¤è‚‰ç±»

> åŸæ–‡ï¼š<https://itnext.io/an-emoji-lovers-guide-to-functional-programming-part-5-a6bc3324a839?source=collection_archive---------2----------------------->

![](img/340a0bbf86d5ec4926929328322c8f60.png)

## è¡¨æƒ…ç¬¦å·çˆ±å¥½è€…çš„å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—

## ä½¿ç”¨æ•°ç»„ç­›é€‰å™¨ã€ä¸€äº›å’Œæ¯ä¸€ä¸ªã€‚

*ç”¨è¡¨æƒ…ç¬¦å·å’Œ JavaScript å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ã€‚ä»£ç ç¤ºä¾‹åº”è¯¥è¶³å¤Ÿç®€å•ï¼Œä¸éœ€è¦ä»»ä½•å…ˆéªŒçŸ¥è¯†å°±å¯ä»¥ç†è§£ï¼Œä½†æ˜¯æˆ‘å¯ä»¥æƒ³è±¡å®ƒçœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªã€‚è¿˜æœ‰ï¼ŒJavaScript å®é™…ä¸Šä¸å…è®¸è¡¨æƒ…ç¬¦å·ä½œä¸º JavaScript å˜é‡åã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œè¿™äº›ä»£ç ç¤ºä¾‹ä¸ä¼šåœ¨æ²¡æœ‰ä¿®æ”¹çš„æƒ…å†µä¸‹è¿è¡Œã€‚*

*   [*ç”¨é£Ÿç‰©è¡¨æƒ…ç¬¦å·åˆ¶ä½œä¾¿ä¾¿ã€‚*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-1-241d8d4c9223)
*   [*æŠŠæš´é£äº‘å˜æˆæ™´æœ—çš„äº‘ã€‚*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-2-800b438c7ce3)
*   [*ç”¨å‡é€Ÿå™¨å»ºé€ ç‹¬è§’å…½ï¼*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-3-ef78e3156e)
*   [*ç°åœ¨æ˜¯ç®¡é“æ“ä½œå‘˜ï¼*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-4-735c17ca4113)
*   [*ä¸ºé£Ÿè‚‰åŠ¨ç‰©è¿‡æ»¤è‚‰ç±»ã€‚*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-5-a6bc3324a839)
*   [*ç”¨å½’çº¦å™¨é€’å½’ã€‚*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-6-5c1d441d36af)

æœ‰æ—¶ä½ åªæƒ³ä»æ•°ç»„ä¸­å–å‡ºæŸäº›å€¼ã€‚æ­£å¦‚æˆ‘ä»¬ä»¥å‰æ‰€åšçš„é‚£æ ·ï¼Œè®©æˆ‘ä»¬å…ˆä»ç¨‹åºä¸Šæ¢è®¨è¿™ä¸ªæƒ³æ³•ï¼Œç„¶åä»åŠŸèƒ½ä¸Šæ¢è®¨ã€‚

ç¨‹åºæ€§:

```
animals = [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ]
pork = []isPork = animal => animal === ğŸ–addPork = animal => {
    if (isPork(animal)) {
        pork.push(animal)
    }
}for (let i = 0, l = animals.length; i < l; i++) {
    addPork(animals[i])
}[ğŸ–] = pork
```

åŠŸèƒ½æ€§:

```
isPork = animal => animal === ğŸ–[ğŸ–] = [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ].filter(isPork)
```

ç®€å•å§ï¼Ÿ`filter`ä¸`map`ç›¸ä¼¼ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œéå†æ¯ä¸ªå€¼ï¼Œç„¶åè¿”å›å¦ä¸€ä¸ªæ•°ç»„ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œæ¯å½“`filter`è¿è¡Œæ—¶ï¼Œåªè¦æˆ‘ä»¬ç»™å®ƒçš„å‡½æ•°è¿”å›`true`ï¼Œè¯¥é¡¹å°±ä¼šå‡ºç°åœ¨æˆ‘ä»¬è¿‡æ»¤åçš„æ•°ç»„ä¸­ã€‚

è¿™é‡Œæœ‰ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`filter`æ¥æŸ¥çœ‹æ•°ç»„ä¸­æ˜¯å¦æœ‰ç‰¹å®šçš„é¡¹ç›®:

```
isTurkey = animal => animal === ğŸ¦ƒğŸ˜‡ = (
    [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ]
    .filter(isTurkey)
    .length > 0
)
```

è¿™ç§æ–¹æ³•çš„é—®é¢˜æ˜¯ï¼Œå®ƒå¿…é¡»å¾ªç¯æ¯ä¸€é¡¹ï¼Œè€Œå®ƒæœ¬å¯ä»¥åœ¨ç¬¬ä¸€é¡¹ä¹‹åç«‹å³åœæ­¢ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬éœ€è¦çš„åªæ˜¯æ¥è‡ª`filter`çš„`true`æˆ–`false`ï¼Œæˆ‘ä»¬ä¸éœ€è¦è·å–é•¿åº¦å¹¶æ£€æŸ¥å®ƒã€‚æ›´å¥½çš„é€‰æ‹©æ˜¯`some`å’Œ`every`ï¼Œå®ƒä»¬ä¼šä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°æ‰¾åˆ°è‡ªå·±çš„ä»·å€¼ã€‚

```
animals = [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ]ğŸ˜‡ = animals.some(isTurkey)ğŸ‘¿ = animals.every(isTurkey) ğŸ˜± = [ğŸ¤¡, ğŸ¤¡, ğŸ¤¡, ğŸ¤¡].every(isClown)
```

æˆ‘ä»¬æ­£åœ¨æ£€æŸ¥æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªåŠ¨ç‰©æ˜¯å¸¦`some`çš„ç«é¸¡ï¼Œæˆ–è€…æ˜¯å¦æ¯ä¸ªåŠ¨ç‰©éƒ½æ˜¯å¸¦`every`çš„ç«é¸¡ï¼Œå¦‚æœæ¯ä¸ªé¡¹ç›®éƒ½æ˜¯å°ä¸‘ï¼Œæˆ‘ä»¬å°±æœ‰ä¸¥é‡çš„é—®é¢˜äº†ï¼è™½ç„¶ï¼Œè°çœŸçš„åœ¨ä¹å…¶ä¸­ä¸€ä¸ªåŠ¨ç‰©æ˜¯ç«é¸¡ï¼Ÿå‡è®¾æˆ‘ä»¬è¢«å›°åœ¨ä¸€ä¸ªå²›ä¸Šï¼Ÿé‚£ä¹ˆæˆ‘ä»¬çœŸçš„åªå…³å¿ƒä»€ä¹ˆæ˜¯å¯é£Ÿç”¨çš„:

```
isEdible = Boolean animals = [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ]ğŸ˜‡ = animals.every(isEdible)ğŸ˜‡ = animals.every(isEdible)[ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ] = animals.filter(isEdible) graveyard = [ğŸŒ™, â˜ ï¸, ğŸ‘»]ğŸ˜‡ = graveyard.some(isEdible)ğŸ‘¿ = graveyard.every(isEdible)[ğŸŒ™] = graveyard.filter(isEdible)
```

è®©æˆ‘ä»¬å…ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚æœˆäº®æ˜¯å¥¶é…ªåšçš„ï¼Œé‚£è‚¯å®šæ˜¯å¯ä»¥åƒçš„ã€‚äº‹å®æ˜¯ï¼Œæœˆäº®æ›¾ç»æ˜¯ç”±ç‰›å¥¶åˆ¶æˆçš„ï¼Œä½†æ˜¯åœ¨è¿‡å»çš„å‡ äº¿å¹´é‡Œå®ƒå‘éœ‰äº†ã€‚å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬ä¸èƒ½åƒæ­»äººï¼Œä¹Ÿä¸èƒ½åƒä¸æ­»ç”Ÿç‰©ï¼Œæ‰€ä»¥è¿™äº›æ˜¯ä¸å¯èƒ½çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ`some`å¢“åœ°ç‰©å“æ˜¯å¯é£Ÿç”¨çš„è€Œ`every`å¢“åœ°ç‰©å“æ˜¯ä¸å¯é£Ÿç”¨çš„ã€‚

æˆ‘ä»¬è¿˜é€šè¿‡å°†`Boolean`æ„é€ å‡½æ•°ç›´æ¥ç”¨ä½œå‡½æ•°åšäº†ä¸€äº›æœ‰è¶£çš„äº‹æƒ…ã€‚æˆ‘ä»¬å¯ä»¥åš`Boolean(ğŸ–)`æ¥æ£€æŸ¥`ğŸ–`æ˜¯ä¸æ˜¯`true`ã€‚ç”±äºåœ¨æˆ‘ä»¬çš„è¡¨æƒ…ç¬¦å·ç¤ºä¾‹ä¸­ï¼Œä»»ä½•å¯é£Ÿç”¨çš„ä¸œè¥¿éƒ½æ˜¯`true`ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`isEdible`ï¼Œä¸€ä¸ªå‘½åçš„å‡½æ•°ï¼Œè€Œä¸æ˜¯`Boolean`ã€‚

æ‚¨å°†ç»å¸¸éœ€è¦æ£€æŸ¥æ‚¨çš„æ•°ç»„æ˜¯å¦æœ‰æŸäº›ç±»å‹çš„å€¼ï¼Œå¹¶è¿‡æ»¤æ‰è™šå‡çš„å€¼ï¼Œå¦‚`undefined`ã€`null`å’Œ`false`ã€‚è¿™å°±æ˜¯`.filter(Boolean)`æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚å½“ä½ çš„æ•°ç»„åŒ…å«æ•°å­—æ—¶ï¼Œæˆ‘å»ºè®®ä½¿ç”¨`Number.isFinite`è€Œä¸æ˜¯`Boolean`ï¼Œå› ä¸ºä½ å¾ˆå¯èƒ½ä¸å¸Œæœ›`0`ç®—ä½œ`false`ã€‚

å¯èƒ½éœ€è¦ä»æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªç‰¹å®šçš„å€¼ã€‚ç”¨`filter`å½“ç„¶å¯ä»¥ï¼Œä½†ç”¨`find`æ›´å¹²å‡€:

```
[ğŸ„] = [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ].filter(isBeef)ğŸ„ = [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ].find(isBeef)
```

`find`é‡‡ç”¨ä¸`filter`å®Œå…¨ç›¸åŒçš„å‡½æ•°ï¼Œä½†æ˜¯å½“å®ƒå¾—åˆ°ä¸€ä¸ªçœŸå€¼æ—¶ï¼Œå®ƒç«‹å³è¿”å›é‚£ä¸ªå€¼ã€‚ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰çš„`Boolean`æŠ€å·§ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªé¿å…`array[0]`çš„èªæ˜æ–¹æ³•:

```
ğŸ– = [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ].filter(Boolean)[0]ğŸ– = [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ].find(Boolean) ğŸ– = [â˜ ï¸, ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ].filter(Boolean)[0]ğŸ– = [â˜ ï¸, ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ].find(Boolean)
```

è™½ç„¶`find`éå¸¸æœ‰ç”¨ï¼Œä½†æ˜¯å®ƒä¸å…è®¸ä¸å…¶ä»–æ•°ç»„å‡½æ•°é“¾æ¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨ä¼šæƒ³è¦ä½¿ç”¨`filter`:

```
add = additive => item => item + additivesum = uncurry(add)cook = item => [item, ğŸ‘¨â€ğŸ³, ğŸ”ª, ğŸ³].reduce(sum)ğŸ¥“ = (
    [ğŸ–, ğŸ„, ğŸ“, ğŸ¦ƒ]
    .filter(isPork)
    .map(cook)
    .map(add(ğŸ½ï¸))
    .find(Boolean)
)
```

æˆ‘ä»¬ä½¿ç”¨äº† ol' `sum`å’Œä¸€ä¸ªæ–°å‡½æ•°`cook`ã€‚ç„¶åæˆ‘ä»¬`map` `cook`å›´ç€æˆ‘ä»¬çš„çŒªè‚‰å’Œ`add`æ¯åªç…®ç†Ÿçš„çŒªä¸€ç›˜é£Ÿç‰©ã€‚å®Œæˆåï¼Œæˆ‘ä»¬ä»æ•°ç»„ä¸­å–å‡ºç¬¬ä¸€ç›˜çŒªè‚‰ï¼Œè¿™å°±æ˜¯ç†è‚‰ï¼æˆ‘æ‰“èµŒä½ ä¸çŸ¥é“ä½ å¯ä»¥ç”¨ JavaScript åšçŒªè‚‰åŸ¹æ ¹ã€‚æˆ‘åšåˆ°äº†ã€‚

**æ‘¸æ‘¸è‚‰ï¼**

## [ç‚¹å‡»æ­¤å¤„è¿›å…¥ç¬¬ 6 éƒ¨åˆ†ï¼](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-6-5c1d441d36af)

# æ›´å¤šé˜…è¯»

å¦‚æœæ‚¨å¯¹ä¸å‡½æ•°å¼ç¼–ç¨‹ç›¸å…³çš„æ›´å¤šä¸»é¢˜æ„Ÿå…´è¶£ï¼Œæ‚¨åº”è¯¥çœ‹çœ‹æˆ‘çš„å…¶ä»–æ–‡ç« :

*   [å®‰å…¨é‡æ„æ—§ä»£ç :ç¬¬ 1 éƒ¨åˆ†](/how-to-safely-refactor-old-code-part-1-a1a853263fec)
*   [ä½¿ç”¨ Redux çš„ç§˜å¯†:createNamespaceReducer](https://medium.com/@Sawtaytoes/the-secret-to-using-redux-createnamespacereducer-d3fed2ccca4a)
*   [åœ¨ React ç»„ä»¶ä¸­ä½¿ç”¨ Redux è¿˜åŸå‰‚](https://medium.com/@Sawtaytoes/using-redux-reducers-in-react-components-4e92985dd9cb)
*   [Redux-Observable å¯ä»¥è§£å†³ä½ çš„çŠ¶æ€é—®é¢˜](https://medium.com/@Sawtaytoes/redux-observable-can-solve-your-state-problems-15b23a9649d7)
*   [RxJS å’Œå¯è§‚å¯Ÿçš„ Flic æŒ‰é’®](https://medium.com/flicblog/flic-buttons-and-the-observable-customization-using-rxjs-2214bc53d407)