<html>
<head>
<title>Simple React form validation with Formik, Yup and/or Spected</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Formikã€Yepå’Œ/æˆ–Spectedè¿›è¡Œç®€å•çš„ååº”è¡¨å•éªŒè¯</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/simple-react-form-validation-with-formik-yup-and-or-spected-206ebe9e7dcc?source=collection_archive---------0-----------------------#2018-05-21">https://itnext.io/simple-react-form-validation-with-formik-yup-and-or-spected-206ebe9e7dcc?source=collection_archive---------0-----------------------#2018-05-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="86da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ€è¿‘ï¼Œæˆ‘åœ¨å·¥ä½œä¸­å†™äº†ä¸€äº›éœ€è¦éªŒè¯çš„è¡¨æ ¼ã€‚å› ä¸ºæˆ‘å–œæ¬¢å’Œå›¾ä¹¦é¦†æ‰“äº¤é“ï¼Œå°¤å…¶æ˜¯é‚£äº›å¸®åŠ©è¿‡æˆ‘çš„å›¾ä¹¦é¦†ï¼Œæˆ‘æƒ³æŠŠä½ ä»‹ç»ç»™ä»–ä»¬ã€‚</p><p id="407e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„æ³¨å†Œè¡¨å•è¿›è¡Œæ¼”ç¤ºã€‚æ­¤ç±»è¡¨æ ¼é€šå¸¸åŒ…å«ç”¨æˆ·çš„ç”µå­é‚®ä»¶ã€å¯†ç ã€å¯†ç ç¡®è®¤ä»¥åŠæ¡æ¬¾å’Œæ¡ä»¶åè®®ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/32b3194c63de283217e64ac8e2d2da70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bo-IdqI6KHvxy3OYDZnoWg.jpeg"/></div></div></figure><h1 id="2d5b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">ç¦ç±³å…‹</h1><p id="64e3" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨<a class="ae ma" href="https://github.com/jaredpalmer/formik" rel="noopener ugc nofollow" target="_blank"> Formik </a>åº“åˆ›å»ºæ³¨å†Œè¡¨å•ã€‚æˆ‘å–œæ¬¢Formikï¼Œå› ä¸ºå®ƒæ˜¯è½»é‡çº§çš„ï¼Œå‡ ä¹æ²¡æœ‰æŠ½è±¡åº“æ¥å¸®åŠ©ä½ åœ¨Reactä¸­åˆ›å»ºè¡¨å•ã€‚å¦‚æœä½ ä¸éœ€è¦Redux ( <a class="ae ma" href="https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367" rel="noopener">ä½ å¯èƒ½ä¸éœ€è¦Redux â€” Dan Abramov â€” Medium </a>ï¼Œ<a class="ae ma" href="https://goshakkk.name/should-i-put-form-state-into-redux/" rel="noopener ugc nofollow" target="_blank">ä½ åº”è¯¥æŠŠä½ çš„è¡¨å•çŠ¶æ€å­˜å‚¨åœ¨Reduxä¸­å—ï¼Ÿâ€” Gosha Arinich </a>)æ˜¯éå¸¸ä¸é”™çš„é€‰æ‹©ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒFormikå¸®åŠ©æˆ‘ä»¬ä¿æŒçŠ¶æ€(å€¼ã€é”™è¯¯å’Œè¡¨å•æ˜¯å¦è¢«æäº¤)å¹¶å¤„ç†å˜æ›´ã€‚å®ƒè¿˜åœ¨æ¯æ¬¡æäº¤æ—¶ä¸ºæˆ‘ä»¬è°ƒç”¨éªŒè¯åŠŸèƒ½ã€‚æˆ‘ä½¿ç”¨Formikä½œä¸ºReactç»„ä»¶å’Œ<a class="ae ma" href="https://reactjs.org/docs/render-props.html" rel="noopener ugc nofollow" target="_blank">æ¸²æŸ“é“å…·</a>ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ç”¨å®ƒä½œä¸ºHoCã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="0d9d" class="mg ky iq mc b gy mh mi l mj mk">export default function SignUpFormContainer() {<br/>  return (<br/>    &lt;Formik<br/>      initialValues={initialValues}<br/>      validate={validate}<br/>      onSubmit={onSubmit}<br/>      render={SignUpForm}<br/>    /&gt;<br/>  )<br/>}</span><span id="2c56" class="mg ky iq mc b gy ml mi l mj mk">function SignUpForm(props) {<br/>  const {<br/>    isSubmitting,<br/>    errors,<br/>    handleChange,<br/>    handleSubmit,<br/>  } = props</span><span id="ef8f" class="mg ky iq mc b gy ml mi l mj mk">return (<br/>    &lt;div className="form"&gt;<br/>      &lt;label className="form-field" htmlFor="email"&gt;<br/>        &lt;span&gt;E-mail:&lt;/span&gt;<br/>        &lt;input<br/>          name="email"<br/>          type="email"<br/>          onChange={handleChange}<br/>        /&gt;<br/>      &lt;/label&gt;<br/>      &lt;div className="form-field-error"&gt;{errors.email}&lt;/div&gt;</span><span id="ac91" class="mg ky iq mc b gy ml mi l mj mk">      &lt;label className="form-field" htmlFor="password"&gt;<br/>        &lt;span&gt;Password:&lt;/span&gt;<br/>        &lt;input<br/>          name="password"<br/>          type="password"<br/>          onChange={handleChange}<br/>        /&gt;<br/>      &lt;/label&gt;<br/>      &lt;div className="form-field-error"&gt;{errors.password}&lt;/div&gt;</span><span id="fe39" class="mg ky iq mc b gy ml mi l mj mk">      &lt;label<br/>        className="form-field"<br/>        htmlFor="passwordConfirmation"<br/>      &gt;<br/>        &lt;span&gt;Confirm password:&lt;/span&gt;<br/>        &lt;input<br/>          name="passwordConfirmation"<br/>          type="password"<br/>          onChange={handleChange}<br/>        /&gt;<br/>      &lt;/label&gt;<br/>      &lt;div className="form-field-error"&gt;<br/>        {errors.passwordConfirmation}<br/>      &lt;/div&gt;</span><span id="c787" class="mg ky iq mc b gy ml mi l mj mk">      &lt;label className="form-field" htmlFor="consent"&gt;<br/>        &lt;span&gt;Consent:&lt;/span&gt;<br/>        &lt;input<br/>          name="consent"<br/>          type="checkbox"<br/>          onChange={handleChange}<br/>        /&gt;<br/>      &lt;/label&gt;<br/>      &lt;div className="form-field-error"&gt;{errors.consent}&lt;/div&gt;</span><span id="688c" class="mg ky iq mc b gy ml mi l mj mk">      &lt;button onClick={handleSubmit}&gt;<br/>        {isSubmitting ? 'Loading' : 'Sign Up'}<br/>      &lt;/button&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><h1 id="03cc" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">ç¡®è®¤</h1><p id="1092" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">æˆ‘ä»¬å¦‚ä½•éªŒè¯è¿™ä¸€ç‚¹ï¼Ÿæˆ‘ä»¬å¯èƒ½ä¼šæ‰¾åˆ°æ›´å¤šçš„æ–¹æ³•æ¥éªŒè¯è¿™ç§å½¢å¼ã€‚æˆ‘å†™ä¸‹äº†ä¸€äº›æˆ‘ä»¬å°†ç”¨æ¥éªŒè¯è¡¨å•éªŒè¯æ–¹æ³•çš„éœ€æ±‚(æ˜¯çš„ï¼Œè¿™å°±åƒç”µå½±ã€Šç›—æ¢¦ç©ºé—´ã€‹çš„é‡æ¼”ã€‚)</p><h2 id="ecd3" class="mg ky iq bd kz mm mn dn ld mo mp dp lh jy mq mr ll kc ms mt lp kg mu mv lt mw bi translated">è¦æ±‚</h2><ul class=""><li id="6c36" class="mx my iq jp b jq lv ju lw jy mz kc na kg nb kk nc nd ne nf bi translated">æˆ‘ä¸æƒ³åˆ›å»ºç‰¹æ®Šçš„è¡¨å•å­—æ®µç»„ä»¶ï¼Œå¹¶åƒ<code class="fe ng nh ni mc b">&lt;FormField validate={value =&gt; someValidation(value)} /&gt;</code>ä¸€æ ·å•ç‹¬ä¸ºè¡¨å•çš„æ¯ä¸ªå­—æ®µæ·»åŠ éªŒè¯ã€‚æˆ‘è®¤ä¸ºéªŒè¯åº”è¯¥æ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯UIçš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰å¿…è¦ï¼Œæˆ‘ä¸æƒ³æ··æ·†å®ƒã€‚å¦åˆ™ï¼Œæˆ‘æƒ³æœ‰ä¸€ä¸ªæ•´ä¸ªè¡¨å•çš„éªŒè¯å‡½æ•°ï¼Œå®ƒæ¥å—è¡¨å•å€¼çš„å¯¹è±¡ï¼Œå¹¶è¿”å›æ¯ä¸ªå€¼çš„é”™è¯¯æ¶ˆæ¯å¯¹è±¡ã€‚è¿™ç§éªŒè¯æ–¹æ³•ç”šè‡³å¯ä»¥ç”¨äºä»»ä½•å…¶ä»–JSå¯¹è±¡ï¼Œè€Œä¸ä»…ä»…æ˜¯è¡¨å•éªŒè¯ã€‚</li><li id="547f" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">æ²¡æœ‰<code class="fe ng nh ni mc b">if</code>è¯­å¥ã€‚</li><li id="acd2" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">æœ‰å¯èƒ½ç”¨ä¾‹å¤–æ¥ä»£æ›¿<code class="fe ng nh ni mc b">if</code>çš„ã€‚æˆ‘ä¹Ÿä¸å–œæ¬¢é‚£æ ·ã€‚å¼‚å¸¸æ˜¯é’ˆå¯¹æ„å¤–è¡Œä¸ºçš„ï¼Œä½†æ˜¯è¡¨å•åŸŸæ˜¯å¦è¢«å¡«å……å¹¶ä¸æ„å¤–ã€‚ç›¸åï¼Œè¿™æ˜¯æ„æ–™ä¹‹ä¸­çš„ã€‚æ­£å¦‚æˆ‘å·²ç»æåˆ°çš„ï¼ŒéªŒè¯æ˜¯æˆ‘ä»¬ä¸šåŠ¡è§„åˆ™çš„ä¸€éƒ¨åˆ†ã€‚</li><li id="4222" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">æ¯ä¸ªå­—æ®µä¸€ä¸ªæˆ–å¤šä¸ªè§„åˆ™ã€‚æˆ‘æƒ³æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªè§„åˆ™æ¥éªŒè¯æ¯ä¸ªå±æ€§ã€‚</li><li id="413c" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">æˆ‘ä¹Ÿå¸Œæœ›èƒ½å¤Ÿè¿”å›ç»™å®šå­—æ®µæ›´å¤šçš„é”™è¯¯ã€‚</li><li id="bcc6" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">è¿”å›é”™è¯¯æ¶ˆæ¯ï¼Œæ¯ä¸ªè§„åˆ™éƒ½ä¸åŒã€‚</li><li id="d45a" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">å±æ€§ä¹‹é—´çš„äº¤å‰éªŒè¯ï¼Œè¿™æ„å‘³ç€æ ¹æ®å…¶ä»–å­—æ®µå€¼éªŒè¯å­—æ®µã€‚</li></ul><p id="c366" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘æåˆ°â€œä¸â€,å› ä¸ºä»è¿™æ ·çš„äº‹æƒ…å¼€å§‹ä¼šå¾ˆæœ‰è¯±æƒ‘åŠ›:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="b107" class="mg ky iq mc b gy mh mi l mj mk">if (!values.email) {<br/>  errors.email = 'E-mail is required!'<br/>}</span><span id="67ab" class="mg ky iq mc b gy ml mi l mj mk">if (!values.password) {<br/>  errors.password = 'Password is required!'<br/>} else if (values.password.length &lt; 6) {<br/>  errors.password = 'Password has to be longer than 6 characters'<br/>}</span></pre><p id="80db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæœ‰æ›´å¤šçš„å­—æ®µæˆ–æ›´å¤æ‚çš„è§„åˆ™ï¼Œå¯èƒ½ä¼šå¾ˆéš¾ç†è§£ï¼Œæ‰€ä»¥æˆ‘åœ¨æƒ³:â€œæˆ‘ä»¬èƒ½åšå¾—æ›´å¥½å—ï¼Ÿä¸€å®šæœ‰å…¶ä»–æ›´æ˜ç¡®çš„æ–¹å¼ï¼Œæ²¡æœ‰<code class="fe ng nh ni mc b">if</code> sã€‚</p><h2 id="1eda" class="mg ky iq bd kz mm mn dn ld mo mp dp lh jy mq mr ll kc ms mt lp kg mu mv lt mw bi translated">æ˜¯çš„</h2><p id="40e6" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">å¹¸è¿çš„æ˜¯ï¼ŒFormikæœ¬èº«é»˜è®¤å…è®¸ä½¿ç”¨<a class="ae ma" href="https://github.com/jquense/yup" rel="noopener ugc nofollow" target="_blank"> Yup </a>éªŒè¯åº“ã€‚ç”¨æœ€ç®€å•çš„æ–¹æ³•ï¼Œä½ å¯ä»¥åªå†™<code class="fe ng nh ni mc b">validationSchema</code>å¹¶æŠŠå®ƒä½œä¸ºé“å…·ä¼ é€’ç»™<code class="fe ng nh ni mc b">&lt;Formik /&gt;</code>ç»„ä»¶ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="408f" class="mg ky iq mc b gy mh mi l mj mk">const validationSchema = Yup.object().shape({<br/>  email: Yup.string()<br/>    .email('E-mail is not valid!')<br/>    .required('E-mail is required!'),<br/>  password: Yup.string()<br/>    .min(6, 'Password has to be longer than 6 characters!')  <br/>    .required('Password is required!')<br/>})</span><span id="0eb1" class="mg ky iq mc b gy ml mi l mj mk">&lt;Formik <br/>  ...<br/>  validationSchema={validationSchema} <br/>  ...<br/>/&gt;</span></pre><p id="97b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™çœ‹èµ·æ¥æ¯”<code class="fe ng nh ni mc b">if</code>çš„å¥½å¾—å¤šï¼Œä½†æ˜¯å®ƒåªåœ¨ä½ éœ€è¦ä¸€äº›äº¤å‰éªŒè¯æ—¶æ‰æœ‰æ•ˆã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå¯†ç å’Œå¯†ç ç¡®è®¤å°±æ˜¯è¿™ç§æƒ…å†µã€‚</p><p id="0aaa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨Yupï¼Œä½†æ˜¯è¦å’Œæ‚¨è‡ªå·±çš„éªŒè¯å‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚æˆ‘ä»¬åˆ›å»º<code class="fe ng nh ni mc b">getValidationSchema</code>å‡½æ•°ã€‚å®ƒæ¥å—<code class="fe ng nh ni mc b">values</code>å¯¹è±¡å¹¶è¿”å›éªŒè¯æ¨¡å¼ï¼Œç±»ä¼¼äºä¸Šé¢çš„ä¾‹å­ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="21d0" class="mg ky iq mc b gy mh mi l mj mk">function getValidationSchema(values) {<br/>  return Yup.object().shape({<br/>    email: Yup.string()<br/>      .email('E-mail is not valid!')<br/>      .required('E-mail is required!'),<br/>    password: Yup.string()<br/>      .min(6, 'Password has to be longer than 6 characters!')<br/>      .required('Password is required!'),<br/>    passwordConfirmation: Yup.string()<br/>      .oneOf([values.password], 'Passwords are not the same!')<br/>      .required('Password confirmation is required!'),<br/>    consent: Yup.bool()<br/>      .test(<br/>        'consent',<br/>        'You have to agree with our Terms and Conditions!',<br/>        value =&gt; value === true<br/>      )<br/>      .required(<br/>        'You have to agree with our Terms and Conditions!'<br/>      ),<br/>  })<br/>}</span></pre><p id="32d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™å¾ˆç®€å•ã€‚æˆ‘åªæƒ³åœ¨è¿™é‡Œå¼ºè°ƒä¸¤ç‚¹:</p><ol class=""><li id="db85" class="mx my iq jp b jq jr ju jv jy no kc np kg nq kk nr nd ne nf bi translated"><code class="fe ng nh ni mc b">passwordConfirmation</code>éªŒè¯:æ®æˆ‘æ‰€çŸ¥ï¼ŒYupæ²¡æœ‰ä»»ä½•ç±»ä¼¼äº<code class="fe ng nh ni mc b">equals</code>çš„æ–¹æ³•æ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬éœ€è¦å°†<code class="fe ng nh ni mc b">passwordConfirmation</code>å€¼ä¸æ•°ç»„å€¼<code class="fe ng nh ni mc b">oneOf(array, 'Error message')</code>è¿›è¡Œæ¯”è¾ƒï¼Œå…¶ä¸­<code class="fe ng nh ni mc b">array</code>æ˜¯åªæœ‰ä¸€ä¸ªæ¥è‡ª<code class="fe ng nh ni mc b">values</code>å¯¹è±¡<code class="fe ng nh ni mc b">values.password</code>çš„å€¼çš„æ•°ç»„ã€‚</li><li id="ba4a" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nr nd ne nf bi translated"><code class="fe ng nh ni mc b">consent</code>éªŒè¯:Yupä¹Ÿæ²¡æœ‰åŠæ³•æ£€æŸ¥å€¼æ˜¯<code class="fe ng nh ni mc b">true</code>è¿˜æ˜¯<code class="fe ng nh ni mc b">false</code>ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¸¦3ä¸ªå‚æ•°çš„<code class="fe ng nh ni mc b">test</code>æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ªæ˜¯éªŒè¯çš„åç§°(æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆğŸ¤”)ï¼Œç¬¬äºŒä¸ªæ˜¯é”™è¯¯æ¶ˆæ¯ï¼Œç¬¬ä¸‰ä¸ªæ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰éªŒè¯å‡½æ•°ï¼Œå®ƒå°†<code class="fe ng nh ni mc b">value</code>ä½œä¸ºå‚æ•°ï¼Œå¿…é¡»è¿”å›<code class="fe ng nh ni mc b">true</code>æˆ–<code class="fe ng nh ni mc b">false</code>ã€‚æˆ‘ä»¬æˆ‘ç”¨çš„åªæ˜¯ç®€å•çš„<code class="fe ng nh ni mc b">value =&gt; value === true</code>ã€‚</li></ol><p id="09c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨è¿™ä¸ªæ¨¡å¼ä¸Šè°ƒç”¨æ–¹æ³•<code class="fe ng nh ni mc b">validateSync()</code>:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="1dbe" class="mg ky iq mc b gy mh mi l mj mk">function validate(values) {<br/>  validate = (values) =&gt; {<br/>    const validationSchema = getValidationSchema(values)<br/>    try {<br/>      validationSchema.validateSync(values, { abortEarly: false })<br/>      return {}<br/>    } catch (error) {<br/>      return getErrorsFromValidationError(error)<br/>    }<br/>  }<br/>}</span></pre><p id="2e4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ‰ä¸€ç‚¹å°é—®é¢˜ï¼Œå› ä¸º<code class="fe ng nh ni mc b">validateSync</code>æ–¹æ³•ä¸è¿”å›æœ‰é”™è¯¯çš„å¯¹è±¡ï¼Œè€Œæ˜¯æŠ›å‡º<code class="fe ng nh ni mc b">ValidationError</code>ã€‚å¦‚æœå®ƒç›´æ¥è¿”å›errorså¯¹è±¡å°±æ›´å¥½äº†ã€‚æ€»ä¹‹ï¼Œæˆ‘å†™äº†å¦ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ƒæ¥å—è¿™ä¸ªé”™è¯¯å¯¹è±¡ï¼Œå¹¶ä»¥æˆ‘ä»¬æƒ³è¦çš„å½¢å¼è¿”å›é”™è¯¯å¯¹è±¡(æ¯ä¸ªè¡¨å•å­—æ®µåªæœ‰ç¬¬ä¸€ä¸ªéªŒè¯é”™è¯¯æ¶ˆæ¯):</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="b06e" class="mg ky iq mc b gy mh mi l mj mk">function getErrorsFromValidationError(validationError) {<br/>  const FIRST_ERROR = 0<br/>  return validationError.inner.reduce((errors, error) =&gt; {<br/>    return {<br/>      ...errors,<br/>      [error.path]: error.errors[FIRST_ERROR],<br/>    }<br/>  }, {})<br/>}</span></pre><p id="3e82" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬çš„éªŒè¯ç°åœ¨çœ‹èµ·æ¥å¥½å¤šäº†ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬å¿…é¡»å†æ·»åŠ ä¸¤ä¸ªå‡½æ•°(æ˜¯çš„ï¼Œæˆ‘ä»¬æ­£åœ¨å¤„ç†å¼‚å¸¸éªŒè¯ğŸ™„)ï¼Œä½†è¿™äº›éƒ½æ˜¯ç®€å•çš„å‡½æ•°ï¼Œå¯ä»¥åœ¨ä»»ä½•éªŒè¯æ¨¡å¼ä¸­é‡ç”¨ã€‚å¦‚æœæˆ‘å¯ä»¥åœ¨<code class="fe ng nh ni mc b">if</code>å’Œå¸¦æœ‰å¦å¤–ä¸¤ä¸ªå‡½æ•°çš„å£°æ˜å¼éªŒè¯æ¨¡å¼ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼Œæˆ‘è‚¯å®šä¼šé€‰æ‹©ç¬¬äºŒä¸ªé€‰é¡¹ã€‚</p><p id="ca1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¼˜ç‚¹:</p><ul class=""><li id="0c85" class="mx my iq jp b jq jr ju jv jy no kc np kg nq kk nc nd ne nf bi translated">å®£è¨€çš„</li><li id="331f" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">é¢„å®šä¹‰çš„éªŒè¯æ–¹æ³•(<code class="fe ng nh ni mc b">email</code>ã€<code class="fe ng nh ni mc b">min</code>ã€<code class="fe ng nh ni mc b">max</code>ã€<code class="fe ng nh ni mc b">required</code>)</li></ul><p id="d082" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¼ºç‚¹:</p><ul class=""><li id="d7bf" class="mx my iq jp b jq jr ju jv jy no kc np kg nq kk nc nd ne nf bi translated">ä½ å¿…é¡»å­¦ä¹ å®ƒçš„API</li><li id="1fb0" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">ç”±å¼‚å¸¸å¤„ç†çš„éªŒè¯</li></ul><h2 id="caae" class="mg ky iq bd kz mm mn dn ld mo mp dp lh jy mq mr ll kc ms mt lp kg mu mv lt mw bi translated">æ–¯ä½©å…‹ç‰¹</h2><p id="cbb6" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">Formikçš„ä¼Ÿå¤§ä¹‹å¤„åœ¨äºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•æ‚¨æƒ³è¦çš„éªŒè¯åº“ã€‚ä½ åªéœ€è¦ä½¿ç”¨<code class="fe ng nh ni mc b">validate</code>å‡½æ•°ï¼Œè€Œä¸æ˜¯Yupç‰¹å®šçš„<code class="fe ng nh ni mc b">validationSchema</code>ã€‚æˆ‘æ„è¯†åˆ°ä½¿ç”¨<a class="ae ma" href="https://github.com/25th-floor/spected" rel="noopener ugc nofollow" target="_blank"> Spected </a>éªŒè¯åº“æ¥è¿›è¡Œè¡¨å•éªŒè¯ä¼šå¾ˆå¥½ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åœ¨å·¥ä½œé¡¹ç›®çš„åç«¯ä½¿ç”¨å®ƒæ¥éªŒè¯JSå¯¹è±¡ã€‚</p><p id="a9e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SpectedéªŒè¯ä¹Ÿéå¸¸å…·æœ‰å£°æ˜æ€§ã€‚å®ƒç”šè‡³æ¯”â€œæ˜¯â€æ›´å®ç”¨ã€‚æ²¡æœ‰å‘½ä»¤ï¼Œæ²¡æœ‰å¼‚å¸¸å¤„ç†ï¼Œåªæœ‰ç®€å•çš„å£°æ˜æ€§å‡½æ•°éªŒè¯ã€‚</p><p id="07c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬ä»<code class="fe ng nh ni mc b">getValidationSchema</code>åŠŸèƒ½å¼€å§‹:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="4fe7" class="mg ky iq mc b gy mh mi l mj mk">function getSpectedValidationSchema(values) {<br/>  return {<br/>    email: [<br/>      [value =&gt; !isEmpty(value), 'E-mail is required!'],<br/>      [value =&gt; isEmail(value), 'E-mail is not valid!'],<br/>    ],<br/>    password: [<br/>      [value =&gt; !isEmpty(value), 'Password is required!'],<br/>      [<br/>        value =&gt; value.length &gt;= 6,<br/>        `Password has to be longer than 6 characters!`,<br/>      ],<br/>    ],<br/>    passwordConfirmation: [<br/>      [<br/>        value =&gt; !isEmpty(value),<br/>        'Password confirmation is required!',<br/>      ],<br/>      [<br/>        value =&gt; value === values.password,<br/>        'Passwords are not the same!',<br/>      ],<br/>    ],<br/>    consent: [<br/>      [<br/>        value =&gt; value === true,<br/>        'You have to agree with our Terms and Conditions!',<br/>      ],<br/>    ],<br/>  }<br/>}</span></pre><p id="3689" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„<code class="fe ng nh ni mc b">isEmpty</code>å’Œ<code class="fe ng nh ni mc b">isEmail</code>å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä¹Ÿå¯èƒ½æ˜¯æœ‰ç›Šçš„ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å®šä¹‰å’Œå‘½åå‡½æ•°ï¼Œä»¥ä¾¿æ›´æ–¹ä¾¿åœ°ç”¨äºæˆ‘ä»¬çš„ä¸šåŠ¡é¢†åŸŸã€‚</p><p id="ce94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬çš„éªŒè¯å‡½æ•°çœ‹èµ·æ¥æœ‰ç‚¹ä¸åŒã€‚ç°åœ¨ï¼Œæˆ‘ä»¬ä¸å¤„ç†å¼‚å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¿…é¡»å¤„ç†éªŒè¯ç»“æœä»¥ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚(ä»¥è¡¨å•å­—æ®µä½œä¸ºé”®ï¼Œä»¥é”™è¯¯æ¶ˆæ¯ä½œä¸ºå€¼çš„é”™è¯¯å¯¹è±¡):</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="8f26" class="mg ky iq mc b gy mh mi l mj mk">function validate(getValidationSchema) {<br/>  return (values) =&gt; {<br/>    const spec = getValidationSchema(values)<br/>    const validationResult = spected(spec, values)<br/>    return getErrorsFromValidationResult(validationResult)<br/>  }<br/>}</span><span id="3187" class="mg ky iq mc b gy ml mi l mj mk">function getErrorsFromValidationResult(validationResult) {<br/>  const FIRST_ERROR = 0<br/>  return Object.keys(validationResult).reduce((errors, field) =&gt; {<br/>    return validationResult[field] !== true<br/>      ? { ...errors, [field]: validationResult[field][FIRST_ERROR] }<br/>      : errors<br/>  }, {})<br/>}</span></pre><p id="3f48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Spectedæœ‰ä¸€ä¸ªé—®é¢˜â€”â€”å¿…éœ€è¡¨å•å­—æ®µçš„å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ<code class="fe ng nh ni mc b">values</code>å¯¹è±¡ä¸åŒ…å«<code class="fe ng nh ni mc b">consent</code>ï¼Œé‚£ä¹ˆå°±ä¸ä¼šè°ƒç”¨<code class="fe ng nh ni mc b">consent</code>çš„éªŒè¯å‡½æ•°ã€‚è¿™æ˜¯å› ä¸ºSpectedä¸ä¼šè¿­ä»£æœªå®šä¹‰çš„å±æ€§ã€‚</p><p id="1697" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™åœ¨æˆ‘ä»¬çš„æ³¨å†Œè¡¨å•ä¸­ä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ‰€æœ‰å€¼éƒ½å®šä¹‰ä¸ºåˆå§‹çŠ¶æ€ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ‰€æœ‰å¿…å¡«å­—æ®µå®šä¹‰ä¸ºæœªå®šä¹‰å¹¶ç”¨éªŒè¯å¯¹è±¡ä¸­çš„å€¼è¦†ç›–å®ƒä»¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="4667" class="mg ky iq mc b gy mh mi l mj mk">const requiredFields = {<br/>  email: undefined,<br/>  password: undefined,<br/>  passwordConfirmation: undefined,<br/>  consent: undefined,<br/>}</span><span id="3a62" class="mg ky iq mc b gy ml mi l mj mk">const valuesWithRequiredFields = { ...requiredFields, ...values }</span></pre><p id="2005" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¼˜ç‚¹:</p><ul class=""><li id="c117" class="mx my iq jp b jq jr ju jv jy no kc np kg nq kk nc nd ne nf bi translated">å£°æ˜æ€§çš„ï¼Œä½†åŠŸèƒ½æ€§æ›´å¼ºçš„æ–¹æ³•ã€‚</li><li id="fe62" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">ç®€å•çš„è½»é‡çº§APIã€‚</li><li id="6a17" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">éªŒè¯ä¸æ˜¯ç”±å¼‚å¸¸å¤„ç†çš„ã€‚</li></ul><p id="1fa3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¼ºç‚¹:</p><ul class=""><li id="852f" class="mx my iq jp b jq jr ju jv jy no kc np kg nq kk nc nd ne nf bi translated">ä¸æ£€æŸ¥éªŒè¯å¯¹è±¡ä¸­ä¸åŒ…å«çš„å¿…å¡«å­—æ®µã€‚</li><li id="d464" class="mx my iq jp b jq nj ju nk jy nl kc nm kg nn kk nc nd ne nf bi translated">æ²¡æœ‰é¢„å®šä¹‰çš„éªŒè¯å‡½æ•°ã€‚</li></ul><p id="9aaf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„ä»£ç ç¤ºä¾‹:<a class="ae ma" href="https://github.com/jakubkoci/react-form-validation" rel="noopener ugc nofollow" target="_blank">GitHubâ€”jakubkoci/react-form-validation:ç”¨Formikå’ŒYup </a>è¿›è¡Œç®€å•çš„Reactè¡¨å•éªŒè¯ã€‚</p></div></div>    
</body>
</html>