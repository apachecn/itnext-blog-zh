<html>
<head>
<title>Connect to containers using Kubectl Exec</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Kubectl Execè¿æ¥åˆ°å®¹å™¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/connect-to-containers-using-kubectl-exec-b1fb5c171f03?source=collection_archive---------6-----------------------#2022-11-16">https://itnext.io/connect-to-containers-using-kubectl-exec-b1fb5c171f03?source=collection_archive---------6-----------------------#2022-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="06a4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">å¦‚ä½•è¿æ¥åˆ°æ‚¨çš„Kuberneteså®¹å™¨</h2></div><p id="6724" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶<code class="fe le lf lg lh b">kubectl exec</code>å‘½ä»¤ï¼Œå±•ç¤ºå¦‚ä½•å°†shellæ”¾å…¥Kubernetes (K8S)é›†ç¾¤ä¸­æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œä»¥åŠå¦‚ä½•åœ¨å®¹å™¨ä¸Šè¿è¡Œå•ç‹¬çš„å‘½ä»¤ï¼Œå¹¶æä¾›ä¸€äº›æœ‰ç”¨çš„ç¤ºä¾‹ã€‚</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/21adf62c6d72ad925b6f57e0e0fa4498.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m2kcZkZB0dKEJWio"/></div></div></figure><h2 id="d915" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">ç¤ºä¾‹è®¾ç½®</h2><p id="0265" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">è¦å°†shellæ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œé¦–å…ˆè¦æ‰¾åˆ°å®ƒçš„åç§°ã€‚</p><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="7bfa" class="lu lv it lh b gy mw mx l my mz">kubectl get pods</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi na"><img src="../Images/fe9b50bec24ef633f98862a3c6307eb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*FiIsHzkp9NJfvsAOpCIo9g.png"/></div></figure><p id="99e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¯·æ³¨æ„ï¼Œä¸ºäº†è·å¾—ä¸€ä¸ªå¤–å£³ï¼Œæ‚¨çš„å®¹å™¨æ˜ åƒå¿…é¡»æœ‰å¯ç”¨çš„å¤–å£³ã€‚</p><p id="2ee7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘åœ¨æˆ‘çš„Azure KubernetesæœåŠ¡(AKS)é›†ç¾¤ä¸Šè¿è¡Œäº†ä¸€ä¸ªåä¸º<em class="nb">AKS-hello world-one-56 c7b 8d 79d-lkz6s</em>çš„æœåŠ¡ï¼Œæˆ‘ä»¬å°†åœ¨è¿™äº›ç¤ºä¾‹ä¸­ä½¿ç”¨å®ƒã€‚è¿™ä½¿ç”¨äº†<a class="ae nc" href="https://hub.docker.com/_/microsoft-azuredocs-aci-helloworld" rel="noopener ugc nofollow" target="_blank"> Hello world image </a>,è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Node.js webåº”ç”¨ç¨‹åºï¼Œç”¨åœ¨Azureå®¹å™¨å®ä¾‹ä¸­ï¼Œç”¨äºdocs.microsoft.comçš„ä¾‹å­ã€‚</p><p id="4247" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿™ä¸ªå®¹å™¨ç”±ä¸€ä¸ªåä¸º<em class="nb">çš„éƒ¨ç½²æ§åˆ¶ã€‚</em></p><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="b1e4" class="lu lv it lh b gy mw mx l my mz">kubectl get deployments</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nd"><img src="../Images/e9acca50f6977a1dbcc900503eab5613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5YckA0W09K3dEbzwDd9Ldw.png"/></div></div></figure><p id="7c65" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘çš„<em class="nb">aks-hello world-one . YAML</em>éƒ¨ç½²æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤º:</p><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="d9df" class="lu lv it lh b gy mw mx l my mz">apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>  name: aks-helloworld-one<br/>spec:<br/>  replicas: 1<br/>  selector:<br/>    matchLabels:<br/>      app: aks-helloworld-one<br/>  template:<br/>    metadata:<br/>      labels:<br/>        app: aks-helloworld-one<br/>    spec:<br/>      containers:<br/>      - name: aks-helloworld-one<br/>        image: mcr.microsoft.com/azuredocs/aks-helloworld:v1<br/>        ports:<br/>        - containerPort: 80<br/>        env:<br/>        - name: TITLE<br/>          value: "Welcome to Azure Kubernetes Service (AKS)"<br/>---<br/>apiVersion: v1<br/>kind: Service<br/>metadata:<br/>  name: aks-helloworld-one<br/>spec:<br/>  type: ClusterIP<br/>  ports:<br/>  - port: 80<br/>  selector:<br/>    app: aks-helloworld-one</span></pre><p id="ce95" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å¦‚æœæ‚¨æ­£åœ¨è¿›è¡Œï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸Šé¢çš„æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åœ¨æ‚¨çš„é›†ç¾¤ä¸Šéƒ¨ç½²å®¹å™¨:</p><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="6464" class="lu lv it lh b gy mw mx l my mz">kubectl create deployment aks-helloworld-one.yaml</span></pre><h2 id="1569" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">è¿æ¥åˆ°æ‚¨çš„å®¹å™¨</h2><p id="90eb" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">è¦å°†bash shellæ”¾å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨:</p><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="f5f8" class="lu lv it lh b gy mw mx l my mz">kubectl exec --stdin --tty aks-helloworld-one-56c7b8d79d-xqx5t -- /bin/bash</span></pre><ul class=""><li id="a46b" class="ne nf it kk b kl km ko kp kr ng kv nh kz ni ld nj nk nl nm bi translated">åŒç ´æŠ˜å·(<code class="fe le lf lg lh b">--</code>)å°†æ‚¨æƒ³è¦ä¼ é€’ç»™å‘½ä»¤çš„å‚æ•°ä¸<code class="fe le lf lg lh b">kubectl</code>å‚æ•°åˆ†å¼€ã€‚</li><li id="412d" class="ne nf it kk b kl nn ko no kr np kv nq kz nr ld nj nk nl nm bi translated"><code class="fe le lf lg lh b">/bin/bash</code>æ˜¯æ‚¨æƒ³è¦çš„å¤–å£³ç±»å‹(ä¾‹å¦‚ä¹Ÿå¯ä»¥æ˜¯<code class="fe le lf lg lh b">/bin/sh</code>)ã€‚</li><li id="6039" class="ne nf it kk b kl nn ko no kr np kv nq kz nr ld nj nk nl nm bi translated"><code class="fe le lf lg lh b">--stdin</code>é€‰é¡¹å°†stdin(æˆ–æ ‡å‡†è¾“å…¥)ä¼ é€’ç»™å®¹å™¨ã€‚ç®€ç§°ç”¨<code class="fe le lf lg lh b">-i</code>ã€‚</li><li id="baf9" class="ne nf it kk b kl nn ko no kr np kv nq kz nr ld nj nk nl nm bi translated">æ ‡å‡†è¾“å…¥æ˜¯ä¸€ä¸ªTTYã€‚ç®€ç§°ç”¨<code class="fe le lf lg lh b">-t</code>ã€‚</li><li id="3aca" class="ne nf it kk b kl nn ko no kr np kv nq kz nr ld nj nk nl nm bi translated">æ‚¨ä¹Ÿå¯ä»¥æŒ‡å®š<code class="fe le lf lg lh b">--quiet</code>æˆ–<code class="fe le lf lg lh b">-q</code>é€‰é¡¹æ¥ç¦ç”¨<code class="fe le lf lg lh b">kubectl</code>æœ¬èº«çš„æ‰€æœ‰è¾“å‡ºã€‚æ‚¨åªä¼šçœ‹åˆ°å®¹å™¨ä¸­è¿è¡Œçš„æµç¨‹äº§ç”Ÿçš„è¾“å‡ºã€‚</li><li id="e6f1" class="ne nf it kk b kl nn ko no kr np kv nq kz nr ld nj nk nl nm bi translated">æ‚¨è¿˜å¯ä»¥ä½¿ç”¨<code class="fe le lf lg lh b">-pod-runnning-timeout</code>æŒ‡å®šç­‰å¾…æ—¶é—´é•¿åº¦ï¼Œç›´åˆ°è‡³å°‘æœ‰ä¸€ä¸ªpodæ­£åœ¨è¿è¡Œï¼Œé»˜è®¤ä¸º1mã€‚è¿™è¢«æŒ‡å®šä¸ºæ—¶é—´é•¿åº¦(å¦‚5sã€2mæˆ–3hï¼Œå¤§äºé›¶)ï¼Œä¾‹å¦‚<code class="fe le lf lg lh b">--pod-running-timeout=2m</code>ã€‚</li></ul><p id="2fce" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿›å…¥å®¹å™¨åï¼Œæ‚¨å¯ä»¥ç›´æ¥è¿è¡Œå‘½ä»¤ï¼Œä¾‹å¦‚<code class="fe le lf lg lh b">ls</code>æ¥åˆ—å‡ºç›®å½•çš„å†…å®¹ã€‚</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ns"><img src="../Images/8afc6ca3ad14f5654c4f8fe073fd5ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*LCP3Me-2ATOhUszkQYfP-w.png"/></div></div></figure><p id="bfd1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ–<code class="fe le lf lg lh b">ps aux</code>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nt"><img src="../Images/2c1a3602edd34ee4b8e9c05cc4304216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6pDL25g10ebR3S2Sd7buw.png"/></div></div></figure><p id="4a91" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¸€æ—¦ä½ åœ¨å®¹å™¨ä¸­å®Œæˆï¼Œè¾“å…¥<code class="fe le lf lg lh b">exit</code>è¿”å›åˆ°ä½ çš„æ§åˆ¶å°å¤–å£³ã€‚</p><h2 id="32e1" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">åœ¨å®¹å™¨ä¸­è¿è¡Œå•ä¸ªå‘½ä»¤</h2><p id="6783" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code class="fe le lf lg lh b">kubectl exec</code>ç›´æ¥è¿è¡Œå•ä¸ªå‘½ä»¤ï¼Œä¸‹é¢æ˜¾ç¤ºäº†ä¸€äº›æœ‰ç”¨çš„ç¤ºä¾‹:</p><ul class=""><li id="a45c" class="ne nf it kk b kl km ko kp kr ng kv nh kz ni ld nj nk nl nm bi translated">è·å–æ—¶é—´å’Œæ—¥æœŸ</li></ul><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="386f" class="lu lv it lh b gy mw mx l my mz">kubectl exec &lt;pod name&gt; -- date</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/8591a645ab51977c761f38867f017972.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*jr8mXC3NsgAC5r_4HJZvzA.png"/></div></figure><ul class=""><li id="cf81" class="ne nf it kk b kl km ko kp kr ng kv nh kz ni ld nj nk nl nm bi translated">åˆ—å‡ºè¿è¡Œç¯å¢ƒå˜é‡</li></ul><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="5732" class="lu lv it lh b gy mw mx l my mz">kubectl exec &lt;pod name&gt; -- env</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nv"><img src="../Images/01915f45460c495ade13c6cdc8d89ec3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HaUgQ8--9m4omfQM2qoj2g.png"/></div></div></figure><ul class=""><li id="14e3" class="ne nf it kk b kl km ko kp kr ng kv nh kz ni ld nj nk nl nm bi translated">æ›´æ–°åŒ…</li></ul><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="4493" class="lu lv it lh b gy mw mx l my mz">kubectl exec &lt;pod name&gt; -- apt-get update</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nw"><img src="../Images/c8d39cda71e6a5752b0c67c084175e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLET6lrZs-wnkHvwQ7qw8g.png"/></div></div></figure><ul class=""><li id="e6f4" class="ne nf it kk b kl km ko kp kr ng kv nh kz ni ld nj nk nl nm bi translated">æŸ¥çœ‹è£…è½½ç‚¹</li></ul><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="fcb7" class="lu lv it lh b gy mw mx l my mz">kubectl exec shell-demo -- cat /proc/1/mounts</span></pre><h2 id="788a" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">å½“ä¸€ä¸ªPodæœ‰å¤šä¸ªå®¹å™¨æ—¶ï¼Œè¿æ¥åˆ°æŒ‡å®šçš„å®¹å™¨</h2><p id="929f" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">å¦‚æœä¸€ä¸ªPodæœ‰å¤šä¸ªå®¹å™¨ï¼Œä½¿ç”¨<code class="fe le lf lg lh b">--container</code>æˆ–<code class="fe le lf lg lh b">-c</code>åœ¨<code class="fe le lf lg lh b">kubectl exec</code>å‘½ä»¤ä¸­æŒ‡å®šä¸€ä¸ªå®¹å™¨ã€‚</p><pre class="lj lk ll lm gt ms lh mt mu aw mv bi"><span id="c61a" class="lu lv it lh b gy mw mx l my mz">kubectl exec -i -t &lt;pod name&gt; --container &lt;container name&gt; -- /bin/bash</span></pre><h2 id="df06" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">æ‘˜è¦</h2><p id="68f7" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe le lf lg lh b">kubectl exec</code>è¿æ¥åˆ°ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥æ‰§è¡Œå•ä¸ªå‘½ä»¤ã€‚è¿æ¥åˆ°å®¹å™¨å¯¹äºæŸ¥çœ‹æ—¥å¿—ã€æ£€æŸ¥è¿›ç¨‹ã€æŒ‚è½½ç‚¹ã€ç¯å¢ƒå˜é‡å’ŒåŒ…ç‰ˆæœ¬ç­‰éå¸¸æœ‰ç”¨ã€‚</p><p id="6c68" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">kubectl exec</code>å°†ä¸ºæ‚¨æä¾›å¯¹å®¹å™¨çš„å®Œå…¨shellè®¿é—®æƒé™ï¼Œå› æ­¤å¯ä»¥ä¿®æ”¹å®ƒå¹¶å®‰è£…ä¸å±äºå®¹å™¨æ˜ åƒçš„åŒ…ï¼Œä½†é™¤éå‡ºäºä¸´æ—¶æ•…éšœæ’é™¤çš„ç›®çš„ï¼Œå¦åˆ™ä¸å»ºè®®è¿™æ ·åšã€‚å¦‚æœå®¹å™¨æ°¸ä¹…åœ°éœ€è¦é¢å¤–çš„ä¿®æ”¹æˆ–æ‰“åŒ…ï¼Œé‚£ä¹ˆåº”è¯¥ä¿®æ”¹æ˜ åƒå¹¶éƒ¨ç½²æ–°ç‰ˆæœ¬ä»¥ä¿æŒä¸å˜æ€§å’Œå¯å†ç°æ€§ã€‚</p><p id="c2b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å¹²æ¯ï¼ğŸ»</p><div class="nx ny gp gr nz oa"><a href="https://www.buymeacoffee.com/jackwesleyroper" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">Jack Roperæ­£åœ¨Azureã€Azure DevOpsã€Terraformã€Kuberneteså’ŒCloud techä¸Šå†™åšå®¢ï¼</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">å¸Œæœ›æˆ‘çš„åšå®¢èƒ½å¸®åˆ°ä½ ï¼Œä½ ä¼šå–œæ¬¢å®ƒçš„å†…å®¹ï¼æˆ‘çœŸçš„å¾ˆå–œæ¬¢å†™æŠ€æœ¯å†…å®¹å’Œåˆ†äº«â€¦</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo ls oa"/></div></div></a></div><p id="e153" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="nb">æœ€åˆå‘è¡¨äº</em><a class="ae nc" href="https://spacelift.io/" rel="noopener ugc nofollow" target="_blank"><em class="nb">space lift . io</em></a><em class="nb">ã€‚</em></p></div></div>    
</body>
</html>