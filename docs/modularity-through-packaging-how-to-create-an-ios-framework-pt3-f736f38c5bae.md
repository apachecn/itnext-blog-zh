# é€šè¿‡æ‰“åŒ…å®ç°æ¨¡å—åŒ–â€”â€”å¦‚ä½•åˆ›å»º iOS æ¡†æ¶ Pt3

> åŸæ–‡ï¼š<https://itnext.io/modularity-through-packaging-how-to-create-an-ios-framework-pt3-f736f38c5bae?source=collection_archive---------1----------------------->

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨æœ¬ç³»åˆ—çš„[ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„æ•´ä½“æ¡†æ¶ï¼Œä½†æ˜¯ä¸€æ—¦ä½ çš„æ¡†æ¶å¼€å§‹æ‰©å±•åˆ°ä¸€ä¸ªæ›´å¤§çš„é¡¹ç›®ä¸­ï¼Œä½ å°†ä¼šæ„è¯†åˆ°ä¸€äº›ç‰¹æ€§æ˜¯è¶³å¤Ÿä¸åŒçš„ï¼Œä»¥è‡³äºå¯ä»¥å•ç‹¬è¢«è®¤ä¸ºæ˜¯æ¨¡å—ã€‚](https://medium.com/@elmoezamira/list/how-to-create-an-ios-framework-739461924d14)

åœ¨ä»Šå¤©çš„å¸–å­ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ›å»ºå•ç‹¬çš„æ¨¡å—æ¥éš”ç¦»æ¡†æ¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå› ä¸º Swift ä¸æ”¯æŒå­æ¨¡å—ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Swift Package Manager æ¥æ¨¡å—åŒ–æˆ‘ä»¬çš„é¡¹ç›®ã€‚

![](img/36d67227f8cc4408eb0420e30afecc46.png)

ç”±[æ‹æ‘„çš„ç…§ç‰‡ç”±](https://unsplash.com/@mildlee?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## Swift æœ¬èº«ä¸æ”¯æŒå­æ¨¡å—

å¦‚æœæ‚¨æ›¾ç»ä½¿ç”¨è¿‡åƒè‹¹æœ CoreImage è¿™æ ·çš„æ—§ iOS æ¡†æ¶ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å°†å­æ¨¡å—å¯¼å…¥åˆ°æ‚¨çš„ swift é¡¹ç›®ä¸­ã€‚

æˆ‘çš„æ„æ€æ˜¯ä½ ä¸èƒ½**ã€åˆ›å»ºã€‘**ä¸€ä¸ª swift å­æ¨¡å—ï¼Œè§£é‡Šä¸ºä»€ä¹ˆå‰é¢ä¸€è¡Œä»£ç å·¥ä½œå¾ˆç®€å•ï¼Œåƒ CoreImage è¿™æ ·çš„æ¡†æ¶æ˜¯ç”¨ objective-c è¯­è¨€å†™çš„ï¼Œè€Œä¸æ˜¯ swiftã€‚

## SPM æ˜¯ä»€ä¹ˆï¼Ÿ

Swift Package manager æœ€åˆæ˜¯ä½œä¸ºæœåŠ¡å™¨ç«¯ Swift çš„å·¥å…·æ¨å‡ºçš„ï¼Œå®ƒæ˜¯ Xcode è‡ªå¸¦çš„ä¾èµ–é¡¹ç®¡ç†å™¨ï¼Œè¯¥å·¥å…·ä½¿æˆ‘ä»¬èƒ½å¤Ÿè‡ªåŠ¨å®Œæˆä¸‹è½½ã€ç¼–è¯‘å’Œé“¾æ¥ä¾èµ–é¡¹çš„è¿‡ç¨‹ã€‚

## Swift åŒ…è£¹

Swift åŒ…æ˜¯å¯é‡ç”¨ç»„ä»¶çš„é›†åˆï¼Œå®ƒä»¬åŒ…å«**æºæ–‡ä»¶**å’Œä¸€ä¸ªå«åš **package.swift** çš„**æ¸…å•æ–‡ä»¶**ã€‚

æ¸…å•æ–‡ä»¶ä½¿ç”¨**åŒ…æè¿°**æ¨¡å—æ¥å®šä¹‰åŒ…çš„åç§°åŠå…¶å†…å®¹ã€‚å¤§å¤šæ•°åŒ…åªåŒ…å«ä¸€ä¸ªç›®æ ‡ï¼Œä½†æ˜¯å¯¹äºåƒ [RxSwift](https://github.com/ReactiveX/RxSwift) è¿™æ ·çš„å¤§è§„æ¨¡æ¡†æ¶æ¥è¯´ï¼Œæ‹¥æœ‰å¤šä¸ªæ¨¡å—æ˜¯å¿…è¦çš„ã€‚

> å°½ç®¡åç§°å¦‚æ­¤ï¼Œswift åŒ…ä¹Ÿå¯ä»¥åŒ…å«é Swift ä»£ç (åŸºäº C çš„è¯­è¨€ï¼Œå¦‚ obj-cã€C å’Œ c++)

ä¸ºäº†ç†è§£è¿™ç¯‡æ–‡ç« çš„æœ€ç»ˆè¾“å‡ºæ˜¯ä»€ä¹ˆæ ·å­ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç±»ä¼¼äº [RxSwift](https://github.com/ReactiveX/RxSwift) çš„åŒ…çš„æ ·å­:

![](img/fe6e8235aa9a2a2e0221013cb51c5168.png)

å®ƒæ˜¯ä¸€ä¸ªåŒ…å«è®¸å¤šåº“çš„åŒ…ï¼Œä¸‹è½½åŒ…åï¼Œå¼€å‘è€…(æ¡†æ¶ç”¨æˆ·)å¯ä»¥è‡ªç”±ä½¿ç”¨ä»»ä½•ç»„ä»¶(åº“)ã€‚

## ä¸ºä»€ä¹ˆè¦æ¨¡å—åŒ–ä½ çš„æ¡†æ¶ï¼Ÿ

æ¨¡å—åŒ–å¯¹åŒæ–¹éƒ½æœ‰å¥½å¤„ï¼Œä½œä¸ºä¸€ä¸ªæ¡†æ¶ä½œè€…ï¼Œä½ å°†èƒ½å¤Ÿåˆ†ç¦»ä½ çš„ä»£ç ï¼Œè¿™ä½¿å¾—å¯æµ‹è¯•æ€§æ›´å®¹æ˜“å®ç°ã€‚ä½ ä¹Ÿå°†æœ‰ä¸€ä¸ªæ›´çŸ­çš„ç¼–è¯‘æ—¶é—´ã€‚

ä½œä¸ºä¸€ä¸ªæ¡†æ¶ç”¨æˆ·ï¼Œæ¨¡å—åŒ–å…è®¸åªå°†æ¡†æ¶çš„æŸäº›éƒ¨åˆ†å¯¼å…¥åˆ°æ‚¨çš„é¡¹ç›®ä¸­ï¼Œè¯´å¾—å¤Ÿå¤šäº†ï¼Œè®©æˆ‘ä»¬è½¬åˆ°å®ç°éƒ¨åˆ†å§ï¼

# åˆ›å»º swift å¥—é¤:

è®©æˆ‘ä»¬ä»åˆ›å»ºä¸€ä¸ªæ–°åŒ…å¼€å§‹:æ–‡ä»¶>æ–°å»º>é¡¹ç›®>åŒ…

![](img/ef9d1e0f3b1c980703129b56dd2e2fa4.png)

æ–‡ä»¶>æ–°å»º>é¡¹ç›®>åŒ…

ä¸‹ä¸€æ­¥æ˜¯ä¸å¿…è¦çš„ï¼Œå¯¹äºä¸€ä¸ªæ›´å¹²å‡€çš„é¡¹ç›®ï¼Œåˆ é™¤æºæ–‡ä»¶å¤¹ä¸­çš„**æµ‹è¯•æ–‡ä»¶å¤¹**å’Œ**ç®€å•åŒ…**æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ä¸éœ€è¦å®ƒä»¬ã€‚

ç°åœ¨ä¸€åˆ‡å°±ç»ªï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ¸…å•æ–‡ä»¶ä¸­æœ‰ä»€ä¹ˆ:

æ¸…å•æ–‡ä»¶åŒ…å«åŒ…çš„å®šä¹‰ï¼ŒåŒ…å¯¹è±¡éœ€è¦ 4 ä¸ªå­—æ®µ:åç§°ã€äº§å“æ•°ç»„ã€ä¾èµ–é¡¹æ•°ç»„å’Œç›®æ ‡æ•°ç»„ã€‚

åœ¨å¯¹æˆ‘ä»¬çš„æ¸…å•æ–‡ä»¶åšä»»ä½•ä¿®æ”¹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æŠŠæˆ‘ä»¬åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­åˆ›å»ºçš„æ¡†æ¶[æ·»åŠ åˆ°æºæ–‡ä»¶ä¸­:ç®€å•æ•°å­¦ã€‚](https://medium.com/@elmoezamira/build-your-first-xcframework-how-to-create-an-ios-framework-pt-1-d1a889fdb40d)

![](img/866c135a51e8ca359fc8911d5e5d4319.png)

åˆ é™¤ targets æ•°ç»„ä¸­çš„ target å’Œ testTargetï¼Œæ”¹ç”¨ binaryTargetï¼Œå°†å…¶å‘½åä¸º SimpleMathï¼Œå¹¶ä¸ºå…¶æä¾›æˆ‘ä»¬åˆšåˆšæ·»åŠ çš„ XCFramework çš„æ­£ç¡®è·¯å¾„ã€‚

æˆ‘ä»¬çš„åŒ…å·²ç»å‡†å¤‡å¥½äº†ï¼Œè®©æˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°æˆ‘ä»¬çš„æ¼”ç¤ºåº”ç”¨ç¨‹åºä¸­:

åŒ…ä¾èµ–å…³ç³»> "+"æŒ‰é’®>æ·»åŠ æœ¬åœ°>ä½ çš„åŒ…çš„è·¯å¾„>æ·»åŠ åŒ…

![](img/f50858fc2950bbee920d9d3f894713bd.png)

æœ€åï¼Œè½¬åˆ°æ‚¨çš„ç›®æ ‡>æ¡†æ¶å’Œåº“>â€œ+â€æŒ‰é’®ï¼Œæ‚¨åº”è¯¥åœ¨å·¥ä½œåŒºéƒ¨åˆ†çœ‹åˆ°æ‚¨çš„åŒ…ï¼Œæ·»åŠ å®ƒ

![](img/eccaefb7582638114408769782721df9.png)

æˆ‘ä»¬ä»‹ç»äº†åˆ›å»ºæœ¬åœ° Swift åŒ…çš„åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬åˆ©ç”¨è¿™äº›æ–°è·å¾—çš„æŠ€èƒ½æ¥æ¨¡å—åŒ–æ¡†æ¶ã€‚

## æ‰©å±•æ‚¨çš„åŒ…/æ¨¡å—åŒ–æ‚¨çš„é¡¹ç›®:

è®©æˆ‘ä»¬å‡è®¾ä½ çš„æ¡†æ¶æ‰©å±•æˆä¸€ä¸ªå¤§é¡¹ç›®ï¼Œä½ å†³å®šä¸ºä¸åŒçš„æ•°å­¦åˆ†æ”¯åˆ›å»ºå•ç‹¬çš„æ¨¡å—:ä»£æ•°ã€å‡ ä½•ã€å¾®ç§¯åˆ†ã€ç»Ÿè®¡å’Œæ¦‚ç‡ã€‚å› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ä»¥å‰çš„æ–‡ç« ä¸­ä»‹ç»äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ¡†æ¶ï¼Œä»¥åŠå¦‚ä½•åœ¨ä»Šå¤©çš„æ–‡ç« ä¸­å°†äºŒè¿›åˆ¶ç›®æ ‡æ·»åŠ åˆ°æ‚¨çš„åŒ…ä¸­ï¼Œæ‰€ä»¥è§£å†³æ–¹æ¡ˆå¯¹æ‚¨æ¥è¯´åº”è¯¥æ˜¯æ¸…æ¥šçš„:åˆ›å»º 4 ä¸ªä¸åŒçš„å°æ¡†æ¶ï¼Œæ¯ä¸ªåŒ…å«ä¸æ•°å­¦çš„å››ä¸ªåˆ†æ”¯ç›¸å…³çš„å‡½æ•°ï¼Œå°†å®ƒä»¬æ·»åŠ åˆ° sources æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åå¯¹æ‚¨çš„æ¸…å•æ–‡ä»¶è¿›è¡Œå¿…è¦çš„æ›´æ”¹ã€‚

æˆ‘ä¸ä¼šä»…ä»…ä¸ºäº†æ¼”ç¤ºè€Œä»å¤´å¼€å§‹åˆ›å»º 4 ä¸ªçœŸæ­£çš„æ¡†æ¶ï¼Œå› ä¸ºä»Šå¤©çš„å¸–å­å…³æ³¨çš„æ˜¯å¦‚ä½•æ¨¡å—åŒ–(è€Œä¸æ˜¯æ¡†æ¶çš„å†…å®¹),ä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ä½ åº”è¯¥æ€ä¹ˆåš

æ‚¨çš„åŒ…åº”è¯¥æ˜¯è¿™æ ·çš„:

![](img/0b25a59e71f43d68f72e0e2241242b24.png)

ä½ çš„æ¡†æ¶ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿåªæ·»åŠ ä»–éœ€è¦çš„æ¨¡å—ã€‚

> æ›´æ–°:ä» Xcode 13.3 å¼€å§‹ï¼Œå¦‚æœ binaryTarget çš„åç§°ä¸ XCFramework çš„åç§°ä¸åŒ¹é…ï¼ŒXcode å°†æŠ›å‡ºä»¥ä¸‹é”™è¯¯â€œæ‰¾ä¸åˆ°ç›®æ ‡[ç›®æ ‡åç§°]çš„å·¥ä»¶â€

## ç»“è®º:

Swift Package Manager ä½¿æˆ‘ä»¬èƒ½å¤ŸæˆåŠŸåˆ›å»ºåŒ…å«ç‹¬ç«‹æ¡†æ¶æ¨¡å—çš„è½¯ä»¶åŒ…ã€‚è™½ç„¶æˆ‘ä»¬è¾¾åˆ°äº†ç³»åˆ—ä¸­çš„å¦ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰å……åˆ†åˆ©ç”¨ SPMï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„åŒ…ä»…å¯ç”¨äºæœ¬åœ°ä½¿ç”¨ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®º[è¿œç¨‹åŒ…ä»¥åŠå¦‚ä½•åˆ†å‘æ‚¨çš„æ¡†æ¶](https://medium.com/@elmoezamira/distribute-your-framework-how-to-create-an-ios-framework-pt4-b9ba478e194d)ï¼

è¿™æ ‡å¿—ç€è¿™ç¯‡æ–‡ç« çš„ç»“æŸï¼Œæ‰€ä»¥è¯·åŠ¡å¿…ç‚¹å‡»é¼“æŒæŒ‰é’®ğŸ‘ğŸ‘å¦‚æœä½ å–œæ¬¢çš„è¯ã€‚

å¦‚ä½•åˆ›å»ºä¸€ä¸ª iOS æ¡†æ¶æ˜¯ä¸€ä¸ª**å‘¨åˆŠ**ç³»åˆ—ï¼Œæ‰€ä»¥**åœ¨**åª’ä½“**æˆ– [**æ¨ç‰¹**](https://twitter.com/elmoezamira) ä¸Šå…³æ³¨æˆ‘**æ¥äº†è§£æœ€æ–°çš„å¸–å­ï¼Œåƒå¾€å¸¸ä¸€æ ·ï¼Œä½ çš„åé¦ˆæ€»æ˜¯ä»¤äººæ„Ÿæ¿€çš„ã€‚

ç¼–ç å¿«ä¹ï¼

![El Moez Amira](img/7d99f0795ed331bdc8af37b1613d3144.png)

[El Moez Amira](https://medium.com/@elmoezamira?source=post_page-----f736f38c5bae--------------------------------)

## å¦‚ä½•åˆ›å»º iOS æ¡†æ¶

[View list](https://medium.com/@elmoezamira/list/how-to-create-an-ios-framework-739461924d14?source=post_page-----f736f38c5bae--------------------------------)6 stories![](img/d58861afc5089f332484756807132da0.png)![](img/40aab67ccf288e3caa47bebef2054971.png)![SwiftUI Documentation viewed in Xcode 13](img/a9d8449abc39ffcb687130fd54fda832.png)