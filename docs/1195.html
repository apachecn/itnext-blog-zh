<html>
<head>
<title>Reduce unit tests boilerplate with Jestâ€™s .each syntax</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨Jestçš„å‡å°‘å•å…ƒæµ‹è¯•æ ·æ¿ã€‚æ¯ç§è¯­æ³•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/reduce-unit-tests-boilerplate-with-jests-each-syntax-f5e48828437f?source=collection_archive---------2-----------------------#2018-08-09">https://itnext.io/reduce-unit-tests-boilerplate-with-jests-each-syntax-f5e48828437f?source=collection_archive---------2-----------------------#2018-08-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4f2dfdb33329377fe1c01c4c7de3f7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KYfVVVCGKS0j7MNjQRrGvw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">ç…§ç‰‡ç”±<a class="ae kc" href="https://unsplash.com/photos/9HI8UJMSdZA?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">å¸ƒæ‹‰ç™»Â·ç§‘æ‹‰å§†</a>åœ¨<a class="ae kc" href="https://unsplash.com/search/photos/run?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</figcaption></figure><p id="63ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºäº†æœ€ç»ˆå¾—åˆ°å¯ç»´æŠ¤çš„ã€ç»“æ„è‰¯å¥½çš„ä»£ç åº“ï¼Œå•å…ƒæµ‹è¯•åœ¨webå¼€å‘ä¸­è‡³å…³é‡è¦ã€‚å¦‚ä½ æ‰€çŸ¥ï¼Œè¿™ç¯‡æ–‡ç« ä¸ä¼šè¯•å›¾è¯´æœä½ è€ƒè¯•çš„é‡è¦æ€§ã€‚è¿™æ˜¯ç†æ‰€å½“ç„¶çš„ã€‚</p><p id="4c28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸å¹¸çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™å•å…ƒæµ‹è¯•æ—¶é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»é‡å¤å¾ˆå¤šæ¬¡ï¼Œä»¥ä¾¿ç”¨describe / itæ ¼å¼æ·»åŠ æ‰€æœ‰è¿™äº›æ–­è¨€ã€‚æ˜¯çš„ï¼Œè¿™æ˜¯çœŸçš„ã€‚ç¼–å†™æµ‹è¯•éœ€è¦æ—¶é—´ã€‚</p><p id="c5b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é‚£æˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿä¸ºäº†æ›´å¿«åœ°ç¼–å†™æµ‹è¯•ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾åˆ°å°½å¯èƒ½è‡ªåŠ¨åŒ–æ•´ä¸ªè¿‡ç¨‹çš„æ–¹æ³•ã€‚å¯¹äºé‚£äº›æƒ³çŸ¥é“çš„äººæ¥è¯´ï¼Œç¼–å†™æ›´å°‘çš„æµ‹è¯•ä¸æ˜¯ä¸€ä¸ªé€‰é¡¹ã€‚</p><h2 id="bb6d" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">ã€‚æ¯ä¸ªäººéƒ½æ˜¯ä¸ºäº†èƒœåˆ©</h2><p id="11e2" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">æœ‰ä¸€ä¸ªå¾ˆé…·çš„åŠŸèƒ½å«åš<a class="ae kc" href="https://jestjs.io/docs/en/api#describeeachtable-name-fn" rel="noopener ugc nofollow" target="_blank">ã€‚Jest 23ä¸­åŒ…å«çš„æ¯ä¸ª</a>ã€‚è¿™ä¸ªå›¾ä¹¦é¦†çš„çµæ„Ÿæ¥è‡ªæ‘©å¡å’–å•¡ã€‚å®ƒæœ€åˆæ˜¯ä¸€ä¸ªåä¸º<a class="ae kc" href="https://www.npmjs.com/package/jest-each" rel="noopener ugc nofollow" target="_blank"> jest-each </a>çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œåœ¨ç¬¬23ç‰ˆä¸­jestè‡ªå·±æä¾›äº†è¿™ä¸ªåŒ…ã€‚å¦‚æœä½ ä»ç„¶ä½¿ç”¨æ—§ç‰ˆæœ¬çš„Jestï¼Œä½ å¯ä»¥å•ç‹¬å®‰è£…jest-eachåŒ…ã€‚</p><h2 id="1c53" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p id="beda" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">å› ä¸ºã€‚æ¯ä¸€ä¸ªæˆ‘ä»¬éƒ½å¯ä»¥ç”¨å‡ è¡Œå†™å‡ åä¸ªæ–­è¨€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é¿å…é‡å¤ã€‚æˆ‘ä»¬å”¯ä¸€è¦åšçš„å°±æ˜¯ä»¥åŠ¨æ€çš„æ–¹å¼å£°æ˜æˆ‘ä»¬çš„å˜é‡ï¼Œç„¶åä½¿ç”¨è¿™äº›å˜é‡åšä¸€æ¬¡æ–­è¨€ã€‚è¿™äº›ç”šè‡³ç”¨åœ¨æ–­è¨€çš„æè¿°ä¸­ã€‚</p><p id="e28a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¬èµ·æ¥å¾ˆæœ‰è¶£ï¼Ÿé‚£ä¹ˆè®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä»£ç ã€‚æˆ‘ä»¬æœ‰ä¸‹é¢çš„çº¯å‡½æ•°ï¼Œæˆ‘ä»¬æƒ³å¯¹å®ƒè¿›è¡Œå•å…ƒæµ‹è¯•:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="d181" class="lb lc iq me b gy mi mj l mk ml">function add(x, y) {<br/>  return x + y;<br/>}</span></pre><p id="ddde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬å¯ä»¥é€‰æ‹©éšæœºçš„æ•°å­—å¯¹ï¼Œå¹¶æä¾›ä¸€äº›æ–­è¨€ï¼Œä»¥éªŒè¯æˆ‘ä»¬æ€»æ˜¯å¾—åˆ°é¢„æœŸçš„ç»“æœ:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="d9dd" class="lb lc iq me b gy mi mj l mk ml">describe('test add method', () =&gt; {<br/>  it ('should return 5 when 2 and 3 are used', () =&gt; {<br/>    expect(add(2, 3)).toEqual(5);  <br/>  });</span><span id="5d78" class="lb lc iq me b gy mm mj l mk ml">  it ('should return 50 when 20 and 30 are used', () =&gt; {<br/>    expect(add(20, 30)).toEqual(50);  <br/>  });</span><span id="75a9" class="lb lc iq me b gy mm mj l mk ml">  it ('should return -5 when -2 and -3 are used', () =&gt; {<br/>    expect(add(-2, -3)).toEqual(-5);  <br/>  });<br/>});</span></pre><p id="d954" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¤ªæ£’äº†ã€‚æˆ‘ä»¬å†™ä¸‹äº†æˆ‘ä»¬çš„æ–­è¨€ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‰ç…§<code class="fe mn mo mp me b">it</code>è¯­å¥é‡å¤ä¸€ç‚¹ï¼Œå¯¹å—ï¼Ÿå¦‚æœæˆ‘ä»¬ä»”ç»†è§‚å¯Ÿï¼Œæˆ‘ä»¬ä¼šæ³¨æ„åˆ°æ¯ä¸ªæ–­è¨€å”¯ä¸€çš„å˜åŒ–æ˜¯æ–°çš„å‚æ•°å’Œé¢„æœŸçš„ç»“æœã€‚</p><p id="b7fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿå¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹åªå£°æ˜å‚æ•°å’Œé¢„æœŸçš„ç»“æœï¼Œç„¶åä»¥åŠ¨æ€çš„æ–¹å¼è°ƒç”¨æ¯ä¸ªç»„åˆçš„æ–­è¨€ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚</p><p id="2e3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è®©æˆ‘ä»¬ä½¿ç”¨<code class="fe mn mo mp me b">it.each</code>æ¥é‡æ„æˆ‘ä»¬çš„æµ‹è¯•:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="a416" class="lb lc iq me b gy mi mj l mk ml">describe('test add method', () =&gt; {<br/>  it.each`<br/>    a     | b     | result<br/>    ${2}  | ${3}  | ${5}<br/>    ${20} | ${30} | ${50}<br/>    ${-2} | ${-3} | ${-5}<br/>  `('should return $result when $a and $b are used', ({a, b, result}) =&gt; {<br/>    expect(add(a, b)).toEqual(result);<br/>  });<br/>});</span></pre><p id="05cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸é”™ï¼ï¼æ›´å°‘çš„æ ·æ¿æ–‡ä»¶ï¼Œå¯è¯»æ€§æ›´å¥½ï¼Œå¯¹å—ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨çœ¨çœ¼ä¹‹é—´æ£€æŸ¥é¢„æœŸçš„ç»“æœã€‚</p><p id="3229" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™å°†åœ¨æ§åˆ¶å°ä¸­è¿”å›ä»¥ä¸‹ç»“æœ:</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/1a84bd0c46f1f6de6c92e7fdc2415394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5YZt87ONVGZuDrxJ6_IP-A.png"/></div></div></figure><h2 id="7e8c" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">å¦‚ä½•åœ¨ReactJSç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼Ÿ</h2><p id="32a3" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹<code class="fe mn mo mp me b">Button</code>ç»„ä»¶:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="c1c1" class="lb lc iq me b gy mi mj l mk ml">import React from 'react';<br/>import cn from 'classnames';<br/>import PropTypes from 'prop-types';</span><span id="853f" class="lb lc iq me b gy mm mj l mk ml">const Button = ({ isPrimary, isDanger, isSuccess }) =&gt; (<br/>  &lt;button<br/>    className={cn('button', {<br/>      'is-primary': isPrimary,<br/>      'is-danger': isDanger,<br/>      'is-success': isSuccess,<br/>    })}<br/>  /&gt;<br/>);</span><span id="1d23" class="lb lc iq me b gy mm mj l mk ml">Button.propTypes = {<br/>  isPrimary: PropTypes.bool,<br/>  isDanger: PropTypes.bool,<br/>  isSuccess: PropTypes.bool,<br/>};</span><span id="aa8d" class="lb lc iq me b gy mm mj l mk ml">Button.defaultProps = {<br/>  isPrimary: false,<br/>  isDanger: false,<br/>  isSuccess: false,<br/>};</span><span id="0091" class="lb lc iq me b gy mm mj l mk ml">export default Button;</span></pre><p id="c43b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨ç¬‘è¯ï¼Œé…¶å’Œã€‚æ¯ä¸ªæ¨¡å¼å¯¹æ‰€æœ‰è¿™äº›ç±»è¿›è¡Œå•å…ƒæµ‹è¯•:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f437" class="lb lc iq me b gy mi mj l mk ml">import React from 'react';<br/>import { shallow } from 'enzyme';<br/>import Button from './Button';</span><span id="5f2f" class="lb lc iq me b gy mm mj l mk ml">let props;</span><span id="6764" class="lb lc iq me b gy mm mj l mk ml">beforeEach(() =&gt; {<br/>  props = {<br/>    isPrimary: false,<br/>    isDanger: false,<br/>    isSuccess: false,<br/>  };<br/>});</span><span id="883f" class="lb lc iq me b gy mm mj l mk ml">describe('test Button component', () =&gt; {<br/>  it.each`<br/>    propName       | propValue | className       | result<br/>    ${'isPrimary'} | ${true}   | ${'is-primary'} | ${true}<br/>    ${'isDanger'}  | ${true}   | ${'is-danger'}  | ${true}<br/>    ${'isSuccess'} | ${true}   | ${'is-success'} | ${true}<br/>  `('should have class $className when prop $propName is equal to $propValue', ({propName, propValue, className, result}) =&gt; {<br/>    props = { ...props, [propName]: propValue };<br/>    <em class="mr">const </em>enzymeWrapper = shallow(&lt;Button {...props} /&gt;);</span><span id="9b7a" class="lb lc iq me b gy mm mj l mk ml">    expect(enzymeWrapper.hasClass(className)).toEqual(result);<br/>  });<br/>});</span></pre><p id="07bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘å¾ˆç¡®å®šä½ å·²ç»çŸ¥é“è¿™æœ‰å¤šå¿«å’Œå¯ä¼¸ç¼©äº†ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›é¢å¤–çš„æ–­è¨€æ¥è¯æ˜è¿™ä¸€ç‚¹:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="9c80" class="lb lc iq me b gy mi mj l mk ml">it.each`<br/>  propName       | propValue | className       | result<br/>  ${'isPrimary'} | ${false}  | ${'is-primary'} | ${false}<br/>  ${'isDanger'}  | ${false}  | ${'is-danger'}  | ${false}<br/>  ${'isSuccess'} | ${false}  | ${'is-success'} | ${false}<br/>`('should have not class $className when prop $propName is equal to $propValue', ({propName, propValue, className, result}) =&gt; {<br/>  props = { ...props, [propName]: propValue };<br/>  <em class="mr">const </em>enzymeWrapper = shallow(&lt;Button {...props} /&gt;);</span><span id="70ca" class="lb lc iq me b gy mm mj l mk ml">  expect(enzymeWrapper.hasClass(className)).toEqual(result);<br/>});</span></pre><p id="9dce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è€å®è¯´ï¼Œè¿™äº›æµ‹è¯•åœ¨ç°å®ç”Ÿæ´»ä¸­å¹¶ä¸é‚£ä¹ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬æ£€æŸ¥çš„æ˜¯<code class="fe mn mo mp me b">classnames</code>åŒ…æ˜¯å¦å®Œæˆäº†å®ƒçš„å·¥ä½œï¼Œè¿™æœ‰ç‚¹è¿‡åº¦å·¥ç¨‹åŒ–ğŸ˜ƒ</p><h2 id="7977" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">ç»“è®º</h2><p id="7599" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">æˆ‘å¾ˆæœ‰ä¿¡å¿ƒï¼Œç°åœ¨ä½ çŸ¥é“å¦‚ä½•åˆ©ç”¨ã€‚å‡å°‘ä½ åœ¨å•å…ƒæµ‹è¯•ä¸­å¿…é¡»ä¸€éåˆä¸€éé‡å¤çš„æ— èŠçš„æ ·æ¿ä»£ç ã€‚å¹²æ¯ï¼ï¼</p></div></div>    
</body>
</html>