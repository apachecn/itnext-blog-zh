<html>
<head>
<title>How Valtio Proxy State Works (Vanilla Part)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Valtioä»£ç†çŠ¶æ€å¦‚ä½•å·¥ä½œ(æ™®é€šéƒ¨åˆ†)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-valtio-proxy-state-works-vanilla-part-585ee38bd080?source=collection_archive---------2-----------------------#2021-08-27">https://itnext.io/how-valtio-proxy-state-works-vanilla-part-585ee38bd080?source=collection_archive---------2-----------------------#2021-08-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="400b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">å‘å¯å˜çŠ¶æ€æ·»åŠ ä¸å˜æ€§</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6a257e4fe50dd3fd24e0d88d35f95ee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IIRQwXo6iab-VOmv.jpg"/></div></div></figure><h1 id="8f56" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">ä»‹ç»</h1><p id="99d3" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">Valtioæ˜¯ä¸€ä¸ªå…¨å±€çŠ¶æ€åº“ï¼Œä¸»è¦ç”¨äºReactã€‚å®ƒæœ€åˆè¢«å»ºæ¨¡ä¸ºä¸<a class="ae mi" href="https://github.com/reactjs/rfcs/blob/master/text/0147-use-mutable-source.md" rel="noopener ugc nofollow" target="_blank"> useMutableSource </a> APIç›¸åŒ¹é…ã€‚ç„¶è€Œï¼Œäº‹å®è¯æ˜è¿™æ˜¯ä¸€ä¸ªæ–°çš„APIï¼Œå®ƒä¸ºå¯å˜çŠ¶æ€å¢åŠ äº†ä¸å˜æ€§ã€‚</p><p id="424a" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">ä»€ä¹ˆæ˜¯ä¸å¯å˜çŠ¶æ€ï¼ŸJavaScriptä¸æ”¯æŒä½œä¸ºè¯­è¨€çš„ä¸å˜æ€§ï¼Œæ‰€ä»¥å®ƒåªæ˜¯ä¸€ä¸ªç¼–ç å¥‘çº¦ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="338a" class="mt kv it mp b gy mu mv l mw mx">const immutableState1 = { count: 0, text: 'hello' };</span><span id="4145" class="mt kv it mp b gy my mv l mw mx">// update the state<br/>const immutableState2 = { ...immutableState1, count: immutableState1.count + 1 };</span><span id="f806" class="mt kv it mp b gy my mv l mw mx">// update it again<br/>const immutableState3 = { ...immutableState2, count: immutableState2.count + 1 };</span></pre><p id="b928" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">æœ‰äº›äººå¯èƒ½å¯¹è¿™ç§æ¨¡å¼å¾ˆç†Ÿæ‚‰ï¼Œä¹Ÿå¯èƒ½å¯¹å…¶ä»–äººæ¥è¯´æ˜¯æ–°çš„ã€‚æˆ‘ä»¬æ€»æ˜¯åœ¨ä¸ä¿®æ”¹ç°æœ‰å¯¹è±¡çš„æƒ…å†µä¸‹åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚è¿™å…è®¸æˆ‘ä»¬æ¯”è¾ƒçŠ¶æ€å¯¹è±¡ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="8d7f" class="mt kv it mp b gy mu mv l mw mx">immutableState1 === immutableState2 // is false<br/>immutableState2 === immutableState3 // is false</span><span id="9a1b" class="mt kv it mp b gy my mv l mw mx">// decrement count<br/>const immutableState4 = { ...immutableState3, count: immutableState3.count - 1 };</span><span id="8c1d" class="mt kv it mp b gy my mv l mw mx">console.log(immutableState4); // shows "{ count: 1, text: 'hello' }"<br/>console.log(immutableState2); // shows "{ count: 1, text: 'hello' }"</span><span id="9889" class="mt kv it mp b gy my mv l mw mx">// however their references are different<br/>immutableState2 === immutableState4 // is false</span></pre><p id="3fd6" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">ä¸å¯å˜çŠ¶æ€çš„å¥½å¤„æ˜¯æ‚¨å¯ä»¥å°†çŠ¶æ€å¯¹è±¡ä¸<code class="fe mz na nb mp b">===</code>è¿›è¡Œæ¯”è¾ƒï¼Œä»¥äº†è§£å…¶ä¸­çš„ä»»ä½•å†…å®¹æ˜¯å¦å¯ä»¥æ›´æ”¹ã€‚</p><p id="1b1b" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">ä¸ä¸å¯å˜çŠ¶æ€ç›¸åï¼Œå¯å˜çŠ¶æ€æ˜¯JavaScriptå¯¹è±¡ï¼Œåœ¨æ›´æ–°æ—¶æ²¡æœ‰ä»»ä½•å¥‘çº¦ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="bbb7" class="mt kv it mp b gy mu mv l mw mx">const mutableState = { count: 0, text: 'hello' };</span><span id="6833" class="mt kv it mp b gy my mv l mw mx">// update the state<br/>mutableState.count += 1;</span><span id="f832" class="mt kv it mp b gy my mv l mw mx">// update it again<br/>mutableState.count += 1;</span></pre><p id="090f" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">ä¸ä¸å¯å˜çŠ¶æ€ä¸åŒï¼Œæˆ‘ä»¬æ”¹å˜çŠ¶æ€å¹¶ä¿æŒç›¸åŒçš„å¯¹è±¡ã€‚å› ä¸ºJavaScriptå¯¹è±¡æœ¬è´¨ä¸Šå°±æ˜¯å¯å˜çš„ï¼Œæ‰€ä»¥å¯å˜çŠ¶æ€æ›´å®¹æ˜“å¤„ç†ã€‚å¯å˜çŠ¶æ€çš„é—®é¢˜æ˜¯ä¸å¯å˜çŠ¶æ€å¥½å¤„çš„å¦ä¸€é¢ã€‚å¦‚æœä½ æœ‰ä¸¤ä¸ªå¯å˜çš„çŠ¶æ€å¯¹è±¡ï¼Œä½ éœ€è¦æ¯”è¾ƒæ‰€æœ‰çš„å±æ€§ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦æœ‰ç›¸åŒçš„å†…å®¹ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="6fb1" class="mt kv it mp b gy mu mv l mw mx">const mutableState1 = { count: 0, text: 'hello' };<br/>const mutableState2 = { count: 0, text: 'hello' };</span><span id="8da1" class="mt kv it mp b gy my mv l mw mx">const isSame = Object.keys(mutableState1).every(<br/>  (key) =&gt; mutableState1[key] === mutableState2[key]<br/>);</span></pre><p id="ca33" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">è¿™å¯¹äºåµŒå¥—å¯¹è±¡æ˜¯ä¸å¤Ÿçš„ï¼Œè€Œä¸”é”®çš„æ•°é‡å¯ä»¥ä¸åŒã€‚ä½ éœ€è¦æ‰€è°“çš„deepEqualæ¥æ¯”è¾ƒä¸¤ä¸ªå¯å˜å¯¹è±¡ã€‚</p><p id="cf72" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">å¯¹äºå¤§å‹å¯¹è±¡ï¼ŒdeepEqualä¸æ˜¯å¾ˆæœ‰æ•ˆã€‚ä¸å¯å˜å¯¹è±¡åœ¨è¿™é‡Œå¤§æ”¾å¼‚å½©ï¼Œå› ä¸ºè¿™ç§æ¯”è¾ƒæ—¢ä¸ä¾èµ–äºå¯¹è±¡çš„å¤§å°ä¹Ÿä¸ä¾èµ–äºå¯¹è±¡çš„æ·±åº¦ã€‚</p><p id="7842" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">å› æ­¤ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨å¯å˜çŠ¶æ€å’Œä¸å¯å˜çŠ¶æ€ä¹‹é—´æ¶èµ·ä¸€åº§æ¡¥æ¢ã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›ä»å¯å˜çŠ¶æ€è‡ªåŠ¨åˆ›å»ºä¸å¯å˜çŠ¶æ€ã€‚</p><h1 id="8c7a" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">æ£€æµ‹çªå˜</h1><p id="882d" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">ä»£ç†æ˜¯ä¸€ç§æ•è·å¯¹è±¡æ“ä½œçš„æ–¹æ³•ã€‚æˆ‘ä»¬ä½¿ç”¨<code class="fe mz na nb mp b">set</code>å¤„ç†ç¨‹åºæ¥æ£€æµ‹çªå˜ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="29f8" class="mt kv it mp b gy mu mv l mw mx">const p = new Proxy({}, {<br/>  set(target, prop, value) {<br/>    console.log('setting', prop, value);<br/>    target[prop] = value;<br/>  },<br/>});</span><span id="1a67" class="mt kv it mp b gy my mv l mw mx">p.a = 1; // shows "setting a 1"</span></pre><p id="cea4" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">æˆ‘ä»¬éœ€è¦è·Ÿè¸ªå¯¹è±¡æ˜¯å¦å‘ç”Ÿäº†å˜å¼‚ï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ªç‰ˆæœ¬å·ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="4810" class="mt kv it mp b gy mu mv l mw mx">let version = 0;<br/>const p = new Proxy({}, {<br/>  set(target, prop, value) {<br/>    ++version;<br/>    target[prop] = value;<br/>  },<br/>});</span><span id="131c" class="mt kv it mp b gy my mv l mw mx">p.a = 10;<br/>console.log(version); // ---&gt; 1<br/>++p.a;<br/>console.log(version); // ---&gt; 2</span></pre><p id="38b2" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">è¿™ä¸ªç‰ˆæœ¬å·æ˜¯é’ˆå¯¹å¯¹è±¡æœ¬èº«çš„ï¼Œå¹¶ä¸å…³å¿ƒå“ªä¸ªå±æ€§è¢«æ›´æ”¹ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="bc58" class="mt kv it mp b gy mu mv l mw mx">// continued<br/>++p.a;<br/>console.log(version); // ---&gt; 3<br/>p.b = 20;<br/>console.log(version); // ---&gt; 4</span></pre><p id="8deb" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">ç”±äºæˆ‘ä»¬ç°åœ¨å¯ä»¥è·Ÿè¸ªçªå˜ï¼Œä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„çŠ¶æ€ã€‚</p><h1 id="285a" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">åˆ›å»ºå¿«ç…§</h1><p id="69da" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">æˆ‘ä»¬ç§°å¯å˜çŠ¶æ€çš„ä¸å¯å˜çŠ¶æ€ä¸ºå¿«ç…§ã€‚å¦‚æœæˆ‘ä»¬æ£€æµ‹åˆ°çªå˜ï¼Œå³ç‰ˆæœ¬å·æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¿«ç…§ã€‚</p><p id="1a66" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">åˆ›å»ºå¿«ç…§åŸºæœ¬ä¸Šå°±æ˜¯å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œè®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬çš„å¯¹è±¡ä¸æ˜¯åµŒå¥—çš„ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="01e0" class="mt kv it mp b gy mu mv l mw mx">let version = 0;<br/>let lastVersion;<br/>let lastSnapshot;<br/>const p = new Proxy({}, {<br/>  set(target, prop, value) {<br/>    ++version;<br/>    target[prop] = value;<br/>  },<br/>});<br/>const snapshot = () =&gt; {<br/>  if (lastVersion !== version) {<br/>    lastVersion = version;<br/>    lastSnapshot = { ...p };<br/>  }<br/>  return lastSnapshot;<br/>};</span><span id="d70b" class="mt kv it mp b gy my mv l mw mx">p.a = 10;<br/>console.log(snapshot()); // ---&gt; { a: 10 }<br/>p.b = 20;<br/>console.log(snapshot()); // ---&gt; { a: 10, b: 20 }<br/>++p.a;<br/>++p.b;<br/>console.log(snapshot()); // ---&gt; { a: 11, b: 21 }</span></pre><p id="0e86" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><code class="fe mz na nb mp b">snapshot</code>æ˜¯ä¸€ä¸ªåˆ›å»ºå¿«ç…§å¯¹è±¡çš„å‡½æ•°ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¿«ç…§å¯¹è±¡ä»…åœ¨è°ƒç”¨<code class="fe mz na nb mp b">snapshot</code>æ—¶åˆ›å»ºã€‚åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åšå°½å¯èƒ½å¤šçš„çªå˜ï¼Œè¿™åªä¼šå¢åŠ <code class="fe mz na nb mp b">version</code>ã€‚</p><h1 id="2a67" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">è®¢é˜…</h1><p id="96fe" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬ä¸çŸ¥é“çªå˜ä½•æ—¶å‘ç”Ÿã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬ä¼šæƒ³åšäº›ä»€ä¹ˆã€‚å¯¹æ­¤ï¼Œæˆ‘ä»¬æœ‰è®¢é˜…ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="24a9" class="mt kv it mp b gy mu mv l mw mx">let version = 0;<br/>const listeners = new Set();<br/>const p = new Proxy({}, {<br/>  set(target, prop, value) {<br/>    ++version;<br/>    target[prop] = value;<br/>    listeners.forEach((listener) =&gt; listener());<br/>  },<br/>});<br/>const subscribe = (callback) =&gt; {<br/>  listeners.add(callback);<br/>  const unsubscribe = () =&gt; listeners.delete(callback);<br/>  return unsubscribe;<br/>};</span><span id="60fa" class="mt kv it mp b gy my mv l mw mx">subscribe(() =&gt; {<br/>  console.log('mutated!');<br/>});</span><span id="0d17" class="mt kv it mp b gy my mv l mw mx">p.a = 10; // shows "mutated!"<br/>++p.a; // shows "mutated!"<br/>p.b = 20; // shows "mutated!"</span></pre><p id="db9a" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">ç»„åˆ<code class="fe mz na nb mp b">snapshot</code>å’Œ<code class="fe mz na nb mp b">subscribe</code>å…è®¸æˆ‘ä»¬è¿æ¥å¯å˜çŠ¶æ€æ¥åšå‡ºååº”ã€‚</p><p id="d13c" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">æˆ‘ä»¬å°†åœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»valtioå¦‚ä½•ä½¿ç”¨Reactã€‚</p><h1 id="4b09" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">å¤„ç†åµŒå¥—å¯¹è±¡</h1><p id="5e4a" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ä¾‹å­æ˜¯ç®€å•å¯¹è±¡ï¼Œå…¶å±æ€§æ˜¯åŸå§‹å€¼ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨åµŒå¥—å¯¹è±¡ï¼Œè¿™æ˜¯ä¸å¯å˜çŠ¶æ€çš„å¥½å¤„ã€‚</p><p id="3561" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">åµŒå¥—å¯¹è±¡çœ‹èµ·æ¥åƒè¿™æ ·ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="8799" class="mt kv it mp b gy mu mv l mw mx">const obj = {<br/>  a: { b: 1 },<br/>  c: { d: { e: 2 } },<br/>};</span></pre><p id="6494" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">æˆ‘ä»¬ä¹Ÿæƒ³ä½¿ç”¨æ•°ç»„ã€‚</p><p id="33ce" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">Valtioæ”¯æŒåµŒå¥—å¯¹è±¡å’Œæ•°ç»„ã€‚å¦‚æœæ‚¨å¯¹å®ƒæ˜¯å¦‚ä½•å®ç°çš„æ„Ÿå…´è¶£ï¼Œè¯·æŸ¥çœ‹æºä»£ç ã€‚</p><div class="nc nd gp gr ne nf"><a href="https://github.com/pmndrs/valtio" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">GitHub - pmndrs/valtio:ğŸ’ŠValtioä¸ºReactå’ŒVanillaç®€åŒ–äº†ä»£ç†çŠ¶æ€</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">npm i valtioä½¿ä»£ç†çŠ¶æ€å˜å¾—ç®€å•valtioæŠŠä½ ä¼ é€’çš„å¯¹è±¡å˜æˆä¸€ä¸ªè‡ªæˆ‘æ„ŸçŸ¥çš„ä»£ç†ã€‚ä½ å¯ä»¥åšå‡ºæ”¹å˜â€¦</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">github.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt ks nf"/></div></div></a></div><h1 id="d343" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">ç»“æŸè¯­</h1><p id="6550" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬åœ¨ç¤ºä¾‹ä¸­ä½¿ç”¨äº†ç®€å•çš„ä»£ç ã€‚è¯¥å®ç°åšäº†æ›´å¤šçš„äº‹æƒ…æ¥å¤„ç†å„ç§æƒ…å†µã€‚å®ƒä»ç„¶æ˜¯æœ€ä½çš„ã€‚</p><p id="e4b6" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">å®é™…çš„APIéå¸¸æ¥è¿‘ç¤ºä¾‹ä»£ç ã€‚ä¸‹é¢æ˜¯TypeScriptä¸­ç²—ç•¥çš„ç±»å‹å®šä¹‰ã€‚</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="82a7" class="mt kv it mp b gy mu mv l mw mx">function proxy&lt;T&gt;(initialObject: T): T;</span><span id="af9a" class="mt kv it mp b gy my mv l mw mx">function snapshot&lt;T&gt;(proxyObject: T): T;</span><span id="cbeb" class="mt kv it mp b gy my mv l mw mx">function subscribe&lt;T&gt;(proxyObject: T, callback: () =&gt; void): () =&gt; void;</span></pre><p id="e610" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†valtioçš„é¦™è‰éƒ¨åˆ†ã€‚å¸Œæœ›å°½å¿«å†™ä¸‹ååº”éƒ¨åˆ†ã€‚</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="0849" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><em class="ob">åŸè½½äº2021å¹´8æœˆ27æ—¥</em><a class="ae mi" href="https://blog.axlight.com/posts/how-valtio-proxy-state-works-vanilla-part/" rel="noopener ugc nofollow" target="_blank"><em class="ob">ã€https://blog.axlight.comã€‘</em></a><em class="ob">ã€‚</em></p></div></div>    
</body>
</html>