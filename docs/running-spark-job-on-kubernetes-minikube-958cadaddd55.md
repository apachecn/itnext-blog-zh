# åœ¨ Minikube Kubernetes é›†ç¾¤ä¸Šè¿è¡Œ Spark ä½œä¸š

> åŸæ–‡ï¼š<https://itnext.io/running-spark-job-on-kubernetes-minikube-958cadaddd55?source=collection_archive---------3----------------------->

![](img/35fd461374a86184015103de5548a598.png)

ç…§ç‰‡ç”±[å¤ä¼Šåˆ—æ¢…Â·å´”æ—](https://unsplash.com/@guiccunha?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

[*ç‚¹å‡»è¿™é‡Œåœ¨ LinkedIn ä¸Šåˆ†äº«è¿™ç¯‡æ–‡ç« *](https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Frunning-spark-job-on-kubernetes-minikube-958cadaddd55)

ubernetes æ˜¯æœ€è¿‘çš„å¦ä¸€ä¸ªè¡Œä¸šæµè¡Œè¯­ï¼Œæˆ‘æ­£åœ¨ç”¨ Kubernetes å°è¯•ä¸€äº›ä¸åŒçš„ä¸œè¥¿ã€‚2018 å¹´ 2 æœˆ 28 æ—¥ï¼ŒApache spark å‘å¸ƒäº† v2.3.0ï¼Œæˆ‘å·²ç»åœ¨ä»äº‹ Apache spark çš„å·¥ä½œï¼Œæ–°å‘å¸ƒçš„ç‰ˆæœ¬å¢åŠ äº†æ–°çš„ kubernetes è°ƒåº¦å™¨åç«¯ï¼Œæ”¯æŒ Spark ä½œä¸šå‘ Kubernetes ç®¡ç†çš„é›†ç¾¤çš„åŸç”Ÿæäº¤ã€‚è¯¥åŠŸèƒ½ç›®å‰ä»å¤„äºè¯•éªŒé˜¶æ®µï¼Œä½†æˆ‘æƒ³å°è¯•ä¸€ä¸‹ã€‚

æˆ‘å†™è¿™ç¯‡æ–‡ç« æ˜¯å› ä¸ºæˆ‘å¿…é¡»æœç´¢å¾ˆå¤šä¸œè¥¿æ‰èƒ½è®©å®ƒå·¥ä½œï¼Œè€Œä¸”æ²¡æœ‰ä¸€ä¸ªåœ°æ–¹å¯ä»¥è·å¾—å…³äºå¦‚ä½•åœ¨æœ¬åœ° kubernetes é›†ç¾¤ä¸Šè¿è¡Œ spark job çš„ç¡®åˆ‡ä¿¡æ¯ã€‚æˆ‘è®¤ä¸ºå†™ä¸€ç¯‡å…³äºæˆ‘çš„å‘ç°çš„æ–‡ç« å¯ä»¥è®©å…¶ä»–äººä¸ç»å†å’Œæˆ‘ä¸€æ ·çš„ç—›è‹¦ã€‚

æˆ‘ä»¬å°†äº†è§£å¦‚ä½•åœ¨æœ¬åœ°æœºå™¨ä¸Šä½¿ç”¨ minikube è®¾ç½® Kubernetes é›†ç¾¤ï¼Œä»¥åŠå¦‚ä½•åœ¨å…¶ä¸Šè¿è¡Œ apache spark ä½œä¸šã€‚æˆ‘ä»¬ä¸æ‰“ç®—ä¸ºæ­¤ç¼–å†™ä»»ä½•ä»£ç ï¼ŒApache Spark å‘è¡Œç‰ˆä¸­å·²ç»æœ‰å‡ ä¸ªå¯ç”¨çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åŒä¸€ä¸ªç¤ºä¾‹ jar å¹¶åœ¨æˆ‘ä»¬çš„ kubernetes é›†ç¾¤ä¸Šè¿è¡Œâ€œSparkPiâ€ç¨‹åºã€‚

## å…ˆå†³æ¡ä»¶

åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„æœ¬åœ°è®¡ç®—æœºä¸Šå®‰è£…äº†ä»¥ä¸‹å…ˆå†³æ¡ä»¶ã€‚

> æˆ‘åœ¨ Mac High Sierra ä¸Šè¿è¡Œå·¥å…·ã€‚

*   Apache Spark(2 . 3 . 0 ç‰ˆ)
*   Kubernetes(ç¬¬ 1.9.3 ç‰ˆ)
*   Docker (v17.12.X CE)
*   è¿·ä½ åº“è´
*   VirtualBox

# å¯åŠ¨ Minikube

æˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•åœ°è¿è¡Œä¸‹é¢çš„å‘½ä»¤åœ¨æœ¬åœ°å¯åŠ¨ minikubeã€‚

Minikube æ˜¯ä¸€ä¸ªè®©æœ¬åœ°è¿è¡Œ Kubernetes å˜å¾—å®¹æ˜“çš„å·¥å…·ã€‚Minikube åœ¨æœ¬åœ°æœºå™¨ä¸Šçš„ä¸€ä¸ª VM ä¸­è¿è¡Œä¸€ä¸ªå•èŠ‚ç‚¹ Kubernetes é›†ç¾¤ã€‚å®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿå°è¯• Kubernetes æˆ–ç”¨å®ƒè¿›è¡Œæ—¥å¸¸å¼€å‘ã€‚

å½“ minikube å¯åŠ¨æ—¶ï¼Œå®ƒä»¥å•èŠ‚ç‚¹é…ç½®å¯åŠ¨ï¼Œé»˜è®¤æƒ…å†µä¸‹å ç”¨`1Gb`å†…å­˜å’Œ`2`CPU å†…æ ¸ï¼Œä½†æ˜¯ï¼Œå¯¹äºè¿è¡Œ sparkï¼Œè¿™ä¸€è¦æ±‚æ˜¯ä¸å¤Ÿçš„ï¼Œä½œä¸šå°†å¤±è´¥(æ­£å¦‚æˆ‘å¤šæ¬¡å°è¯•çš„é‚£æ ·)ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»ä¸º minikube é›†ç¾¤å¢åŠ å†…å­˜å’Œ CPU å†…æ ¸ã€‚

æœ‰ä¸‰ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ç„¶è€Œï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å·¥ä½œï¼Œè¿™å°±æ˜¯æˆ‘å¦‚ä½•çŸ¥é“ä¸åŒçš„æ–¹å¼æ¥æ”¹å˜ minikube é…ç½®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»»ä½•ä¸€ç§æ–¹æ³•æ¥æ›´æ”¹é…ç½®ã€‚

## 1.å°†é…ç½®ä¼ é€’ç»™ Minikube å¯åŠ¨å‘½ä»¤

æ‚¨å¯ä»¥ç›´æ¥å°†å†…å­˜å’Œ CPU é€‰é¡¹ä¼ é€’ç»™ minikube start å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤º:

è¿™å°†å¯åŠ¨ä¸€ä¸ªå…·æœ‰ 8Gb å†…å­˜å’Œ 4 ä¸ª CPU å†…æ ¸çš„ minikube é›†ç¾¤(ä¸çŸ¥ä½•æ•…å¯¹æˆ‘æ¥è¯´è¿™ä¸èµ·ä½œç”¨)ã€‚

## 2.ä¿®æ”¹ Minikube é…ç½®

æˆ‘ä»¬å¯ä»¥åœ¨ minikube cli ä¸­ä½¿ç”¨`config`å‘½ä»¤æ›´æ”¹ minikube é…ç½®ã€‚`config`å‘½ä»¤å…è®¸ä¸º minikube è®¾ç½®ä¸åŒçš„é…ç½®é€‰é¡¹ï¼Œå¦‚å†…å­˜ã€CPUã€è™šæ‹Ÿæœºé©±åŠ¨ç¨‹åºã€ç£ç›˜å¤§å°ç­‰ã€‚è¦æŸ¥çœ‹æ‰€æœ‰å¯ç”¨é€‰é¡¹ï¼Œä½¿ç”¨`> minikube config`å‘½ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰å¯ä¿®æ”¹çš„å¯ç”¨é€‰é¡¹ã€‚

ä½¿ç”¨`config`å‘½ä»¤è®¾ç½®é…ç½®åï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤ä¹‹å‰è¿è¡Œçš„é›†ç¾¤å¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„é›†ç¾¤ã€‚è¦åˆ é™¤ minikube é›†ç¾¤ï¼Œè¿è¡Œ`> minikube delete`å¹¶é‡æ–°è¿è¡Œ start minikube å‘½ä»¤ã€‚

## 3.ä½¿ç”¨ VirtualBox æ›´æ”¹é…ç½®

å¯¹æˆ‘æ¥è¯´ï¼Œä»¥ä¸Šä¸¤ä¸ªé€‰é¡¹éƒ½ä¸èµ·ä½œç”¨ï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨æœ€åä¸€ä¸ªé€‰é¡¹ï¼Œè¿™ä¸ªé€‰é¡¹å¯¹æˆ‘æœ‰æ•ˆï¼Œå¸Œæœ›å¯¹ä½ ä¹Ÿæœ‰æ•ˆã€‚åœ¨ä½ çš„æœºå™¨ä¸Šæ‰“å¼€ VirtualBox åº”ç”¨ç¨‹åºï¼Œé€‰æ‹©ä½ çš„è™šæ‹Ÿæœºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚`RightClick -> Settings`åœ¨æ‚¨çš„è™šæ‹Ÿæœºä¸Šï¼Œè¿™å°†æ‰“å¼€ Minikube è™šæ‹Ÿæœºçš„é…ç½®é¡µé¢ã€‚

> æ³¨æ„:è¦ä½¿ç”¨ VirtualBox æ›´æ”¹é…ç½®ï¼Œé¦–å…ˆéœ€è¦å…³é—­æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºã€‚

![](img/c7a3fce40ec3310583cbb29f390a5afd.png)

åœ¨é€‰é¡¹`System -> Motherboard`ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨æ»‘å—æ”¹å˜è™šæ‹Ÿæœºçš„å†…å­˜ï¼Œåœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘ç»™äº†å®ƒ`8192MB`çš„å†…å­˜ã€‚

![](img/a7feb2c40d0b5a4d300e78c7c48e8f90.png)

è¦æ›´æ”¹ CPU é…ç½®ï¼Œè½¬åˆ°`Processor`é€‰é¡¹å¡å¹¶å°†å…¶æ›´æ”¹ä¸º`4`ã€‚ä½ ä¹Ÿå¯ä»¥ä¸ºæˆ‘å°è¯•å…¶ä»–çš„é€‰æ‹©ã€‚ä¸è¦å°†å…¶æ›´æ”¹ä¸ºå°äº 2ï¼Œå¦åˆ™å°†æ— æ³•å·¥ä½œã€‚ğŸ˜›

![](img/64f31486314b1ce41b267da7b8624ba8.png)

é…ç½®æ›´æ”¹å®Œæˆåï¼Œä½¿ç”¨ VirtualBox app æˆ–ä½¿ç”¨ä¸Šé¢ç»™å‡ºçš„`> minikube start`å‘½ä»¤å¯åŠ¨è™šæ‹Ÿæœºã€‚

æ‚¨çš„é›†ç¾¤æ­£åœ¨è¿è¡Œï¼Œç°åœ¨æ‚¨éœ€è¦æœ‰ä¸€ä¸ª spark çš„ docker æ˜ åƒã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ„å»ºå›¾åƒã€‚

# ä¸º Spark åˆ›å»º Docker å›¾åƒ

ç¡®ä¿æ‚¨çš„æœºå™¨ä¸Šå®‰è£…äº† Dockerï¼Œå¹¶ä¸”æå–äº†ç«èŠ±åˆ†å¸ƒã€‚

è¿›å…¥è§£å‹åçš„ spark æ–‡ä»¶å¤¹ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ª spark docker æ˜ åƒ

> ä¸€äº›è¾“å‡ºæ—¥å¿—è¢«æ’é™¤åœ¨å¤–ã€‚

å¦‚æœæ‚¨è¿è¡Œ`> docker image ls`ï¼Œæ‚¨å°†çœ‹åˆ° docker æ„å»ºç°åœ¨æ˜¯å¯ç”¨çš„ã€‚è®°ä¸‹è¿™ä¸ªå›¾åƒåï¼Œæˆ‘ä»¬éœ€è¦å°†å›¾åƒåæä¾›ç»™`spark-submit`å‘½ä»¤ã€‚

ä¸Šé¢çš„å‘½ä»¤æœ‰ä¸€ä¸ª`push`é€‰é¡¹ï¼Œå®ƒä½¿æ‚¨èƒ½å¤Ÿå°† docker æ˜ åƒæ¨é€åˆ°æ‚¨è‡ªå·±çš„å­˜å‚¨åº“ä¸­ï¼Œè¿™åè¿‡æ¥å°†ä½¿æ‚¨çš„ç”Ÿäº§ kubernetes èƒ½å¤Ÿä»å·²é…ç½®çš„ docker å­˜å‚¨åº“ä¸­æå– Docker æ˜ åƒã€‚è¿è¡Œä¸å¸¦ä»»ä½•é€‰é¡¹çš„ç›¸åŒå‘½ä»¤æ¥æŸ¥çœ‹å…¶ç”¨æ³•ã€‚

è¯¥å‘½ä»¤å¯èƒ½ä¼šä¸èµ·ä½œç”¨ï¼Œå¹¶ç»™å‡ºå¦‚ä¸‹é”™è¯¯:

è¿™æ˜¯å› ä¸º`docker-image-tool.sh`æ–‡ä»¶æœ‰é—®é¢˜ã€‚æˆ‘åœ¨ Apache Spark JIRA æå‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ã€‚

è¿™ä¸ªé—®é¢˜æ­£åœ¨ä¿®å¤ä¸­ï¼Œä½†æ˜¯ï¼Œä¸ºäº†ç»§ç»­è¿™ç¯‡æ–‡ç« ï¼Œä½ å¯ä»¥åšçš„æ˜¯æ‰“å¼€`bin`æ–‡ä»¶å¤¹ä¸­çš„`docker-image-tool.sh`æ–‡ä»¶ï¼Œåœ¨ç¬¬`59`è¡Œåæ·»åŠ `BUILD_ARGS=()`ï¼Œä¿å­˜æ–‡ä»¶å¹¶å†æ¬¡è¿è¡Œå‘½ä»¤ï¼Œå®ƒå°±ä¼šå·¥ä½œã€‚

å¯¹äºé‚£äº›äººæ¥è¯´ï¼Œå¦‚æœä¸Šé¢çš„å‘½ä»¤åœ¨æ²¡æœ‰è§£å†³æ–¹æ³•çš„æƒ…å†µä¸‹ä¹Ÿèƒ½å·¥ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å¯èƒ½åœ¨ä½ è¯»è¿™ç¯‡æ–‡ç« çš„æ—¶å€™å°±å·²ç»è§£å†³äº†ï¼Œä½ ä¸éœ€è¦åšä»»ä½•äº‹æƒ…ï¼ï¼ï¼

# æäº¤ Spark ä½œä¸š

ç°åœ¨è®©æˆ‘ä»¬å‘é›†ç¾¤æäº¤æˆ‘ä»¬çš„`SparkPi`ä½œä¸šã€‚æˆ‘ä»¬çš„é›†ç¾¤å·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬æœ‰äº† docker æ˜ åƒã€‚è¿è¡Œä¸‹é¢çš„å‘½ä»¤åœ¨ kubernetes é›†ç¾¤ä¸Šæäº¤ spark ä½œä¸šã€‚`spark-submit`è„šæœ¬è´Ÿè´£è®¾ç½® Spark çš„ç±»è·¯å¾„åŠå…¶ä¾èµ–é¡¹ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒ Spark æ”¯æŒçš„ä¸åŒé›†ç¾¤ç®¡ç†å™¨å’Œéƒ¨ç½²æ¨¡å¼:

ç”¨äºåœ¨ kubernetes ä¸Šè¿è¡Œçš„é€‰é¡¹æœ‰:

*   `--class`:åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹(ä¾‹å¦‚ org . Apache . spark . examples . sparkpi)
*   `-- master`:Kubernetes é›†ç¾¤çš„ä¸» URL(ä¾‹å¦‚ k8s://[https://192 . 168 . 99 . 100:8443](https://192.168.99.100:8443))
*   `-- deploy-mode`:æ˜¯å°†é©±åŠ¨ç¨‹åºéƒ¨ç½²åœ¨å·¥ä½œèŠ‚ç‚¹(é›†ç¾¤)ä¸Šï¼Œè¿˜æ˜¯ä½œä¸ºå¤–éƒ¨å®¢æˆ·ç«¯(å®¢æˆ·ç«¯)éƒ¨ç½²åœ¨æœ¬åœ°(é»˜è®¤:å®¢æˆ·ç«¯)
*   `-- conf spark.executor.instances=3`:é…ç½®å±æ€§ï¼ŒæŒ‡å®šåœ¨è¿è¡Œ spark ä½œä¸šæ—¶ä½¿ç”¨å¤šå°‘ä¸ªæ‰§è¡Œå™¨å®ä¾‹ã€‚
*   `- - conf spark.kubernetes.container.image=spark-docker`:é…ç½®å±æ€§ï¼ŒæŒ‡å®šä½¿ç”¨å“ªä¸ª docker å›¾åƒï¼Œæ­¤å¤„æä¾›æ¥è‡ªâ€˜docker å›¾åƒ lsâ€™å‘½ä»¤çš„ç›¸åŒ docker åç§°ã€‚
*   `local:///opt/spark/examples/jars/spark-examples_2.11â€“2.3.0.jar`:åŒ…å«åº”ç”¨ç¨‹åºå’Œæ‰€æœ‰ä¾èµ–é¡¹çš„æ†ç»‘ jar çš„è·¯å¾„ã€‚URL å¿…é¡»åœ¨é›†ç¾¤å†…éƒ¨å…¨å±€å¯è§ï¼Œä¾‹å¦‚ï¼Œhdfs:// path æˆ–æ‰€æœ‰èŠ‚ç‚¹ä¸Šéƒ½å­˜åœ¨çš„ local:// pathã€‚

åŒ… jar åº”è¯¥å¯ä»¥é€šè¿‡ HDFSã€HTTP åœ¨é›†ç¾¤èŒƒå›´å†…ä½¿ç”¨ï¼Œæˆ–è€…åº”è¯¥å¯ä»¥åœ¨æ¯ä¸ªæ‰“åŒ…çš„ docker æ˜ åƒä¸­ä½¿ç”¨ï¼Œä»¥ä¾¿å®ƒå¯ä»¥ç”¨äºæˆ‘ä»¬ spark ç¨‹åºä¸­çš„æ‰€æœ‰ executor èŠ‚ç‚¹ã€‚â€œlocal://â€åœ°å€æ„å‘³ç€ spark é©±åŠ¨ç¨‹åºå¯ä»¥å°† jar ä½œä¸ºæœ¬åœ°æ–‡ä»¶åœ¨æ¯ä¸ªå·²åˆå§‹åŒ–çš„ pod ä¸Šä½¿ç”¨ï¼Œå¹¶ä¸”ä¸éœ€è¦ IO ä»ä»»ä½•åœ°æ–¹æ‹‰ jarï¼Œè¿™åœ¨åº”ç”¨ç¨‹åº jar å¾ˆå¤§æ—¶å·¥ä½œè‰¯å¥½ï¼Œåº”ç”¨ç¨‹åº jar è¢«æ¨é€åˆ°æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹æˆ–ä½¿ç”¨ä»»ä½•å…±äº«æ–‡ä»¶ç³»ç»Ÿå…±äº«ã€‚

å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬çš„ spark docker æ˜ åƒæ–‡ä»¶å°†ç¤ºä¾‹ jar æ‰“åŒ…åœ¨ docker å®¹å™¨ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒã€‚ç„¶è€Œï¼Œå¦‚ä½•åŒ…è£…æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨ç¨‹åºä»£ç ï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨ HDFS ä¸Šæˆ–ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ docker å›¾åƒï¼Œæˆ‘å°†æŠŠå®ƒä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å¸–å­æ¥å†™ã€‚

è¦æ£€æŸ¥ pods æ˜¯å¦å·²å¯åŠ¨ä»¥åŠ spark ä½œä¸šæ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œè¯·æ‰“å¼€ minikube ä¸­çš„ kubernetes dashboardã€‚

# æŸ¥çœ‹ Minikube ä»ªè¡¨æ¿å’Œ Kubernetes æ—¥å¿—

è¦æ£€æŸ¥æˆ‘ä»¬æäº¤çš„ä½œä¸šçš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ kubernetes ä»ªè¡¨æ¿æˆ–æŸ¥çœ‹ kubernetes æ—¥å¿—ã€‚Minikube é™„å¸¦äº†ä½œä¸ºæ’ä»¶çš„ dashboardï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨ã€‚

![](img/38f7a3873df491ffdc48196bc5f1a927.png)

ç”¨äº SparkPi ä½œä¸šçš„ Kuberenetes Pod

å¯¼èˆªåˆ°ä¸Šè¿°å‘½ä»¤ç»™å‡ºçš„ URL ä»¥æŸ¥çœ‹ä»ªè¡¨æ¿ã€‚ä»ªè¡¨æ¿æä¾›äº†å¤§é‡å…³äºé›†ç¾¤å†…å­˜ä½¿ç”¨ã€CPU ä½¿ç”¨ã€podã€æœåŠ¡ã€å‰¯æœ¬é›†ç­‰ä¿¡æ¯ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥é€šè¿‡æ§åˆ¶é¢æ¿æŸ¥çœ‹æœåŠ¡æ—¥å¿—ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä¸æƒ³è¿›å…¥ä»ªè¡¨æ¿ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`> kubectl logs <pod name>` å‘½ä»¤æŸ¥çœ‹ Spark Driver æ—¥å¿—:

å¦‚æœä½ åœ¨æ—¥å¿—ä¸­çœ‹åˆ°ç¨‹åºå·²ç»è®¡ç®—äº†åœ†å‘¨ç‡å€¼ï¼Œå®¹å™¨æœ€ç»ˆåœæ­¢ã€‚

# å…³é—­é›†ç¾¤

å…³é—­é›†ç¾¤éå¸¸å®¹æ˜“ï¼Œä½¿ç”¨`> minikube stop`å®ƒå°†åœæ­¢é›†ç¾¤ã€‚

å¸Œæœ›è¿™æœ‰åŠ©äºæ‚¨å°è¯•åœ¨æœ¬åœ° kubernetes é›†ç¾¤ä¸Šè¿è¡Œ apache sparkã€‚å¦‚æœä½ ä¸æ˜ç™½ä»»ä½•æ­¥éª¤æˆ–åœ¨éµå¾ªè¿™äº›æ­¥éª¤æ—¶å‡ºç°ä»»ä½•é”™è¯¯ï¼Œè¯·å‘è¡¨è¯„è®ºï¼Œæˆ‘ä¼šå°½é‡åœ¨å¸–å­ä¸­æ·»åŠ æ›´å¤šç»†èŠ‚ã€‚æ­¤å¤–ï¼Œè¯·è®©æˆ‘çŸ¥é“ä½ æ˜¯å¦å–œæ¬¢å®ƒï¼Œå¹¶é€šè¿‡åˆ†äº«æ¥å¸®åŠ©ä»–äººã€‚

å¿«ä¹ç¼–ç â€¦

# å‚è€ƒ

1.  [é˜¿å¸•å¥‡ Spark æ–‡æ¡£](https://spark.apache.org/docs/latest/running-on-kubernetes.html)
2.  [Minikube Github](https://github.com/kubernetes/minikube)

***åŸå¸–å‡ºè‡ª:***[***iamninad.com***](https://iamninad.com/running-spark-job-on-kubernetes-minikube/)