# ä½¿ç”¨ Reactã€ExpressJS å’Œ MongoDB æ¸…ç†ä»£ç â€”ç¬¬ 1 éƒ¨åˆ†

> åŸæ–‡ï¼š<https://itnext.io/clean-code-with-react-expressjs-and-mongodb-part-1-aa6b1a4aef82?source=collection_archive---------4----------------------->

![](img/48239f8a1815ef8887b5e5bca2ab574f.png)

> [*ç‚¹å‡»è¿™é‡Œåœ¨ LinkedIn ä¸Šåˆ†äº«è¿™ç¯‡æ–‡ç« *](https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fclean-code-with-react-expressjs-and-mongodb-part-1-aa6b1a4aef82%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer)

è¿™æ˜¯ä¸€ä¸ªç®€çŸ­ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œé‡ç‚¹æ˜¯ä½¿ç”¨ ES6+ Javascriptã€Reactã€Reduxã€ExpressJS å’Œ MongoDB åˆ›å»ºå’Œéƒ¨ç½²ä¸€ä¸ªå‡†ç³»ç»Ÿçš„å…¨æ ˆåšå®¢ç«™ç‚¹ã€‚

åœ¨è¿™äº›æ–‡ç« ä¸­ï¼Œæˆ‘çœŸçš„è¯•å›¾æŠŠé‡ç‚¹æ”¾åœ¨æˆ‘å‘ç°çš„ä½¿ç”¨ ES6+ JavaScript å’Œæˆ‘ç§°ä¹‹ä¸ºâ€œRedux é£æ ¼â€çš„é¡¹ç›®ç»“æ„æ¥è®¾ç½®å’Œç»„ç»‡æˆ‘çš„ä»£ç çš„ä¸€äº›æ–¹æ³•ä¸Šã€‚ç›®æ ‡æ˜¯ç¼–å†™å¯è¯»ã€å¯æ‰©å±•ä¸”æ˜“äºæµ‹è¯•çš„ä»£ç ã€‚

è¿™ä¸ªç³»åˆ—å°†åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†:

1.  è®¾ç½® ExpressJS ä»¥ä½¿ç”¨ ES6+è¯­æ³•ğŸ‘ˆğŸ½*ä½ åœ¨è¿™é‡Œ*
2.  [Redux é£æ ¼çš„æ–‡ä»¶ç»“æ„](/clean-code-with-react-expressjs-and-mongodb-part-2-89d20e684820)
3.  [åˆ›å»ºç®€å•å¿«é€ŸæœåŠ¡å™¨](/clean-code-with-es6-expressjs-reactjs-part-3-2306b1f62c26)
4.  ç”¨æˆ‘ä»¬çš„åšå®¢è®¾ç½® Mongoose(å³å°†æ¨å‡ºï¼)
5.  ç”¨ CMS åˆ›å»ºä¸€ä¸ª React åšå®¢(å³å°†æ¨å‡ºï¼)
6.  å°† Redux æ·»åŠ åˆ°æ‚¨çš„å‰ç«¯(å³å°†æ¨å‡ºï¼)
7.  åŒ…è£…æ‚¨çš„åº”ç”¨:éƒ¨ç½²(å³å°†æ¨å‡ºï¼)

====

åç«¯çš„ ES6+ï¼Ÿå½“ç„¶å¯ä»¥ï¼æœ€æ–°çš„ Javascript è¯­æ³•ç¡®å®åœ¨ä½¿ä»£ç å˜å¾—æ¸…æ™°æ˜“è¯»æ–¹é¢å¤§æœ‰ä½œä¸ºã€‚æ¯•ç«Ÿï¼Œ[ä»£ç æ˜¯ç»™äººçœ‹çš„ï¼Œä¸æ˜¯æœºå™¨çœ‹çš„ã€‚](https://mitpress.mit.edu/sicp/front/node3.html)

(ä¸æ˜¯ ES6+çˆ±å¥½è€…ï¼Ÿä½ å¯èƒ½æƒ³æ¸©ä¹ ä¸€ä¸‹è¯­æ³•ã€‚è¿™é‡Œä¸åšè¿‡å¤šè§£é‡Šã€‚)

å¦å¤–ï¼Œè¯·è®°ä½ï¼Œæˆ‘ä»¬*ä¸ä¼š*ä½¿ç”¨æµ‹è¯•æ¥å¼€å‘æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚åœ¨æœ¬æ•™ç¨‹ç³»åˆ—ä¸­ï¼Œè¿™çº¯ç²¹æ˜¯ä¸ºäº†ç®€å•èµ·è§ã€‚ç¼–å†™å¥½çš„æµ‹è¯•*â€œÃ la TDDâ€*æ˜¯**ç¼–å†™å¯é ä»£ç çš„ç¬¬ä¸€æ­¥**ã€‚

# åç«¯ç›®å½•å¸ƒå±€

æˆ‘ä»¬å°†ä»åˆ›å»ºä¸€ä¸ªç›®å½•å¼€å§‹ï¼Œè¯¥ç›®å½•å…·æœ‰ä»¥ä¸‹æ–‡ä»¶ç»“æ„å’Œä¸€ä¸ªç©ºçš„`index.js`æ–‡ä»¶:

```
ğŸ“/
 ğŸ“‚configs/
 ğŸ“‚database/
 ğŸ“‚routes/
 ğŸ“„index.js
```

# å®‰è£…å…ˆå†³æ¡ä»¶

# æ•…äº‹

æˆ‘ä»¬å°†ä½¿ç”¨**çº¿ç¨‹**è€Œä¸æ˜¯ **npm** æ¥å®‰è£…å’Œè¿è¡Œæˆ‘ä»¬çš„åŒ…ã€‚è®©æˆ‘ä»¬åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®ã€‚åœ¨æ ¹ç›®å½•ä¸­ï¼Œé”®å…¥:

`yarn init -y`

è¿™å°†åˆ›å»ºä¸€ä¸ªéå¸¸ç®€å•çš„`package.json`æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:

*ã€‚/package.json:*

```
{ 
  "name": "backend", 
  "version": "1.0.0", 
  "main": "index.js", 
  "license": "MIT" 
}
```

# ExpressJS

æˆ‘ä»¬å°†ä½¿ç”¨ [ExpressJS](https://expressjs.com/) æ¥åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ã€‚è¿™æ˜¯ä¸€ä¸ªå¥‡å¦™çš„æç®€ NodeJS æ¡†æ¶ï¼Œæ—¢å¼ºå¤§åˆçµæ´»ã€‚æˆ‘ä»¬è¿˜å°†å®‰è£… [Nodemon](https://www.npmjs.com/package/nodemon) ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„å¼€å‘å·¥å…·ï¼Œå¯ä»¥ç›‘è§†æˆ‘ä»¬çš„ç›®å½•å˜åŒ–å¹¶é‡æ–°åŠ è½½èŠ‚ç‚¹æœåŠ¡å™¨ã€‚

`yarn add express nodemon -S`

# å·´æ¯”ä¼¦å¼çš„åŸå¸‚

å› ä¸ºæˆ‘ä»¬åœ¨ ExpressJS ä¸Šä½¿ç”¨ ES6+è¯­æ³•è€Œä¸æ˜¯ NodeJSï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¡®ä¿å°†å…¶å‘ä¸‹è½¬æ¢åˆ° ES5ã€‚è¿™æ¶‰åŠå‡ ä¸ªæ­¥éª¤ã€‚

## 1.å®‰è£…å·´åˆ«å¡”è½¯ä»¶åŒ…

æˆ‘ä»¬å°†ä½¿ç”¨å·´åˆ«å¡”æŠŠæˆ‘ä»¬çš„åŒ…ä¼ é€åˆ° ES5ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®‰è£…äº† Babel CLI å’Œâ€œENVâ€ï¼Œåè€…[â€œæ ¹æ®æ‚¨æ”¯æŒçš„ç¯å¢ƒè‡ªåŠ¨ç¡®å®šæ‚¨éœ€è¦çš„ Babel æ’ä»¶ã€‚â€](https://babeljs.io/docs/plugins/preset-env/)ã€‚

`yarn add babel-cli babel-preset-env -D`

## 2.åˆ›å»ºä¸€ä¸ª`.babelrc`æ–‡ä»¶

ç°åœ¨æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘Šè¯‰ Babel è·å–æœ€æ–°çš„ NodeJS é¢„ç½®ã€‚åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`.babelrc`æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :

*ã€‚/.babelrc:*

```
{ 
  "presets": 
    [ 
      [ "env", 
        { "targets": 
          { "node": "current" } 
        } 
      ] 
    ] 
}
```

## 3.åœ¨æˆ‘ä»¬çš„`package.json`ä¸­åˆ›å»ºä¸€ä¸ªè„šæœ¬

è®©æˆ‘ä»¬æ‰“å¼€æˆ‘ä»¬çš„`package.json`æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ babel-node é¢„ç½®ä¿®æ”¹å®ƒæ¥è¿è¡Œ Nodemonã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„`package.json`åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­(å½“ç„¶ä¸ç®—ç‰ˆæœ¬)ã€‚

*ã€‚/package.json:*

```
{ 
  "name": "backend", 
  "version": "1.0.0", 
  "main": "index.js", 
  "license": "MIT", 
  "scripts": { 
    "start": "nodemon --exec yarn babel-node -- index.js" 
    }, 
  "dependencies": { 
    "express": "^4.16.3", 
    "nodemon": "^1.17.2" 
  }, 
  "devDependencies": { 
    "babel-cli": "^6.26.0", 
    "babel-preset-env": "^1.6.1" 
  } 
}
```

ğŸ”¬è¯¥è„šæœ¬ä½¿ç”¨ Babel-node é¢„ç½®åœ¨`index.js`æ–‡ä»¶å¯åŠ¨ Nodemon

## 4.æµ‹è¯•ä¸€ä¸‹ï¼

è®©æˆ‘ä»¬ç»™æˆ‘ä»¬çš„`index.js`æ·»åŠ ä¸€äº›ä»£ç ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦å·¥ä½œã€‚å°†ä¸‹é¢çš„æµ‹è¯•ä»£ç æ·»åŠ åˆ°æ ¹ç›®å½•ä¸‹çš„`index.js`ä¸­:

*ã€‚/index.js:*

```
import express from 'express' console.log('It Works!')
```

å¦‚æœæ‚¨åœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤`yarn start`,æ‚¨åº”è¯¥ä¼šå¾—åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœ:

*æ§åˆ¶å°:*

```
yarn run v1.3.2
$ nodemon --exec yarn babel-node -- index.js
[nodemon] 1.17.2
[nodemon] to restart at any time, enter `rs`
[nodemon] watching: *.*
[nodemon] starting `yarn babel-node index.js`
$ /Users/USER/CleanCode/backend/node_modules/.bin/babel-node index.js
It works!
[nodemon] clean exit - waiting for changes before restart
```

è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å®ƒå‘æˆ‘ä»¬å±•ç¤ºäº†æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ ES6+è¯­æ³•è¿è¡Œ`index.js`æ–‡ä»¶ã€‚å®ƒåšçš„ä¸å¤šï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹ï¼Œä¹Ÿæ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„å¼€å§‹ã€‚

# ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•åœ¨ ExpressJS æœåŠ¡å™¨ä¸­å¯ç”¨ ES6+ JavaScript è¯­æ³•ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ â€œRedux styleâ€å¯¼å‡º/å¯¼å…¥æŠ€æœ¯ï¼Œå®ƒå¯ä»¥ç¡®ä¿æ›´å‡†ç¡®çš„ä»£ç å’Œæ›´å°‘çš„éº»çƒ¦ã€‚æ•¬è¯·æœŸå¾…ï¼