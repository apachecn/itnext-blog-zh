# åˆ›å»ºè‡ªå·±çš„åå¸ä¸ä½¿ç”¨ä»»ä½•è½¯ä»¶åŒ…ï¼

> åŸæ–‡ï¼š<https://itnext.io/create-your-own-toast-without-using-any-packages-6d3828816f7c?source=collection_archive---------2----------------------->

![](img/4925fb54415fb6de7f99cf0bd1d3c4fb.png)

## é­”æœ¯èƒŒåâ€”â€”è¦†ç›–

## åœ¨ Flutter ä¸­ï¼Œåˆ›å»ºè¦†ç›–å°éƒ¨ä»¶éå¸¸å®¹æ˜“ï¼Œæ‰€ä»¥è®©æˆ‘å‘æ‚¨å±•ç¤ºå®ç°è¦†ç›–å°éƒ¨ä»¶æœ‰å¤šå®¹æ˜“ï¼

## åŠ¨æœº

```
context.showToast('Flutter is awesome!');
```

![](img/fe95a95680623d48900ac9e7d1c564c0.png)

é¦–å…ˆï¼Œè¦åˆ›å»ºæµ®åŠ¨å°éƒ¨ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨`Overlay`å°éƒ¨ä»¶ã€‚ä½†æ˜¯ï¼Œ

## ä»€ä¹ˆæ˜¯`Overlay`ï¼Ÿ

å®ƒåªæ˜¯ä¸€ä¸ªåƒ`Stack`ä¸€æ ·çš„æœ‰çŠ¶æ€çª—å£å°éƒ¨ä»¶ï¼Œä½†æ˜¯`Overlay`æ˜¯ç”¨äºç®¡ç†åº”ç”¨ç¨‹åºä¸­é¡µé¢é¡¶éƒ¨çš„çª—å£å°éƒ¨ä»¶ã€‚å°±åƒä¸€ç§ç‰¹æ®Šçš„`Stack`åŒ…è£…äº†æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚
(æ­£å¥½åœ¨`navigator`)

![](img/0bfa9ca5b665a5878e43105e88f2cae3.png)

æ‰€ä»¥ï¼ŒåŸºæœ¬ä¸Šï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ ä¸€äº›ä¸œè¥¿åˆ°`Overlay`çš„å †æ ˆä¸­ï¼Œå®ƒä¼šä»¥å åŠ çš„å½¢å¼å‡ºç°åœ¨ UI ä¸Šï¼Œå¦‚æœæˆ‘ä»¬ç§»é™¤å®ƒï¼Œå®ƒå°±ä¼šæ¶ˆå¤±ã€‚
å› ä¸ºæ¯å½“æˆ‘ä»¬`insert`æˆ–è€…`remove`ä¸€ä¸ªæ¡ç›®ï¼Œ`OverlayState`å°±ä¼šè°ƒç”¨`setState`æ–¹æ³•ï¼Œå³æ—¶æ›´æ–° UIï¼

![](img/bf687cdc4637e2c4ef221081c8b05a06.png)

æ’å…¥

![](img/972761d688d8b44abe297a60a7959b67.png)

å»é™¤

æ­¤å¤–ï¼Œæœ€å¸¸è§çš„æ˜¯é€šè¿‡`Navigator` é—´æ¥ä½¿ç”¨`Overlay`ï¼Œä½†ç›´æ¥ä½¿ç”¨ä¹Ÿå¯ä»¥ã€‚*(ç¨åæˆ‘è¿˜ä¼šåšä¸€ç¯‡*[](https://medium.com/itnext/create-your-own-dialog-without-using-any-packages-7bb303f62471)**)**

*ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠé€»è¾‘çœ‹ä½œä¸€ä¸ªä»£ç ï¼*

## *1.ç”¨ä½ çš„`CustomWidget`åˆ›é€ ä½ çš„`OverlayEntry`*

*ä¸ºäº†æ’å…¥åˆ°`Overlayâ€™s`å †æ ˆä¸­ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆåˆ›å»ºä¸€ä¸ª`OverlayEntry`å¯¹è±¡*

```
*final myEntry = OverlayEntry(builder: (_) => CustomWidget());*
```

## *2.å°†`OverlayEntry`æ’å…¥`Overlay's`å †æ ˆ*

*å½“æˆ‘ä»¬æ’å…¥å°éƒ¨ä»¶æ—¶ï¼Œ`Overlay`å°†åœ¨ UI ä¸Šæ˜¾ç¤º`myEntry`ã€‚*

```
 *Overlay.of(context)!.insert(myEntry);*
```

## *3.ä»`Overlay's`æ ˆä¸­ç§»é™¤ O `verlayEntry`ï¼*

*å½“æˆ‘ä»¬ç§»é™¤`myEntry`æ—¶ï¼Œå®ƒä¼šç«‹å³ä»ç”¨æˆ·ç•Œé¢ä¸Šæ¶ˆå¤±*

```
*myEntry.remove;*
```

*å¦‚æœæˆ‘ä»¬æœ‰äº†ä¸»è¦çš„æƒ³æ³•ï¼Œç°åœ¨è®©æˆ‘ä»¬åšä¸€ä¸ªçƒ¤é¢åŒ…çš„å°éƒ¨ä»¶å§ï¼*

# *åå¸ç¤ºä¾‹*

## *1-è®¾è®¡ç¥é…’è¯*

*æˆ‘è¿˜æ·»åŠ äº†ä¸€äº›å®šåˆ¶çš„æ·¡å…¥æ·¡å‡ºåŠ¨ç”»*

## *2.ä¸ºå¯é‡ç”¨ä»£ç åˆ›å»º showToast æ–¹æ³•*

*ä¸ºäº†è®©äº‹æƒ…å˜å¾—æ›´ç®€å•ï¼Œæˆ‘å¯¹å®ƒè¿›è¡Œäº†æ‰©å±•ã€‚*

## *3.ä½¿ç”¨æ–¹æ³•æ˜¾ç¤ºä»»ä½•åœ°æ–¹çš„ toast æ¶ˆæ¯*

## *æœ€å*

*![](img/658760420665c11e4c34744667a95d7c.png)*

*å°éƒ¨ä»¶æ ‘*

*å¦‚ä½ æ‰€è§ï¼Œ`ToastWidget`å¹¶ä¸ä¾èµ–äº`HomePage`æˆ–`ElevatedButton`ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œå®ƒä¸ä¼šå—åˆ°å½±å“ï¼Œå³ä½¿ä»–ä»¬è¢«å¤„ç½®ã€‚*

## *GitHub é“¾æ¥*

*æ‚¨å¯ä»¥åœ¨è¿™é‡Œè·å¾—å®Œæ•´çš„é¡¹ç›®ç¤ºä¾‹*

*[](https://github.com/rei-codes/overlay_example) [## GitHub-rei-codes/overlay _ example

### ä¸€ä¸ªæ–°çš„é¢¤æŒ¯é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯é¢¤æŒ¯åº”ç”¨çš„èµ·ç‚¹ã€‚ä¸€äº›å¸®åŠ©æ‚¨å…¥é—¨çš„èµ„æºâ€¦

github.com](https://github.com/rei-codes/overlay_example) 

## æœ¬æ–‡çš„ç¬¬ 2 éƒ¨åˆ†

[](/create-your-own-dialog-without-using-any-packages-7bb303f62471) [## åˆ›å»ºè‡ªå·±çš„å¯¹è¯æ¡†ï¼Œä¸ä½¿ç”¨ä»»ä½•è½¯ä»¶åŒ…ï¼

### åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„ showDialog()å‡½æ•°ï¼Œå¹¶äº†è§£åœ¨â€¦

itnext.io](/create-your-own-dialog-without-using-any-packages-7bb303f62471) 

# æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼

è¯·ä¸è¦å¿˜è®°ç‚¹å‡»ğŸ‘æŒ‰é’®ï¼Œå¹¶æœ‰ä¸€ä¸ªç¾å¥½çš„ä¸€å¤©ï¼*