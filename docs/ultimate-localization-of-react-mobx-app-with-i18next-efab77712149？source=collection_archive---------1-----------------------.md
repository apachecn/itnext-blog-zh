# ä½¿ç”¨ i18next å®ç° React (Mobx)åº”ç”¨ç¨‹åºçš„æœ€ç»ˆæœ¬åœ°åŒ–

> åŸæ–‡ï¼š<https://itnext.io/ultimate-localization-of-react-mobx-app-with-i18next-efab77712149?source=collection_archive---------1----------------------->

![](img/0b7fbc965bf6fb0f8d6f5d45002de868.png)

# ä¸ºä»€ä¹ˆï¼Ÿ

æœ€è¿‘ï¼Œæˆ‘ä¸å¾—ä¸ä¸ºæˆ‘çš„ React Mobx web åº”ç”¨ç¨‹åºæ·»åŠ ä¸€ä¸ªæœ¬åœ°åŒ–ç‰ˆæœ¬ã€‚æˆ‘æƒ³è¦é¿å…çš„æ˜¯ä»å¤´å¼€å§‹ç¼–å†™åŒºåŸŸè§£ææœºåˆ¶çš„ä»£ç (åœ¨æˆ‘çš„ç”Ÿæ´»ä¸­åˆä¸€æ¬¡)ã€‚

æˆ‘çœŸçš„å¾ˆç´¯ï¼Œå› ä¸º:

*   é¾™`.json`æ–‡ä»¶
*   æ£€æŸ¥`navigator.language`
*   å°†`en-US`è½¬æ¢ä¸º`en`
*   åšç±»ä¼¼ä¹å‘³çš„äº‹æƒ…

æˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è®©æˆ‘ä¸“æ³¨äºæˆ‘çš„ä»£ç â€”â€”ä½†ä¼¼ä¹æˆ‘å·²ç»æ‰¾åˆ°äº†ä¸€ä¸ªï¼Œå®é™…ä¸Šè¶…å‡ºäº†æˆ‘çš„é¢„æœŸã€‚

å‘[i18 ä¸‹ä¸€ä¸ª](https://www.i18next.com/)é—®å¥½ï¼

# i18 ä¸‹ä¸€æ­¥

å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç¿»è¯‘å’Œå¤šå…ƒåŒ–ä»·å€¼çš„å›¾ä¹¦é¦†ï¼Œè¿˜æœ‰æ›´å¤šçš„åŠŸèƒ½ã€‚å®ƒæ˜¯å®Œæˆæ‰€æœ‰è¿™äº›å·¥ä½œçš„æ¡†æ¶ï¼Œä¸ºæ‚¨æä¾›å®Œæ•´çš„æœ¬åœ°åŒ–è§£å†³æ–¹æ¡ˆã€‚

åœ¨é˜…è¯»å®ƒçš„æ–‡æ¡£æ—¶ï¼Œæˆ‘å¯¹å®ƒçš„åŠŸèƒ½å°è±¡æ·±åˆ»ã€‚ä»å…¶ä»–æ–¹é¢æ¥çœ‹ï¼Œæ–‡æ¡£å¯¹æˆ‘æ¥è¯´ä¼¼ä¹å¾ˆå¤æ‚ï¼Œè€Œä¸”æˆ‘ä¸å¾—ä¸æ£€æŸ¥ä¸€äº›è®¾ç½®åœ¨å®é™…åº”ç”¨ä¸­æ„å‘³ç€ä»€ä¹ˆã€‚æ‰€ä»¥æˆ‘å†³å®šå†™è¿™ç¯‡æ–‡ç« ä½œä¸ºä¸€ä¸ªå°çŸ¥è¯†åº“ã€‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘æƒ³æä¸€ä¸‹ i18next æ˜¯çº¯ JavaScript è§£å†³æ–¹æ¡ˆã€‚æ‰€ä»¥ä½ å¯ä»¥ç”¨å®ƒæ­é…ä»»ä½•ä½ å–œæ¬¢çš„æ¡†æ¶( [React](https://reactjs.org/) ã€ [Angular](https://angular.io/) ã€ [Vue](https://vuejs.org/) )ã€‚

# ååº”å’Œ i18 ä¸‹ä¸€æ­¥

i18next æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ’ä»¶å’Œè¿æ¥å™¨ç³»ç»Ÿï¼Œå¯ä»¥è¿æ¥åˆ°ä½ æ­£åœ¨ä½¿ç”¨çš„æ¡†æ¶ã€‚å½“æˆ‘ä»¬è°ˆè®º React app æ—¶ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸ä½¿ç”¨ä¸¤ä¸ªä¸»è¦åº“:

*   [i18 ä¸‹ä¸€ä¸ª](https://www.i18next.com/)å®é™…ä¸Šæ˜¯æœ¬åœ°åŒ–æ¡†æ¶
*   [React-i18 ä¸‹ä¸€ä¸ª](https://react.i18next.com/)ä¸ºæ‚¨çš„ [React](https://reactjs.org/) åº”ç”¨ç¨‹åºè®¾ç½®ç»‘å®š

å°±åƒ [mobx](https://mobx.js.org/) å’Œ [mobx-react](https://github.com/mobxjs/mobx-react) æˆ–è€… [redux](https://redux.js.org/) å’Œ [react-redux](https://github.com/reduxjs/react-redux) ä¸€æ ·ã€‚

# æˆ‘ä»¬å¼€å§‹å§

é¦–å…ˆï¼Œæ‚¨å¿…é¡»å°†è¿™ä¸¤ä¸ªä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ã€‚

```
npm install i18next react-i18next
```

æˆ‘å»ºè®®åˆ›å»ºä¸€ä¸ªåä¸º`i18n.js`çš„å•ç‹¬æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨çš„æœ¬åœ°åŒ–è¿‡ç¨‹ä¿å­˜é…ç½®ã€‚å®ƒå°†åœ¨å¼€å§‹æ—¶å¾ˆå°ï¼Œä½†ä¼šéšç€ä½ æ·»åŠ è¶Šæ¥è¶Šå¤šçš„é…ç½®é€‰é¡¹å’Œæ’ä»¶è€Œå¢é•¿ã€‚æ‰€ä»¥æˆ‘ä»¬ä»è¿™æ ·çš„ä¸œè¥¿å¼€å§‹ã€‚

```
/
 - i18n.js
 - index.jsx
```

æ–‡ä»¶çš„å†…å®¹çœ‹èµ·æ¥åƒ:

```
// i18n.jsimport i18n from 'i18next';i18n.init({
  debug: true,

  lng: 'en-US', resources: {
    'en-US':{
      'translation': {
        intro: 'Hello my name is'
      }
    }
  }, react: {
    wait: false,
    bindI18n: 'languageChanged loaded',
    bindStore: 'added removed',
    nsMode: 'default'
  }
});export default i18n;// index.jsximport React from 'react';
import ReactDOM from 'react-dom';
import { I18nextProvider, withNamespaces } from 'react-i18next';import i18n from './i18n.js';@withNamespaces()
class App extends React.Component {
  render() {
    const { t } = this.props; return (
      <span>{t('intro')} Viktor</span>
    );
  }
}ReactDOM.render((
  <I18nextProvider i18n={i18n}>
    <App />
  </I18nextProvider>
  ), document.getElementById('mount')
);
```

*æ‰§è¡Œåï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªç½‘é¡µï¼Œä¸Šé¢å†™ç€â€œä½ å¥½ï¼Œæˆ‘å«ç»´å…‹å¤šâ€*

è®©æˆ‘è§£é‡Šä¸€ä¸‹åˆšåˆšå‘ç”Ÿçš„äº‹æƒ…ğŸ¤·ğŸ»â€â™‚ï¸

ä¸ºäº†åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ i18nextï¼Œå®ƒéœ€è¦è¢«åˆå§‹åŒ–ã€‚`i18n.init()`ç”¨äºæ­¤ã€‚æ–¹æ³•æ¥å—å¤§é‡ä¸åŒçš„å±æ€§ã€‚ä½†æ˜¯æˆ‘ä»¬å°†åœ¨è¿™é‡Œé›†ä¸­è®¨è®ºæˆ‘ä»¬æ“…é•¿å¼€å§‹æ›´æ ‡å‡†çš„æ–¹æ³•ã€‚

*   `debug: true` â€”åœ¨å¼€å‘è¿‡ç¨‹ä¸­éå¸¸æœ‰ç”¨ï¼Œå®ƒè®°å½•æ§åˆ¶å°å…³äº i18next çŠ¶æ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚æ¯”å¦‚åˆå§‹åŒ–çš„æ—¶å€™ï¼Œè®¾ç½®äº†ä»€ä¹ˆè¯­è¨€ï¼Œå¦‚æœæŸäº›ç¿»è¯‘ä¸¢å¤±äº†å°±å‘å‡ºé€šçŸ¥ã€‚*ç”Ÿäº§ä¸­è€ƒè™‘åˆ‡æ¢ä¸º* `*false*` *ã€‚å¦‚æœä½¿ç”¨ webpack è®¾ç½®* `*NODE_ENV*` *å˜é‡å¹¶åƒä½¿ç”¨* `*debug: process.env.NODE_ENV === 'development'*` *ä¸€æ ·ä½¿ç”¨å®ƒã€‚*
*   `lng: 'en-US'` â€”è¦ä½¿ç”¨çš„åˆå§‹è¯­è¨€ã€‚ç¨åæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åŠ¨æ€åœ°è¯†åˆ«è¯­è¨€ï¼Œé¿å…åœ¨ init ä¸Šç¡¬ç¼–ç ã€‚
*   `resources` â€”ç¿»è¯‘çš„æ†ç»‘ç§°ä¸ºèµ„æºã€‚å¯ä»¥åœ¨`init`æ–¹æ³•ä¸­å®šä¹‰å®ƒä»¬ï¼Œåœ¨è¿è¡Œæ—¶ç”¨`i18n.addResourceBundle`æ–¹æ³•åŠ è½½å®ƒä»¬ï¼Œæˆ–è€…è®©å®ƒä»¬(æˆ‘å–œæ¬¢è¿™ä¸€éƒ¨åˆ†)åŸºäºæ‰€é€‰è¯­è¨€å¼‚æ­¥è·å–ã€‚ä½ åº”è¯¥ä¼ é€’ä¸€ä¸ªä¸‹ä¸€ä¸ªç»“æ„çš„å¯¹è±¡`{localeName: {namespaceName: {key: 'value'}}`é»˜è®¤åç§°ç©ºé—´æ˜¯`translation`ï¼Œæ‰€ä»¥æˆ‘åœ¨ä¾‹å­ä¸­ä¼ é€’äº†å®ƒã€‚

> åç§°ç©ºé—´æ˜¯ i18next çš„ä¸€ä¸ªéå¸¸é…·çš„ç‰¹æ€§ã€‚å®ƒå…è®¸æ‚¨å°†ç¿»è¯‘è½¬ç§»åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥æŒ‰é¡µé¢åŠ è½½ç¿»è¯‘ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡ä¸‹è½½å·¨å¤§çš„`.json`æ–‡ä»¶å¹¶é˜»æ­¢æ‚¨çš„ web åº”ç”¨ç¨‹åºå†…å®¹å‡ºç°ã€‚å› ä¸ºæœ¬æ–‡çš„ç›®æ ‡åªæ˜¯ç»™å‡ºæœ¬åœ°åŒ–çš„é¸Ÿç°å›¾â€”â€”æˆ‘ä»¬å°†åªä½¿ç”¨é»˜è®¤åç§°ç©ºé—´(`translation`)ã€‚

*   `react` â€”æ˜¯ä¸€ä¸ªå…·æœ‰ react-18next æ’ä»¶é…ç½®å±æ€§çš„å¯¹è±¡ã€‚æˆ‘ç›¸ä¿¡æ²¡æœ‰äººèƒ½æ¯”[å®˜æ–¹æ–‡ä»¶](https://react.i18next.com/components/i18next-instance)è§£é‡Šå¾—æ›´å¥½äº†ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå®ƒä½¿ç”¨é»˜è®¤å€¼ã€‚å¦‚æœæ‚¨ä¸æ‰“ç®—æ›´æ”¹å®ƒä»¬ï¼Œåªéœ€çœç•¥ i18next init çš„`react`å±æ€§ã€‚

åœ¨`index.jsx`ä½ ä¹Ÿå¯ä»¥çœ‹åˆ°ä¸€äº›ä¸åŒä¹‹å¤„:

*   `I18nextProvider` â€”è¿™æ˜¯`react-i18next`åº“æš´éœ²çš„ç»„ä»¶ã€‚å®ƒæ¥å—ä¸€ä¸ªå±æ€§`i18n`å’Œä½ çš„å®ä¾‹`i18n`ã€‚æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦åœ¨å¼€å§‹æ—¶å¯¼å…¥äº†å®ƒã€‚`I18nextProvider`æ˜¯ä¸€ä¸ª[ä¸Šä¸‹æ–‡æä¾›è€…](https://reactjs.org/docs/context.html)ã€‚å…è®¸ä¸Šä¸‹æ–‡æ¶ˆè´¹è€…é€šè¿‡ React ä¸Šä¸‹æ–‡æ¥æ”¶ä¸€äº›é™„åŠ å‚æ•°ã€‚
*   `@withNamespaces()` â€”æˆ‘å¯çˆ±çš„éƒ¨åˆ†ã€‚è£…é¥°å™¨`withNamespaces`ä¹Ÿæ˜¯ä»`react-i18next`åº“ä¸­å¯¼å…¥çš„ã€‚åŸºæœ¬ä¸Šè¿™æ˜¯ä¸€ä¸ª[ååº”é«˜é˜¶ç»„ä»¶](https://reactjs.org/docs/higher-order-components.html)ã€‚ä¼ é€’ç»™ç»„ä»¶ 2 çš„é™„åŠ å±æ€§ã€‚`t`åŠŸèƒ½å’Œ`i18n`å®ä¾‹ã€‚
*   `t` â€”è°ƒç”¨å‡½æ•°`t('intro')`å°†æ£€æŸ¥`intro`é”®çš„ç¿»è¯‘æ˜¯å¦å­˜åœ¨äºæ‰€é€‰è¯­è¨€ä¸­(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ä¸º`en-US`)ï¼Œä»¥åŠ*é»˜è®¤çš„*åç§°ç©ºé—´(`translation`)ã€‚å¦‚æœæ‰¾åˆ°èµ„æºï¼Œè¿™å°†è¾“å‡ºä¸€ä¸ªç¿»è¯‘ï¼Œæˆ–è€…å°†è¿”å›ä¸€ä¸ªé”®ã€‚*æ³¨:å¦‚æœæ‚¨å¤„äºè°ƒè¯•æ¨¡å¼ï¼Œæ‚¨å°†åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä¸€æ¡æ¶ˆæ¯ï¼Œè¯´æ˜æœªæ‰¾åˆ°ç¿»è¯‘*ã€‚

# åŠ¨æ€è·å–ç”¨æˆ·è¯­è¨€

å½“ç„¶æˆ‘ä»¬ä¸æƒ³åœ¨`i18n`çš„`init`æ–¹æ³•ä¸­ç¡¬ç¼–ç ç”¨æˆ·åŒºåŸŸè®¾ç½®ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸æƒ³å†™ä»£ç æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å›¾ä¹¦é¦†å¯ä»¥å¸®åŠ©æˆ‘ä»¬ã€‚æ‰€ä»¥â€¦

```
npm install i18next-browser-languagedetector
```

è®©æˆ‘ä»¬å¯¹`i18n.js`æ–‡ä»¶åšä¸€äº›ä¿®æ”¹

```
// i18n.jsimport i18n from 'i18next';
import LanguageDetector from 'i18next-browser-languagedetector';i18n.use(LanguageDetector)
.init({
  debug: true, resources: 
    'en-US':{
      'translation': {
        intro: 'Hello my name is'
      }
    }
  }
});export default i18n;
```

æˆ‘ä»¬å·²ç»åˆ é™¤äº†`lng: 'en-US'`å¹¶æ·»åŠ äº†ä¸€ä¸ªè°ƒç”¨ç‰¹æ®Š`i18n`æ–¹æ³•`use`ã€‚è¿™ä¸ªå‡½æ•°ç”¨äºä¸º`i18n.`åŠ è½½é¢å¤–çš„æ’ä»¶ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å—ç›Šäº [LanguageDetector](https://github.com/i18next/i18next-browser-languageDetector) æ’ä»¶ã€‚å®ƒæ£€æŸ¥å¤šä¸ªåœ°æ–¹ï¼Œå¹¶ä¸ºæ‚¨è§£æç”¨æˆ·åŒºåŸŸè®¾ç½®ã€‚

> æˆ‘ä»¬è¿˜åˆ é™¤äº†ä¾èµ–é»˜è®¤å€¼çš„`react`å±æ€§

# ä»å¤–éƒ¨ä½ç½®åŠ è½½ç¿»è¯‘æ–‡ä»¶

æ²¡æœ‰äººåœ¨é¡¹ç›®æºä»£ç ä¸­ä¿å­˜é•¿çš„`.json`ç¿»è¯‘æ–‡ä»¶ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä»¬éƒ½æ˜¯ç‹¬ç«‹çš„æ–‡ä»¶(å¯èƒ½ä¼šæ”¾åœ¨ CDN ä¸Šï¼Œæ‰€ä»¥ä¸ä¼šå’Œä½ çš„æºä»£ç æ”¾åœ¨ä¸€èµ·)ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä¸Šä¼ ä¸€ä¸ªæ­£ç¡®çš„ã€‚

æˆ‘ä»¬å°†å†æ¬¡å—ç›Šäº`i18next`å¯æ’æ‹”æ¶æ„ã€‚

```
npm install i18next-xhr-backend;
```

å¹¶åšä¸€äº›ä»£ç ä¿®æ”¹

```
// i18n.jsimport i18n from 'i18next';
import XHR from 'i18next-xhr-backend';
import LanguageDetector from 'i18next-browser-languagedetector';i18n*.use(XHR)* .use(LanguageDetector)
.init({
  debug: true
});export default i18n;
```

åº”ç”¨`XHR`æ’ä»¶åã€‚æˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘å·¥å…·çš„ç½‘ç»œé€‰é¡¹å¡ä¸­çœ‹åˆ° 3 ä¸ªé¢å¤–çš„è¯·æ±‚ã€‚

```
http://app.com/locales/en-US/translation.json
http://app.com/locales/en/translation.json
http://app.com/locales/dev/translation.json// pattern looks like
/locales/{language}/{namespace}.json
```

æˆ‘é—®è‡ªå·±çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯â€œä»€ä¹ˆæ˜¯`dev`è¯­è¨€ï¼Ÿâ€ã€‚ä½†åœ¨å°èŒƒå›´é˜…è¯»åï¼Œå®ƒç¢°å·§æ˜¯ i18next çš„ä¸€ä¸ªæœªè¢«å‘ç°çš„é…·åŠŸèƒ½ã€‚

*   ä¿å­˜ç¼ºå¤±â€” i18n å¯ä»¥å°†ç¼ºå¤±çš„ç¿»è¯‘ä¿å­˜ä¸º`dev`è¯­è¨€ï¼Œç¨åæ‚¨çš„ç¿»è¯‘äººå‘˜å¯ä»¥ä½¿ç”¨å®ƒæ¥ç¼–å†™æ­£ç¡®çš„è‹±è¯­çŸ­è¯­å’Œå…¶ä»–ç¿»è¯‘ã€‚
*   è¯­è¨€(å’Œåç§°ç©ºé—´)å›é€€â€”å¦‚æœåœ¨`en-US`è¯­è¨€ä¸­æ‰¾ä¸åˆ°æ‚¨çš„ç¿»è¯‘ï¼Œå°†åœ¨`en`è¯­è¨€ä¸­è¿›è¡Œæ£€æŸ¥ã€‚(ä»¥åŠä¹‹åçš„`dev`)ã€‚

> å¯¹äºç”Ÿäº§æ¥è¯´ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨`dev`è¯­è¨€ã€‚æ‚¨å¯ä»¥é€šè¿‡å‘`i18n.init({ fallbackLng: 'en' })`ä¼ é€’é™„åŠ å‚æ•°æ¥æ§åˆ¶è¿™ä¸€ç‚¹ã€‚è¿™ä¹Ÿå°†æŠŠå¯¹è¯­è¨€æ–‡ä»¶çš„è¯·æ±‚é‡å‡å°‘åˆ° 2ã€‚

ç”šè‡³è¿˜æœ‰æ›´å¤§çš„è°ƒæ•´æ½œåŠ›ã€‚è®¸å¤šåº”ç”¨ç¨‹åºåªè¿è¡Œå°‘æ•°è¯­è¨€ç¯å¢ƒï¼Œå¹¶ä¸”åªä½¿ç”¨è¯­è¨€ä»£ç ï¼Œå¦‚`en`è·³è¿‡åŒºåŸŸä»£ç `US`ã€‚å¦‚æœè¿™é€‚ç”¨äºä½ çš„æƒ…å†µã€‚ä½¿ç”¨`i18n.init({ load: 'languageOnly' })`ã€‚æ‚¨å°†åªçœ‹åˆ°ä¸€ä¸ªå¯¹æœ¬åœ°æ–‡ä»¶çš„ http è¯·æ±‚ã€‚

å½“ç„¶ï¼Œæ‚¨å¯ä»¥æ›´æ”¹åŠ è½½ç¿»è¯‘æ–‡ä»¶çš„è·¯å¾„

```
// i18n.jsconst backendOpts = {
  loadPath: `myCusomPathToLocales/{{lng}}/{{ns}}.json`
}i18n.init({
  backend: backendOpts
})
```

> æç¤º:æ‚¨å¯ä»¥ä½¿ç”¨ webpack ä¸­çš„`[publicPath](https://webpack.js.org/guides/public-path/)`T21 æ¥æ„å»ºæœ¬åœ°æ–‡ä»¶çš„æ­£ç¡®è·¯å¾„ã€‚ä¾‹å¦‚ cdnã€‚

# ç¼–å†™ç¿»è¯‘æ–‡ä»¶

ä½ çš„ç¿»è¯‘æ–‡ä»¶æ˜¯çº¯`.json`æ–‡ä»¶ã€‚æœ€é…·çš„æ˜¯ i18next æ”¯æŒå¼€ç®±å³ç”¨çš„åµŒå¥—ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥åœ¨ç¿»è¯‘æ–‡ä»¶ä¸­åˆ›å»ºæœ‰æ„ä¹‰çš„ç»“æ„ï¼Œè€Œä¸æ˜¯çº¯ç²¹çš„ 1 çº§æ·±åº¦åˆ—è¡¨

```
// locales/en-US/translation.json{
  "common": {
    "confirm": "Confirm",
    "cancel": "Cancel"
  },
  "question": "Use i18next?"
} // App.jsx@withNamespaces()
class App extends React.Component {
  render() {
    const { t } = this.props; return (
      <span>{t('question')}</span>
      <button>{t('common.confirm')}</button>
      <button>{t('common.cancel')}</button>    
    );
  }
}
```

# ä½¿ç”¨ Mobx æ›´æ”¹åŒºåŸŸè®¾ç½®

Mobx æä¾›äº†ä¸€ç§å¥‡å¦™çš„å¯èƒ½æ€§ï¼Œå¯ä»¥åœ¨ä¸€äº›å¯è§‚å¯Ÿçš„å±æ€§å‘ç”Ÿå˜åŒ–åï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­äº§ç”Ÿå‰¯ä½œç”¨ã€‚æˆ‘ä»¬å°†ç”¨å®ƒä»¬æ¥è½¬æ¢è¯­è¨€ã€‚å‡è®¾æˆ‘ä»¬åœ¨`appStore.locale`å±æ€§ä¸­ä¿å­˜äº†ç”¨æˆ·é€‰æ‹©çš„åŒºåŸŸè®¾ç½®ã€‚

é‚£ä¹ˆååº”ä¼šæ˜¯è¿™æ ·çš„:

```
// index.jsxreaction(
  () => appStore.locale,
  locale => {
    i18n.changeLanguage(locale);
  }
);
```

ä»¤äººæƒŠå¹çš„æ˜¯ï¼Œæ–°çš„ç¿»è¯‘å°†è¢«å¼‚æ­¥åŠ è½½ã€‚æ‰€æœ‰ React ç»„ä»¶éƒ½å°†é‡æ–°å‘ˆç°ï¼Œä»¥æ–°è¯­è¨€æ˜¾ç¤ºæ–‡æœ¬ã€‚æ²¡æœ‰æ›´å¤šä¸‘é™‹çš„æ•´é¡µé‡æ–°åŠ è½½ğŸ‰ï¼

# çœŸå®çš„ä¾‹å­

ç‚¹å‡»æŸ¥çœ‹çœŸå®ç”¨ä¾‹ç¤ºä¾‹[ã€‚ä¸è¦å¿˜è®°æ‰“å¼€æ§åˆ¶å°æ¥è·Ÿè¸ªæ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚](https://codesandbox.io/s/n5jmk0q69j)

# å‡†å¤‡å¥½ä¸Šé’©äº†å—ï¼Ÿ

> æ³¨æ„:è¯¥åŠŸèƒ½è¿˜å¤„äºè¯•éªŒé˜¶æ®µï¼Œå› æ­¤ API å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºã€‚åœ¨éµå¾ªè¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼ŒéªŒè¯æ‚¨çš„ React ç‰ˆæœ¬æ˜¯`16.7.0-alpha`å’Œ react-i18next `8.2.0`æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

å¦‚ä½ æ‰€çŸ¥ï¼Œä»`v 16.7.0-alpha`å¼€å§‹ï¼ŒReact å›¢é˜Ÿå¼•å…¥äº†ä¸€ä¸ªå«åš[é’©å­](https://reactjs.org/docs/hooks-intro.html)çš„æ–°æ¦‚å¿µï¼Œæ—¨åœ¨ç®€åŒ–ä½ å¦‚ä½•åœ¨ç»„ä»¶é—´é‡ç”¨æœ‰çŠ¶æ€é€»è¾‘çš„æ–¹æ³•ã€‚ä»¥åŠæƒŠäººçš„å¿«é€Ÿåé¦ˆ(ä¸åˆ° 24 å°æ—¶ğŸ˜²)æ¥è‡ª i18next æˆ˜é˜Ÿã€‚å› æ­¤ï¼Œå¦‚æœä½ å‡†å¤‡å°è¯•ä¸€äº›çœŸæ­£å‰æ²¿çš„ä¸œè¥¿ï¼Œä½ å¯ä»¥ç”¨ react-i18next é’©å­æ¥æœ¬åœ°åŒ–ä½ çš„åº”ç”¨ç¨‹åº:

```
*// i18n.js*import i18n from 'i18next';
import XHR from 'i18next-xhr-backend';
import LanguageDetector from 'i18next-browser-languagedetector';
**import { initReactI18n } from 'react-i18next/hooks';**i18n*.use(XHR)* .use(LanguageDetector)
**.use(initReactI18n)**
.init({
  debug: true
});export default i18n;*// index.jsx*import React from 'react';
import ReactDOM from 'react-dom'; **import { useTranslation } from 'react-i18next/hooks';**import './i18n.js'; // you still need it in bundlefunction App() {
  **const [t, i18next] = useTranslation();** return <span>{t('intro')} Viktor</span>;
}ReactDOM.render((
    <App />
  ), document.getElementById('mount')
);
```

*   `use(initReactI18n)`â€”â€”é€šè¿‡è°ƒç”¨è¿™ä¸ªæ’ä»¶ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µâ€”â€”æˆ‘ä»¬ä½¿ i18next å®ä¾‹å¯ç”¨äº`useTranslation`æŒ‚æ¥ä»»ä½• React ç»„ä»¶
*   `useTranslation()` â€” i18next React Hookï¼Œä¸€ä¸ªä¸ºä½ çš„åŠŸèƒ½ç»„ä»¶æä¾›`t`å‡½æ•°(æˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰äº†)å’Œ i18next å®ä¾‹çš„å‡½æ•°

æ‚¨ä¸ä¼šä¸åŒæ„ä½¿ç”¨è¿™ç§æ–¹æ³•ä»£ç çœ‹èµ·æ¥æ›´å¹²å‡€ã€‚æ­¤å¤–ï¼Œå®ƒç»™ä½ æ›´å¤šçš„å¥½å¤„ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬çš„`App`åŠŸèƒ½ç»„ä»¶ä¸å†ç”¨`@withNamespaces` HOC åŒ…è£…â€”â€”æ‰€ä»¥å½“ä½ ä¸ºäº†æµ‹è¯•å¯¹å®ƒè¿›è¡Œæµ…å±‚æ¸²æŸ“æ—¶ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è§‚å¯Ÿåˆ°å®ƒçš„ç»“æ„ã€‚ä½ å¯ä»¥å»çœ‹çœ‹ã€‚

# åŒ…æ‰

i18next æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£å’Œå¼ºå¤§çš„æœ¬åœ°åŒ–åº”ç”¨ç¨‹åºçš„è§£å†³æ–¹æ¡ˆã€‚å®ƒå…è®¸å¤§é‡çš„å®šåˆ¶å’Œè°ƒæ•´ã€‚ç”¨ä¸€ç³»åˆ—æ’ä»¶å’Œå·¥å…·ä½¿åŸºç¡€è®¾æ–½é¥±å’Œã€‚

æœ¬æŒ‡å—ä»…æ¶µç›– i18next å¹¿æ³›åŠŸèƒ½ä¸­çš„å°éƒ¨åˆ†åŸºæœ¬åŠŸèƒ½ã€‚å› æ­¤ï¼Œè¯·æŸ¥çœ‹å®ƒçš„[æ–‡æ¡£](https://www.i18next.com/)ä»¥è·å¾—æ›´æ·±å…¥çš„ä¿¡æ¯ã€‚

# æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šçœŸè¯šåœ°æ„Ÿè°¢ä½ ç‚¹å‡»é¼“æŒğŸ‘æŒ‰é’®æˆ–åˆ†äº«è¿™ä¸ªæ•…äº‹ã€‚æ‚¨çš„åé¦ˆéå¸¸é‡è¦ï¼