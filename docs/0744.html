<html>
<head>
<title>Tutorial Part 2: Kubernetes up and running on LXC/LXD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ•™ç¨‹ç¬¬2éƒ¨åˆ†:åœ¨LXC/LXDè¿è¡ŒKubernetes</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/tutorial-part-2-kubernetes-up-and-running-on-lxc-lxd-6d60e98f22df?source=collection_archive---------3-----------------------#2018-05-20">https://itnext.io/tutorial-part-2-kubernetes-up-and-running-on-lxc-lxd-6d60e98f22df?source=collection_archive---------3-----------------------#2018-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5fa6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¯·æ³¨æ„ï¼Œæœ¬æ•™ç¨‹ä»…ä¾›å­¦ä¹ ä¹‹ç”¨ã€‚</p><p id="de31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ å¯ä»¥æŸ¥çœ‹<a class="ae kl" href="https://bit.ly/2LcdKEy" rel="noopener ugc nofollow" target="_blank">æ•™ç¨‹ç¬¬1éƒ¨åˆ†:Kubernetesåœ¨LXC/LXDè¿è¡Œ</a>ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/e35711d13a2063d969e687510a676cb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qklMJNbxFRexwd571afm0g.png"/></div></div></figure><p id="3a79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬éƒ¨ç½²kubernetesã€‚æˆ‘ä»¬æœ‰3ä¸ªéƒ¨ç½²é€‰é¡¹ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å°è¯•Kubernetesçš„è§„èŒƒåˆ†å¸ƒï¼Œå…¶ä¸­åŒ…æ‹¬:</p><ul class=""><li id="0ee1" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">ç°è‰²æ—¥å¿—</li><li id="b6da" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">èˆµ</li><li id="451d" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">JFrog Artifactory</li><li id="894e" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">åº“è´å¼—æ´›</li><li id="31d8" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">æ™®ç½—ç±³ä¿®æ–¯</li><li id="9156" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">Rancher2.0(æµ‹è¯•ç‰ˆ)</li></ul><p id="d686" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½†æ˜¯åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†é€‰æ‹©Kubernetesæ ¸å¿ƒå¹¶éƒ¨ç½²åœ¨æœ¬åœ°ä¸»æœºä¸Šã€‚</p><pre class="kn ko kp kq gt lm ln lo lp aw lq bi"><span id="a873" class="lr ls iq ln b gy lt lu l lv lw">ubuntu@ip-172-31-1-4:~$ conjure-up kubernetes</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lx"><img src="../Images/e42c07f99eeaafce5426afd5daa09ff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s4kADgAUROA5X3Lh6Ok6yA.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ly"><img src="../Images/c7ad48ce2a2af81ae498f0d427d65d09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S49C5NGi-cDJ-efcInjLQw.png"/></div></div></figure><p id="d2dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é€‰æ‹©â€œç½‘æ¡¥â€å’Œâ€œå­˜å‚¨æ± â€ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ly"><img src="../Images/5bd3b135b6dc934055e12022f206fc33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*49zAhnp_w7bJBm6ci3fl_g.png"/></div></div></figure><p id="5342" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºKubernetesç½‘ç»œæ’ä»¶é€‰æ‹©â€œæ³•å…°ç»’â€ã€‚æ³•å…°ç»’æ˜¯ä¸€ä¸ªè™šæ‹Ÿç½‘ç»œï¼Œå®ƒä¸ºæ¯ä¸ªä¸»æœºæä¾›ä¸€ä¸ªå­ç½‘ï¼Œä¾›å®¹å™¨è¿è¡Œæ—¶ä½¿ç”¨ã€‚ä¸€ä¸ªå±å¹•ä¸€ä¸ªå±å¹•åœ°è·Ÿç€åšã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lz"><img src="../Images/4d58fb2442b1efdd8313c8de11fd2eb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPr3UrkeWuHw9VmrwImPbQ.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lz"><img src="../Images/0eb298eb4b730e25622f164f00396bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0T-JbE-F7E8EL90AWRB9hg.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ly"><img src="../Images/eab45ec6a1800c6a09e91767e1b55836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UBjnrOX096MBRqZfovSDkA.png"/></div></div></figure><p id="9b0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ç­‰å¾…Jujuæ§åˆ¶å™¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡ŒMacOSçš„ç¬”è®°æœ¬ç”µè„‘ä¸Šè®¾ç½®â€œlxcå®¢æˆ·ç«¯â€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿œç¨‹ç®¡ç†è¿è¡Œåœ¨AWS EC2ä¸Šçš„LXDã€‚</p><p id="4db0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯å¹¶å®‰è£…lxc(ğŸº/usr/local/Cellar/lxc/3.1: 6æ–‡ä»¶ï¼Œ17.6MB) â€” lxcæ˜¯MacOSçš„LXDå®¢æˆ·ç«¯ã€‚</p><pre class="kn ko kp kq gt lm ln lo lp aw lq bi"><span id="f345" class="lr ls iq ln b gy lt lu l lv lw">$ brew install lxc</span><span id="95c7" class="lr ls iq ln b gy ma lu l lv lw">$ lxc remote list<br/>+-----------------+------------------------------------------+---------------+-----------+--------+--------+<br/>|      NAME       |                   URL                    |   PROTOCOL    | AUTH TYPE | PUBLIC | STATIC |<br/>+-----------------+------------------------------------------+---------------+-----------+--------+--------+<br/>| images          | https:<em class="mb">//images.linuxcontainers.org       | simplestreams |           | YES    | NO     |</em><br/>+-----------------+------------------------------------------+---------------+-----------+--------+--------+<br/>| local (default) | unix:<em class="mb">//                                  | lxd           | tls       | NO     | YES    |</em><br/>+-----------------+------------------------------------------+---------------+-----------+--------+--------+<br/>| ubuntu          | https:<em class="mb">//cloud-images.ubuntu.com/releases | simplestreams |           | YES    | YES    |</em><br/>+-----------------+------------------------------------------+---------------+-----------+--------+--------+<br/>| ubuntu-daily    | https:<em class="mb">//cloud-images.ubuntu.com/daily    | simplestreams |           | YES    | YES    |</em><br/>+-----------------+------------------------------------------+---------------+-----------+--------+â€”â€”â€”â€”+</span></pre><p id="5bb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬åœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šé…ç½®â€œlxcå®¢æˆ·ç«¯â€æ¥ç®¡ç†LXDï¼Œå®ƒåœ¨AWSä¸Šä½œä¸ºEC2å®ä¾‹è¿è¡Œã€‚<strong class="jp ir">â€œ13 . 250 . 45 . 177â€</strong>æ˜¯LXDæ­£åœ¨è¿è¡Œçš„EC2å®ä¾‹çš„å…¬æœ‰IPã€‚</p><pre class="kn ko kp kq gt lm ln lo lp aw lq bi"><span id="9784" class="lr ls iq ln b gy lt lu l lv lw">$ lxc remote add mylxd 13.250.45.177<br/>Certificate fingerprint: 438e80f5dcca7c26acbeef60fff82615feda7cb43e49cc794c199788113ce960<br/>ok (y/n)? yes<br/>Admin password for mylxd:<br/>Client certificate stored at server:  mylxd<br/><br/>$ lxc remote set-default mylxd<br/><br/>$ lxc remote list<br/>+<em class="mb">-----------------+------------------------------------------+---------------+-----------+--------+--------+</em><br/>|      NAME       |                   URL                    |   PROTOCOL    | AUTH TYPE | PUBLIC | STATIC |<br/>+<em class="mb">-----------------+------------------------------------------+---------------+-----------+--------+--------+</em><br/>| images          | https://images.linuxcontainers.org       | simplestreams |           | YES    | NO     |<br/>+<em class="mb">-----------------+------------------------------------------+---------------+-----------+--------+--------+</em><br/>| local           | unix://                                  | lxd           | tls       | NO     | YES    |<br/>+<em class="mb">-----------------+------------------------------------------+---------------+-----------+--------+--------+</em><br/>| mylxd (default) | https://13.250.45.177:8443               | lxd           | tls       | NO     | NO     |<br/>+<em class="mb">-----------------+------------------------------------------+---------------+-----------+--------+--------+</em><br/>| ubuntu          | https://cloud-images.ubuntu.com/releases | simplestreams |           | YES    | YES    |<br/>+<em class="mb">-----------------+------------------------------------------+---------------+-----------+--------+--------+</em><br/>| ubuntu-daily    | https://cloud-images.ubuntu.com/daily    | simplestreams |           | YES    | YES    |<br/>+<em class="mb">-----------------+------------------------------------------+---------------+-----------+--------+â€”â€”â€”â€”+</em></span></pre><p id="c4c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æˆ‘ä»¬çš„ç¬”è®°æœ¬ä¸Šè¿è¡Œâ€œlxcåˆ—è¡¨â€ã€‚</p><pre class="kn ko kp kq gt lm ln lo lp aw lq bi"><span id="b58e" class="lr ls iq ln b gy lt lu l lv lw">$ lxc list<br/>+-------------------------+---------+-----------------------+------+------------+-----------+<br/>|          NAME           |  STATE  |         IPV4          | IPV6 |    TYPE    | SNAPSHOTS |<br/>+-------------------------+---------+-----------------------+------+------------+-----------+<br/>| juju-0ed97e-0           | RUNNING | 10.217.72.120 (eth0)  |      | PERSISTENT | 0         |<br/>|                         |         | 10.1.14.0 (flannel.1) |      |            |           |<br/>|                         |         | 10.0.224.1 (lxdbr0)   |      |            |           |<br/>+-------------------------+---------+-----------------------+------+------------+-----------+<br/>| juju-0ed97e-1           | RUNNING | 172.17.0.1 (docker0)  |      | PERSISTENT | 0         |<br/>|                         |         | 10.217.72.136 (eth0)  |      |            |           |<br/>|                         |         | 10.1.12.1 (cni0)      |      |            |           |<br/>|                         |         | 10.1.12.0 (flannel.1) |      |            |           |<br/>+-------------------------+---------+-----------------------+------+------------+-----------+<br/>| juju-a8bbdd-0           | RUNNING | 10.217.72.54 (eth0)   |      | PERSISTENT | 0         |<br/>+-------------------------+---------+-----------------------+------+------------+-----------+<br/>| my-alpine-lxd-container | RUNNING | 10.217.72.102 (eth0)  |      | PERSISTENT | 0         |<br/>+-------------------------+---------+-----------------------+------+------------+-----------+<br/>| webserver               | RUNNING | 10.217.72.74 (eth0)   |      | PERSISTENT | 0         |<br/>+-------------------------+---------+-----------------------+------+------------+â€”â€”â€”â€”â€”+</span></pre><p id="4542" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é…·ï¼ï¼ï¼ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¿œç¨‹ç®¡ç†æˆ‘ä»¬çš„LXDã€‚</p><p id="9127" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬å›å»æ£€æŸ¥kuberneteséƒ¨ç½²çš„çŠ¶æ€ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ly"><img src="../Images/2e8f39c062d05e2ae0a249a5ab69fb03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yLTL-si-2LwgWt2dhZ0uDQ.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mc"><img src="../Images/03fd418620bf2dbff480c73d6ca3a3d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xcUbhs8Ni-gSBMiKxGSp4A.png"/></div></div></figure><p id="50bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ­å–œä½ ï¼ï¼ï¼æˆ‘ä»¬åœ¨LXDé›†è£…ç®±ä¸Šçš„Kuberneteséƒ¨ç½²å·²ç»å®Œæˆã€‚</p><p id="2812" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥éªŒè¯æˆ‘ä»¬çš„k8sä¸»èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kn ko kp kq gt lm ln lo lp aw lq bi"><span id="94d1" class="lr ls iq ln b gy lt lu l lv lw">$ lxc info juju-0ed97e-0<br/>Name: juju-0ed97e-0<br/>Remote: https:<em class="mb">//13.250.45.177:8443</em><br/>Architecture: x86_64<br/>Created: 2018/05/20 04:20 UTC<br/>Status: Running<br/>Type: persistent<br/>Profiles: default, juju-conjure-kubernetes-core-a2d<br/>Pid: 25540<br/>Ips:<br/>  lo:inet127.0.0.1<br/>  lo:inet6::1<br/>  lxdbr0:inet10.0.224.1<br/>  lxdbr0:inet6fe80::6432:3cff:fe07:f32f<br/>  veth58AEPD:inet6fe80::fcf7:9dff:fe0a:a91d<br/>  eth0:inet10.217.72.120vethHIBQEA<br/>  eth0:inet6fe80::216:3eff:feca:580cvethHIBQEA<br/>  flannel.1:inet10.1.14.0<br/>  flannel.1:inet6fe80::fc96:25ff:fe8e:ca77<br/>Resources:<br/>  Processes: 242<br/>  CPU usage:<br/>    CPU usage (in seconds): 665<br/>  Memory usage:<br/>    Memory (current): 3.44GB<br/>    Memory (peak): 3.51GB<br/>  Network usage:<br/>    eth0:<br/>      Bytes received: 689.96MB<br/>      Bytes sent: 15.48MB<br/>      Packets received: 184636<br/>      Packets sent: 118813<br/>    flannel.1:<br/>      Bytes received: 41.31kB<br/>      Bytes sent: 24.28kB<br/>      Packets received: 269<br/>      Packets sent: 249<br/>    lo:<br/>      Bytes received: 25.61MB<br/>      Bytes sent: 25.61MB<br/>      Packets received: 87787<br/>      Packets sent: 87787<br/>    lxdbr0:<br/>      Bytes received: 1.98MB<br/>      Bytes sent: 141.17MB<br/>      Packets received: 27299<br/>      Packets sent: 31633<br/>    veth58AEPD:<br/>      Bytes received: 2.34MB<br/>      Bytes sent: 141.17MB<br/>      Packets received: 27299<br/>      Packets sent: 31634</span><span id="8df2" class="lr ls iq ln b gy ma lu l lv lw">$ lxc info juju-0ed97e-1<br/>Name: juju-0ed97e-1<br/>Remote: https:<em class="mb">//13.250.45.177:8443</em><br/>Architecture: x86_64<br/>Created: 2018/05/20 04:21 UTC<br/>Status: Running<br/>Type: persistent<br/>Profiles: default, juju-conjure-kubernetes-core-a2d<br/>Pid: 27193<br/>Ips:<br/>  lxdbr0:inet6fe80::d4ed:47ff:fe80:e006<br/>  lxdbr0:inet6fe80::1<br/>  vethd8be2574:inet6fe80::c19:b7ff:fe97:6a9a<br/>  cni0:inet10.1.12.1<br/>  cni0:inet6fe80::9085:81ff:fe0b:dcf4<br/>  flannel.1:inet10.1.12.0<br/>  flannel.1:inet6fe80::c4e8:e3ff:fe76:fb54<br/>  lo:inet127.0.0.1<br/>  lo:inet6::1<br/>  veth46d4a179:inet6fe80::e8ea:d2ff:fe9a:d27<br/>  veth5c0422eb:inet6fe80::fcfe:40ff:fe51:927b<br/>  veth65e39fc3:inet6fe80::784b:5bff:fe06:5e36<br/>  vetha5902530:inet6fe80::b0d7:68ff:fe18:f041<br/>  docker0:inet172.17.0.1<br/>  eth0:inet10.217.72.136vethJ6HM6I<br/>  eth0:inet6fe80::216:3eff:fea4:64e0vethJ6HM6I<br/>  veth23e516ee:inet6fe80::1448:60ff:fe59:7530<br/>Resources:<br/>  Processes: 716<br/>  CPU usage:<br/>    CPU usage (in seconds): 398<br/>  Memory usage:<br/>    Memory (current): 2.60GB<br/>    Memory (peak): 2.64GB<br/>  Network usage:<br/>    flannel.1:<br/>      Bytes received: 25.18kB<br/>      Bytes sent: 42.69kB<br/>      Packets received: 258<br/>      Packets sent: 278<br/>    lo:<br/>      Bytes received: 72.62kB<br/>      Bytes sent: 72.62kB<br/>      Packets received: 814<br/>      Packets sent: 814<br/>    lxdbr0:<br/>      Bytes received: 0B<br/>      Bytes sent: 650B<br/>      Packets received: 0<br/>      Packets sent: 7<br/>    vethd8be2574:<br/>      Bytes received: 126.58kB<br/>      Bytes sent: 95.45kB<br/>      Packets received: 669<br/>      Packets sent: 849<br/>    cni0:<br/>      Bytes received: 1.98MB<br/>      Bytes sent: 5.95MB<br/>      Packets received: 6802<br/>      Packets sent: 7026<br/>    eth0:<br/>      Bytes received: 655.55MB<br/>      Bytes sent: 8.16MB<br/>      Packets received: 181509<br/>      Packets sent: 98928<br/>    veth23e516ee:<br/>      Bytes received: 144.94kB<br/>      Bytes sent: 1.51MB<br/>      Packets received: 1278<br/>      Packets sent: 1332<br/>    veth46d4a179:<br/>      Bytes received: 26.00kB<br/>      Bytes sent: 28.80kB<br/>      Packets received: 282<br/>      Packets sent: 339<br/>    veth5c0422eb:<br/>      Bytes received: 40.95kB<br/>      Bytes sent: 1.30MB<br/>      Packets received: 406<br/>      Packets sent: 435<br/>    veth65e39fc3:<br/>      Bytes received: 1.41MB<br/>      Bytes sent: 1.95MB<br/>      Packets received: 1687<br/>      Packets sent: 1833<br/>    vetha5902530:<br/>      Bytes received: 290.38kB<br/>      Bytes sent: 510.22kB<br/>      Packets received: 2074<br/>      Packets sent: 2309<br/>    docker0:<br/>      Bytes received: 0B<br/>      Bytes sent: 0B<br/>      Packets received: 0<br/>      Packets sent: 0</span></pre><p id="3019" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ„Ÿè°¢é˜…è¯»ã€‚</p></div></div>    
</body>
</html>