<html>
<head>
<title>BLoC Pattern in Flutter explained with Real Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨å®ä¾‹è§£é‡Šé¢¤æŒ¯ä¸­é˜»å¡æ¨¡å¼</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/bloc-pattern-in-flutter-explained-with-real-example-a858e69eb5b8?source=collection_archive---------0-----------------------#2020-10-05">https://itnext.io/bloc-pattern-in-flutter-explained-with-real-example-a858e69eb5b8?source=collection_archive---------0-----------------------#2020-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="aa25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç®€å•å®é™…ä¾‹å­æ¥å­¦ä¹ çŠ¶æ€ç®¡ç†ä¸­çš„é˜»å¡æ¨¡å¼ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æœ¬æ•™ç¨‹çš„ç¬¬äºŒéƒ¨åˆ†<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/theming-your-app-in-flutter-using-bloc-save-reload-62048a330584">ã€‚</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/e1efe4383cb4274c7f672995f42c8b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vmnu_HtZsZDpZwL8.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">é˜»å¡é¢¤æŒ¯çŠ¶æ€ç®¡ç†</figcaption></figure><h1 id="3315" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated"><strong class="ak">è§‚çœ‹è§†é¢‘æ•™ç¨‹</strong></h1><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="e084" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®¢é˜…æˆ‘çš„<a class="ae kl" href="https://www.youtube.com/channel/UC5lbdURzjB0irr-FTbjWN1A" rel="noopener ugc nofollow" target="_blank">é¢‘é“</a>è·å–æ›´å¤šè§†é¢‘ã€‚</p><p id="d524" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†å°è¯•ä½¿ç”¨ä¸€ä¸ªwebæœåŠ¡ã€‚æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„æœåŠ¡æ˜¯</p><p id="8e52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://jsonplaceholder.typicode.com/albums</p><p id="bb30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="mc">ä»€ä¹ˆé›†å›¢ï¼Ÿ</em>T11ã€‘</strong></p><p id="c5e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å—æœ‰åŠ©äºåˆ†ç¦»è¡¨ç¤ºå’Œä¸šåŠ¡é€»è¾‘ã€‚</p><p id="3dd3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å› æ­¤ï¼Œç®€å•åœ°è¯´ï¼Œæˆ‘ä»¬å°†åœ¨blocæ–‡ä»¶ä¸­ç¼–å†™æ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p id="3812" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mc">BlocåŸºæœ¬ä¸Šåšçš„æ˜¯ï¼Œå®ƒæ¥å—ä¸€ä¸ªäº‹ä»¶å’Œä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥æ›´æ–°UIã€‚</em></p><p id="2ee5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœå·²ç»é˜»å¡ï¼Œå°±ä¸éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­ç»´æŠ¤ä»»ä½•æœ¬åœ°çŠ¶æ€ã€‚</p><p id="b64e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬å¼€å§‹â€¦</p><p id="2b4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å°†é¦–å…ˆç¼–å†™ä¸€ä¸ªä½¿ç”¨webæœåŠ¡çš„æœåŠ¡ç±»ã€‚</p><h1 id="c957" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">æ·»åŠ ä¾èµ–å…³ç³»</h1><p id="67f1" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">æ‰“å¼€æ‚¨çš„<em class="mc"> pubspec.yaml </em>æ–‡ä»¶æ·»åŠ ä¾èµ–é¡¹</p><p id="e0a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ·»åŠ æœ¬ä¾‹æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="2064" class="mn ld iq mj b gy mo mp l mq mr">dependencies:<br/>    flutter:<br/>        sdk: flutter    cupertino_icons: ^0.1.2<br/>    flutter_bloc: ^6.0.4<br/>    equatable: ^1.2.4<br/>    http: ^0.12.2</span></pre><p id="06cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> http </strong>åŒ…ä»webæœåŠ¡ä¸­è·å–æ•°æ®ã€‚</p><p id="c355" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">é¢¤æŒ¯_é˜»å¡</strong>ç”¨äºä½¿ç”¨é˜»å¡æ¨¡å¼ã€‚</p><p id="1772" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">ç­‰ä»·çš„</strong>ç”¨äºæ¯”è¾ƒå¯¹è±¡ã€‚</p><p id="dec6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬é¦–å…ˆä¸ºæœåŠ¡å“åº”åˆ›å»ºæ¨¡å‹ç±»ã€‚</p><h1 id="b2f4" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">æ¨¡å‹ç±»</h1><p id="b859" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">ä¸‹é¢æ˜¯æœåŠ¡å“åº”çš„å“åº”ç±»</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="e459" class="mn ld iq mj b gy mo mp l mq mr">import 'dart:convert';</span><span id="7798" class="mn ld iq mj b gy ms mp l mq mr">List&lt;Album&gt; albumFromJson(String str) =&gt;<br/>    List&lt;Album&gt;.from(json.decode(str).map((x) =&gt; Album.fromJson(x)));</span><span id="435b" class="mn ld iq mj b gy ms mp l mq mr">String albumToJson(List&lt;Album&gt; data) =&gt;<br/>    json.encode(List&lt;dynamic&gt;.from(data.map((x) =&gt; x.toJson())));</span><span id="4747" class="mn ld iq mj b gy ms mp l mq mr">class Album {<br/>  Album({<br/>    this.userId,<br/>    this.id,<br/>    this.title,<br/>  });int userId;</span><span id="1c36" class="mn ld iq mj b gy ms mp l mq mr">  int id;<br/>  String title;</span><span id="4e27" class="mn ld iq mj b gy ms mp l mq mr">factory Album.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Album(<br/>        userId: json["userId"],<br/>        id: json["id"],<br/>        title: json["title"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "userId": userId,<br/>        "id": id,<br/>        "title": title,<br/>      };<br/>}</span></pre><p id="935a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦æˆ‘ä»¬æœ‰äº†æ¨¡å‹ç±»ï¼Œæˆ‘ä»¬å°±ä¸ºæœåŠ¡æ¶ˆè´¹åšå¥½äº†å‡†å¤‡ã€‚</p><p id="7012" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬åˆ›å»ºæœåŠ¡æ–‡ä»¶å¹¶è·å–æ•°æ®ã€‚</p><p id="fb89" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›å»ºä¸€ä¸ªåä¸ºâ€œ<em class="mc"> services.dart </em>çš„æ–°æ–‡ä»¶ï¼Œå¹¶å¤åˆ¶ä¸‹é¢çš„ã€‚</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="a73d" class="mn ld iq mj b gy mo mp l mq mr">import 'package:flutter_demos/model/albums_list.dart';<br/>import 'package:http/http.dart' as http;<br/>import 'package:http/http.dart';abstract class AlbumsRepo {<br/>  Future&lt;List&lt;Album&gt;&gt; getAlbumList();<br/>}class AlbumServices implements AlbumsRepo {<br/>  //<br/>  static const _baseUrl = 'jsonplaceholder.typicode.com';<br/>  static const String _GET_ALBUMS = '/albums';<a class="ae kl" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Future&lt;List&lt;Album&gt;&gt; getAlbumList() async {<br/>    Uri uri = Uri.https(_baseUrl, _GET_ALBUMS);<br/>    Response response = await http.get(uri);<br/>    List&lt;Album&gt; albums = albumFromJson(response.body);<br/>    return albums;<br/>  }<br/>}</span></pre><p id="bdce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨BLOCå°†æ•°æ®å‘é€åˆ°UIã€‚</p><h1 id="f91a" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">äº‹ä»¶</h1><p id="54cf" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">è¿™é‡Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªäº‹ä»¶â€” <em class="mc"> fetchAlbums </em>ã€‚</p><p id="235f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º<em class="mc"> events.dart </em>çš„ç±»ï¼Œå¹¶æ·»åŠ ä¸‹é¢çš„æšä¸¾ã€‚</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="417d" class="mn ld iq mj b gy mo mp l mq mr">enum AlbumEvents {<br/>  fetchAlbums,<br/>}</span></pre><h1 id="9560" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">å·</h1><p id="40b6" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¼€å§‹ä»æœåŠ¡ä¸­è·å–ç›¸å†Œæ—¶çš„çŠ¶æ€ã€‚</p><p id="dd49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥é€šå¸¸æˆ‘ä»¬ä¼šæœ‰çŠ¶æ€â€¦</p><ol class=""><li id="1b02" class="mt mu iq jp b jq jr ju jv jy mv kc mw kg mx kk my mz na nb bi translated">ç™½è›‹ç™½åˆå§‹çŠ¶æ€</li><li id="62fa" class="mt mu iq jp b jq nc ju nd jy ne kc nf kg ng kk my mz na nb bi translated">ç™½è›‹ç™½åŠ è½½</li><li id="0734" class="mt mu iq jp b jq nc ju nd jy ne kc nf kg ng kk my mz na nb bi translated">è£…è½½ç™½è›‹ç™½</li><li id="39d6" class="mt mu iq jp b jq nc ju nd jy ne kc nf kg ng kk my mz na nb bi translated">ç™½è›‹ç™½åˆ—è¡¨é”™è¯¯</li></ol><p id="eb4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›å»ºä¸€ä¸ªåä¸ºâ€œ<em class="mc"> states.dart </em>çš„æ–‡ä»¶ï¼Œå¹¶å¤åˆ¶ä¸‹é¢çš„ä»£ç ã€‚</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="9170" class="mn ld iq mj b gy mo mp l mq mr">import 'package:equatable/equatable.dart';<br/>import 'package:flutter_demos/model/albums_list.dart';</span><span id="691b" class="mn ld iq mj b gy ms mp l mq mr">abstract class AlbumsState extends Equatable {<br/>  <a class="ae kl" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  List&lt;Object&gt; get props =&gt; [];<br/>}</span><span id="772e" class="mn ld iq mj b gy ms mp l mq mr">class AlbumsInitState extends AlbumsState {}</span><span id="ee66" class="mn ld iq mj b gy ms mp l mq mr">class AlbumsLoading extends AlbumsState {}</span><span id="6996" class="mn ld iq mj b gy ms mp l mq mr">class AlbumsLoaded extends AlbumsState {<br/>  final List&lt;Album&gt; albums;<br/>  AlbumsLoaded({this.albums});<br/>}</span><span id="b698" class="mn ld iq mj b gy ms mp l mq mr">class AlbumsListError extends AlbumsState {<br/>  final error;<br/>  AlbumsListError({this.error});<br/>}</span></pre><p id="41cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œæˆ‘ä»¬æ‰©å±•äº†â€œEquatableâ€ç±»ï¼Œå®ƒæœ‰åŠ©äºæ¯”è¾ƒå¯¹è±¡ã€‚å®ƒéœ€è¦ä¸€ä¸ªè¦†ç›–ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›éœ€è¦æ¯”è¾ƒçš„å±æ€§ï¼Œä»¥ç¡®å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†ä¿æŒå®ƒä¸ºç©ºã€‚</p><h1 id="81ee" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">é˜»æ­¢è·å–ç›¸å†Œ</h1><p id="e928" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºâ€œ<strong class="jp ir"> AlbumsBloc </strong>çš„ç±»ï¼Œå®ƒæ‰©å±•äº†Blocã€‚</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="5bbc" class="mn ld iq mj b gy mo mp l mq mr">import 'dart:io';<br/>import 'package:flutter_bloc/flutter_bloc.dart';<br/>import 'package:flutter_demos/api/exceptions.dart';<br/>import 'package:flutter_demos/api/services.dart';<br/>import 'package:flutter_demos/bloc/albums/events.dart';<br/>import 'package:flutter_demos/bloc/albums/states.dart';<br/>import 'package:flutter_demos/model/albums_list.dart';class AlbumsBloc extends Bloc&lt;AlbumEvents, AlbumsState&gt; {<br/>  <br/>  final AlbumsRepo albumsRepo;<br/>  List&lt;Album&gt; albums;AlbumsBloc({this.albumsRepo}) : super(AlbumsInitState());<a class="ae kl" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Stream&lt;AlbumsState&gt; mapEventToState(AlbumEvents event) async* {<br/>    switch (event) {<br/>      case AlbumEvents.fetchAlbums:<br/>        yield AlbumsLoading();<br/>        try {<br/>          albums = await albumsRepo.getAlbumList();<br/>          yield AlbumsLoaded(albums: albums);<br/>        } on SocketException {<br/>          yield AlbumsListError(<br/>            error: NoInternetException('No Internet'),<br/>          );<br/>        } on HttpException {<br/>          yield AlbumsListError(<br/>            error: NoServiceFoundException('No Service Found'),<br/>          );<br/>        } on FormatException {<br/>          yield AlbumsListError(<br/>            error: InvalidFormatException('Invalid Response format'),<br/>          );<br/>        } catch (e) {<br/>          yield AlbumsListError(<br/>            error: UnknownException('Unknown Error'),<br/>          );<br/>        }break;<br/>    }<br/>  }<br/>}</span></pre><p id="1a16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ä¸Šé¢çš„blocç±»ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ‰ä¸€ä¸ªå®ä¾‹å˜é‡â€œAlbumsRepoâ€ã€‚</p><p id="9950" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨éœ€è¦å‘BLoCæ„é€ å‡½æ•°æä¾›ä¸€ä¸ªåˆå§‹çŠ¶æ€ã€‚</p><p id="557f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥æˆ‘ä»¬æœ‰äº†â€œAlbumsInitStateâ€ã€‚</p><p id="1098" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">â€œmapEventToStateâ€æ˜¯ä¸€ä¸ªå¼‚æ­¥*å‡½æ•°ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨ä¸ç»ˆæ­¢å‡½æ•°çš„æƒ…å†µä¸‹è¿”å›æ•°æ®ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<strong class="jp ir"> yield </strong>åœ¨é€‚å½“çš„æ—¶å€™è¿”å›ä¸“è¾‘çŠ¶æ€ä¹‹ä¸€ã€‚</p><p id="7b22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å³å½“åŠ è½½å¼€å§‹æ—¶â€¦ä¸Šè¿°å‡½æ•°å°†å‘UIè¿”å›<em class="mc"> AlbumsLoading </em>çŠ¶æ€ï¼Œç„¶åå½“æ•°æ®è¿”å›æ—¶ï¼ŒéšåŒç›¸å†Œè¿”å›'<em class="mc"> AlbumsLoaded </em>'ï¼Œç„¶åå¦‚æœæœ‰ä»»ä½•é”™è¯¯ï¼Œè¿”å›'<em class="mc"> AlbumsListError </em>'å¹¶å¸¦æœ‰é€‚å½“çš„å¼‚å¸¸ï¼Œæœ€åè¿™é‡Œæ˜¯æˆ‘ä»¬çš„å¼‚å¸¸ç±»ã€‚</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="5862" class="mn ld iq mj b gy mo mp l mq mr">class NoInternetException {<br/>  var message;<br/>  NoInternetException(this.message);<br/>}class NoServiceFoundException {<br/>  var message;<br/>  NoServiceFoundException(this.message);<br/>}class InvalidFormatException {<br/>  var message;<br/>  InvalidFormatException(this.message);<br/>}class UnknownException {<br/>  var message;<br/>  UnknownException(this.message);<br/>}</span></pre><p id="e5ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ æ„¿æ„ï¼ŒDartå…è®¸æŠ›å‡ºä»»ä½•ç±»ä½œä¸ºå¼‚å¸¸ã€‚</p><h1 id="557c" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">å±å¹•</h1><p id="1b97" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç›‘å¬è¿™äº›äº‹ä»¶çš„å±å¹•ã€‚</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="2c0c" class="mn ld iq mj b gy mo mp l mq mr">import 'package:flutter/material.dart';<br/>import 'package:flutter_bloc/flutter_bloc.dart';<br/>import 'package:flutter_demos/bloc/albums/bloc.dart';<br/>import 'package:flutter_demos/bloc/albums/events.dart';<br/>import 'package:flutter_demos/bloc/albums/states.dart';<br/>import 'package:flutter_demos/model/albums_list.dart';<br/>import 'package:flutter_demos/widgets/error.dart';<br/>import 'package:flutter_demos/widgets/list_row.dart';<br/>import 'package:flutter_demos/widgets/loading.dart';</span><span id="721b" class="mn ld iq mj b gy ms mp l mq mr">class AlbumsScreen extends StatefulWidget {<br/>  <a class="ae kl" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  _AlbumsScreenState createState() =&gt; _AlbumsScreenState();<br/>}</span><span id="0005" class="mn ld iq mj b gy ms mp l mq mr">class _AlbumsScreenState extends State&lt;AlbumsScreen&gt; {<br/>  //<br/>  <a class="ae kl" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  void initState() {<br/>    super.initState();<br/>    _loadAlbums();<br/>  }</span><span id="8d06" class="mn ld iq mj b gy ms mp l mq mr">_loadAlbums() async {<br/>    context.bloc&lt;AlbumsBloc&gt;().add(AlbumEvents.fetchAlbums);<br/>  }</span><span id="b789" class="mn ld iq mj b gy ms mp l mq mr"><a class="ae kl" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      appBar: AppBar(<br/>        title: Text('Albums'),<br/>      ),<br/>      body: Container(<br/>        child: _body(),<br/>      ),<br/>    );<br/>  }</span><span id="84f8" class="mn ld iq mj b gy ms mp l mq mr">_body() {<br/>    return Column(<br/>      children: [<br/>        BlocBuilder&lt;AlbumsBloc, AlbumsState&gt;(<br/>            builder: (BuildContext context, AlbumsState state) {<br/>          if (state is AlbumsListError) {<br/>            final error = state.error;<br/>            String message = '${error.message}\nTap to Retry.';<br/>            return ErrorTxt(<br/>              message: message,<br/>              onTap: _loadAlbums,<br/>            );<br/>          }<br/>          if (state is AlbumsLoaded) {<br/>            List&lt;Album&gt; albums = state.albums;<br/>            return _list(albums);<br/>          }<br/>          return Loading();<br/>        }),<br/>      ],<br/>    );<br/>  }</span><span id="1647" class="mn ld iq mj b gy ms mp l mq mr">Widget _list(List&lt;Album&gt; albums) {<br/>    return Expanded(<br/>      child: ListView.builder(<br/>        itemCount: albums.length,<br/>        itemBuilder: (_, index) {<br/>          Album album = albums[index];<br/>          return ListRow(album: album);<br/>        },<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="9b16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬åˆ›å»ºçš„AlbumsScreenæœ‰ä¸€ä¸ªåä¸ºBlocBuilderçš„å°éƒ¨ä»¶ï¼Œå®ƒå…·æœ‰ç±»å‹â€œAlbumsBlocå’ŒAlbumsStateâ€ã€‚è¿™ä¸ªå°éƒ¨ä»¶å°†ç›‘å¬æ¥è‡ªblocæ–‡ä»¶çš„æ›´æ”¹å¹¶æ›´æ–°UIã€‚</p><p id="1dcd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°BlocBuilderæœ‰ä¸€ä¸ªâ€œBuilderâ€å±æ€§ï¼Œè¯¥å±æ€§æœ‰ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼Œå¯ä»¥è®©æˆ‘ä»¬è®¿é—®è¿”å›çš„çŠ¶æ€ã€‚</p><p id="a41f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é‚£æˆ‘ä»¬æ€ä¹ˆè§¦å‘å®ƒã€‚</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="c2e7" class="mn ld iq mj b gy mo mp l mq mr">context.bloc&lt;AlbumsBloc&gt;().add(AlbumEvents.fetchAlbums);</span></pre><p id="ce8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸Šè¿°è°ƒç”¨å°†è§¦å‘â€œfetchAlbumsâ€äº‹ä»¶ï¼Œè¯¥äº‹ä»¶å°†è§¦å‘é˜»å¡å¹¶è¿”å›çŠ¶æ€ã€‚æœ€åˆå®ƒå°†è¿”å›AlbumLoadingçŠ¶æ€ï¼Œç„¶åå¦‚æœè°ƒç”¨æˆåŠŸï¼Œå®ƒå°†è¿”å›AlbumsLoadedçŠ¶æ€ç­‰ã€‚Restå¾ˆç®€å•ï¼Œæ ¹æ®çŠ¶æ€æ›´æ–°UIã€‚å½“è°ƒç”¨æˆåŠŸæ—¶ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ˜¾ç¤ºä¸€ä¸ªç›¸å†Œåˆ—è¡¨ã€‚</p><h1 id="dd6e" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">ä¸»è¦éƒ¨åˆ†</h1><p id="fbe6" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated"><strong class="jp ir"> BlocBuilder </strong>æ¥æ”¶äº‹ä»¶æ¥æ›´æ–°UIã€‚ä½†æ˜¯åº”è¯¥æœ‰æä¾›è€…ï¼Œæ­£ç¡®ã€‚æ‰€ä»¥æ‚¨éœ€è¦ç”¨BlocProvideråŒ…è£…AlbumsScreenã€‚æ‰€ä»¥æˆ‘ä»¬çš„æƒ³æ³•æ˜¯ï¼Œæƒ³è¦ç›‘å¬AlbumBlocæ›´æ–°çš„å±å¹•åº”è¯¥ç”¨ä¸‹é¢çš„<strong class="jp ir"> BlocProvider </strong>åŒ…è£…è‡ªå·±ã€‚</p><pre class="kn ko kp kq gt mi mj mk ml aw mm bi"><span id="4b38" class="mn ld iq mj b gy mo mp l mq mr">class MyApp extends StatelessWidget {<br/>  <a class="ae kl" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      title: 'Flutter Bloc Demo',<br/>      debugShowCheckedModeBanner: false,<br/>      theme: ThemeData(<br/>        primarySwatch: Colors.blue,<br/>        visualDensity: VisualDensity.adaptivePlatformDensity,<br/>      ),<br/>      home: BlocProvider(<br/>        create: (context) =&gt; AlbumsBloc(albumsRepo: AlbumServices()),<br/>        child: AlbumsScreen(),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="d037" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°â€œAlbumsBlocâ€æ­£åœ¨æ¥æ”¶â€œalbum servicesâ€repoï¼Œè¯¥repoè·å–ç›¸å†Œã€‚</p><p id="75e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±æ˜¯è¿™æ ·ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nh"><img src="../Images/a2027443ce23d14fa76229c4edc7431d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kKGv_1v-K1W4lyWw.png"/></div></div></figure><p id="b4da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å–œæ¬¢è¿™ä¸ªå¸–å­çš„è¯·é¼“æŒâ€¦</p><p id="1110" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®°ä½ï¼Œä½ æœ€å¤šå¯ä»¥æ‰“50ä¸ªæ‹å­ã€‚</p><p id="8b02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="mc">å¦‚æœä½ è§‰å¾—æˆ‘çš„æ–‡ç« æœ‰ç”¨ï¼Œè¯·ç»™æˆ‘ä¹°æ¯å’–å•¡</em> </strong></p><div class="ni nj gp gr nk nl"><a href="https://www.buymeacoffee.com/vipinvijayan" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">Vipin Vijayan</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">å˜¿ğŸ‘‹æˆ‘åˆšåˆšåœ¨è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªé¡µé¢ã€‚ä½ ç°åœ¨å¯ä»¥ç»™æˆ‘ä¹°æ¯å’–å•¡äº†ï¼</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz kw nl"/></div></div></a></div><h1 id="1429" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">æºä»£ç </h1><p id="657a" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated"><a class="ae kl" href="https://bitbucket.org/vipinvijayan1987/tutorialprojects/src/BlocSimple/FlutterTutorialProjects/flutter_demos/" rel="noopener ugc nofollow" target="_blank">https://bit bucket . org/vipinvijayan 1987/tutorial projects/src/bloc simple/fluttertutorial projects/flutter _ demos/</a></p></div></div>    
</body>
</html>