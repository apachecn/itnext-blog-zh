<html>
<head>
<title>Adding Commento to React Apps (like Gatsby)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å°†Commentoæ·»åŠ åˆ°Reactåº”ç”¨ç¨‹åº(å¦‚Gatsby)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/adding-commento-to-react-apps-like-gatsby-871824fb57ae?source=collection_archive---------3-----------------------#2019-09-02">https://itnext.io/adding-commento-to-react-apps-like-gatsby-871824fb57ae?source=collection_archive---------3-----------------------#2019-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fb769f75eca462f0d9cb48019e3eceaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BsD3iHYaYyRcIj7gozi1MQ.png"/></div></div></figure><p id="db02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å› ä¸ºæˆ‘æœ€è¿‘ç”¨Commento æ›¿æ¢äº†<a class="ae kw" href="https://nehalist.io/no-more-disqus-hello-commento" rel="noopener ugc nofollow" target="_blank"> Disqusï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºåˆ†äº«å¦‚ä½•å°†ä¸€ä¸ªä¸åŒçš„è¯„è®ºç³»ç»ŸåµŒå…¥åˆ°ä½ çš„Gatsbyç«™ç‚¹(æˆ–ä¸€èˆ¬çš„Reactåº”ç”¨ç¨‹åº)æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚</a></p><h1 id="40a7" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">é›¶ä¾èµ–åˆ†é‡</h1><p id="5356" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Disqusæœ‰ä¸€ä¸ª<a class="ae kw" href="https://github.com/disqus/disqus-react" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹åŒ…</a>,ç”¨äºå°†å®ƒåµŒå…¥åˆ°Reactåº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘æ›¾ç»å°†Disqusæ·»åŠ åˆ°æˆ‘çš„åšå®¢ä¸­ã€‚å¯¹äºCommentoï¼Œæˆ‘æƒ³æ‘†è„±é¢å¤–çš„ä¾èµ–ï¼›é¢å¤–çš„ä¾èµ–å¢åŠ äº†ç»´æŠ¤ï¼Œå¹¶ä¸”æ€»æ˜¯ä¼´éšç€ä¸€å®šçš„é£é™©ã€‚è¿™å¹¶ä¸æ˜¯è¯´ä¾èµ–å¼€æºæ˜¯ä¸€ä¸ªåä¸»æ„â€”â€”åªæ˜¯æœ‰æ—¶å€™ä¸ºå°ä¸œè¥¿æ·»åŠ <a class="ae kw" href="https://www.npmjs.com/package/isarray" rel="noopener ugc nofollow" target="_blank">ä¸€ä¸ªåŒ…åªæ˜¯è¿‡åº¦å¤¸å¼ ï¼Œä¸å€¼è¿™ä¸ªä»·ã€‚</a></p><p id="1cbf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€ä»¥æˆ‘è‡ªå·±å®ç°äº†ä¸€ä¸ª<em class="ma">éå¸¸</em>å°çš„ç»„ä»¶ï¼Œè´Ÿè´£ç”¨ä¸åˆ°40è¡Œä»£ç åµŒå…¥Commentoã€‚</p><blockquote class="mb mc md"><p id="2169" class="jy jz ma ka b kb kc kd ke kf kg kh ki me kk kl km mf ko kp kq mg ks kt ku kv ij bi translated"><em class="iq">ç”±äºå¤§å¤šæ•°è¯„è®ºç³»ç»Ÿéƒ½ä»¥ç›¸åŒçš„æ–¹å¼å·¥ä½œ(é€šè¿‡åœ¨é¡µé¢ä¸­åµŒå…¥ä¸€ä¸ªç®€å•çš„JavaScriptæ–‡ä»¶)ï¼Œè¿™ç§æ–¹æ³•åº”è¯¥é€‚ç”¨äºå…¶ä»–ç³»ç»Ÿï¼Œå¦‚</em><a class="ae kw" href="https://posativ.org/isso/" rel="noopener ugc nofollow" target="_blank"><em class="iq">Isso</em></a><em class="iq">ã€</em><a class="ae kw" href="https://schnack.cool/" rel="noopener ugc nofollow" target="_blank"><em class="iq">Schnack</em></a><em class="iq"/><a class="ae kw" href="https://remark42.com/" rel="noopener ugc nofollow" target="_blank"><em class="iq">remark 42</em></a><em class="iq">ç­‰ã€‚ä¹Ÿæ˜¯(æœ‰å°è°ƒæ•´)ã€‚</em></p></blockquote><p id="4d6d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å®ƒæ˜¯ä¸€ä¸ªåŠŸèƒ½ç»„ä»¶ï¼Œåˆ©ç”¨é’©å­å°†CommentoåµŒå…¥åˆ°æ‰€éœ€çš„é¡µé¢ä¸Šã€‚æ­¤å¤–ï¼Œå®ƒä½¿ç”¨ä¸¤ä¸ªåŠ©æ‰‹å‡½æ•°(å€Ÿç”¨è‡ª<a class="ae kw" href="https://github.com/disqus/disqus-react/blob/master/src/utils.js#L3" rel="noopener ugc nofollow" target="_blank"> disqus-react </a>)æ¥æ·»åŠ å’Œåˆ é™¤é¡µé¢ä¸­çš„è„šæœ¬ã€‚</p><p id="1ef8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ•´ä¸ªå®ç°ç›¸å½“ç®€å•:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4dfb" class="mq ky iq mm b gy mr ms l mt mu">import React, {useEffect} from 'react';</span><span id="edcb" class="mq ky iq mm b gy mv ms l mt mu">// Helper to add scripts to our page<br/>const insertScript = (src, id, parentElement) =&gt; {<br/>  const script = window.document.createElement('script');<br/>  script.async = true;<br/>  script.src   = src;<br/>  script.id    = id;<br/>  parentElement.appendChild(script);</span><span id="5bc6" class="mq ky iq mm b gy mv ms l mt mu">return script;<br/>};</span><span id="4bd0" class="mq ky iq mm b gy mv ms l mt mu">// Helper to remove scripts from our page<br/>const removeScript = (id, parentElement) =&gt; {<br/>  const script = window.document.getElementById(id);<br/>  if (script) {<br/>    parentElement.removeChild(script);<br/>  }<br/>};</span><span id="d433" class="mq ky iq mm b gy mv ms l mt mu">// The actual component<br/>const Commento = ({id}) =&gt; {<br/>  useEffect(() =&gt; {<br/>    // If there's no window there's nothing to do for us<br/>    if (! window) {<br/>      return;<br/>    }<br/>    const document = window.document;<br/>    // In case our #commento container exists we can add our commento script<br/>    if (document.getElementById('commento')) {<br/>      insertScript(`&lt;your commento url&gt;/js/commento.js`, `commento-script`, document.body);<br/>    }</span><span id="225c" class="mq ky iq mm b gy mv ms l mt mu">// Cleanup; remove the script from the page<br/>    return () =&gt; removeScript(`commento-script`, document.body);<br/>  }, [id]);</span><span id="c751" class="mq ky iq mm b gy mv ms l mt mu">return &lt;div id={`commento`} /&gt;<br/>};</span><span id="241d" class="mq ky iq mm b gy mv ms l mt mu">export default Commento;</span></pre><p id="17c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸è¦å¿˜è®°ç”¨æ­£ç¡®çš„URLæ›¿æ¢<code class="fe mw mx my mm b">&lt;your commento url&gt;</code>ã€‚</p><p id="2b92" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸€æ—¦æ‰¾åˆ°ç›¸å…³è”çš„å®¹å™¨(å…¶idç­‰äº<code class="fe mw mx my mm b">commento</code>)Commentoè„šæœ¬å°±ä¼šè¢«æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡µé¢ä¸­ï¼Œå¹¶ä¸”ä¸€æ—¦<code class="fe mw mx my mm b">id</code>å±æ€§(åº”è¯¥æ˜¯æ–‡ç« æˆ–é¡µé¢id)å‘ç”Ÿå˜åŒ–å°±ä¼šè¢«é‡æ–°å‘ˆç°(æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a class="ae kw" href="https://reactjs.org/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects" rel="noopener ugc nofollow" target="_blank">é€šè¿‡è·³è¿‡æ•ˆæœä¼˜åŒ–æ€§èƒ½</a>)ã€‚</p><p id="b958" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡ç®€å•åœ°å°†<code class="fe mw mx my mm b">&lt;Commento id={uniquePostId} /&gt;</code>ç»„ä»¶æ·»åŠ åˆ°æˆ‘ä»¬æƒ³è¦æ·»åŠ è¯„è®ºçš„åœ°æ–¹æ¥ä¸ºæ‰€æœ‰é¡µé¢æ·»åŠ è¯„è®ºã€‚</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="d5cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç•™ä¸‹ğŸ‘ï¼Œå…³æ³¨æˆ‘ä¸Š</em> <a class="ae kw" href="https://twitter.com/nehalist" rel="noopener ugc nofollow" target="_blank"> <em class="ma">æ¨ç‰¹</em> </a> <em class="ma">å¹¶è®¢é˜…</em> <a class="ae kw" href="https://nehalist.io/newsletter/" rel="noopener ugc nofollow" target="_blank"> <em class="ma">æˆ‘çš„å¿«è®¯</em> </a> <em class="ma">ã€‚æœ¬å¸–åŸè½½äº2019å¹´9æœˆ2æ—¥</em> <a class="ae kw" href="https://nehalist.io/adding-commento-to-react-apps-like-gatsby" rel="noopener ugc nofollow" target="_blank"> <em class="ma">æˆ‘çš„åšå®¢</em> </a> <em class="ma">ã€‚</em></p></div></div>    
</body>
</html>