<html>
<head>
<title>Associative PHP arrays in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScriptä¸­çš„å…³è”PHPæ•°ç»„</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/associative-php-arrays-in-typescript-49cffc5a2051?source=collection_archive---------5-----------------------#2019-06-24">https://itnext.io/associative-php-arrays-in-typescript-49cffc5a2051?source=collection_archive---------5-----------------------#2019-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b2cc9d571fedb1a0fdf2cd606861744a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pm-RsajxOlOEQBrYwAejEw.png"/></div></div></figure><p id="9f5b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">PHPä¸­å…³è”æ•°ç»„çš„æ¦‚å¿µæœ‰ç‚¹ä¸å¸¸è§ï¼›å¤§å¤šæ•°è¯­è¨€ç”¨åœ°å›¾ã€åˆ—è¡¨ã€å­—å…¸æˆ–ç±»ä¼¼çš„ç»“æ„æ¥å®ç°è¿™ä¸ªæ¦‚å¿µã€‚è€Œä¸”ï¼Œå³ä½¿PHPä¸­çš„å…³è”æ•°ç»„æ˜¯å¯èƒ½çš„(å¹¶ä¸”è¢«å¤§é‡ä½¿ç”¨)ï¼Œä½†æ˜¯ä¸€æ—¦æ‚¨æƒ³åœ¨JSON APIä¸­ä½¿ç”¨å®ƒä»¬ï¼Œå®ƒä»¬å°±ä¼šå˜å¾—æœ‰ç‚¹æ··ä¹±ã€‚</p><h1 id="242e" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">JSONä¸­çš„å…³è”æ•°ç»„</h1><p id="198b" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">è®©æˆ‘ä»¬çœ‹çœ‹JSONå“åº”ä¸­çš„å…³è”æ•°ç»„ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="26f6" class="mi kx iq me b gy mj mk l ml mm">$data = []; <br/>// Becomes [] in JSON</span><span id="fbcc" class="mi kx iq me b gy mn mk l ml mm">$data = ["one", "two", "three"];<br/>// Becomes ["one", "two, "three"] in JSON</span><span id="02a7" class="mi kx iq me b gy mn mk l ml mm">$data = [0 =&gt; "foo", 137 =&gt; "bar"];<br/>// Becomes { "0": "foo", "137": "bar" } in JSON</span><span id="22b3" class="mi kx iq me b gy mn mk l ml mm">$data = ["foo", 3 =&gt; "bar", "hello" =&gt; "world"];<br/>// Becomes { "0": "foo", "3": "bar", "hello": "world" } in JSON</span></pre><p id="34f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼ŒJSONä¸­åªæœ‰â€œçœŸæ­£çš„â€æ•°ç»„æ‰æ˜¯æ•°ç»„ï¼Œè€Œå…³è”é¡¹å°†æ•°ç»„è½¬åŒ–ä¸ºå¯¹è±¡ã€‚</p><h1 id="d042" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">åˆé€‚çš„ç±»å‹</h1><p id="d221" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">å› ä¸ºå…³è”æ•°ç»„è¦ä¹ˆæˆä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¦ä¹ˆæˆä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æ­£ç¡®çš„ç±»å‹åº”è¯¥æ˜¯<code class="fe mo mp mq me b">object | []</code>ã€‚è¿™å®é™…ä¸Šå¾ˆç®€å•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸ºå…³è”æ•°ç»„å¼•å…¥æˆ‘ä»¬è‡ªå·±çš„ç±»å‹æ¥åšå¾—æ›´å¥½â€”â€”åŒ…æ‹¬ä¸€ä¸ªæ³›å‹æ¥è·å–å…³äºæ•°ç»„å…ƒç´ ç±»å‹çš„ä¿¡æ¯ã€‚</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="fda5" class="mi kx iq me b gy mj mk l ml mm">type AssociativeArray&lt;T = unknown&gt; = {[key: string]: T | undefined} | T[];</span></pre><p id="df44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mo mp mq me b">T</code>æœ€ç»ˆå¯èƒ½ä¼šè¢«çœç•¥ï¼Œä½†æ˜¯ä¸ºæˆ‘ä»¬çš„æ•°ç»„æä¾›äº†é¢å¤–çš„ç±»å‹ä¿¡æ¯ã€‚</p><p id="f28a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™ä¸ª<a class="ae mr" href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types" rel="noopener ugc nofollow" target="_blank">è”åˆç±»å‹</a>å‘Šè¯‰TypeScriptï¼Œæˆ‘ä»¬è¦ä¹ˆå¤„ç†ä¸€ä¸ªç”±é”®-å€¼å¯¹ç»„æˆçš„å¯¹è±¡ï¼Œå…¶ä¸­é”®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå€¼æ˜¯ç±»å‹<code class="fe mo mp mq me b">T</code>ã€<strong class="ka ir">æˆ–</strong>ä¸€ä¸ªåŒ…å«å…ƒç´ <code class="fe mo mp mq me b">T</code>çš„ç®€å•æ•°ç»„(ä¹ŸåŒ…æ‹¬ç©ºæ•°ç»„)ã€‚è¿™å¬èµ·æ¥å¯èƒ½æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å†çœ‹ä¸€ä¸ªä¾‹å­ï¼Œä¸€åˆ‡éƒ½åº”è¯¥æ¸…æ¥šäº†(å‡è®¾<code class="fe mo mp mq me b">getData</code>ä»æˆ‘ä»¬çš„APIä¸­æ£€ç´¢æ•°æ®):</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="7e8d" class="mi kx iq me b gy mj mk l ml mm">// $data = [];<br/>const data: AssociativeArray = getData(); <br/>// not specifying `T` means that the type remains unknown</span><span id="f50d" class="mi kx iq me b gy mn mk l ml mm">// $data = ["one", "two", "three"];<br/>const data: AssociativeArray&lt;string&gt; = getData();<br/>data[0]; // equals "one"<br/>data[1].toFixed(); // error: `toFixed` does not exist on strings!</span><span id="4cbd" class="mi kx iq me b gy mn mk l ml mm">// $data = [0 =&gt; "foo", 137 =&gt; "bar"];<br/>const data: AssociativeArray&lt;string&gt; = getData();<br/>data[0]; // equals "foo"<br/>data[137]; // equals "bar"</span><span id="f0fd" class="mi kx iq me b gy mn mk l ml mm">// $data = ["foo", 3 =&gt; "bar", "hello" =&gt; "world"]<br/>const data: AssociativeArray&lt;string&gt; = getData();<br/>data["0"]; // equals "foo"<br/>data["3"]; // equals "bar"<br/>data["hello"]; // equals "world"<br/>data["hello"].toFixed(); // error: `toFixed` does not exist on strings!</span><span id="44d1" class="mi kx iq me b gy mn mk l ml mm">// $data = [1, 2, 3]<br/>const data: AssociativeArray&lt;number&gt; = getData();<br/>data[0]; // equals 1</span><span id="8c43" class="mi kx iq me b gy mn mk l ml mm">// $data = [[], [1, 2, 3]]<br/>const data: AssociativeArray&lt;number[]&gt; = getData();<br/>data[0]; // equals []<br/>data[1]; // equals [1, 2, 3]<br/>data[1][0]; // equals 1<br/>data[1][0].substr(0, 5); // error: `substr` does not exist on numbers!</span></pre><p id="c5c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¤šäºäº†è¿™ä¸ªæ³›å‹ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½çŸ¥é“æ•°ç»„é‡Œé¢æœ‰ä»€ä¹ˆã€‚</p><h1 id="d00d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">åœ°å›¾</h1><p id="85c7" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">æ­£å¦‚å¼€å§‹æ—¶æåˆ°çš„ï¼Œè®¸å¤šè¯­è¨€ä»¥æ˜ å°„(æˆ–åˆ—è¡¨ï¼Œæˆ–ä»»ä½•ä½ æƒ³å«å®ƒä»¬çš„ä¸œè¥¿)çš„å½¢å¼å®ç°å…³è”æ•°ç»„ã€‚<a class="ae mr" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" rel="noopener ugc nofollow" target="_blank">JavaScript</a>ä¸­ä¹Ÿå­˜åœ¨æ˜ å°„ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç®€å•åœ°ä½¿ç”¨<code class="fe mo mp mq me b">Object.entries</code>å°†æˆ‘ä»¬çš„JSONå“åº”è½¬æ¢æˆæ˜ å°„:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="3641" class="mi kx iq me b gy mj mk l ml mm">// Data from our API<br/>const data =  {<br/>  "foo": "bar",<br/>  "hello": "world"<br/>};</span><span id="1fbc" class="mi kx iq me b gy mn mk l ml mm">const map = new Map&lt;string, string&gt;(Object.entries(data));</span><span id="83cb" class="mi kx iq me b gy mn mk l ml mm">map.get('foo'); // equals "bar"<br/>map.get('hello'); // equals "world"</span></pre><p id="ec86" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">TypeScriptä¸­çš„æ˜ å°„æ˜¯é€šç”¨çš„ï¼Œå…è®¸æˆ‘ä»¬æŒ‡å®šé”®<strong class="ka ir">å’Œ</strong>å€¼çš„ç±»å‹</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="2aa8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç•™ä¸‹ğŸ‘ï¼Œå…³æ³¨æˆ‘ä¸Š <a class="ae mr" href="https://twitter.com/nehalist" rel="noopener ugc nofollow" target="_blank"> <em class="mz">æ¨ç‰¹</em> </a> <em class="mz">å¹¶è®¢é˜…</em> <a class="ae mr" href="https://nehalist.io/newsletter/" rel="noopener ugc nofollow" target="_blank"> <em class="mz">æˆ‘çš„å¿«è®¯</em> </a> <em class="mz">ã€‚åŸè½½äº2019å¹´6æœˆ24æ—¥</em><a class="ae mr" href="https://nehalist.io/associative-php-arrays-in-typescript" rel="noopener ugc nofollow" target="_blank"><em class="mz">https://nehalist . io</em></a><em class="mz">ã€‚</em></p></div></div>    
</body>
</html>