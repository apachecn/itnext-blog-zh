<html>
<head>
<title>Guide â€” The Multi CRA Lerna Monorepo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æŒ‡å—â€”â€”å¤šCRAå‹’çº³Monorepo</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/guide-react-app-monorepo-with-lerna-d932afb2e875?source=collection_archive---------0-----------------------#2018-10-27">https://itnext.io/guide-react-app-monorepo-with-lerna-d932afb2e875?source=collection_archive---------0-----------------------#2018-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><blockquote class="jn jo jp"><p id="ed56" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å°†é€šè¿‡ä¸€æœ¬æ•…äº‹ä¹¦äº†è§£å¦‚ä½•æ„å»ºMonorepoæ¥ç®¡ç†å¤šä¸ªå…±äº«é€šç”¨ç»„ä»¶çš„Create Reactåº”ç”¨ç¨‹åºã€‚</p></blockquote><h1 id="fa9b" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">æ›´æ–°æ—¶é—´:2019/07/17</h1><p id="6224" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">è¯·ä½¿ç”¨<a class="ae lv" href="https://github.com/react-workspaces/react-workspaces-playground" rel="noopener ugc nofollow" target="_blank"> <em class="js"> React Workspacesæ¸¸ä¹åœº</em> </a>ï¼Œè€Œä¸æ˜¯æœ¬æŒ‡å—ã€‚<strong class="jt ir">React work spaces Playground</strong>æ˜¯ä¸€ä¸ªå—æ”¯æŒçš„ä»£ç åº“ï¼Œåœ¨è¿™é‡Œæ‚¨å¯ä»¥ä½¿ç”¨Reactå’ŒStorybookçš„æœ€æ–°ç‰ˆæœ¬æ¥æµ‹è¯•æœ¬æŒ‡å—ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚æœ¬æŒ‡å—æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡çŒ´å­è¡¥ä¸å®ç°ç±»ä¼¼çš„æ•ˆæœâ€”â€”è¿™æ˜¯ä¸€ç§å¾ˆéš¾ç»´æŒçš„ç³Ÿç³•åšæ³•ã€‚è¯·æŸ¥çœ‹æˆ‘çš„<a class="ae lv" href="https://slides.com/alistairmacdonald-f1lt3r/react-workspaces/#/" rel="noopener ugc nofollow" target="_blank"> <em class="js"> React Workspaceså¹»ç¯ç‰‡</em> </a>äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi md"><img src="../Images/a96bc5781ff1af4f4c4c0489d5785376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8cAes7cqi18fyEiSPoG2Dg.jpeg"/></div></div></figure><p id="2b32" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><strong class="jt ir">ç‰¹è‰²:</strong></p><ul class=""><li id="533f" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko mu mv mw mx bi translated">ğŸ¸<a class="ae lv" href="https://www.npmjs.com/package/babel-loader-lerna-cra" rel="noopener ugc nofollow" target="_blank"><strong class="jt ir">Babel-Loader-Lerna-CRA</strong></a>â€”è‡ªåŠ¨ä¼ è¾“ï¼Œçƒ­é‡è£…Lernaæ¨¡å—ï¼</li><li id="1bca" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">ğŸ‰<a class="ae lv" href="https://lernajs.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir">è±çº³</strong></a>â€”â€”å•ä¸€å›è´­ç»ç†äºº</li><li id="146e" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">âš›ï¸ï¸ <a class="ae lv" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir">åˆ›å»º-ååº”-app-2</strong></a>-ååº”16 Appè„šæ‰‹æ¶(æœªæ³¨å°„)</li><li id="5afe" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">ğŸ“–<a class="ae lv" href="https://github.com/storybooks/storybook/tree/master/app/react" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir">æ•…äº‹ä¹¦-4-ååº”</strong> </a> <strong class="jt ir"> </strong> â€”ç»„ä»¶æ•…äº‹ä¹¦</li><li id="a608" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">ğŸƒ <a class="ae lv" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir"> Jest </strong> </a> â€”å•å…ƒ/å¿«ç…§æµ‹è¯•</li></ul><h1 id="80dc" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">TLï¼›åšå£«-ç»™æˆ‘å¯†ç ï¼</h1><blockquote class="nd"><p id="fabe" class="ne nf iq bd ng nh ni nj nk nl nm ko dk translated">å¥½â€¦<a class="ae lv" href="https://github.com/F1LT3R/monorepo-react" rel="noopener ugc nofollow" target="_blank">f1lt3r/monorepo-react</a>ã€‚</p></blockquote><blockquote class="jn jo jp"><p id="42b1" class="jq jr js jt b ju nn jw jx jy no ka kb kc np ke kf kg nq ki kj kk nr km kn ko ij bi translated"><strong class="jt ir"> âš ï¸çš„é‡è¦æ­¥éª¤</strong></p><p id="1d1a" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">å¦‚æœæ‚¨åœ¨ä¸ä½¿ç”¨æœ¬æŒ‡å—çš„æƒ…å†µä¸‹ç­¾å‡ºä»£ç è¿›è¡Œæµ‹è¯•ï¼Œè¯·è®°ä½éµå¾ªä»¥ä¸‹é‡è¦æ­¥éª¤:</p><p id="e784" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">1.<code class="fe ns nt nu nv b">lerna booststrap</code> <br/> 2ã€‚<code class="fe ns nt nu nv b">npx babel-loader-lerna-cra</code></p></blockquote><h1 id="b8e4" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">Monoreposçš„æ¡ˆä¾‹</h1><p id="1b11" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼Œæ‚¨æ­£åœ¨æ„å»ºä¸€å¥—ä¸‰ä¸ªReactåº”ç”¨ç¨‹åºï¼Œå®ƒä»¬å…±äº«ç›¸åŒçš„æ¶æ„ã€è®¾è®¡æ¨¡å¼ã€ç»„ä»¶å’Œé£æ ¼ã€‚ç°åœ¨æƒ³è±¡ä¸€ä¸‹ï¼Œå¯¹ä¸€ä¸ªä½çº§ç»„ä»¶è¿›è¡Œæ›´æ–°ï¼Œæ¯”å¦‚ä¸€ä¸ªåœ¨æ‰€æœ‰ä¸‰ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„æŒ‰é’®ï¼Œä»¥åŠä¸€ä¸ªå­ç»„ä»¶ã€‚</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi nw"><img src="../Images/d93c9b752cb776ba5ca426a7d765c065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9YpTKzsnkyYaVcl4.png"/></div></div></figure><p id="d101" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†è¢«è¿«è¿›å…¥è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹:</p><ol class=""><li id="0ac7" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko nx mv mw mx bi translated">æ›´æ–°æŒ‰é’®çš„gitå­˜å‚¨åº“ä¸­çš„æŒ‰é’®ä»£ç ã€‚<br/> <em class="js">(ä¸Šå›¾ä¸­çš„ç»„ä»¶B)</em></li><li id="c6a0" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">åœ¨ç»„ä»¶B repoä¸­åˆ›å»ºç¬¬ä¸€ä¸ªæ‹‰å¼è¯·æ±‚<em class="js"> (#1) </em>ï¼Œå¹¶åœ¨masterä¸­æ£€æŸ¥æ–°ä»£ç ã€‚</li><li id="c17f" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">åœ¨å…¬å…±æˆ–ç§äººNPMæœåŠ¡ä¸Šå‘å¸ƒç»„ä»¶Bçš„æŒ‰é’®ä»£ç ã€‚</li><li id="e934" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">è¿›å…¥ä½¿ç”¨æŒ‰é’®çš„React repoå¹¶æ›´æ–°package.jsonä¾èµ–é¡¹ã€‚</li><li id="e459" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">åœ¨ç»„ä»¶C repoä¸­åˆ›å»ºç¬¬äºŒä¸ªPullè¯·æ±‚<em class="js"> (#2) </em>ï¼Œå¹¶å°†æ–°ä»£ç æäº¤ç»™masterã€‚</li><li id="e9fd" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">å°†ç»„ä»¶å‘å¸ƒåˆ°NPMä»“åº“ã€‚</li></ol><p id="100f" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><strong class="jt ir">è¿›å…¥</strong>è¿›å…¥<code class="fe ns nt nu nv b"><strong class="jt ir">React App #1</strong></code></p><ol class=""><li id="ac32" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko nx mv mw mx bi translated">æ›´æ–°ä¾èµ–å…³ç³»ã€‚</li><li id="6bae" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">åœ¨npmæœåŠ¡ä¸Šé‡æ–°å‘å¸ƒåŒ…ã€‚</li><li id="8f4d" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">æäº¤æ–°çš„PRã€‚<em class="js"> (#3) </em></li><li id="a53e" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">éƒ¨ç½²</li></ol><p id="e1c4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><strong class="jt ir">è¿›å…¥</strong>è¿›å…¥<code class="fe ns nt nu nv b"><strong class="jt ir">React App #2</strong></code></p><ol class=""><li id="8881" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko nx mv mw mx bi translated">æ›´æ–°ä¾èµ–å…³ç³»ã€‚</li><li id="4a2d" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">åœ¨npmæœåŠ¡ä¸Šé‡æ–°å‘å¸ƒåŒ…ã€‚</li><li id="5ddb" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">æäº¤æ–°çš„PRã€‚<em class="js"> (#4) </em></li><li id="0e15" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">éƒ¨ç½²</li></ol><p id="0695" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><strong class="jt ir">èµ°è¿›</strong>T2ã€‘</p><ol class=""><li id="94c0" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko nx mv mw mx bi translated">æ›´æ–°ä¾èµ–å…³ç³»ã€‚</li><li id="6e15" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">åœ¨npmæœåŠ¡ä¸Šé‡æ–°å‘å¸ƒåŒ…ã€‚</li><li id="a0c4" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">æäº¤æ–°çš„PRã€‚<em class="js"> (#5) </em></li><li id="f80d" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">éƒ¨ç½²</li></ol><p id="cb35" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">è¿™æ˜¯å¯¹ä¸€ä¸ªæŒ‰é’®ç»„ä»¶çš„å˜æ›´çš„äº”ä¸ªæ‹‰è¯·æ±‚ï¼</p><p id="642c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ˜¾ç„¶ï¼Œè¿™å¹¶ä¸ç†æƒ³ã€‚</p><h2 id="e148" class="ny kq iq bd kr nz oa dn kv ob oc dp kz lp od oe ld lr of og lh lt oh oi ll oj bi translated">æ›´ç®€å•çš„è§£å†³æ–¹æ¡ˆ</h2><p id="d289" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">ç°åœ¨ï¼Œæƒ³è±¡ä¸€ä¸‹ä½¿ç”¨å•ä¸ªå›è´­è¿›è¡Œç›¸åŒçš„æ›´æ–°ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨åƒ<a class="ae lv" href="https://lernajs.io/" rel="noopener ugc nofollow" target="_blank"> Lerna </a>è¿™æ ·çš„Monorepoå·¥å…·ï¼Œæ›´æ–°è¿‡ç¨‹å°†çœ‹èµ·æ¥æ›´åƒè¿™æ ·:</p><ol class=""><li id="40b6" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko nx mv mw mx bi translated">æ›´æ–°æŒ‰é’®çš„gitç›®å½•ä¸­çš„æŒ‰é’®ä»£ç ã€‚(<code class="fe ns nt nu nv b">Component #B</code>å¦‚ä¸Šå›¾)</li><li id="8db2" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">è¿è¡Œ<code class="fe ns nt nu nv b">lerna bootstrap</code>å°†æŒ‰é’®<code class="fe ns nt nu nv b">Component #B</code>é“¾æ¥åˆ°æ‰€æœ‰çš„å­ä¾èµ–é¡¹ä¸­ã€‚</li><li id="d22a" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">è¿è¡Œ<code class="fe ns nt nu nv b">lerna publish</code>æ›´æ–°ä½ çš„ç§äººNPMæœåŠ¡ä¸­çš„åŒ…ã€‚</li><li id="431a" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">åœ¨<code class="fe ns nt nu nv b">Monorepo</code> repoä¸­åˆ›å»ºä¸€ä¸ªPullè¯·æ±‚ï¼Œå¹¶å°†æ–°ä»£ç æ”¾å…¥<code class="fe ns nt nu nv b">master</code>ã€‚</li><li id="d67d" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko nx mv mw mx bi translated">ä½¿ç”¨æ›´æ–°çš„<code class="fe ns nt nu nv b">package.json</code>ç‰ˆæœ¬å·é‡æ–°éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚</li></ol><p id="7f0b" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨ä¸€åˆ‡éƒ½åœ¨ä¸€ä¸ªæ‹‰è¯·æ±‚ä¸­å®Œæˆã€‚</p><p id="3947" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåƒè„¸ä¹¦å’Œè°·æ­Œè¿™æ ·çš„å¤§å‹ç»„ç»‡ä¼šå¾ˆå¥½åœ°åˆ©ç”¨Monoreposã€‚æ­¤æµç¨‹å¯ä»¥ç®€åŒ–ä¸ºå¯¹æ‰€æœ‰ä¾èµ–é¡¹å’Œåº”ç”¨ç¨‹åºä½¿ç”¨ä¸€ä¸ªå…±äº«å­˜å‚¨åº“ã€‚Monorepoåœ¨ä¸æŸå¤±å·¥ç¨‹é€Ÿåº¦çš„æƒ…å†µä¸‹æ‰©å¤§è§„æ¨¡ï¼Œå¹¶å‡å°‘å› åˆ‡æ¢ä¸Šä¸‹æ–‡ç„¦ç‚¹è€Œé€ æˆçš„äººä¸ºé”™è¯¯ã€‚</p><p id="97e7" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ä¸‹é¢çš„æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä¸ºReacté¡¹ç›®è®¾ç½®è¿™æ ·çš„Monorepoã€‚</p><h1 id="da3a" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">å…ˆå†³æ¡ä»¶</h1><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="4a9d" class="ny kq iq nv b gy oo op l oq or">$ npm i -g lerna</span><span id="57b6" class="ny kq iq nv b gy os op l oq or">$ npm i -g create-react-app</span></pre><p id="a2e7" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ä¸ºMonorepoé¡¹ç›®åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="add5" class="ny kq iq nv b gy oo op l oq or">$ cd ~/repos<br/>$ mkdir monorepo-react<br/>$ cd monorepo-react</span></pre><h1 id="3d5d" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">è®¾ç½®Lerna</h1><p id="ebe9" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">åˆ›å»ºå¹¶åˆå§‹åŒ–æ‚¨çš„Lerna monorepo:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="f4ea" class="ny kq iq nv b gy oo op l oq or">$ lerna init</span></pre><p id="0def" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨çš„<code class="fe ns nt nu nv b">package.json</code>ç°åœ¨åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="4b5f" class="ny kq iq nv b gy oo op l oq or">{<br/>  "name": "root",<br/>  "private": true,<br/>  "devDependencies": {<br/>    "lerna": "^3.4.3"<br/>  }<br/>}</span></pre><h1 id="c280" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">å®‰è£…é€šç”¨ä¾èµ–é¡¹</h1><p id="235f" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">å®‰è£…è¿™äº›é€šç”¨ä¾èµ–é¡¹å°†å…è®¸æ‚¨:</p><ul class=""><li id="dea5" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko mu mv mw mx bi translated">å¯¹é¡¹ç›®çš„æ ¹ç›®å½•è¿è¡ŒStorybookã€‚</li><li id="196e" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">è®©Storybookä¸ºæ‚¨çš„Reacté¡¹ç›®è‡ªåŠ¨å®‰è£…æ­£ç¡®çš„æ¨¡å—ã€‚</li><li id="b3f2" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">æœ‰å·´åˆ«å¡”transpileæ­£ç¡®çš„ä»£ç ï¼Œæµ‹è¯•å’Œæ•…äº‹ä¹¦ã€‚</li></ul><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="602a" class="ny kq iq nv b gy oo op l oq or">$ npm i -D react react-dom @babel/core@^7.0.0-0 @babel/cli babel-plugin-transform-es2015-modules-commonjs babel-jest enzyme enzyme-adapter-react-16 jest react-test-renderer babel-core@7.0.0-bridge.0 @babel/preset-env @babel/preset-react</span></pre><p id="d97a" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨çš„<code class="fe ns nt nu nv b">package.json</code>ç°åœ¨åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="f702" class="ny kq iq nv b gy oo op l oq or">{<br/>  "name": "root",<br/>  "private": true,<br/>  "devDependencies": {<br/>    "@babel/cli": "^7.1.2",<br/>    "@babel/core": "^7.1.2",<br/>    "@babel/preset-env": "^7.1.0",<br/>    "@babel/preset-react": "^7.0.0",<br/>    "babel-core": "^7.0.0-bridge.0",<br/>    "babel-jest": "^23.6.0",<br/>    "babel-plugin-transform-es2015-modules-commonjs": "^6.26.2",<br/>    "enzyme": "^3.7.0",<br/>    "enzyme-adapter-react-16": "^1.6.0",<br/>    "jest": "^23.6.0",<br/>    "lerna": "^3.4.3",<br/>    "react": "^16.6.0",<br/>    "react-dom": "^16.6.0",<br/>    "react-test-renderer": "^16.6.0"<br/>  }<br/>}</span></pre><h1 id="b5e5" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">å®‰è£…æ•…äº‹ä¹¦React</h1><p id="22ca" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">ç°åœ¨æˆ‘ä»¬å°†å®‰è£…å’Œåˆå§‹åŒ–æ•…äº‹ä¹¦ç‰ˆæœ¬4ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="c6f1" class="ny kq iq nv b gy oo op l oq or">$ npx -p @storybook/cli@alpha sb init</span></pre><p id="a831" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ³¨æ„:å®‰è£…<code class="fe ns nt nu nv b">@alpha</code>ç‰ˆæœ¬(ç›®å‰æ˜¯<code class="fe ns nt nu nv b">@4.0.0-rc.6</code>ï¼Œå°†å…è®¸æˆ‘ä»¬åœ¨<code class="fe ns nt nu nv b">package.json</code>æ–‡ä»¶ä¸­è®¾ç½®æˆ‘ä»¬çš„å·´åˆ«å¡”é…ç½®ï¼Œè¿™å°†ä½¿é…ç½®å­åŒ…æ›´åŠ å®¹æ˜“ã€‚</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ot"><img src="../Images/459ed0556737a2c90e4b4508f4280e28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vU4LFFFkkAyxtZwy.png"/></div></div></figure><p id="7c07" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨çš„æ ¹<code class="fe ns nt nu nv b">package.json</code>æ–‡ä»¶ç°åœ¨åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="7c64" class="ny kq iq nv b gy oo op l oq or">{<br/>  "name": "root",<br/>  "private": true,<br/>  "devDependencies": {<br/>    "@babel/cli": "^7.1.2",<br/>    "@babel/core": "^7.1.2",<br/>    "@babel/preset-env": "^7.1.0",<br/>    "@babel/preset-react": "^7.0.0",<br/>    "babel-core": "^7.0.0-bridge.0",<br/>    "babel-jest": "^23.6.0",<br/>    "babel-plugin-transform-es2015-modules-commonjs": "^6.26.2",<br/>    "enzyme": "^3.7.0",<br/>    "enzyme-adapter-react-16": "^1.6.0",<br/>    "jest": "^23.6.0",<br/>    "lerna": "^3.4.3",<br/>    "react": "^16.6.0",<br/>    "react-dom": "^16.6.0",<br/>    "react-test-renderer": "^16.6.0",<br/>    "@storybook/react": "^4.0.0-alpha.25",<br/>    "@storybook/addon-actions": "^4.0.0-alpha.25",<br/>    "@storybook/addon-links": "^4.0.0-alpha.25",<br/>    "@storybook/addons": "^4.0.0-alpha.25",<br/>    "babel-loader": "^8.0.4"<br/>  },<br/>  "dependencies": {},<br/>  "scripts": {<br/>    "storybook": "start-storybook -p 6006",<br/>    "build-storybook": "build-storybook"<br/>  }<br/>}</span></pre><p id="40d0" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨ä½ å¯ä»¥æµ‹è¯•æ•…äº‹ä¹¦åœ¨ä½ çš„æœºå™¨ä¸Šè¿è¡Œäº†ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="32a2" class="ny kq iq nv b gy oo op l oq or">$ npm run storybook</span></pre><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ou"><img src="../Images/cf73e5bd94a3b891aedc0af5fad880b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OrtP4EHME7vVC1M-.png"/></div></div></figure><p id="3720" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ•…äº‹ä¹¦ç°åœ¨åº”è¯¥ä¼šåœ¨ä½ çš„æµè§ˆå™¨ä¸­è‡ªåŠ¨å¯åŠ¨ã€‚</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ov"><img src="../Images/52f9b66f6d32e0f1b938d943b942e73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jGmSlE2Gqtu28-cu.png"/></div></div></figure><p id="af58" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">åˆ—å‡ºæ•…äº‹ä¹¦æ–‡ä»¶:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="763d" class="ny kq iq nv b gy oo op l oq or">$ tree -C .storybook stories</span></pre><ul class=""><li id="fc4f" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko mu mv mw mx bi translated">ä½ çš„<code class="fe ns nt nu nv b">.storybook/</code>ç›®å½•åŒ…å«ä½ çš„æ•…äº‹ä¹¦é…ç½®ã€‚</li><li id="f00b" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">ä½ çš„<code class="fe ns nt nu nv b">stories/</code>ç›®å½•æ˜¯ä½ çš„å…¨çƒæ•…äº‹ä¹¦æ•…äº‹ç”Ÿæ´»çš„åœ°æ–¹ã€‚</li></ul><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ow"><img src="../Images/ee0550889c256e7787388ea41394f829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VJLSoFna5Stl2aBh.png"/></div></div></figure><blockquote class="jn jo jp"><p id="7c2e" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">æ³¨æ„:å®‰è£…æ ‘:[ <code class="fe ns nt nu nv b">brew</code> / <code class="fe ns nt nu nv b">apt-get</code> / <code class="fe ns nt nu nv b">yum</code> / <code class="fe ns nt nu nv b">pkg</code> ] <code class="fe ns nt nu nv b">install tree</code></p></blockquote><h1 id="e23f" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">åˆ›å»ºæ‚¨çš„Reactåº”ç”¨ç¨‹åº</h1><p id="f471" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">åœ¨<code class="fe ns nt nu nv b">packages/my-react-app</code>ä¸ºä½ çš„Reactåº”ç”¨åˆ›å»ºä¸€ä¸ªå®¶ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="9ec5" class="ny kq iq nv b gy oo op l oq or">$ cd ~/repos/monorepo-react/packages/<br/>$ create-react-app my-react-app</span></pre><p id="bc7d" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">è¿è¡Œæ‚¨çš„Reactåº”ç”¨ç¨‹åºæ¥æµ‹è¯•å·¥ä½œæƒ…å†µã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="0b15" class="ny kq iq nv b gy oo op l oq or">$ cd my-react-app<br/>$ npm run start</span></pre><p id="87d4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨ç°åœ¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€æ¡å…³äºWebpackçš„é”™è¯¯æ¶ˆæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ou"><img src="../Images/8483dca33af6fc68553fce76eddb9dc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bPIo_OLRMAfFXAgr.png"/></div></div></figure><p id="2e32" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æŒ‰ç…§å»ºè®®ï¼Œæˆ‘ä»¬å°†é€šè¿‡åœ¨<code class="fe ns nt nu nv b">.env</code>æ–‡ä»¶ä¸­è®¾ç½®<code class="fe ns nt nu nv b">SKIP_PREFLIGHT_CHECK=true</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="744d" class="ny kq iq nv b gy oo op l oq or">echo "SKIP_PREFLIGHT_CHECK=true" &gt; .env</span></pre><p id="907a" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿè¿è¡ŒReactåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”æ‚¨çš„æµè§ˆå™¨åº”è¯¥ä¼šè‡ªåŠ¨å¯åŠ¨ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="04fa" class="ny kq iq nv b gy oo op l oq or">$ npm run start</span></pre><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ov"><img src="../Images/f46b12c3a0f6fcd62c21fc6e2769b988.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W2sYsQZBgK3QFdfl.png"/></div></div></figure><h2 id="c7c9" class="ny kq iq bd kr nz oa dn kv ob oc dp kz lp od oe ld lr of og lh lt oh oi ll oj bi translated">åˆ›å»ºå¤–éƒ¨ååº”ç»„ä»¶</h2><p id="dae3" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">è®©æˆ‘ä»¬åˆ›å»ºç¬¬ä¸€ä¸ªå¤–éƒ¨Reactç»„ä»¶ã€‚æˆ‘ä»¬å°†åœ¨Lernaæä¾›çš„<code class="fe ns nt nu nv b">./packages</code>ç›®å½•ä¸­å®Œæˆè¿™é¡¹å·¥ä½œã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="ca37" class="ny kq iq nv b gy oo op l oq or">$ cd ~/repos/monorepo-react/packages/<br/>$ mkdir comp-button<br/>$ cd comp-button</span></pre><p id="f4ef" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">åƒè¿™æ ·åˆ›å»ºä¸€ä¸ª<code class="fe ns nt nu nv b">packages/comp-button/package.json</code>æ–‡ä»¶:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="95fe" class="ny kq iq nv b gy oo op l oq or">{<br/>  "name": "@project/comp-button",<br/>  "version": "0.1.0",<br/>  "description": "A simple button component",<br/>  "main": "dist/index.js",<br/>  "module": "src/index.js",<br/>  "scripts": {<br/>    "transpile": "babel src -d dist --ignore '**/*.spec.js,**/*.stories.js'",<br/>    "jest": "jest --coverage --verbose --color"<br/>  },<br/>  "babel": {<br/>    "presets": [<br/>      "@babel/preset-env",<br/>      "@babel/preset-react"<br/>    ],<br/>    "env": {<br/>      "test": {<br/>        "plugins": [<br/>          "transform-es2015-modules-commonjs"<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="960a" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><code class="fe ns nt nu nv b">package.json</code>æ–‡ä»¶ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ:</p><ul class=""><li id="cf10" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko mu mv mw mx bi translated"><code class="fe ns nt nu nv b">name</code>:é€šè¿‡NPMæˆ–äº¤å‰é“¾æ¥Lernaå®‰è£…æ—¶ï¼Œç»„ä»¶çš„ç»„ç»‡åç§°ç©ºé—´ã€‚</li><li id="1b9e" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><code class="fe ns nt nu nv b">main</code>:ç¼–è¯‘å¥½çš„ä»£ç å°†ä¼šå’Œä½ çš„Reactåº”ç”¨ä¸€èµ·å‘å¸ƒã€‚</li><li id="7d52" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><code class="fe ns nt nu nv b">module</code>:å¼€å‘åº”ç”¨æˆ–è¿è¡Œæµ‹è¯•æ—¶ï¼Œå°†ä½œä¸ºæœ¬åœ°è¿è¡Œæ—¶ä¾èµ–é¡¹å¯¼å…¥çš„é¢„ç¼–è¯‘ä»£ç ã€‚</li><li id="e11a" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">ä¸€ä¸ªNPMè„šæœ¬ç”¨å·´åˆ«å¡”å¼€å§‹ä½ çš„ä»£ç çš„è½¬æ¢ã€‚<strong class="jt ir">æ³¨æ„:</strong>æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨<code class="fe ns nt nu nv b">build</code>ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³ä¿ç•™è¿™ä¸ªè¯ï¼Œä»¥åç”¨<code class="fe ns nt nu nv b">lerna run build</code>æ¥æ„å»ºæˆ‘ä»¬çš„Reactåº”ç”¨ã€‚</li><li id="3b34" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><code class="fe ns nt nu nv b">babel</code>:è¿™ä¸ªè®¾ç½®å°†æˆ‘ä»¬çš„ç»„ä»¶é…ç½®ä¸ºç”¨Babel 7 for Reactã€‚</li></ul><blockquote class="jn jo jp"><p id="506b" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">æ³¨æ„:å› ä¸ºæˆ‘ä»¬åœ¨æ ¹ç›®å½•<code class="fe ns nt nu nv b">package.json</code>ä¸­å®‰è£…äº†<code class="fe ns nt nu nv b">react</code>ã€<code class="fe ns nt nu nv b">react-dom</code>ã€<code class="fe ns nt nu nv b">@babel/core@^7.0.0-0</code>è¿™æ ·çš„ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦åœ¨è¿™ä¸ªåŒ…ä¸­å†æ¬¡å®‰è£…å®ƒä»¬ã€‚</p></blockquote><p id="55d9" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ä¸ºReactç»„ä»¶åˆ›å»ºä¸€ä¸ªæºç›®å½•ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="99f7" class="ny kq iq nv b gy oo op l oq or">$ mkdir src<br/>$ cd src</span></pre><p id="1861" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">åœ¨<code class="fe ns nt nu nv b">packages/comp-button/index.js</code>ä¸­åˆ›å»ºReactç»„ä»¶:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="548c" class="ny kq iq nv b gy oo op l oq or">import React from 'react'<br/><br/>const Button = ({ type = 'button', children, onClick }) =&gt; (<br/>    &lt;div&gt;<br/>      &lt;button type={type} className="button" onClick={onClick}&gt;<br/>        {children}<br/>      &lt;/button&gt;<br/>  &lt;/div&gt;<br/>)<br/><br/>export default Button</span></pre><h2 id="970e" class="ny kq iq bd kr nz oa dn kv ob oc dp kz lp od oe ld lr of og lh lt oh oi ll oj bi translated">ä¼ è¾“æ‚¨çš„ç»„ä»¶</h2><p id="3fcd" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">ç°åœ¨è®©æˆ‘ä»¬å°è¯•å°†æ‚¨çš„Reactä»£ç è½¬æ¢åˆ°ECMAScript 2015(æ”¯æŒæ—§æµè§ˆå™¨çš„JavaScript)ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="6473" class="ny kq iq nv b gy oo op l oq or">$ lerna run transpile</span></pre><p id="e9ec" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡º:</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ow"><img src="../Images/43c5ba48ff81434cb3ceef67486412da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a8l8Lw0nB0s2oHhc.png"/></div></div></figure><p id="d37c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨çš„<code class="fe ns nt nu nv b">./dist/</code>ç›®å½•ç°åœ¨åº”è¯¥åŒ…å«ä¼ è¾“çš„<code class="fe ns nt nu nv b">index.js</code>æ–‡ä»¶:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="e823" class="ny kq iq nv b gy oo op l oq or">$ tree -C ../dist</span></pre><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ox"><img src="../Images/b733fa5d8010cfe8404baefafe5424fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NB4rnIte-bmibOK4.png"/></div></div></figure><p id="bb54" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><code class="fe ns nt nu nv b">./dist/index.js</code>æ–‡ä»¶åº”è¯¥åŒ…å«ä½ çš„ç¼–è¯‘ä»£ç ï¼Œå°±åƒè¿™æ ·:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="9ac6" class="ny kq iq nv b gy oo op l oq or">"use strict";<br/><br/>Object.defineProperty(exports, "__esModule", {<br/>  value: true<br/>});<br/>exports.default = void 0;<br/><br/>var _react = _interopRequireDefault(require("react"));<br/><br/>function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { default: obj }; }<br/><br/>var Button = function Button(_ref) {<br/>  var _ref$type = _ref.type,<br/>      type = _ref$type === void 0 ? 'button' : _ref$type,<br/>      children = _ref.children,<br/>      onClick = _ref.onClick;<br/>  return _react.default.createElement("div", null, _react.default.createElement("button", {<br/>    type: type,<br/>    className: "button",<br/>    onClick: onClick<br/>  }, children));<br/>};<br/><br/>var _default = Button;<br/>exports.default = _default;</span></pre><h2 id="1e6f" class="ny kq iq bd kr nz oa dn kv ob oc dp kz lp od oe ld lr of og lh lt oh oi ll oj bi translated">æµ‹è¯•æ‚¨çš„ç»„ä»¶</h2><p id="cfb0" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨<code class="fe ns nt nu nv b">packages/comp-button/src/index.spec.js</code>ä¸­ä¸ºæ‚¨çš„ç»„ä»¶åˆ›å»ºä¸€ä¸ªJestè§„èŒƒ:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="f291" class="ny kq iq nv b gy oo op l oq or">import React from 'react';<br/>import {mount} from 'enzyme';<br/>import Button from '.';<br/><br/>describe('Button Component', function() {<br/>  it('renders without props', function() {<br/>    const wrapper = mount(&lt;Button /&gt;);<br/>    const button = wrapper.find('.button');<br/>    expect(button.length).toBe(1);<br/>  })<br/><br/>  it('renders without props', function() {<br/>    const wrapper = mount(&lt;Button /&gt;);<br/>    const button = wrapper.find('.button');<br/>    expect(button.length).toBe(1);<br/>  })<br/><br/>  it('renders children when passed in', () =&gt; {<br/>    const wrapper = mount(<br/>      &lt;Button&gt;<br/>        &lt;p className="child"&gt;Some Child&lt;/p&gt;<br/>      &lt;/Button&gt;<br/>    );<br/><br/>    const child = wrapper.find('.child')<br/>    expect(child.length).toBe(1)<br/>  })<br/><br/>  it('handles onClick events', () =&gt; {<br/>    const onClick = jest.fn()<br/>    const wrapper = mount(<br/>      &lt;Button onClick={onClick} /&gt;<br/>    )<br/><br/>    wrapper.find('button').simulate('click')<br/><br/>    expect(onClick.mock.calls.length).toBe(1)<br/>  })<br/>})</span></pre><blockquote class="jn jo jp"><p id="e098" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">æ³¨:æˆ‘ä»¬ä¹‹å‰å®‰è£…äº†<code class="fe ns nt nu nv b">babel-core@7.0.0-bridge.0</code>å’Œ<code class="fe ns nt nu nv b">babel-jest</code>æ˜¯ä¸ºäº†è®©Babel 7ä»£ç å…¼å®¹Jestã€‚(è¯·å‚è§ä¸Šé¢çš„â€œå®‰è£…é€šç”¨ä¾èµ–é¡¹â€)ã€‚)</p></blockquote><p id="e23c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">å°†ä¸‹é¢çš„â€œjestâ€éƒ¨åˆ†æ·»åŠ åˆ°æ‚¨çš„æ ¹ç›®å½•<code class="fe ns nt nu nv b">package.json</code>:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="84df" class="ny kq iq nv b gy oo op l oq or">"jest": {<br/>    "setupFiles": [<br/>      "../../setupTests"<br/>    ]<br/>  }</span></pre><p id="3f90" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨çš„<code class="fe ns nt nu nv b">packages/comp-button/package.json</code>ç°åœ¨åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="a51b" class="ny kq iq nv b gy oo op l oq or">{<br/>    "name": "@my-project/comp-button",<br/>    "version": "0.1.0",<br/>    "description": "A simple button component",<br/>    "main": "dist/index.js",<br/>    "module": "src/index.js",<br/>    "scripts": {<br/>    "transpile": "babel src -d dist --ignore '**/*.spec.js,**/*.stories.js'",<br/>      "jest": "jest --coverage --verbose --color"<br/>    },<br/>    "babel": {<br/>      "presets": [<br/>        "@babel/preset-env",<br/>        "@babel/preset-react"<br/>      ],<br/>      "env": {<br/>        "test": {<br/>          "plugins": [<br/>            "transform-es2015-modules-commonjs"<br/>          ]<br/>        }<br/>      }<br/>    },<br/>    "jest": {<br/>      "setupFiles": [<br/>        "../../setupTests"<br/>      ]<br/>    }<br/>  }</span></pre><p id="80bf" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">å½“Jestè¿è¡Œæ—¶ï¼Œ<code class="fe ns nt nu nv b">../../setupTests</code>æ–‡ä»¶å°†å¼•ç”¨Monorepoæ ¹ä¸­çš„<code class="fe ns nt nu nv b">setupTests.js</code>ã€‚</p><p id="dc5c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">è®©æˆ‘ä»¬ç”¨ä¸€äº›é…¶åŠ©æ‰‹æ·»åŠ è¿™ä¸ª<code class="fe ns nt nu nv b">setupTests.js</code>æ–‡ä»¶:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="81d5" class="ny kq iq nv b gy oo op l oq or">const enzyme = require('enzyme');<br/>const Adapter = require('enzyme-adapter-react-16');<br/>enzyme.configure({ adapter: new Adapter() });</span></pre><blockquote class="jn jo jp"><p id="a2ad" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">æ³¨æ„:æˆ‘ä»¬æ•…æ„åœ¨è¿™é‡Œä½¿ç”¨æ—§çš„requireè¯­æ³•ï¼Œè¿™æ ·<code class="fe ns nt nu nv b">setupTests.js</code>å°±å¯ä»¥åŠ è½½ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„babelé…ç½®ã€‚</p></blockquote><p id="f90e" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨è®©æˆ‘ä»¬è¿è¡ŒJestæ¥çœ‹çœ‹è¿™ä¸ªè§„èŒƒæ˜¯å¦‚ä½•å·¥ä½œçš„:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="0afe" class="ny kq iq nv b gy oo op l oq or">lerna run jest</span></pre><blockquote class="jn jo jp"><p id="1dec" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">æ³¨æ„:æˆ‘ä»¬ä½¿ç”¨<code class="fe ns nt nu nv b">jest</code>è€Œä¸æ˜¯<code class="fe ns nt nu nv b">test</code>æ¥ä¿ç•™â€œæµ‹è¯•â€ä¸€è¯ç”¨äºè¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ŒåŒ…æ‹¬ç«¯åˆ°ç«¯ã€æ—æŒºç­‰ã€‚</p></blockquote><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ow"><img src="../Images/eb003fcbb26aeefedf081ad1ce384179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4dgq--mIK_qSo7vy.png"/></div></div></figure><h1 id="ac06" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">ä¸ºReactç»„ä»¶æ·»åŠ ä¸€ä¸ªæ•…äº‹</h1><p id="32db" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">ç°åœ¨è®©æˆ‘ä»¬ä¸ºæ–°çš„æŒ‰é’®ç»„ä»¶åˆ›å»ºä¸€ä¸ªæ•…äº‹ä¹¦æ•…äº‹:</p><p id="b0f3" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°<code class="fe ns nt nu nv b">index.stories.js</code>:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="6d66" class="ny kq iq nv b gy oo op l oq or">import React from 'react'<br/>import { storiesOf } from '@storybook/react'<br/>import { action } from '@storybook/addon-actions'<br/><br/>import Button from '.'<br/><br/>storiesOf('Button', module)<br/><br/>  .add('with text', () =&gt; (<br/>      &lt;Button onClick={action('clicked')}&gt;Button&lt;/Button&gt;<br/>  ))<br/><br/>  .add('with some emoji', () =&gt; (<br/>      &lt;Button onClick={action('clicked')}&gt;ğŸ˜€ ğŸ˜ ğŸ‘ ğŸ’¯&lt;/Button&gt;<br/>  ))<br/><br/>  .add('with a theme provider', () =&gt; (<br/>    &lt;Button onClick={action('clicked')}&gt;Button&lt;/Button&gt;<br/>  ))</span></pre><p id="7f8a" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><strong class="jt ir">é‡æ–°é…ç½®æ•…äº‹ä¹¦</strong></p><p id="71b5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æˆ‘ä»¬ç°åœ¨éœ€è¦é…ç½®Storybookä»æ‰€æœ‰çš„<code class="fe ns nt nu nv b">packages/**</code>ç›®å½•åŠ è½½æ•…äº‹ï¼Œè€Œä¸æ˜¯ä»ä½ çš„Monorepoæ ¹ç›®å½•åŠ è½½<code class="fe ns nt nu nv b">stories/</code>ç›®å½•ã€‚</p><p id="5208" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">åœ¨<code class="fe ns nt nu nv b">~/repos/monorepo-react/.storybook/config.js</code>ä¸­ç¼–è¾‘ä½ æ•…äº‹ä¹¦é…ç½®ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="6bd1" class="ny kq iq nv b gy oo op l oq or">import { configure } from '@storybook/react';<br/><br/>// automatically import all files ending in *.stories.js<br/>const req = require.context('../packages', true, /.stories.js$/);<br/>function loadStories() {<br/>  req.keys().forEach(filename =&gt; req(filename));<br/>}<br/><br/>configure(loadStories, module);</span></pre><p id="e4d0" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨å¯ä»¥å®‰å…¨åœ°åˆ é™¤Monorepoæ ¹ç›®å½•ä¸‹çš„<code class="fe ns nt nu nv b">stories/</code>ç›®å½•äº†ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="06a8" class="ny kq iq nv b gy oo op l oq or">$ cd ~/repos/monorepo-react/<br/>$ sudo rm -r stories</span></pre><p id="39f3" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æ•…äº‹ä¹¦æ˜¯å¦ä»ç„¶è½½å…¥äº†ä½ çš„<code class="fe ns nt nu nv b">comp-button</code>æ•…äº‹:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="22bf" class="ny kq iq nv b gy oo op l oq or">$ npm run storybook</span></pre><p id="4836" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨æ‚¨åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°æ‚¨çš„æŒ‰é’®ç»„ä»¶æ•…äº‹ï¼Œå®ƒæ˜¯ä»æ‚¨çš„<code class="fe ns nt nu nv b">packages/comp-button</code>ç›®å½•æ„å»ºçš„:</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ov"><img src="../Images/f9e5a7feb079f498d723493640cab3e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Rv9NRowSpiUg-yoG.png"/></div></div></figure><h1 id="3e7c" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">ç”¨Lernaäº¤è”ä½ çš„ä¾èµ–å…³ç³»</h1><p id="004e" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">å°†ä»¥ä¸‹ä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨çš„<code class="fe ns nt nu nv b">packages/my-react-app/package.json</code>:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="f7d6" class="ny kq iq nv b gy oo op l oq or">{<br/>  "dependencies": {<br/>    "@my-project/comp-button": "*"<br/>  }<br/>}</span></pre><p id="71b3" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ä½ çš„<code class="fe ns nt nu nv b">packages/my-react-app/package.json</code>ç°åœ¨åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="439f" class="ny kq iq nv b gy oo op l oq or">{<br/>  "name": "@my-project/my-react-app",<br/>  "version": "0.1.0",<br/>  "private": true,<br/>  "dependencies": {<br/>    "react": "^16.6.0",<br/>    "react-dom": "^16.6.0",<br/>    "react-scripts": "2.0.5",<br/>    "@my-project/comp-button": "*"<br/>  },<br/>  "scripts": {<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>  },<br/>  "eslintConfig": {<br/>    "extends": "react-app"<br/>  },<br/>  "browserslist": [<br/>    "&gt;0.2%",<br/>    "not dead",<br/>    "not ie &lt;= 11",<br/>    "not op_mini all"<br/>  ]<br/>}</span></pre><p id="eb70" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨<code class="fe ns nt nu nv b">lerna bootstrap</code>æ¥äº¤è”æˆ‘ä»¬çš„åŒ…ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="d3ea" class="ny kq iq nv b gy oo op l oq or">$ lerna bootstrap</span></pre><p id="1ce3" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹æˆåŠŸæ¶ˆæ¯:</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ow"><img src="../Images/2033cea3da675590d93052ca920e7b3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uJlx-KsV6S2-JL6G.png"/></div></div></figure><h1 id="8c8a" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">åœ¨Reactåº”ç”¨ä¸­ä½¿ç”¨æ‚¨çš„ç»„ä»¶</h1><p id="7543" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">åœ¨<code class="fe ns nt nu nv b">packages/my-react-app/src/App.js</code>ä¸­å¢åŠ ä»¥ä¸‹å‡ è¡Œ:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="8a88" class="ny kq iq nv b gy oo op l oq or">import CompButton from '@my-project/comp-button';<br/>&lt;CompButton&gt;Foobar!&lt;/CompButton&gt;</span></pre><p id="0d17" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨çš„æ–‡ä»¶ç°åœ¨å°†å¦‚ä¸‹æ‰€ç¤º:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="c42c" class="ny kq iq nv b gy oo op l oq or">import React, { Component } from 'react';<br/>import logo from './logo.svg';<br/>import './App.css';<br/>import CompButton from '@my-project/comp-button';<br/><br/>class App extends Component {<br/>  render() {<br/>    return (<br/>      &lt;div className="App"&gt;<br/>        &lt;header className="App-header"&gt;<br/>          &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>          &lt;p&gt;<br/>            Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>          &lt;/p&gt;<br/>          &lt;a<br/>            className="App-link"<br/>            href="https://reactjs.org"<br/>            target="_blank"<br/>            rel="noopener noreferrer"<br/>          &gt;<br/>            Learn React<br/>          &lt;/a&gt;<br/>          &lt;CompButton&gt;Foobar!&lt;/CompButton&gt;<br/>        &lt;/header&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}<br/><br/>export default App;</span></pre><p id="db61" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨å¯åŠ¨ä½ çš„åº”ç”¨ç¨‹åº:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="9c5c" class="ny kq iq nv b gy oo op l oq or">$ npm run start</span></pre><p id="a5fb" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹é”™è¯¯:</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi oy"><img src="../Images/b3f34eb69c56e032cdd784fb02bcb59c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BJVIhKL2nV2skoax.png"/></div></div></figure><p id="6329" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">Reactåº”ç”¨ç¨‹åºæ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºCreate-React-Appçš„Webpacké…ç½®ä¸çŸ¥é“ä»»ä½•å¤–éƒ¨æ¨¡å—ã€‚è¿™æ„å‘³ç€Webpackä¸èƒ½å‘Šè¯‰Babel-Loaderä½ çš„ç»„ä»¶ç›®å½•ï¼Œæ‰€ä»¥æºä»£ç ä¸èƒ½è¢«ä¼ è¾“ã€‚</p><p id="45f7" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">çœ‹èµ·æ¥è¿™ä¸ªé—®é¢˜å¯èƒ½ä¼šéšç€Create-React-Appçš„æœªæ¥ç‰ˆæœ¬è€Œæ¶ˆå¤±ï¼Œå°½ç®¡è¿™å¯èƒ½éœ€è¦Yarnå·¥ä½œç©ºé—´ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ä»¥ä¸‹è§£å†³æ–¹æ³•ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ£€æŸ¥GitHubé—®é¢˜<a class="ae lv" href="https://github.com/facebook/create-react-app/issues/1333" rel="noopener ugc nofollow" target="_blank">Create-React-App-Lerna-Support</a>ä»¥æŸ¥çœ‹è¯¥åŠŸèƒ½æ˜¯å¦å·²ç™»é™†ã€‚</p><h1 id="cd61" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">ä¸ºLernaé‡æ–°ç¼–å†™Reactåº”ç”¨ç¨‹åº</h1><p id="8625" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">æˆ‘åˆ›å»ºäº†ä¸€ä¸ªå°çš„å·¥ä½œåŒºèŠ‚ç‚¹æ¨¡å—æ¥è¦†ç›–Lernaé¡¹ç›®ä¸­çš„Create-React-App Webpacké…ç½®ï¼Œç§°ä¸º<a class="ae lv" href="https://www.npmjs.com/package/babel-loader-lerna-cra" rel="noopener ugc nofollow" target="_blank"> Babel-Loader-Lerna-CRA </a>ã€‚è¿™å¾ˆç®€å•ã€‚å®ƒåªæ˜¯æ›´æ–°äº†Babel-Loaderçš„Webpackè·¯å¾„ã€‚</p><p id="ee12" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨å¯ä»¥ä½¿ç”¨NPMå®‰è£…æ­¤è½¯ä»¶åŒ…:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="d9c1" class="ny kq iq nv b gy oo op l oq or">npm i -D babel-loader-lerna-cra</span></pre><p id="7f4d" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨è®©æˆ‘ä»¬ç”¨æè¿°ç»„ä»¶å’Œåº”ç”¨ç¨‹åºä¹‹é—´å…³ç³»çš„globæ¨¡å¼æ¥æ›´æ–°Lernaæ ¹ä¸­çš„<code class="fe ns nt nu nv b">package.json</code>ã€‚</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="c79b" class="ny kq iq nv b gy oo op l oq or">"babel-loader-lerna-cra": {<br/>  "imports": "packages/comp-*/src",<br/>  "apps":  "packages/*react-app*"<br/>}</span></pre><p id="4fb5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨çš„<code class="fe ns nt nu nv b">package.json</code>ç°åœ¨åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="a906" class="ny kq iq nv b gy oo op l oq or">{<br/>  "name": "root",<br/>  "private": true,<br/>  "devDependencies": {<br/>    "@babel/cli": "^7.1.2",<br/>    "@babel/core": "^7.1.2",<br/>    "@babel/preset-env": "^7.1.0",<br/>    "@babel/preset-react": "^7.0.0",<br/>    "@storybook/addon-actions": "^4.0.0-alpha.25",<br/>    "@storybook/addon-links": "^4.0.0-alpha.25",<br/>    "@storybook/addons": "^4.0.0-alpha.25",<br/>    "@storybook/react": "^4.0.0-alpha.25",<br/>    "babel-core": "^7.0.0-bridge.0",<br/>    "babel-jest": "^23.6.0",<br/>    "babel-loader": "^8.0.4",<br/>    "babel-loader-lerna-cra": "^0.1.2",<br/>    "babel-plugin-transform-es2015-modules-commonjs": "^6.26.2",<br/>    "enzyme": "^3.7.0",<br/>    "enzyme-adapter-react-16": "^1.6.0",<br/>    "jest": "^23.6.0",<br/>    "lerna": "^3.4.3",<br/>    "react": "^16.6.0",<br/>    "react-dom": "^16.6.0",<br/>    "react-test-renderer": "^16.6.0"<br/>  },<br/>  "dependencies": {},<br/>  "scripts": {<br/>    "storybook": "start-storybook -p 6006",<br/>    "build-storybook": "build-storybook"<br/>  },<br/>  "babel-loader-lerna-cra": {<br/>    "imports": "packages/comp-*/src",<br/>    "apps":  "packages/*react-app*"<br/>  }<br/>}</span></pre><ul class=""><li id="484b" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko mu mv mw mx bi translated"><code class="fe ns nt nu nv b"><strong class="jt ir">imports</strong></code>æŒ‡çš„æ˜¯Reactåº”ç”¨ç¨‹åºéœ€è¦ä¼ è¾“çš„ç»„ä»¶ã€‚</li><li id="6302" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><code class="fe ns nt nu nv b"><strong class="jt ir">apps</strong></code>é€šçŸ¥<code class="fe ns nt nu nv b">babel-loader-lerna-cra</code>ç½‘ç»œåŒ…è¦†ç›–éœ€è¦å‘ç”Ÿçš„ä½ç½®ã€‚</li></ul><p id="e9df" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨è®©æˆ‘ä»¬ç”¨<code class="fe ns nt nu nv b">babel-loader-lerna-cra</code>å¼•å¯¼Reactåº”ç”¨ç¨‹åºä¸­çš„Webpacké…ç½®:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="d068" class="ny kq iq nv b gy oo op l oq or">$ npx babel-loader-lerna-cra</span></pre><p id="46c4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡º:</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi oy"><img src="../Images/40d71980d125d97ac80a48d3f275149a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4GOi7UZ-ESV4Sqf6.png"/></div></div></figure><p id="20f5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨è®©æˆ‘ä»¬å†æ¬¡å°è¯•è¿è¡ŒReactåº”ç”¨ç¨‹åº:</p><pre class="me mf mg mh gt ok nv ol om aw on bi"><span id="9320" class="ny kq iq nv b gy oo op l oq or">$ cd ~/repos/monorepo-react/packages/my-react-app<br/>$ npm run start</span></pre><p id="914f" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">ç°åœ¨ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°Reactåº”ç”¨ç¨‹åºåœ¨æµè§ˆå™¨ä¸­å¯åŠ¨ï¼Œæ‚¨çš„<code class="fe ns nt nu nv b">CompButton</code>ç»„ä»¶å‘ˆç°ä¸ºæ–‡æœ¬â€œFoorbarï¼â€</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi oy"><img src="../Images/91edbe591a181b4bc488563fd0f84118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6391Q6yeMUGttIsZ.png"/></div></div></figure><h1 id="cacc" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">é‚£ä¹ˆï¼Œæˆ‘ä»¬ä»è¿™ä¸ªå˜é€šåŠæ³•ä¸­å¾—åˆ°äº†ä»€ä¹ˆå‘¢ï¼Ÿ</h1><p id="39ce" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated"><strong class="jt ir">Lernaå…„å¼Ÿçš„è‡ªåŠ¨ä¼ è¾“</strong></p><ul class=""><li id="b128" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko mu mv mw mx bi translated">æˆ‘ä»¬çš„Reactåº”ç”¨ç¨‹åºç°åœ¨å¯ä»¥åœ¨éœ€è¦æ—¶å¯¼å…¥å…„å¼ŸLernaä¾èµ–é¡¹å’Œtranspileã€‚</li></ul><p id="73b5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><strong class="jt ir"> React Appçƒ­é‡è£…</strong></p><ul class=""><li id="718b" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko mu mv mw mx bi translated">å½“æˆ‘ä»¬æ›´æ”¹Reactç»„ä»¶æ–‡ä»¶æ—¶ï¼Œå°†çƒ­æ›´æ–°åº”ç”¨ç¨‹åºï¼Œè€Œä¸å¿…å‘Lernaé¡¹ç›®æ·»åŠ ä»»ä½•å…¨å±€è§‚å¯Ÿå™¨æ¥å¯åŠ¨transpileã€‚</li><li id="0abb" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated">è¿™æ˜¯æˆ‘ä»¬çš„<code class="fe ns nt nu nv b">CompButton</code>ç»„ä»¶åœ¨æ›´æ–°æ—¶è¢«çƒ­é‡è£…:</li></ul><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi oz"><img src="../Images/ded992601c0dcb803f30c89cba12e638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kJrEFv-vKWOxdo1p.gif"/></div></div></figure><p id="c754" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated"><strong class="jt ir">æ•…äº‹ä¹¦çƒ­é‡è£…</strong></p><ul class=""><li id="9c41" class="mp mq iq jt b ju jv jy jz lp mr lr ms lt mt ko mu mv mw mx bi translated">è¿™é‡Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬çš„æ•…äº‹ä¹¦ä¹Ÿå¯ä»¥çƒ­åŠ è½½:</li></ul><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi oy"><img src="../Images/56a8d043e31a30e64f6fe6d510c9bee5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b2fvLK3RFlj3QBpk.png"/></div></div></figure><h1 id="d9af" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">ç»“è®º</h1><p id="0f0f" class="pw-post-body-paragraph jq jr iq jt b ju ln jw jx jy lo ka kb lp lq ke kf lr ls ki kj lt lu km kn ko ij bi translated">æˆ‘æƒ³è¿™æ˜¯æˆ‘åœ¨ä¸€ç¯‡æ–‡ç« ä¸­æ‰€èƒ½è°ˆåˆ°çš„ã€‚æˆ‘å¸Œæœ›å…¶ä»–äººä¼šè§‰å¾—è¿™ä¸ªè®¾ç½®æœ‰ç”¨ã€‚å¦‚æœäººä»¬æ„Ÿå…´è¶£ï¼Œæˆ‘å°†åœ¨ç¬¬2éƒ¨åˆ†ç»§ç»­è®¨è®ºå¦‚ä½•è®¾ç½®CIï¼Œä»¥ä¾¿ä»è¿™ä¸ªMonorepoè®¾ç½®ä¸­å‘å¸ƒå¤šä¸ªReactåº”ç”¨ç¨‹åºã€‚</p><p id="2085" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">æ¬¢è¿è¯„è®ºã€åé¦ˆã€å»ºè®®ã€‚</p><p id="a662" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lp kd ke kf lr kh ki kj lt kl km kn ko ij bi translated">é˜¿åˆ©æ–¯æ³°å°”Â·éº¦å…‹å”çº³</p><h1 id="4446" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">å…³äºè¿™ä¸ªè¯é¢˜çš„æœ‰è¶£æ–‡ç« :</h1><ul class=""><li id="3411" class="mp mq iq jt b ju ln jy lo lp pa lr pb lt pc ko mu mv mw mx bi translated"><a class="ae lv" href="https://medium.com/@luisvieira_gmr/building-large-scale-react-applications-in-a-monorepo-91cd4637c131" rel="noopener">https://medium . com/@ luisvieira _ GMR/building-large-scale-react-applications-in-a-monorepo-91cd 4637 c131</a></li><li id="0113" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><a class="ae lv" href="https://cacm.acm.org/magazines/2016/7/204032-why-google-stores-billions-of-lines-of-code-in-a-single-repository/fulltext" rel="noopener ugc nofollow" target="_blank">https://cacm . ACM . org/magazines/2016/7/204032-why-Google-stores-billion-of-line-of-code-in-a-single-repository/full text</a></li><li id="2b9d" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><a class="ae lv" href="https://github.com/facebook/create-react-app/issues/1333" rel="noopener ugc nofollow" target="_blank">https://github.com/facebook/create-react-app/issues/1333</a></li><li id="051a" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><a class="ae lv" href="https://github.com/facebook/create-react-app/pull/3741" rel="noopener ugc nofollow" target="_blank">https://github.com/facebook/create-react-app/pull/3741</a></li><li id="6336" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><a class="ae lv" href="https://github.com/jamiebuilds/react-loadable" rel="noopener ugc nofollow" target="_blank">https://github.com/jamiebuilds/react-loadable</a></li><li id="1558" class="mp mq iq jt b ju my jy mz lp na lr nb lt nc ko mu mv mw mx bi translated"><a class="ae lv" href="https://daveceddia.com/customize-create-react-app-webpack-without-ejecting/" rel="noopener ugc nofollow" target="_blank">https://Dave ceddia . com/customize-create-react-app-web pack-without-ejecting/</a></li></ul></div></div>    
</body>
</html>