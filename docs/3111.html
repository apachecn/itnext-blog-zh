<html>
<head>
<title>Use this technique to automatically update your Kubernetes app configuration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨è¿™ç§æŠ€æœ¯æ¥è‡ªåŠ¨æ›´æ–°æ‚¨çš„Kubernetesåº”ç”¨ç¨‹åºé…ç½®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-to-automatically-update-your-kubernetes-app-configuration-d750e0ca79ab?source=collection_archive---------0-----------------------#2019-10-05">https://itnext.io/how-to-automatically-update-your-kubernetes-app-configuration-d750e0ca79ab?source=collection_archive---------0-----------------------#2019-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="68cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/learn-how-to-configure-your-kubernetes-apps-using-the-configmap-object-d8f30f99abeb">â€œå®è·µæŒ‡å—:ä½¿ç”¨ConfigMapå¯¹è±¡é…ç½®æ‚¨çš„Kubernetesåº”ç”¨ç¨‹åºâ€</a>åšæ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Kubernetesä¸­çš„<code class="fe km kn ko kp b">ConfigMap</code>å¯¹è±¡å°†é…ç½®ä¸ä»£ç åˆ†ç¦»ã€‚</p><p id="2a74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é€šè¿‡<code class="fe km kn ko kp b">ConfigMap</code>åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡(<code class="fe km kn ko kp b">Pod</code>æˆ–<code class="fe km kn ko kp b">Deployment</code>)å¸¦æ¥äº†ä¸€ä¸ªæŒ‘æˆ˜â€”â€”ä¸‡ä¸€<code class="fe km kn ko kp b">ConfigMap</code>è¢«æ›´æ–°ï¼Œä½ çš„åº”ç”¨ç¨‹åºå°†å¦‚ä½•è·å–æ–°çš„å€¼ï¼Ÿæ˜¾ç„¶ï¼Œæ‚¨å¯ä»¥åˆ é™¤å¹¶é‡æ–°åˆ›å»º<code class="fe km kn ko kp b">Deployment</code>ï¼Œä½†è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ä¸å¯å–çš„ã€‚</p><p id="92a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€ç§å¯èƒ½çš„æ–¹æ³•æ˜¯å°†<code class="fe km kn ko kp b">ConfigMap</code>å†…å®¹ä½œä¸º<code class="fe km kn ko kp b">Volume</code>åŠ è½½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒKubernetesç¡®ä¿å¦‚æœ<code class="fe km kn ko kp b">ConfigMap</code>è¢«æ›´æ–°ï¼Œé‚£ä¹ˆ<code class="fe km kn ko kp b">Volume</code>çš„å†…å®¹(åŒ…å«é…ç½®å€¼çš„æ–‡ä»¶)è¢«åˆ·æ–°ã€‚</p><blockquote class="kq kr ks"><p id="3195" class="jn jo kt jp b jq jr js jt ju jv jw jx ku jz ka kb kv kd ke kf kw kh ki kj kk ij bi translated">æˆ‘éå¸¸å¸Œæœ›å¾—åˆ°æ‚¨çš„åé¦ˆå’Œå»ºè®®ï¼ä¸è¦å®³ç¾ï¼Œå°± <a class="ae kl" href="https://twitter.com/abhi_tweeter" rel="noopener ugc nofollow" target="_blank"> <em class="iq">æ¨æ–‡</em> </a> <em class="iq">æˆ–è€…æ‰ä¸ªè¯„è®ºã€‚</em></p></blockquote><p id="994e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥å­¦ä¹ è¿™ä¸ªå§ï¼</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/dc426662b9b2ac16e02cba0002aad0fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*RpokdUifeqMo_0BF.gif"/></div></figure><p id="8c2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¯¥ä»£ç å¯åœ¨<a class="ae kl" href="https://github.com/abhirockzz/kubernetes-configmap-auto-update" rel="noopener ugc nofollow" target="_blank"> GitHub </a>ä¸Šè·å¾—</p><h1 id="a581" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">å…ˆå†³æ¡ä»¶</h1><p id="7cc9" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">é¦–å…ˆï¼Œæ‚¨éœ€è¦ä¸€ä¸ªKubernetesé›†ç¾¤ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨<code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/setup/learning-environment/minikube/" rel="noopener ugc nofollow" target="_blank">minikube</a></code>ã€<code class="fe km kn ko kp b"><a class="ae kl" href="https://blog.docker.com/2018/01/docker-mac-kubernetes/" rel="noopener ugc nofollow" target="_blank">Docker for Mac</a></code>ç­‰çš„å•èŠ‚ç‚¹æœ¬åœ°é›†ç¾¤ã€‚æˆ–è€…æ¥è‡ª<a class="ae kl" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">Azure</a><a class="ae kl" href="https://cloud.google.com/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank">Google</a><a class="ae kl" href="https://aws.amazon.com/eks/" rel="noopener ugc nofollow" target="_blank">AWS</a>ç­‰çš„æ‰˜ç®¡KubernetesæœåŠ¡ã€‚</p><p id="1f84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦è®¿é—®æ‚¨çš„Kubernetesé›†ç¾¤ï¼Œæ‚¨å°†éœ€è¦<code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/reference/kubectl/overview/" rel="noopener ugc nofollow" target="_blank">kubectl</a></code>ï¼Œå®ƒå¾ˆå®¹æ˜“å®‰è£…ã€‚</p><blockquote class="kq kr ks"><p id="ae50" class="jn jo kt jp b jq jr js jt ju jv jw jx ku jz ka kb kv kd ke kf kw kh ki kj kk ij bi translated"><em class="iq">æœ¬ä¾‹ä½¿ç”¨</em> <code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/setup/learning-environment/minikube/" rel="noopener ugc nofollow" target="_blank"><em class="iq">minikube</em></a></code></p></blockquote><h1 id="d810" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">éƒ¨ç½²åº”ç”¨ç¨‹åº</h1><p id="fc26" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">å…ˆé€ å‡º<code class="fe km kn ko kp b">ConfigMap</code>ã€‚</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="bde8" class="mm lg iq kp b gy mn mo l mp mq">kubectl apply -f <a class="ae kl" href="https://raw.githubusercontent.com/abhirockzz/kubernetes-configmap-auto-update/master/config.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/abhirockzz/kubernetes-configmap-auto-update/master/config.yaml</a></span></pre><blockquote class="kq kr ks"><p id="a2b9" class="jn jo kt jp b jq jr js jt ju jv jw jx ku jz ka kb kv kd ke kf kw kh ki kj kk ij bi translated"><em class="iq">ä¸ºäº†ç®€å•èµ·è§ï¼Œç›´æ¥ä»</em><a class="ae kl" href="https://github.com/abhirockzz/kubernetes-configmap-auto-update" rel="noopener ugc nofollow" target="_blank"><em class="iq">GitHub repo</em></a><em class="iq">ä¸­å¼•ç”¨YAMLæ–‡ä»¶ï¼Œä½†æ˜¯æ‚¨ä¹Ÿå¯ä»¥å°†æ–‡ä»¶ä¸‹è½½åˆ°æ‚¨çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œå¹¶ä»¥åŒæ ·çš„æ–¹å¼ä½¿ç”¨å®ƒã€‚</em></p></blockquote><p id="7f8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸‹é¢æ˜¯<code class="fe km kn ko kp b">ConfigMap</code>çš„å†…å®¹â€”â€”å®ƒåŒ…å«ä¸‰ä¸ªé”®å€¼å¯¹ï¼Œä½œä¸º<code class="fe km kn ko kp b">data</code>éƒ¨åˆ†çš„ä¸€éƒ¨åˆ†</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="b14a" class="mm lg iq kp b gy mn mo l mp mq">apiVersion: v1<br/>kind: ConfigMap<br/>metadata:<br/>  name: app-config<br/>  namespace: default<br/>data:<br/>  foo: bar<br/>  hello: world<br/>  john: doe</span></pre><p id="6f74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›å»ºä½¿ç”¨<code class="fe km kn ko kp b">ConfigMap</code>çš„åº”ç”¨ç¨‹åº(ä½œä¸ºKubernetes <code class="fe km kn ko kp b">Deployment</code></p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="17ba" class="mm lg iq kp b gy mn mo l mp mq">kubectl apply -f <a class="ae kl" href="https://raw.githubusercontent.com/abhirockzz/kubernetes-configmap-auto-update/master/app.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/abhirockzz/kubernetes-configmap-auto-update/master/app.yaml</a></span></pre><p id="414b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬çœ‹çœ‹<code class="fe km kn ko kp b">Pod</code>è§„æ ¼éƒ¨åˆ†:</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="1be8" class="mm lg iq kp b gy mn mo l mp mq">spec:<br/>  containers:<br/>  - name: configmaptestapp<br/>    image: abhirockzz/configmaptestapp<br/>    volumeMounts:<br/>    - mountPath: /config<br/>      name: appconfig-data-volume<br/>    ports:<br/>    - containerPort: 8080<br/>  volumes:<br/>    - name: appconfig-data-volume<br/>      configMap:<br/>        name: app-config</span></pre><p id="3c09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/learn-how-to-configure-your-kubernetes-apps-using-the-configmap-object-d8f30f99abeb">ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« </a>ä¸­æ‰€è§£é‡Šçš„é‚£æ ·ï¼Œ<code class="fe km kn ko kp b">ConfigMap</code>ä¸­çš„æ¯ä¸ªé”®éƒ½ä½œä¸ºä¸€ä¸ªæ–‡ä»¶æ·»åŠ åˆ°è§„èŒƒä¸­æŒ‡å®šçš„ç›®å½•ä¸­ï¼Œå³<code class="fe km kn ko kp b">spec.containers.volumeMount.mountPath</code>ï¼Œå…¶å€¼å°±æ˜¯æ–‡ä»¶çš„å†…å®¹ã€‚</p><p id="44a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é€šè¿‡ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ‚¨å¯ä»¥å—ç›Šäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³å¦‚æœ<code class="fe km kn ko kp b">ConfigMap</code>å‘ç”Ÿå˜åŒ–ï¼Œå·ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p><h2 id="1e5d" class="mm lg iq bd lh mr ms dn ll mt mu dp lp jy mv mw lt kc mx my lx kg mz na mb nb bi translated">å¿«é€Ÿè¯´æ˜è¯¥åº”ç”¨ç¨‹åºçš„åŠŸèƒ½</h2><p id="5115" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">è¿™æ˜¯ä¸€ä¸ªç®€å•çš„<a class="ae kl" href="https://raw.githubusercontent.com/abhirockzz/kubernetes-configmap-auto-update/master/src/main.go" rel="noopener ugc nofollow" target="_blank"> Goåº”ç”¨ç¨‹åº</a>ï¼Œå®ƒ:</p><ul class=""><li id="2bc4" class="nc nd iq jp b jq jr ju jv jy ne kc nf kg ng kk nh ni nj nk bi translated">åŠ è½½å†…å­˜ä¸­çš„é…ç½®æ•°æ®<code class="fe km kn ko kp b">map</code></li><li id="de6f" class="nc nd iq jp b jq nl ju nm jy nn kc no kg np kk nh ni nj nk bi translated">å¹¶å…è®¸æ‚¨ä½¿ç”¨RESTç«¯ç‚¹è·å–ç‰¹å®šé…ç½®é”®çš„å€¼</li></ul><p id="7346" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸¤ä¸ªä¼‘æ¯ç»ˆç‚¹:</p><ul class=""><li id="ad53" class="nc nd iq jp b jq jr ju jv jy ne kc nf kg ng kk nh ni nj nk bi translated"><code class="fe km kn ko kp b">/readconfig</code>:è·å–é…ç½®é”®çš„å€¼</li><li id="45f4" class="nc nd iq jp b jq nl ju nm jy nn kc no kg np kk nh ni nj nk bi translated"><code class="fe km kn ko kp b">/reload</code>:å¼ºåˆ¶appä»ç£ç›˜è¯»å–(åˆ·æ–°)é…ç½®æ•°æ®åˆ°å†…å­˜</li></ul><p id="d507" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†è®¿é—®RESTç«¯ç‚¹ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª<code class="fe km kn ko kp b">NodePort</code>æœåŠ¡æ¥å…¬å¼€åº”ç”¨ç¨‹åºï¼Œå¹¶è·å–éšæœºç«¯å£å€¼</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="2730" class="mm lg iq kp b gy mn mo l mp mq">kubectl expose deployment configmaptestapp --type=NodePort<br/>PORT=$(kubectl get service configmaptestapp -o=jsonpath='{.spec.ports[0].nodePort}')</span></pre><blockquote class="kq kr ks"><p id="b4f3" class="jn jo kt jp b jq jr js jt ju jv jw jx ku jz ka kb kv kd ke kf kw kh ki kj kk ij bi translated"><em class="iq">ä¸çŸ¥é“ä»€ä¹ˆæ˜¯</em> <code class="fe km kn ko kp b"><em class="iq">NodePort</em></code> <em class="iq">æœåŠ¡ä¹Ÿä¸ç”¨æ‹…å¿ƒã€‚ç›®å‰ï¼Œjsutè®¤ä¸ºè¿™æ˜¯ä¸€ç§åœ¨Kubernetes </em>ä¸­æä¾›åº”ç”¨ç¨‹åºè®¿é—®çš„æ–¹å¼</p></blockquote><h1 id="f8c7" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">æµ‹è¯•ä¸€ä¸‹â€¦</h1><p id="1c9b" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">è·å–æ‚¨çš„<code class="fe km kn ko kp b">minikube</code>ä¸»æœºçš„IPåœ°å€</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="e212" class="mm lg iq kp b gy mn mo l mp mq">MINIKUBE_IP=$(minikube ip)</span></pre><p id="9a03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è‡ªçœappçš„RESTç«¯ç‚¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code class="fe km kn ko kp b">foo</code>å’Œ<code class="fe km kn ko kp b">john</code>å¯¹åº”äºé…ç½®å¯†é’¥â€”â€”å®ƒä»¬åªæ˜¯ç›®å½•<code class="fe km kn ko kp b">/config</code>ä¸­çš„æ–‡ä»¶</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="cb17" class="mm lg iq kp b gy mn mo l mp mq">curl http://$MINIKUBE_IP:$PORT/readconfig/foo<br/>//output - bar </span><span id="1c0e" class="mm lg iq kp b gy nq mo l mp mq">curl http://$MINIKUBE_IP:$PORT/readconfig/john<br/>//output - doe</span><span id="9cbf" class="mm lg iq kp b gy nq mo l mp mq">curl http://$MINIKUBE_IP:$PORT/readconfig/junk<br/>// output - Configuration 'junk' does not exist</span></pre><p id="6ea6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯ä»¥ç›´æ¥è‡ªçœ<code class="fe km kn ko kp b">Pod</code>æ¥(åŠ å€)æ£€æŸ¥ã€‚ä»è·å¾—<code class="fe km kn ko kp b">Pod</code>åç§°å¼€å§‹</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="57a4" class="mm lg iq kp b gy mn mo l mp mq">POD_NAME=$(kubectl get pods -l=app=configmaptestapp -o=jsonpath='{.items[0].metadata.name}')</span></pre><p id="322e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æŸ¥çœ‹<code class="fe km kn ko kp b">/config</code>ç›®å½•â€”åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶(é…ç½®å¯†é’¥)</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="3933" class="mm lg iq kp b gy mn mo l mp mq">kubectl exec $POD_NAME -- ls /config/</span><span id="a37c" class="mm lg iq kp b gy nq mo l mp mq">//output<br/>foo<br/>hello<br/>john</span></pre><p id="f1a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">çœ‹ç‰¹å®šçš„é”®</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="182f" class="mm lg iq kp b gy mn mo l mp mq">kubectl exec $POD_NAME -- cat /config/foo<br/>//output - bar</span><span id="650e" class="mm lg iq kp b gy nq mo l mp mq">kubectl exec $POD_NAME -- cat /config/john<br/>//output - bar</span><span id="ccda" class="mm lg iq kp b gy nq mo l mp mq">kubectl exec $POD_NAME -- cat /config/junk<br/>//output - cat: can't open '/config/junk': No such file or directory</span></pre><p id="8c5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¥½å§ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç†æ™ºæµ‹è¯•â€¦</p><h1 id="a829" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">â€¦è‡ªåŠ¨æ›´æ–°æ€ä¹ˆæ ·ï¼Ÿ</h1><p id="735f" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">è·å–<code class="fe km kn ko kp b">config.yaml</code> ( <code class="fe km kn ko kp b">ConfigMap</code>)æ–‡ä»¶</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="6de1" class="mm lg iq kp b gy mn mo l mp mq">curl https://raw.githubusercontent.com/abhirockzz/kubernetes-configmap-auto-update/master/config.yaml -o config.yaml</span></pre><p id="5fec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ›´æ”¹æ•°å€¼(ä¾‹å¦‚å°†<code class="fe km kn ko kp b">foo</code>çš„æ•°å€¼æ›´æ”¹ä¸º<code class="fe km kn ko kp b">baz</code>å¹¶å°†<code class="fe km kn ko kp b">hello</code>çš„æ•°å€¼æ›´æ”¹ä¸º<code class="fe km kn ko kp b">universe</code>)å¹¶æ›´æ–°<code class="fe km kn ko kp b">ConfigMap</code></p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="2a6a" class="mm lg iq kp b gy mn mo l mp mq">kubectl apply -f config.yaml</span></pre><p id="5ba1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨ç«‹å³æ£€æŸ¥<code class="fe km kn ko kp b">Pod</code>æ–‡ä»¶ç³»ç»Ÿï¼Œæ‚¨å°†<strong class="jp ir">è€Œä¸æ˜¯</strong>çœ‹åˆ°æ›´æ–°ã€‚</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="c5d9" class="mm lg iq kp b gy mn mo l mp mq">kubectl exec $POD_NAME -- cat /config/foo</span></pre><p id="97ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿï¼Ÿ</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/5c5f31e7d917cccb9e17b5930a0f972a.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/0*nx7vANPCNyQIXa7Y.gif"/></div></figure><p id="8b8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯ä¸€ç§æœ€ç»ˆä¸€è‡´çš„æœºåˆ¶ï¼Œå…¶ä¸­åŒ…å«å»¶è¿Ÿâ€”åŸå› æ˜¯è¿™ç”±<code class="fe km kn ko kp b">kubelet</code>åŒæ­¥è¿‡ç¨‹çš„é¢‘ç‡å’Œ<code class="fe km kn ko kp b">kubelet</code> <code class="fe km kn ko kp b">ConfigMap</code>ç¼“å­˜çš„TTL(ç”Ÿå­˜æ—¶é—´)æ¥å¤„ç†ã€‚å‡ ç§’é’Ÿåï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ›´æ–°åçš„å€¼ã€‚</p><p id="a2ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬ç¡®è®¤REST APIä¹Ÿä»¥åŒæ ·çš„æ–¹å¼è¿è¡Œ</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="cd6f" class="mm lg iq kp b gy mn mo l mp mq">curl <a class="ae kl" href="http://$MINIKUBE_IP:$PORT/readconfig/foo" rel="noopener ugc nofollow" target="_blank">http://$MINIKUBE_IP:$PORT/readconfig/foo</a></span></pre><p id="9a76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šçœ‹åˆ°æ—§å€¼ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–æ•°æ®(åœ¨å¯åŠ¨é˜¶æ®µ)å¹¶å°†å…¶ä¿å­˜åœ¨<code class="fe km kn ko kp b">map</code>ä¸­ã€‚å®ƒè¿˜é€šè¿‡RESTç«¯ç‚¹æä¾›äº†ä¸€ä¸ª<code class="fe km kn ko kp b">reload</code>å·¥å…·â€”â€”è°ƒç”¨å®ƒ</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="2619" class="mm lg iq kp b gy mn mo l mp mq">curl <a class="ae kl" href="http://$MINIKUBE_IP:$PORT/reload/" rel="noopener ugc nofollow" target="_blank">http://$MINIKUBE_IP:$PORT/reload/</a></span></pre><p id="e963" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨ç°åœ¨åº”è¯¥ä¼šçœ‹åˆ°æ›´æ–°åçš„å€¼</p><pre class="ky kz la lb gt mi kp mj mk aw ml bi"><span id="0f50" class="mm lg iq kp b gy mn mo l mp mq">curl http://$MINIKUBE_IP:$PORT/readconfig/hello<br/>//output - universe</span><span id="ab71" class="mm lg iq kp b gy nq mo l mp mq">curl http://$MINIKUBE_IP:$PORT/readconfig/foo<br/>//output - baz</span></pre><p id="d901" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±æ˜¯è¿™æ ·ã€‚æ‚¨çœ‹åˆ°äº†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¦‚ä½•èƒ½å¤Ÿåœ¨ä¸é‡å¯çš„æƒ…å†µä¸‹ä½¿ç”¨æ›´æ–°åçš„ConfigMapã€‚</p><h1 id="11a7" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">ç»“æŸè¯­â€¦</h1><p id="2d41" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">è¿™ç§æ–¹æ³•æœ‰å…¶ä¼˜ç‚¹ã€ç¼ºç‚¹(å’Œè­¦å‘Š)</p><p id="96ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">ä¼˜ç‚¹</strong></p><p id="d696" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œä½ ä¸éœ€è¦é‡å¯ä½ çš„åº”ç”¨ç¨‹åº(<code class="fe km kn ko kp b">Deployment</code>)ï¼Œä»–ä»¬å°±å¯ä»¥å¼€å§‹ä½¿ç”¨<code class="fe km kn ko kp b">ConfigMap</code>ä¸­çš„æ›´æ–°æ•°æ®ã€‚</p><p id="b46e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">ç¼ºç‚¹</strong></p><ul class=""><li id="fcfc" class="nc nd iq jp b jq jr ju jv jy ne kc nf kg ng kk nh ni nj nk bi translated">ä»£ç å˜åŒ–:å¦‚æœä½ ä½¿ç”¨ç¯å¢ƒå˜é‡(å¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½æ˜¯è¿™æ ·)ï¼Œä½ éœ€è¦æ›´æ–°ä½ çš„ä»£ç æ¥ä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–ï¼Œä½ è¿˜éœ€è¦æä¾›ä¸€ä¸ªé‡æ–°åŠ è½½çš„èƒ½åŠ›</li><li id="39e8" class="nc nd iq jp b jq nl ju nm jy nn kc no kg np kk nh ni nj nk bi translated">æœ€ç»ˆä¸€è‡´:ä½ å¿…é¡»è€ƒè™‘å®é™…çš„<code class="fe km kn ko kp b">ConfigMap</code>æ›´æ–°å’Œæ‰¹é‡æ•°æ®åŒæ­¥ä¹‹é—´çš„æ—¶é—´å»¶è¿Ÿâ€”â€”ä½ çš„åº”ç”¨ç¨‹åºæ˜¯å¦å¯¹æ­¤æ•æ„Ÿæ˜¯ä½ éœ€è¦è€ƒè™‘çš„äº‹æƒ…ã€‚</li></ul><blockquote class="kq kr ks"><p id="7565" class="jn jo kt jp b jq jr js jt ju jv jw jx ku jz ka kb kv kd ke kf kw kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq">æ³¨æ„äº‹é¡¹</em> </strong> <em class="iq"> â€”å¦‚æœæ‚¨å°†</em> <code class="fe km kn ko kp b"><em class="iq">ConfigMap</em></code> <em class="iq">ä½œä¸º</em> <code class="fe km kn ko kp b"><em class="iq">subPath</em></code> <em class="iq">å·</em>åŠ è½½ï¼Œæ­¤åŠŸèƒ½å°†ä¸èµ·ä½œç”¨</p></blockquote><p id="ed3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™ä¸ªåšå®¢åˆ°æ­¤ä¸ºæ­¢ã€‚å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·ç‚¹èµå¹¶å…³æ³¨ğŸ˜ƒğŸ˜ƒ</p><blockquote class="kq kr ks"><p id="9e64" class="jn jo kt jp b jq jr js jt ju jv jw jx ku jz ka kb kv kd ke kf kw kh ki kj kk ij bi translated"><em class="iq">å¦‚æœä½ æœ‰å…´è¶£å­¦ä¹ Kuberneteså’ŒContainersä½¿ç”¨</em><a class="ae kl" href="https://azure.microsoft.com/services/kubernetes-service/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"><em class="iq">Azure</em></a><em class="iq">ï¼Œåªéœ€</em> <a class="ae kl" href="https://azure.microsoft.com/en-us/free/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">åˆ›å»ºä¸€ä¸ª</em> <strong class="jp ir"> <em class="iq">å…è´¹</em> </strong> <em class="iq">è´¦å·</em> </a> <em class="iq">å°±å¯ä»¥å¼€å§‹äº†ï¼ä¸€ä¸ªå¥½çš„èµ·ç‚¹æ˜¯ä½¿ç”¨æ–‡æ¡£ä¸­çš„</em> <a class="ae kl" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">å¿«é€Ÿå…¥é—¨ã€æ•™ç¨‹å’Œä»£ç ç¤ºä¾‹</em> </a> <em class="iq">æ¥ç†Ÿæ‚‰è¯¥æœåŠ¡ã€‚æˆ‘ä¹Ÿå¼ºçƒˆæ¨èæŸ¥çœ‹ä¸€ä¸‹</em> <a class="ae kl" href="https://azure.microsoft.com/resources/kubernetes-learning-path/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> 50å¤©Kuberneteså­¦ä¹ è·¯å¾„</em> </a> <em class="iq">ã€‚é«˜çº§ç”¨æˆ·å¯èƒ½å¸Œæœ›å‚è€ƒ</em> <a class="ae kl" href="https://docs.microsoft.com/azure/aks/best-practices?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Kubernetesæœ€ä½³å®è·µ</em> </a> <em class="iq">æˆ–è§‚çœ‹ä¸€äº›</em> <a class="ae kl" href="https://azure.microsoft.com/resources/videos/index/?services=kubernetes-service&amp;WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">è§†é¢‘</em> </a> <em class="iq">ä»¥äº†è§£æ¼”ç¤ºã€ä¸»è¦åŠŸèƒ½å’ŒæŠ€æœ¯ä¼šè®®ã€‚</em></p></blockquote></div></div>    
</body>
</html>