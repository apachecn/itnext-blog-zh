<html>
<head>
<title>Dockerize a Node.js app connected to MongoDb</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å°†ä¸€ä¸ªNode.jsåº”ç”¨ç¨‹åºè¿æ¥åˆ°MongoDb</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/dockerize-a-node-js-app-connected-to-mongodb-64fdeca94797?source=collection_archive---------0-----------------------#2019-06-28">https://itnext.io/dockerize-a-node-js-app-connected-to-mongodb-64fdeca94797?source=collection_archive---------0-----------------------#2019-06-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="162f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä½ å¥½äº²çˆ±çš„ç¨‹åºå‘˜ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„æŠ€æœ¯æ–‡ç« ç³»åˆ—ï¼ŒçŒ®ç»™<strong class="js iu"> Node.js </strong>å’Œ<strong class="js iu"> Dockerã€‚</strong>å¸Œæœ›ä½ å–œæ¬¢ï¼</p><p id="264f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¯·æ‰¾åˆ°ç³»åˆ—çš„ç¬¬ä¸€éƒ¨åˆ†:<br/> 1ã€‚<a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/dockerize-a-node-js-app-with-vs-code-bd471710dc22">â€œç”¨VSä»£ç Dockerizeä¸€ä¸ªnode . js appâ€</a></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/eddc731dcdf0e33adbb03cc5698512ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ky9ibBw8DehfNPELW0R4lA.jpeg"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated"><a class="ae ko" href="https://unsplash.com/photos/PBctAzztru0" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/photos/PBctAzztru0</a></figcaption></figure></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="e29f" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">é—®é¢˜:</h1><p id="891c" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">æ‚¨å·²ç»ä»æœ¬ç³»åˆ—å‰ä¸€ç¯‡æ–‡ç« ä¸­äº†è§£äº†å¦‚ä½•å°†Dockerä¸Nodeç»“åˆä½¿ç”¨ã€‚æˆ‘çŸ¥é“æˆ‘ä»¬éƒ½çˆ±MERNã€‚æˆ‘ä»¬çš„ä¸‹ä¸€æ­¥æ˜¯ç†è§£Nodeå’ŒMongoå¦‚ä½•åœ¨å®¹å™¨å†…ç›¸äº’è¿æ¥ã€‚æˆ‘ä»¬èµ°å§ï¼</p><h1 id="90e4" class="lm ln it bd lo lp mp lr ls lt mq lv lw lx mr lz ma mb ms md me mf mt mh mi mj bi translated">1.åœ¨æœ¬åœ°å®‰è£…MongoDb</h1><p id="a3ee" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">æ˜¯æ—¶å€™è¿›å…¥ä¸€äº›æ–‡æ¡£æ•°æ®åº“çš„ä¸œè¥¿äº†ã€‚é¦–å…ˆ<a class="ae ko" href="https://www.mongodb.com/dr/fastdl.mongodb.org/win32/mongodb-win32-x86_64-2008plus-ssl-4.0.10-signed.msi/download" rel="noopener ugc nofollow" target="_blank">ä»è¿™é‡Œä¸‹è½½MongoDbæœåŠ¡å™¨ã€‚</a></p><p id="9058" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¦‚æœä½ åœ¨å®‰è£…è¿‡ç¨‹ä¸­æ²¡æœ‰æ”¹å˜ä»»ä½•ä¸œè¥¿ï¼Œå®ƒè¿˜åº”è¯¥å®‰è£…ä¸€ä¸ªå«åš<a class="ae ko" href="https://www.mongodb.com/products/compass" rel="noopener ugc nofollow" target="_blank">MongoDb Compass Community</a>çš„ä¸œè¥¿ã€‚</p><p id="7387" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå¯ä»¥åœ¨MongoDbä¸­æ£€æŸ¥ã€æ›´æ”¹ã€æ·»åŠ æˆ–åˆ é™¤é›†åˆä¸­çš„æ•°æ®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨é»˜è®¤åœ°å€å’Œç«¯å£è¿æ¥åˆ°æœ¬åœ°å®ä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ–è€…è¿æ¥åˆ°ä»»ä½•å…¶ä»–æœåŠ¡å™¨ã€‚</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mu"><img src="../Images/0c163ed2a74bbea6e9846e684050a186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X5bqGtdHiSgKcydg.PNG"/></div></div></figure><p id="c4b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¦æœ¬åœ°è¿æ¥ï¼Œåªéœ€æŒ‰â€œè¿æ¥â€ã€‚åœ¨é‡Œé¢ä½ å¯ä»¥çœ‹åˆ°ä¸€äº›é»˜è®¤çš„é›†åˆï¼Œä½ å¯ä»¥ç©ã€‚ç¨åæˆ‘ä»¬å°†éœ€è¦<strong class="js iu"> MongoDbæŒ‡å—é’ˆ</strong>ã€‚</p><h1 id="ca1b" class="lm ln it bd lo lp mp lr ls lt mq lv lw lx mr lz ma mb ms md me mf mt mh mi mj bi translated">2.é€šè¿‡Express appè¿æ¥åˆ°MongoDb</h1><p id="7cda" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨æˆ‘æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨Visual Studioä»£ç ã€‚ä½ è¿˜éœ€è¦å®‰è£…Nodejså’ŒDockerã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯Windowsï¼Œæ‰€ä»¥æˆ‘ä»è¿™é‡Œå¾—åˆ°äº†Windowsçš„<a class="ae ko" href="https://hub.docker.com/editions/community/docker-ce-desktop-windows" rel="noopener ugc nofollow" target="_blank"> Dockerã€‚</a></p><p id="5dff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="5026" class="na ln it mw b gy nb nc l nd ne">mkdir test-mongo-app &amp;&amp; cd test-mongo-app &amp;&amp; npm init -y &amp;&amp; code .</span></pre><p id="1ffb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å®‰è£…ä¾èµ–é¡¹çš„æ—¶é—´ã€‚æˆ‘ä»¬éœ€è¦å¿«é€’å’ŒçŒ«é¼¬åŒ…è£…ã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="5c7c" class="na ln it mw b gy nb nc l nd ne">npm i express mongoose</span></pre><p id="945c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨æ ¹æ–‡ä»¶å¤¹ä¸­åˆ›å»ºåä¸º<code class="fe nf ng nh mw b">server.js</code>çš„æ–‡ä»¶ã€‚</p><p id="ed66" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¦å¤–ï¼Œä¸è¦å¿˜è®°åœ¨å¼€å§‹æ—¶æ”¹å˜ä½ çš„<code class="fe nf ng nh mw b">package.json</code>æ¥è¿è¡Œ<code class="fe nf ng nh mw b">server.js</code>æ–‡ä»¶ã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="3e0a" class="na ln it mw b gy nb nc l nd ne">{<br/> "name": "test-mongo-app",<br/> "version": "1.0.0",<br/> "description": "",<br/> "main": "server.js",<br/> "scripts": {<br/> "start": "node server.js"<br/> },<br/> "keywords": [],<br/> "author": "",<br/> "license": "ISC",<br/> "dependencies": {<br/> "express": "4.17.1",<br/> "mongoose": "5.6.1"<br/> }<br/>}</span></pre><p id="5094" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¾ˆå¥½ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæœ‰ä¸¤æ¡è·¯çº¿çš„åŸºæœ¬å¿«é€’åº”ç”¨ç¨‹åºã€‚ä¸€ä¸ªç”¨äºä»æ•°æ®åº“ä¸­è¯»å–<em class="ni">ç”¨æˆ·</em>ï¼Œå¦ä¸€ä¸ªç”¨äºå‘å…¶ä¸­æ·»åŠ è™šæ‹Ÿ<em class="ni">ç”¨æˆ·</em>æ•°æ®ã€‚</p><p id="775e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">é¦–å…ˆï¼Œæ£€æŸ¥æ˜¯å¦ä¸€åˆ‡éƒ½ä¸åˆšæ‰çš„å¿«é€ŸæœåŠ¡å™¨ã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="71f0" class="na ln it mw b gy nb nc l nd ne">// server.js<br/>const express = require("express");<br/>const app = express();</span><span id="3651" class="na ln it mw b gy nj nc l nd ne">const PORT = 8080;</span><span id="4d3b" class="na ln it mw b gy nj nc l nd ne">app.get("/", (req, res) =&gt; {<br/> res.send("Hello from Node.js app \n");<br/>});</span><span id="5580" class="na ln it mw b gy nj nc l nd ne">app.listen(PORT, function() {<br/> console.log(`Listening on ${PORT}`);<br/>});</span></pre><p id="b47d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¯ä»¥è¿è¡Œ<code class="fe nf ng nh mw b">npm start</code>æ¥æµ‹è¯•ä¸€ä¸‹ã€‚å¦‚æœæ‚¨çœ‹åˆ°æ¶ˆæ¯â€œ<em class="ni">åœ¨8080 </em>ä¸Šç›‘å¬â€ï¼Œåˆ™ä¸€åˆ‡æ­£å¸¸ã€‚åŒæ ·æ‰“å¼€<a class="ae ko" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>æŸ¥çœ‹æ˜¯å¦èƒ½çœ‹åˆ°helloæ¶ˆæ¯ã€‚</p><p id="6dae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æœ‰ä¸ªå¥½ä¸œè¥¿å«<a class="ae ko" href="https://www.npmjs.com/package/nodemon" rel="noopener ugc nofollow" target="_blank"> nodemon </a>ã€‚å½“æºä»£ç å‘ç”Ÿä»»ä½•å˜åŒ–æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é‡å»ºæˆ‘ä»¬çš„é¡¹ç›®ã€‚è®©æˆ‘ä»¬ä½¿ç”¨å®ƒï¼ğŸ˜€</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="1e81" class="na ln it mw b gy nb nc l nd ne">npm install â€” save-dev nodemon</span></pre><p id="fa64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨<code class="fe nf ng nh mw b">package.json</code>ä¸­æ·»åŠ æ–°å‘½ä»¤ã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨å®ƒæ¥å‘å±•ã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="4c1f" class="na ln it mw b gy nb nc l nd ne"><br/> "scripts": {<br/> "start": "node server.js",<br/> "dev": "nodemon server.js"<br/> },<br/></span></pre><p id="4320" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨åœ¨å¼€å‘æ—¶ä½¿ç”¨run `npm run dev `è€Œä¸æ˜¯` npm start'ã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="8c5b" class="na ln it mw b gy nb nc l nd ne">npm run dev</span></pre><p id="627a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ‚¨å°†æ³¨æ„åˆ°æ§åˆ¶å°ä¸­çš„ä¸åŒï¼Œå› ä¸ºç°åœ¨nodemonæ­£åœ¨ç›‘è§†é¡¹ç›®ä¸­çš„ä»»ä½•æ›´æ”¹ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥é‡æ–°æ„å»ºå®ƒã€‚åœ¨<code class="fe nf ng nh mw b">server.js</code>æ”¹å˜ä¸€äº›ä¸œè¥¿ï¼Œä½ ä¼šæ³¨æ„åˆ°ğŸ˜‰</p><p id="2d4f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹<code class="fe nf ng nh mw b">src</code>ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ·»åŠ æ‰€æœ‰å…¶ä½™çš„æ–‡ä»¶ã€‚</p><p id="c4cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è®©æˆ‘ä»¬ä¸ºmongooseåˆ›å»ºä¸€ä¸ªç”¨æˆ·æ¨¡å‹ã€‚åˆ›å»ºæ–‡ä»¶å<code class="fe nf ng nh mw b">User.model.js</code></p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="f77b" class="na ln it mw b gy nb nc l nd ne">// User.model.js<br/>const mongoose = require("mongoose");<br/>const userSchema = new mongoose.Schema({<br/> username: {<br/> type: String<br/> }<br/>});</span><span id="4fc3" class="na ln it mw b gy nj nc l nd ne">const User = mongoose.model("User", userSchema);</span><span id="0e86" class="na ln it mw b gy nj nc l nd ne">module.exports = User;</span></pre><p id="e4af" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¾ˆå¥½ï¼è¿™é‡Œæˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„æ–‡æ¡£æ•°æ®åº“å®šä¹‰äº†ä¸€ä¸ªæ¨¡å‹ã€‚ç”¨æˆ·æ¨¡å‹åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å­—æ®µ<em class="ni"> username </em>ã€‚æš‚æ—¶å¤Ÿäº†:)</p><p id="492a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªåä¸º<code class="fe nf ng nh mw b">connection.js</code>çš„æ–‡ä»¶æ¥è¿æ¥æ•°æ®åº“ã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="d1bb" class="na ln it mw b gy nb nc l nd ne"><br/>// connection.js<br/>const mongoose = require("mongoose");<br/>const User = require("./User.model");</span><span id="3159" class="na ln it mw b gy nj nc l nd ne">const connection = "mongodb://localhost:27017/mongo-test";</span><span id="5e43" class="na ln it mw b gy nj nc l nd ne">const connectDb = () =&gt; {<br/> return mongoose.connect(connection);<br/>};</span><span id="7e26" class="na ln it mw b gy nj nc l nd ne">module.exports = connectDb;</span></pre><p id="4189" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¯·æ³¨æ„ï¼Œmongo-testå°†æ˜¯æˆ‘ä»¬æ•°æ®åº“(é›†ç¾¤)çš„åç§°ï¼</p><p id="f03b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨ä¿®æ”¹ä¸€ç‚¹<code class="fe nf ng nh mw b">server.js</code>å¯åŠ¨appã€‚æ‚¨åº”è¯¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°MongoDbå·²è¿æ¥çš„æ¶ˆæ¯ã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="eeab" class="na ln it mw b gy nb nc l nd ne"><br/>// server.js<br/>const express = require("express");<br/>const app = express();<br/>const connectDb = require("./src/connection");</span><span id="055a" class="na ln it mw b gy nj nc l nd ne">const PORT = 8080;</span><span id="b792" class="na ln it mw b gy nj nc l nd ne">app.get("/users", (req, res) =&gt; {<br/> res.send(â€œGet users \nâ€);<br/>});</span><span id="9c24" class="na ln it mw b gy nj nc l nd ne">app.get("/user-create", (req, res) =&gt; {<br/> res.send(â€œUser created \nâ€);<br/>});</span><span id="814a" class="na ln it mw b gy nj nc l nd ne">app.listen(PORT, function() {<br/> console.log(`Listening on ${PORT}`);</span><span id="2468" class="na ln it mw b gy nj nc l nd ne">connectDb().then(() =&gt; {<br/> console.log("MongoDb connected");<br/> });<br/>});</span></pre><p id="3d8d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è€¶ï¼ğŸ‰æˆ‘ä»¬å°†Expressåº”ç”¨ç¨‹åºä¸æœ¬åœ°MongoDbå®ä¾‹è¿æ¥èµ·æ¥ï¼</p><h1 id="15d8" class="lm ln it bd lo lp mp lr ls lt mq lv lw lx mr lz ma mb ms md me mf mt mh mi mj bi translated">3.å®ç°å¯¹MongoDbçš„è¯»å†™</h1><p id="2913" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">æˆ‘ä»¬åº”è¯¥å®ç°ä¸¤æ¡è¯»å–å’Œæ·»åŠ æ–°ç”¨æˆ·çš„è·¯çº¿ã€‚<br/>æ‰“å¼€â€œserver.jsâ€æ–‡ä»¶ï¼Œé¦–å…ˆåœ¨é¡¶éƒ¨å¯¼å…¥æˆ‘ä»¬çš„æ¨¡å‹:</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="1a98" class="na ln it mw b gy nb nc l nd ne"><br/>// server.js<br/>const User = require("./src/User.model");<br/>// â€¦</span></pre><p id="5747" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç„¶ååƒè¿™æ ·å®ç°ä¸‹é¢çš„ä¸¤æ¡è·¯çº¿:</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="a10b" class="na ln it mw b gy nb nc l nd ne">// server.js<br/>app.get("/users", async (req, res) =&gt; {<br/> const users = await User.find();</span><span id="455a" class="na ln it mw b gy nj nc l nd ne"> res.json(users);<br/>});</span><span id="0dae" class="na ln it mw b gy nj nc l nd ne">app.get("/user-create", async (req, res) =&gt; {<br/> const user = new User({ username: "userTest" });</span><span id="3991" class="na ln it mw b gy nj nc l nd ne"> await user.save().then(() =&gt; console.log(â€œUser createdâ€));</span><span id="9dd7" class="na ln it mw b gy nj nc l nd ne"> res.send("User created \n");<br/>});<br/>// â€¦</span></pre><p id="c782" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ³¨æ„è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å¼‚æ­¥/ç­‰å¾…æ¨¡å¼ã€‚å¦‚æœä½ å¯¹æ­¤æ„Ÿåˆ°å¥½å¥‡ï¼Œè¯·åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒã€‚</p><p id="fe34" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬å®ç°äº†ä¸¤æ¡è·¯å¾„â€œ/usersâ€å’Œâ€œ/user-createâ€ã€‚âœ‹:æ˜¯çš„ï¼Œæ˜¯çš„ï¼Œæˆ‘çŸ¥é“åˆ›å»ºåº”è¯¥é€šè¿‡POST httpåŠ¨è¯æ¥å®Œæˆï¼Œä½†åªæ˜¯ä¸ºäº†ä½¿æµ‹è¯•æ›´å®¹æ˜“ï¼Œé¿å…ä¸ºæ•°æ®åº“é…ç½®ç§å­æ–¹æ³•ã€‚</p><p id="f82f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨æ˜¯è€ƒéªŒçš„æ—¶å€™äº†ï¼ğŸ”åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¿™ä¸ªé“¾æ¥<a class="ae ko" href="http://localhost:8080/user-create" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/user-create</a>åœ¨dbä¸­åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç”¨æˆ·è®°å½•ã€‚æ‰“å¼€æ­¤é“¾æ¥<a class="ae ko" href="http://localhost:8080/users" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/users</a>åœ¨æµè§ˆå™¨ä¸­è·å–æ‰€æœ‰ç”¨æˆ·ä¸ºJSONã€‚</p><p id="99a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¿™æ ·åšä¹‹åï¼Œä½ å¯ä»¥å›åˆ°MongoDb Compasså¹¶åœ¨è¿™é‡Œæ£€æŸ¥ç”¨æˆ·é›†åˆã€‚ä½ åº”è¯¥çœ‹çœ‹è¿™ä¸ª</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nk"><img src="../Images/de1984823a17cfe9f414bd4bf9180971.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V1AijFvs25Yw8R_q.PNG"/></div></div></figure><h1 id="4f1e" class="lm ln it bd lo lp mp lr ls lt mq lv lw lx mr lz ma mb ms md me mf mt mh mi mj bi translated">4.DockerizeèŠ‚ç‚¹å’ŒMongoDb</h1><p id="d956" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">å°†Dockeræ–‡ä»¶æ·»åŠ åˆ°æ ¹æ–‡ä»¶å¤¹ã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="f929" class="na ln it mw b gy nb nc l nd ne">touch Dockerfile</span></pre><p id="940d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨å…¶ä¸­ç²˜è´´ä»¥ä¸‹å†…å®¹:</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="8c15" class="na ln it mw b gy nb nc l nd ne">FROM node:8<br/># Create app directory<br/>WORKDIR /usr/src/app<br/># Install app dependencies<br/>COPY package*.json ./</span><span id="478b" class="na ln it mw b gy nj nc l nd ne">RUN npm install</span><span id="5614" class="na ln it mw b gy nj nc l nd ne"># Copy app source code<br/>COPY . .</span><span id="8d73" class="na ln it mw b gy nj nc l nd ne">#Expose port and start application<br/>EXPOSE 8080<br/>CMD [ "npm", "start" ]</span></pre><p id="badd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ç®€å•åœ°æ„å»ºæˆ‘ä»¬çš„expressåº”ç”¨ç¨‹åº</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="96de" class="na ln it mw b gy nb nc l nd ne">docker build -t mongo-app .</span></pre><p id="ec61" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä½†æ˜¯..è¿™åªä¼šè¿è¡Œæˆ‘ä»¬çš„expressåº”ç”¨ç¨‹åºï¼Œä½†ä¸ä¼šä¸MongoDbä¸€èµ·è¿è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªâ€œdocker-composeâ€æ–‡ä»¶ã€‚ğŸ³</p><p id="b152" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨åˆ›å»ºå¦ä¸€ä¸ªåä¸º<code class="fe nf ng nh mw b">docker-compose.yml</code>çš„æ–‡ä»¶å¹¶ç²˜è´´å®ƒ:</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="438f" class="na ln it mw b gy nb nc l nd ne"><br/>version: "2"<br/>services:<br/> web:<br/> build: .<br/> ports:<br/> â€” "8080:8080"<br/> depends_on:<br/> â€” mongo<br/> mongo:<br/> image: mongo<br/> ports:<br/> â€” "27017:27017"</span></pre><p id="6401" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸¤ä¸ªæœåŠ¡ã€‚ä¸€ä¸ªæ˜¯æˆ‘ä»¬åœ¨ç«¯å£8080ä¸Šè¿è¡Œçš„èŠ‚ç‚¹åº”ç”¨ï¼Œå¦ä¸€ä¸ªæ˜¯mongodbå®ä¾‹ã€‚</p><p id="141c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">âš ï¸åœ¨æ‚¨è¿è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ä¹‹å‰ï¼Œ<strong class="js iu">è¯·ç¡®ä¿</strong>æ‚¨å·²ç»åœ¨<code class="fe nf ng nh mw b">connection.js</code>æ–‡ä»¶ä¸­å°†è¿æ¥å­—ç¬¦ä¸²æ›´æ”¹ä¸ºmongo dbã€‚</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="e7de" class="na ln it mw b gy nb nc l nd ne">const connection = "mongodb://mongo:27017/mongo-test";</span></pre><p id="3f1d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æˆ‘ä»¬ç”¨<strong class="js iu"> mongo </strong>æ›¿æ¢äº†<strong class="js iu"> localhost </strong>ï¼Œè¿™éå¸¸é‡è¦ã€‚å› ä¸ºæˆ‘ä»¬åº”è¯¥å‘Šè¯‰åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¸Œæœ›ä»dockerå†…éƒ¨è™šæ‹Ÿç½‘ç»œè€Œä¸æ˜¯æœ¬åœ°è™šæ‹Ÿç½‘ç»œè®¿é—®MongoDbã€‚</p><p id="7fa6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨è¿è¡Œé­”æ³•å‘½ä»¤ğŸ”®</p><pre class="kq kr ks kt gt mv mw mx my aw mz bi"><span id="2159" class="na ln it mw b gy nb nc l nd ne">docker-compose up</span></pre><p id="16d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨<a class="ae ko" href="http://localhost:8080/users" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/users</a>å’Œ<a class="ae ko" href="http://localhost:8080/user-create" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/user-create</a>ä¸Šæ‰“å¼€æµè§ˆå™¨ï¼ŒæŸ¥çœ‹æˆ‘ä»¬åœ¨Dockerä¸­è¿è¡Œçš„åº”ç”¨ã€‚</p><p id="dc6e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">*(å¦‚æœå‡ºç°ä»»ä½•é—®é¢˜ï¼Œè¯·å°è¯•åœæ­¢/åˆ é™¤æ˜ åƒå’Œå®¹å™¨ï¼Œé€šè¿‡å†æ¬¡ç ´ådockeråˆæˆæ¥é‡å»ºæ˜ åƒï¼Œå¦‚æœmongoæ˜ åƒæœªä»hubä¸­å–å‡ºï¼Œè¯·å°è¯•é‡æ–°ç™»å½•docker hubæˆ–é‡å¯docker for Windows)*</p><p id="4bd8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨è¿™é‡Œçœ‹åˆ°<a class="ae ko" href="https://github.com/vguleaev/Express-Mongo-Docker-tutorial/tree/master/test-mongo-app" rel="noopener ugc nofollow" target="_blank">æºä»£ç </a>ã€‚å°½æƒ…äº«å—å§ï¼</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="8d5d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ğŸš€å¦‚æœä½ ä»é‚£ç¯‡æ–‡ç« ä¸­è¯»åˆ°äº†ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ï¼Œè¯·å–œæ¬¢å¹¶å…³æ³¨æˆ‘çš„æ›´å¤šå¸–å­ã€‚è°¢è°¢ä½ äº²çˆ±çš„ç¼–ç å‘˜ï¼ğŸ˜</p></div></div>    
</body>
</html>