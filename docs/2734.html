<html>
<head>
<title>Why using hash based urls in your React SPA will save you more time than you think?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä¸ºä»€ä¹ˆåœ¨React SPAä¸­ä½¿ç”¨åŸºäºæ•£åˆ—çš„URLä¼šæ¯”ä½ æƒ³è±¡çš„èŠ‚çœæ›´å¤šæ—¶é—´ï¼Ÿ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/why-using-hash-based-urls-in-your-react-spa-will-save-you-more-time-than-you-think-a21e2c560879?source=collection_archive---------0-----------------------#2019-07-24">https://itnext.io/why-using-hash-based-urls-in-your-react-spa-will-save-you-more-time-than-you-think-a21e2c560879?source=collection_archive---------0-----------------------#2019-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f94c3b3bbd2e982ee96be485a6e26980.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*40la6c_a7sAP-HkM"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">å¡æ–¯å¸•Â·å¡ç±³å°”Â·é²å®¾åœ¨<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</figcaption></figure><p id="00d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å½“ä½ å¼€å‘ä½ çš„å•é¡µåº”ç”¨ç¨‹åºæ—¶ï¼Œæœ‰æ—¶ä½ ä¹Ÿéœ€è¦è®¾è®¡urlç»“æ„ã€‚</p><p id="7625" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é€šå¸¸å¼€å‘è€…ä½¿ç”¨ä¸¤ç§ç±»å‹çš„urlâ€¦</p><h1 id="2c67" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æ­£å¼ç½‘å€</h1><p id="28ed" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">è¿™æ˜¯æˆ‘ä»¬ä¹ æƒ¯çœ‹åˆ°çš„urlï¼Œç”¨æ­£å¸¸çš„è·¯å¾„ï¼Œåƒè¿™æ ·:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="9c19" class="mv lc iq mr b gy mw mx l my mz">https://myspa.com/app/login<br/>https://myspa.com/app/dashboard</span></pre><p id="3011" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™ç§urlå…·æœ‰SEOçš„ä¼˜åŠ¿ï¼Œä½†æ˜¯æ‚¨å¿…é¡»åˆ›å»ºä¸åº”ç”¨ç¨‹åºè·¯ç”±ä¸€æ ·å¤šçš„åç«¯ç«¯ç‚¹ï¼Œä»¥é¿å…åœ¨é‡æ–°åŠ è½½urlæˆ–å°†urlä¼ é€’ç»™å…¶ä»–äººæ—¶å‡ºç°404é”™è¯¯ä»£ç æ¶ˆæ¯ã€‚</p><h1 id="d59b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">åŸºäºå“ˆå¸Œçš„Url</h1><p id="a875" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">è¿™ä¸ªurlæœ‰ä¸€ä¸ªå”¯ä¸€çš„åº”ç”¨ç¨‹åºç«¯ç‚¹<code class="fe na nb nc mr b">/app/</code>,ç”±ä¸€ä¸ªå•ä¸€çš„åç«¯åŠ¨ä½œå’Œå¤šä¸ªå®šä¹‰SPAè·¯ç”±çš„Javascriptç®¡ç†çš„hashtagsæ§åˆ¶ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="ee58" class="mv lc iq mr b gy mw mx l my mz">https://myspa.com/app/<strong class="mr ir">#/login</strong><br/>https://myspa.com/app/<strong class="mr ir">#/dashboard</strong></span></pre><p id="28a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨ã€‚è¿™æ ·åšå‰ç«¯å›¢é˜Ÿåªä¼šä½¿ç”¨åç«¯APIï¼Œåˆ†ç¦»å‰ç«¯å’Œåç«¯é€»è¾‘ï¼Œä¿æŒ<strong class="kf ir"> <em class="nd">æ¸…æ™°æ•´ä½“ç»“æ„</em> </strong>ï¼å¦ä¸€æ–¹é¢ï¼ŒSEOæ›´éš¾ç®¡ç†(ä½†è¿™æ˜¯ç›¸å¯¹çš„ï¼Œå½“æˆ‘ä»¬è°ˆè®ºSPAæ—¶)ã€‚</p><h1 id="bdfc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">åœ¨Reactä¸­å®ç°åŸºäºæ•£åˆ—çš„Url</h1><p id="1420" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">ä¸ºäº†åœ¨æˆ‘ä»¬çš„SPAä¸­ç”¨Reactå®ç°åŸºäº<em class="nd">æ•£åˆ—çš„url </em>ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨<a class="ae kc" href="https://github.com/supasate/connected-react-router" rel="noopener ugc nofollow" target="_blank">è¿æ¥çš„Reactè·¯ç”±å™¨</a>åº“ã€‚</p><p id="a51b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¯¥åº“å¯ä»¥:</p><ul class=""><li id="abe5" class="ne nf iq kf b kg kh kk kl ko ng ks nh kw ni la nj nk nl nm bi translated">é€šè¿‡å•å‘æµå°†è·¯ç”±å™¨çŠ¶æ€ä¸reduxå­˜å‚¨åŒæ­¥</li><li id="706c" class="ne nf iq kf b kg nn kk no ko np ks nq kw nr la nj nk nl nm bi translated">æ”¯æŒReactè·¯ç”±å™¨v4å’Œv5</li><li id="aedc" class="ne nf iq kf b kg nn kk no ko np ks nq kw nr la nj nk nl nm bi translated">æ”¯æŒåŠŸèƒ½ç»„ä»¶çƒ­é‡è£…ï¼ŒåŒæ—¶ä¿ç•™çŠ¶æ€</li><li id="8588" class="ne nf iq kf b kg nn kk no ko np ks nq kw nr la nj nk nl nm bi translated">å†å²æ–¹æ³•è°ƒåº¦(<code class="fe na nb nc mr b">push</code>ã€<code class="fe na nb nc mr b">replace</code>ã€<code class="fe na nb nc mr b">go</code>ã€<code class="fe na nb nc mr b">goBack</code>ã€<code class="fe na nb nc mr b">goForward</code>)å¯¹<a class="ae kc" href="https://github.com/gaearon/redux-thunk" rel="noopener ugc nofollow" target="_blank"> redux-thunk </a>å’Œ<a class="ae kc" href="https://github.com/yelouafi/redux-saga" rel="noopener ugc nofollow" target="_blank"> redux-saga </a>éƒ½æœ‰æ•ˆ</li><li id="b5a6" class="ne nf iq kf b kg nn kk no ko np ks nq kw nr la nj nk nl nm bi translated">è¿˜æœ‰æ›´å¤šï¼</li></ul><p id="7e6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‰€ä»¥é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…å®ƒ</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7475" class="mv lc iq mr b gy mw mx l my mz">yarn add connected-react-router</span></pre><p id="25ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ç”¨ç‰¹å®šçš„é”®<code class="fe na nb nc mr b"><strong class="kf ir">router</strong></code>åˆ›å»ºä¸€ä¸ªå‡é€Ÿå™¨</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="48c5" class="mv lc iq mr b gy mw mx l my mz">// reducers.js<br/>import { combineReducers } from 'redux'<br/>import { connectRouter } from 'connected-react-router'<br/><br/>export default (history) =&gt; combineReducers({<br/>  router: connectRouter(history),<br/>  ... // rest of your reducers<br/>})</span></pre><p id="dc14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç°åœ¨æˆ‘ä»¬æ·»åŠ ç›¸å…³çš„ä¸­é—´ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è°ƒåº¦å†å²åŠ¨ä½œ</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="0f2b" class="mv lc iq mr b gy mw mx l my mz">// configureStore.js<br/>...<br/>import { createHashHistory } from 'history'<br/>import { applyMiddleware, compose, createStore } from 'redux'<br/>import { routerMiddleware } from 'connected-react-router'<br/>import createRootReducer from './reducers'<br/>...<br/><strong class="mr ir">export const history = createHashHistory({<br/>    hashType: 'slash',<br/>    getUserConfirmation: (message, callback) =&gt; callback(window.confirm(message))<br/>});</strong><br/><br/>export default function configureStore(preloadedState) {<br/>  const store = createStore(<br/>    createRootReducer(history), // root reducer with router state<br/>    preloadedState,<br/>    compose(<br/>      applyMiddleware(<br/>        routerMiddleware(history), // for dispatching history actions<br/>        // ... other middlewares ...<br/>      ),<br/>    ),<br/>  )<br/><br/>  return store<br/>}</span></pre><p id="cb45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe na nb nc mr b">history</code>åŒ…æä¾›äº†3ç§ä¸åŒçš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ª<code class="fe na nb nc mr b">history</code>å¯¹è±¡ï¼Œè¿™å–å†³äºä½ çš„ç¯å¢ƒã€‚</p><ul class=""><li id="c2a4" class="ne nf iq kf b kg kh kk kl ko ng ks nh kw ni la nj nk nl nm bi translated"><code class="fe na nb nc mr b">createBrowserHistory</code>ç”¨äºæ”¯æŒ<a class="ae kc" href="http://diveintohtml5.info/history.html" rel="noopener ugc nofollow" target="_blank"> HTML5å†å²API </a>çš„ç°ä»£ç½‘ç»œæµè§ˆå™¨ä¸­(å‚è§<a class="ae kc" href="http://caniuse.com/#feat=history" rel="noopener ugc nofollow" target="_blank">è·¨æµè§ˆå™¨å…¼å®¹æ€§</a>)</li><li id="3a61" class="ne nf iq kf b kg nn kk no ko np ks nq kw nr la nj nk nl nm bi translated"><code class="fe na nb nc mr b">createMemoryHistory</code>ç”¨ä½œå‚è€ƒå®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨äºéDOMç¯å¢ƒï¼Œæ¯”å¦‚<a class="ae kc" href="https://facebook.github.io/react-native/" rel="noopener ugc nofollow" target="_blank"> React Native </a>æˆ–tests</li><li id="2dfd" class="ne nf iq kf b kg nn kk no ko np ks nq kw nr la nj nk nl nm bi translated"><code class="fe na nb nc mr b">createHashHistory</code>ç”¨äºä¼ ç»Ÿçš„ç½‘ç»œæµè§ˆå™¨</li></ul><p id="897d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬ä½¿ç”¨<em class="nd"> createHashHistory </em>è€Œä¸æ˜¯<em class="nd"> createBrowserHistory </em>ï¼Œä»¥ä¾¿ä½¿ç”¨åŸºäºæ•£åˆ—çš„URL<em class="nd">ã€‚</em></p><p id="7420" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ€åæ£€ç´¢ConnectedRouterï¼Œå¹¶å°†åˆ›å»ºçš„å†å²ä¼ é€’ç»™å®ƒã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="e71b" class="mv lc iq mr b gy mw mx l my mz">// index.js<br/>...<br/>import { Provider } from 'react-redux'<br/>import { Route, Switch } from 'react-router' // react-router v4/v5<br/>import { ConnectedRouter } from 'connected-react-router'<br/>import configureStore, { history } from './configureStore'<br/>...<br/>const store = configureStore(/* provide initial state if any */)<br/><br/>ReactDOM.render(<br/>  &lt;Provider store={store}&gt;<br/>    &lt;<strong class="mr ir">ConnectedRouter history={history}</strong>&gt; { /* place ConnectedRouter under Provider */ }<br/>      &lt;&gt; { /* your usual react-router v4/v5 routing */ }<br/>        &lt;Switch&gt;<br/>          &lt;Route exact path="/" render={() =&gt; (&lt;div&gt;Match&lt;/div&gt;)} /&gt;<br/>          &lt;Route render={() =&gt; (&lt;div&gt;Miss&lt;/div&gt;)} /&gt;<br/>        &lt;/Switch&gt;<br/>      &lt;/&gt;<br/>    &lt;/ConnectedRouter&gt;<br/>  &lt;/Provider&gt;,<br/>  document.getElementById('react-root')<br/>)</span></pre><p id="7d15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å°½æƒ…äº«å—å§ï¼ğŸ˜‰</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="12f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç•™ä¸‹è¯„è®ºï¼Œä¸è¦å¿˜è®°é¼“æŒï¼ğŸ˜ƒ</p></div></div>    
</body>
</html>