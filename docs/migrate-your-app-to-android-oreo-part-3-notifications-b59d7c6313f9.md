# å°†æ‚¨çš„åº”ç”¨è¿ç§»åˆ° Android Oreoâ€”â€”ç¬¬ 3 éƒ¨åˆ†é€šçŸ¥

> åŸæ–‡ï¼š<https://itnext.io/migrate-your-app-to-android-oreo-part-3-notifications-b59d7c6313f9?source=collection_archive---------0----------------------->

![](img/8d4f03b914d7843ede867172b90186d8.png)

å›¾ç‰‡æ¥è‡ª[www.pexels.com](http://www.pexels.com)

Android Oreo (8.0)å¸¦æ¥äº†è®¸å¤šå¾ˆé…·çš„æ–°åŠŸèƒ½ï¼Œå¦‚ç”»ä¸­ç”»ã€æ™ºèƒ½æ–‡æœ¬é€‰æ‹©ç­‰ç­‰ã€‚ä½†æ˜¯æœ€é‡è¦çš„å˜åŒ–ä¹‹ä¸€å‡ºç°åœ¨é€šçŸ¥é¢†åŸŸã€‚

1.  [æœåŠ¡â€”èƒŒæ™¯é™åˆ¶](/migrate-your-app-to-android-oreo-e0fa794b1d21)
2.  [å¹¿æ’­æ¥æ”¶æœº](/migrate-your-app-to-android-oreo-part-2-broadcastreceivers-3f1f12f764fc)
3.  **é€šçŸ¥**
4.  è¿è¡Œæ—¶æƒé™
5.  è­¦å‘Š
6.  Firebase äº‘æ¶ˆæ¯ä¼ é€’(æˆªæ­¢æ—¥æœŸ:2019 å¹´ 4 æœˆ)

ç°åœ¨æœ‰äº† Android Oreoï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ä¸ºæ¯ä¸ªé€šçŸ¥åˆ›å»ºä¸åŒçš„**é€šé“**æ¥åˆ†ç¦»é€šçŸ¥çš„è¡Œä¸ºã€‚é‡è¦çš„æ˜¯ï¼Œæ²¡æœ‰ä¸ºé€šçŸ¥æŒ‡å®šé€šé“ï¼Œè¯¥é€šçŸ¥ä¸ä¼šå‡ºç°åœ¨çŠ¶æ€æ ä¸­ã€‚

æ‰€æœ‰ä½¿ç”¨ç›¸åŒé€šé“çš„é€šçŸ¥å°†å…·æœ‰ç›¸åŒçš„è¡Œä¸ºï¼Œå› æ­¤æ ¹æ®é€šçŸ¥çš„é‡è¦æ€§åˆ›å»º**ä¸åŒçš„é€šé“éå¸¸é‡è¦ã€‚**

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„æœ€ç´§æ€¥é€šçŸ¥åˆ›å»ºä¸€ä¸ªé¢‘é“ï¼Œæ¯ä¸ªé€šçŸ¥éƒ½æœ‰æŒ¯åŠ¨ã€è­¦æŠ¥å£°éŸ³å’Œé€šçŸ¥ç¯ã€‚å¦‚æœæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæœ‰å¦ä¸€ç§ä¸å¤ªé‡è¦çš„é€šçŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ›´å®‰é™çš„é€šé“ï¼Œåªåœ¨çŠ¶æ€æ ä¸­æ˜¾ç¤ºé€šçŸ¥ï¼Œæ²¡æœ‰å£°éŸ³å’Œç¯å…‰ã€‚

åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ° Gmail çš„é€šçŸ¥æ¸ é“:

![](img/c95ac6d3647286af1e54148af22bb2de.png)

Gmail é€šçŸ¥æ¸ é“

# **å¦‚ä½•åœ¨ Android Oreo ä¸­æ˜¾ç¤ºé€šçŸ¥ï¼Ÿ**

*   **åœ¨ Android Oreo** ä¹‹å‰ï¼Œå½“æˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªé€šçŸ¥æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è¿™æ ·åš:

åœ¨å®‰å“å¥¥åˆ©å¥¥ä¹‹å‰æ˜¾ç¤ºé€šçŸ¥

ä½ å¯ä»¥çœ‹åˆ°åœ¨ Android Oreo ä¹‹å‰ï¼Œæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šä»»ä½•å…³äºæ¸ é“çš„å†…å®¹ã€‚æ‰€ä»¥æ‰€æœ‰çš„é€šçŸ¥éƒ½æœ‰ç›¸åŒçš„è¡Œä¸ºã€‚

*   **ç°åœ¨æœ‰äº† Android Oreo** ï¼Œè¦æ˜¾ç¤ºä¸€ä¸ªé€šçŸ¥ï¼Œæˆ‘ä»¬å¿…é¡»è¿™æ ·åš:

ä½¿ç”¨ Android Oreo æ˜¾ç¤ºé€šçŸ¥

æ‰€ä»¥å¦‚æœä½ è¯¦ç»†åˆ†æä»£ç ï¼ŒåŒºåˆ«åœ¨äºæˆ‘ä»¬è¦ä¸ºç‰ˆæœ¬â‰¥ Android Oreo çš„ Android è®¾å¤‡åˆ›å»ºä¸€ä¸ªé€šé“ã€‚

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) { 
    val channel = NotificationChannel(channelId,
                    BuildConfig.NOTIFICATION_CHANNEL_ALARMS_NAME,
                    NotificationManager.IMPORTANCE_DEFAULT)
    notificationManager.createNotificationChannel(channel) 
}
```

Android Oreo ä¸­å¼•å…¥çš„å¦ä¸€ä¸ªå˜åŒ–æ˜¯é€šçŸ¥çš„é‡è¦æ€§ï¼Œåœ¨ä¸‹è¡¨ä¸­ï¼Œæ‚¨å¯ä»¥æ£€æŸ¥**é€šçŸ¥**çš„**ä¸åŒé‡è¦æ€§**:

![](img/4bd3ec0ad3a79168d2003f8d488b0ad5.png)

é€šçŸ¥çš„é‡è¦æ€§

å¦‚æœæ‚¨æƒ³è¿›ä¸€æ­¥å®šåˆ¶æ‚¨çš„é€šé“çš„é»˜è®¤é€šçŸ¥è¡Œä¸ºï¼Œæ‚¨å¯ä»¥åœ¨`[NotificationChannel](https://developer.android.com/reference/android/app/NotificationChannel.html)`ä¸Šè°ƒç”¨`[enableLights()](https://developer.android.com/reference/android/app/NotificationChannel.html#enableLights(boolean))`ã€`[setLightColor()](https://developer.android.com/reference/android/app/NotificationChannel.html#setLightColor(int))`å’Œ`[setVibrationPattern()](https://developer.android.com/reference/android/app/NotificationChannel.html#setVibrationPattern(long[]))`ç­‰æ–¹æ³•ã€‚

# ğŸ‘®**é‡è¦çš„**ğŸ‘®

**ä½†æ˜¯è¯·è®°ä½ï¼Œä¸€æ—¦æ‚¨åˆ›å»ºäº†é¢‘é“ï¼Œæ‚¨å°±ä¸èƒ½æ›´æ”¹è¿™äº›è®¾ç½®ï¼Œå¹¶ä¸”ç”¨æˆ·å¯ä»¥æœ€ç»ˆæ§åˆ¶è¿™äº›è¡Œä¸ºæ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚**

# å¦‚ä½•åˆ é™¤é€šçŸ¥é¢‘é“ï¼Ÿ

å°†æ¥ï¼Œæ‚¨å¯èƒ½ä¼šåˆ›å»ºä¸€ä¸ªé€šçŸ¥é€šé“ï¼Œä½†æ˜¯ä»ç°åœ¨å¼€å§‹æˆ‘ä»¬ä¸æƒ³å†ä½¿ç”¨å®ƒäº†ã€‚ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åˆ é™¤é€šçŸ¥é€šé“:

# æœåŠ¡å¿…é¡»æ˜¾ç¤ºé€šçŸ¥

åœ¨[ä¹‹å‰çš„å¸–å­](/migrate-your-app-to-android-oreo-e0fa794b1d21)ä¸­ï¼Œæˆ‘ä»¬è§£é‡Šäº†åœ¨ Android Oreo ä¸­ä½¿ç”¨æœåŠ¡çš„å±€é™æ€§ã€‚æˆ‘ä»¬è¯´è¿‡ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨åå°ä½¿ç”¨æœåŠ¡ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡çŠ¶æ€æ ä¸­çš„é€šçŸ¥æ¥è­¦å‘Šç”¨æˆ·ã€‚

å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›æ­¤é€šçŸ¥å‘å‡ºå£°éŸ³æˆ–æŒ¯åŠ¨ï¼Œæˆ‘ä»¬å»ºè®®åˆ›å»ºä¸€ä¸ªâ€œæ— å£°â€é¢‘é“ï¼Œå¹¶å¼ºè°ƒä»¥ä¸‹é‡è¦æ€§:

```
NotificationManager.IMPORTANCE_LOW
```

è¿™æ˜¯**æœ€å°é‡è¦æ€§**ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨**å¯åŠ¨æœåŠ¡**æ—¶å°†å…¶è®¾ç½®ä¸ºé€šçŸ¥ï¼Œå¦‚æœæ‚¨ä½¿ç”¨â€œImportance_min â€,å½“æ‚¨å¯åŠ¨å®ƒæ—¶å°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œä½ å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£[è¿™é‡Œ](https://developer.android.com/training/notify-user/channels)ã€‚

å¸Œæœ›è¿™ç¯‡å¸–å­å¯¹ä½ æœ‰å¸®åŠ©ã€‚ç¼–ç å¿«ä¹ï¼

ğŸ‘ğŸ˜ƒ