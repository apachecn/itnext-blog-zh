# æŒæ¡æ³¨å°„æœåŠ¡:ç»¼åˆæŒ‡å—

> åŸæ–‡ï¼š<https://itnext.io/mastering-injectable-services-a-comprehensive-guide-6c2c0f5f48a2?source=collection_archive---------1----------------------->

![](img/f7d99bd82fef89d71d1c3800171d2943.png)

åœ¨ Angular ä¸­ï¼Œ`@Injectable` decorator ç”¨äºåˆ›å»ºæœåŠ¡ï¼Œè¿™äº›æœåŠ¡å¯ä»¥é€šè¿‡ Angular çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿæä¾›ç»™å…¶ä»–ç»„ä»¶ã€‚ç„¶åï¼Œè¿™äº›æœåŠ¡å¯ä»¥å°†ä¾èµ–æ³¨å…¥ç³»ç»Ÿ *(DI)* æä¾›çš„å…¶ä»–æœåŠ¡æ³¨å…¥åˆ°å®ƒä»¬çš„ç±»ä¸­ã€‚

è¦å£°æ˜ä¸€ä¸ªå¯æ³¨å…¥çš„æœåŠ¡ï¼Œæˆ‘ä»¬åªéœ€åœ¨ç±»çš„é¡¶éƒ¨æ·»åŠ è£…é¥°å™¨:

```
@Injectable()
class MyService {
}
```

ç„¶è€Œï¼Œä»…ä»…æ·»åŠ `@Injectable`è£…é¥°å™¨å¹¶ä¸èƒ½åœ¨ Angular çš„ DI ç³»ç»Ÿä¸­è‡ªåŠ¨æä¾›è¯¥æœåŠ¡ã€‚è®©æˆ‘ä»¬æ¢ç´¢ Angular ä¸­æä¾›æœåŠ¡çš„å„ç§æ–¹å¼ã€‚

# provided in:â€œrootâ€ä¸åœ¨å¼•å¯¼æä¾›ç¨‹åºé˜µåˆ—ä¸­æä¾›æœåŠ¡ã€‚

> å¯¹äºä»åœ¨ä½¿ç”¨ NgModule çš„å¼€å‘äººå‘˜æ¥è¯´ï¼Œä½äº`main.ts`ä¸­çš„å¼•å¯¼æä¾›è€…æ•°ç»„ç±»ä¼¼äºæ‚¨çš„`AppModule`ä¸­çš„æä¾›è€…æ•°ç»„ã€‚

åœ¨è¿™ä¸¤ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬çš„æœåŠ¡éƒ½æ˜¯å•ä¾‹çš„ï¼Œè¿™æ„å‘³ç€åœ¨æˆ‘ä»¬çš„æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­åªæœ‰ä¸€ä¸ªæœåŠ¡å®ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ³¨å…¥ç›¸åŒçš„å®ä¾‹ã€‚

ä¸»è¦åŒºåˆ«åœ¨äº Angular å¦‚ä½•ä»¥åŠåœ¨å“ªé‡Œæ†ç»‘æˆ‘ä»¬çš„æœåŠ¡ã€‚æˆ‘ä»¬å°†åœ¨ 5 ä¸ªåœºæ™¯ä¸­è®¾æƒ³è¿™ä¸€ç‚¹ã€‚

*   æœåŠ¡æœªä½¿ç”¨çš„å¼•å¯¼æä¾›ç¨‹åºé˜µåˆ—
*   åœ¨ä¸€ä¸ªç»„ä»¶ä¸­ä½¿ç”¨æœåŠ¡çš„å¼•å¯¼æä¾›ç¨‹åºé˜µåˆ—
*   å‘â€œrootâ€æä¾›æœªä½¿ç”¨çš„æœåŠ¡
*   ä¸ºâ€œæ ¹â€æä¾›åœ¨ä¸€ä¸ªç»„ä»¶ä¸­ä½¿ç”¨çš„æœåŠ¡
*   ä¸ºâ€œæ ¹â€æä¾›åœ¨å¤šä¸ªç»„ä»¶ä¸­ä½¿ç”¨çš„æœåŠ¡

å‡ºäºæ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘ä»¬åˆ›å»ºäº† 3 ä¸ªç»„ä»¶`AppComponent`ã€`FooComponent`å’Œ`BarComponent`ã€‚`FooComponent`å’Œ`BarComponent`æ‡’åŠ è½½åœ¨è·¯çº¿å¯¼èˆªä¸Šã€‚Angular å°†åˆ›å»º 3 ä¸ªä¸åŒçš„åŒ…ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨[*source-map-explorer*](https://www.npmjs.com/package/source-map-explorer)*æ¥æŸ¥çœ‹å“ªä¸ªåŒ…`MyService`åœ¨å…¶ä¸­ã€‚*

```
*export const routes: Routes = [
  {
    path: 'foo',
    loadComponent: () => import('./foo.component').then((x) => x.FooComponent),
  },
  {
    path: 'bar',
    loadComponent: () => import('./bar.component').then((x) => x.BarComponent),
  },
];*
```

*ç›®æ ‡æ˜¯å¯è§†åŒ– Angular ç¼–è¯‘å™¨å¦‚ä½•åŠ¨æ‘‡æˆ‘ä»¬çš„æœåŠ¡ã€‚*

> ***æ ‘æ‘‡åŠ¨**æ˜¯ä»ä¸€ä¸ªåŒ…ä¸­ç§»é™¤æ­»ä»£ç ä»¥å°†å…¶å¤§å°å‡åˆ°æœ€å°çš„è¿‡ç¨‹ã€‚*

## *1-åœ¨å¼•å¯¼æä¾›ç¨‹åºé˜µåˆ—ä¸­æä¾›æœåŠ¡ï¼Œå³ä½¿å®ƒæœªè¢«ä½¿ç”¨*

*è®©æˆ‘ä»¬ä»åœ¨æˆ‘ä»¬çš„å¼•å¯¼åº”ç”¨ç¨‹åºæä¾›è€…é˜µåˆ—ä¸­æä¾›æœåŠ¡å¼€å§‹ã€‚*(æˆ‘ä»¬çš„æœåŠ¡ä¸ä¼šè¢«ä½¿ç”¨)**

```
*bootstrapApplication(AppComponent, {
  providers: [
    MyService, 
    provideRouter(routes)
  ],
});*
```

*è¦ä½¿ç”¨ *source-map-explorer* ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ„å»ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ¥åˆ›å»ºæˆ‘ä»¬çš„ sourceMap æ–‡ä»¶:*

```
*ng build -c development*
```

*![](img/985295999fd87cb46ef336bc4ef8953c.png)*

*æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ„å»ºçš„ç»“æœï¼Œå®ƒæ˜¾ç¤º Angular ä¸º web åº”ç”¨ç¨‹åºåˆ›å»ºäº†ä¸¤ä¸ªæƒ°æ€§å—å’Œä¸€ä¸ªç»å…¸æ„å»ºå—ã€‚æˆ‘ä»¬çš„é‡ç‚¹å°†æ”¾åœ¨ä¸¤ä¸ªæ‡’æƒ°å—å’Œ`main.js`*

*è®©æˆ‘ä»¬ç”¨ *source-map-explorer* æ›´è¿‘è·ç¦»åœ°è§‚å¯Ÿæˆ‘ä»¬çš„åŒ…:*

```
*source-map-explorer ./dist/[my-application-name]/*.js*
```

*![](img/b1ca3d05c60340c5bad432eabbe0fcaa.png)*

*æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„æœåŠ¡åµŒå…¥åœ¨æˆ‘ä»¬çš„ä¸»åŒ…ä¸­ï¼Œå³ä½¿è¯¥æœåŠ¡æœªè¢«ä½¿ç”¨ã€‚è¿™å¯¼è‡´äº†ç”¨æˆ·å°†ä¸‹è½½ä½†ä»ä¸ä½¿ç”¨çš„ä»£ç ã€‚*

## *2-åœ¨å¼•å¯¼æä¾›è€…é˜µåˆ—ä¸­æä¾›æœåŠ¡ï¼Œå¹¶åœ¨ä¸€ä¸ªå»¶è¿ŸåŠ è½½çš„ç»„ä»¶ä¸­ä½¿ç”¨è¯¥æœåŠ¡*

*æˆ‘ä»¬å¾—åˆ°å’Œä»¥å‰ä¸€æ ·çš„ç»“æœã€‚è¯¥æœåŠ¡è¢«æ†ç»‘åœ¨æˆ‘ä»¬çš„ä¸»æ†ç»‘åŒ…ä¸­ï¼Œå³ä½¿æˆ‘ä»¬åªåœ¨ä¸€ä¸ªæƒ°æ€§åŠ è½½çš„ç»„ä»¶ä¸­ä½¿ç”¨å®ƒã€‚*

## *3-ä¸ºâ€œæ ¹â€æä¾›æœªä½¿ç”¨çš„æœåŠ¡*

*æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`@Injectable`è£…é¥°å™¨ä¸­çš„`ProvidedIn`å±æ€§æ¥æŒ‡å®šå“ªä¸ªæ³¨å…¥å™¨å°†æä¾›æˆ‘ä»¬çš„æœåŠ¡..*

```
*@Injectable({ providedIn: 'root' })
export class MyService {}*
```

*è®¾ç½®`providedIn: 'root'`å°†åœ¨åº”ç”¨ç¨‹åºçš„æ ¹çº§åˆ«æä¾›æˆ‘ä»¬çš„æœåŠ¡ã€‚è¿™å¯èƒ½çœ‹èµ·æ¥ä¸å‰é¢çš„ä¾‹å­ç›¸ä¼¼ï¼Œä½†æ˜¯ Angular ç¼–è¯‘å™¨èƒ½å¤Ÿæ ¹æ®æ³¨å…¥çš„ä½ç½®æ¥æ”¹å˜æˆ‘ä»¬çš„æœåŠ¡ã€‚*

*![](img/9e133f43d66f0edab2c2b56bc0fe7ef9.png)*

*å¦‚æœæˆ‘ä»¬å°†è¿™ä¸ªæ„å»ºç»“æœä¸å‰ä¸€ä¸ªè¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°`main.js`åŒ…ä» 1018B ä¸‹é™åˆ° 874Bï¼Œè€Œ`bar.js`å’Œ`foo.js`åŒ…æ²¡æœ‰å˜åŒ–ã€‚ç”±äºæ²¡æœ‰æ³¨å…¥`MyService`ï¼ŒAngular ç¼–è¯‘å™¨æ²¡æœ‰å°†å®ƒåŒ…å«åœ¨ä»»ä½•åŒ…ä¸­ã€‚*

## *4-ä¸ºâ€œæ ¹â€æä¾›åœ¨ä¸€ä¸ªç»„ä»¶ä¸­ä½¿ç”¨çš„æœåŠ¡*

*è®©æˆ‘ä»¬åœ¨`BarComponent`ä¸­æ³¨å…¥æˆ‘ä»¬çš„æœåŠ¡ï¼Œç„¶åé‡æ–°è¿è¡Œæˆ‘ä»¬çš„æ„å»ºã€‚*

```
*@Component({
  selector: 'app-bar',
  standalone: true,
  imports: [],
  template: `bar`,
})
export class BarComponent {
    service = inject(MyService)
}*
```

*![](img/3c77c766802b7a54962c17180cf6a1e5.png)*

*æˆ‘ä»¬å¯ä»¥çœ‹åˆ°`bar.js` bundle çš„å¤§å°å¢åŠ äº†ï¼Œè¯´æ˜ç”±äº`MyService`åªè¢«`BarComponent`ä½¿ç”¨ï¼Œç¼–è¯‘å™¨å·²ç»æŠŠæœåŠ¡å’Œç»„ä»¶æ†ç»‘åœ¨ä¸€èµ·äº†ã€‚*

*æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨*åœ°å›¾èµ„æºç®¡ç†å™¨*æ¥å¯è§†åŒ–å®ƒã€‚*

*![](img/b7b89d59d4ab6d6e607d25e1e69beeb9.png)*

## *5-ä¸ºâ€œæ ¹â€æä¾›åœ¨å¤šä¸ªæƒ°æ€§åŠ è½½ç»„ä»¶ä¸­ä½¿ç”¨çš„æœåŠ¡*

*å¦‚æœæˆ‘ä»¬åœ¨å¤šä¸ªå»¶è¿ŸåŠ è½½çš„ç»„ä»¶ä¸­ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è®©æˆ‘ä»¬ä¹Ÿåœ¨`FooComponent`ä¸­æ³¨å…¥æœåŠ¡ã€‚*

*![](img/d7a133e588e38d2e76bb6a8b94730256.png)*

*Angular å·²ç»åˆ›å»ºäº†ç¬¬ä¸‰ä¸ªå—`common.js`ï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬çš„æœåŠ¡ã€‚è¿™ç¡®ä¿äº†æ²¡æœ‰é‡å¤çš„ä»£ç ã€‚åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­è°ƒç”¨çš„ç¬¬ä¸€ä¸ªç»„ä»¶å°†ä¸‹è½½`common.js`ã€‚*

> *å—å¤§å°æœ‰ç‚¹å¤§ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨åœ¨ç¼–è¯‘çš„ js æ–‡ä»¶ä¸­æ·»åŠ äº†æ„é€ å‡½æ•°å£°æ˜ã€‚*

## ***ç»“è®º:***

*å¯¹äºæ¯ä¸ªå•ä¾‹æœåŠ¡ï¼Œæ€»æ˜¯ä½¿ç”¨`ProvidedIn: 'root'`ã€‚æ›´å®¹æ˜“ç»´æŠ¤ï¼ŒAngular ç¼–è¯‘å™¨åœ¨å¹•ååšäº†ä¸€é¡¹äº†ä¸èµ·çš„å·¥ä½œï¼Œä»¥æœ€ä½³æ–¹å¼æ ‘æ‘‡æˆ‘ä»¬çš„åŒ…ã€‚*

# *éå•ä¸€æœåŠ¡*

*å¦‚æœæˆ‘ä»¬æƒ³è¦åŒä¸€ä¸ªæœåŠ¡çš„å¤šä¸ªå®ä¾‹ï¼Œæˆ‘ä»¬å¿…é¡»å°†`ProvidedIn`å±æ€§è®¾ç½®ä¸ºæœªå®šä¹‰çš„*(æˆ–è€…ç§»é™¤å®ƒ)*ï¼Œå¹¶åœ¨ç»„ä»¶`providers`æ•°ç»„ä¸­æä¾›æœåŠ¡ã€‚*

```
*@Component({
  selector: 'app-bar',
  standalone: true,
  imports: [],
  providers: [MyService], // provide a service
  template: `bar`,
})
export class BarComponent {
  service = inject(MyService)
}*
```

*æˆ‘ä»¬çš„æœåŠ¡å®ä¾‹ç°åœ¨è¿æ¥åˆ°äº†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚å½“æˆ‘ä»¬çš„ç»„ä»¶è¢«å®ä¾‹åŒ–æˆ–é”€æ¯æ—¶ï¼Œæˆ‘ä»¬çš„æœåŠ¡ä¹Ÿå°†è¢«å®ä¾‹åŒ–æˆ–é”€æ¯ã€‚å¦‚æœåˆ›å»ºäº†ä¸¤ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸¤ä¸ªå•ç‹¬çš„`MyService`å®ä¾‹ã€‚*

## *å°æŒ‘æˆ˜:*

***æŒ‘æˆ˜ 1:***

```
*@Injectable()
export class MyService {
  title = 'No Title';

  setTitle = (title: string) => (this.title = title);
}

@Component({
  selector: 'child',
  standalone: true,
  template: `<div>{{ myService.title }}</div>`,
})
export class ChildComponent {
  myService = inject(MyService);
}

@Component({
  selector: 'parent',
  standalone: true,
  imports: [ChildComponent],
  providers: [MyService],
  template: `<child></child>`,
})
export class ParentComponent {
  myService = inject(MyService).setTitle('Parent Title');
}*
```

***é—®é¢˜:**ä½ çš„å±å¹•ä¸Šä¼šæ˜¾ç¤ºä»€ä¹ˆï¼Ÿ*

***è§£:**çˆ¶é¢˜*

***è§£é‡Š:**å¦‚æœæˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶çš„`providers`æ•°ç»„ä¸­å£°æ˜æœåŠ¡ï¼Œé‚£ä¹ˆå®ƒçš„æ‰€æœ‰å­ç»„ä»¶éƒ½å°†è·å¾—æœåŠ¡çš„ç›¸åŒå®ä¾‹ã€‚è¿™å¯¹äºåœ¨ä¸€ç»„ç»„ä»¶ä¹‹é—´å…±äº«ä¿¡æ¯éå¸¸æœ‰ç”¨ã€‚*

***æŒ‘æˆ˜äºŒ:***

```
*@Injectable()
export class MyService {
  title = 'No Title';

  setTitle = (title: string) => (this.title = title);
}

@Component({
  selector: 'child',
  standalone: true,
  providers: [MyService], // provide MyService in child component
  template: `<div>{{ myService.title }}</div>`,
})
export class ChildComponent {
  myService = inject(MyService);
}

@Component({
  selector: 'parent',
  standalone: true,
  imports: [ChildComponent],
  providers: [MyService],
  template: `<child></child>`,
})
export class ParentComponent {
  myService = inject(MyService).setTitle('Parent Title');
}*
```

*é—®é¢˜:ä½ çš„å±å¹•ä¸Šä¼šæ˜¾ç¤ºä»€ä¹ˆï¼Ÿ*

***è§£å†³æ–¹æ¡ˆ:**æ²¡æœ‰æ ‡é¢˜*

***è§£é‡Š:**å¦‚æœæˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ä¸­éƒ½æä¾›äº†`MyService`ï¼Œé‚£ä¹ˆ`MyService`å°†ä¼šæœ‰ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ã€‚*(æˆ‘å°†åœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­æ›´è¯¦ç»†åœ°è§£é‡Š DI æ˜¯å¦‚ä½•å·¥ä½œçš„)**

# *æä¾›å†…éƒ¨è·¯ç”±æä¾›ç¨‹åºæ•°ç»„*

*å¦ä¸€ç§æä¾›æœåŠ¡çš„æ–¹å¼æ˜¯åœ¨ route çš„`providers`æ•°ç»„ä¸­ã€‚*

> *è¿™ç±»ä¼¼äºåœ¨æƒ°æ€§åŠ è½½çš„ NgModule ä¸­æä¾›å®ƒã€‚*

```
*export const routes: Routes = [
  {
    path: 'bar',
    providers: [MyService],
    loadChildren: () => import('./child/routes').then((r) => r.childRoutes),
  },
  {
    path: 'foo',
    loadComponent: () => import('./foo.component').then((x) => x.FooComponent),
  },
];*
```

*å…¶ä¸­`childRoutes`æ˜¯è·¯ç”±çš„å­é›†ã€‚*

```
*export const childRoutes: Routes = [
  { path: '', pathMatch: 'full', redirectTo: 'bar-1' },
  {
    path: 'bar-1',
    loadComponent: () =>
      import('./bar-child-1.component').then((x) => x.BarChild1Component),
  },
  {
    path: 'bar-2',
    loadComponent: () =>
      import('./bar-child-2.component').then((x) => x.BarChild2Component),
  },
];*
```

*è¿™ç§è¡Œä¸ºå¯èƒ½æœ‰ç‚¹ä»¤äººå›°æƒ‘ã€‚å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡å¯¼èˆªåˆ°`bar-child`è·¯çº¿ä¸­çš„ä¸€æ¡è·¯çº¿æ—¶ï¼Œ`MyService`å°†è¢«å®ä¾‹åŒ–ã€‚å¦‚æœæˆ‘ä»¬ç¦»å¼€ï¼ŒæœåŠ¡ä¸ä¼šè¢«ç ´åã€‚å¦‚æœæˆ‘ä»¬å¯¼èˆªå›è¯¥è·¯ç”±ï¼Œè¯¥æœåŠ¡å°†ä¸ä¼šè¢«å†æ¬¡å®ä¾‹åŒ–ï¼Œè¿™æ„å‘³ç€åœ¨å†…å­˜ä¸­å°†åªæœ‰ä¸€ä¸ª`MyService`å®ä¾‹ã€‚*

*ç„¶è€Œï¼Œä¸æ˜¯è¯¥è·¯çº¿çš„å­ç»„ä»¶çš„å…¶ä»–ç»„ä»¶å°†ä¸èƒ½è®¿é—®`MyService`ã€‚*

*åœ¨æ„å»ºæ—¶ï¼Œ`MyService`å°†ä½äº`main.js`å†…éƒ¨ã€‚*(è€Œä¸æ˜¯åœ¨æˆ‘è®¤ä¸ºå®ƒä¼šåœ¨çš„ä¸€ä¸ªæ‡’æƒ°åŠ è½½çš„å—ä¸­)ã€‚*è¯·æ³¨æ„ï¼Œè¿™ä¸åœ¨çˆ¶ç»„ä»¶æˆ–å­ç»„ä»¶ä¸­æä¾›`MyService`ä¸åŒï¼Œåœ¨çˆ¶ç»„ä»¶æˆ–å­ç»„ä»¶ä¸­ï¼Œå®ƒå°†ä¸é‚£äº›ç»„ä»¶ä¸€èµ·è¢«å®ä¾‹åŒ–å’Œé”€æ¯ã€‚*

*![](img/cb00b4fc1d25b0497b3204c89ec8dda3.png)**![](img/a80034f4a56623304abf976c3be700b2.png)*

***é¢å¤–æç¤º:**å¦‚æœæˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªåœ¨å¯¼èˆªåˆ°ç‰¹å®šè·¯çº¿æ—¶è¢«å®ä¾‹åŒ–å¹¶åœ¨å¯¼èˆªç¦»å¼€æ—¶è¢«é”€æ¯çš„æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‰é¢ä¸¤ä¸ªéƒ¨åˆ†ä¸­æ‰€å­¦çš„å†…å®¹ç»“åˆèµ·æ¥ã€‚*

*è¦é”€æ¯æœåŠ¡ï¼Œéœ€è¦åœ¨ç»„ä»¶è£…é¥°å™¨ä¸­æä¾›æœåŠ¡ã€‚ä½†æ˜¯è¦åœ¨è·¯çº¿å¯¼èˆªä¸Šå®ä¾‹åŒ–å®ƒï¼Œå¿…é¡»åœ¨è·¯çº¿çº§åˆ«æä¾›æœåŠ¡ã€‚è§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ªçˆ¶ç»„ä»¶æ¥ä¿å­˜æˆ‘ä»¬æœåŠ¡çš„å®ä¾‹ã€‚*

```
*{
  path: 'bar',
  loadComponent: () =>
    import('./my-service.component').then((x) => x.MyServiceComponent),
  loadChildren: () => import('./child/routes').then((r) => r.childRoutes),
},*
```

```
*@Component({
  standalone: true,
  imports: [RouterOutlet],
  providers: [MyService],
  template: `<router-outlet></router-outlet>`,
})
export class MyServiceComponent {}*
```

*åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`MyServiceComponent`è¢«æä¾›äº†ä¸€ä¸ª`MyService`çš„å®ä¾‹ã€‚å½“æˆ‘ä»¬å¯¼èˆªåˆ°`bar`æ—¶ï¼Œå­ç»„ä»¶è¢«åˆ›å»ºï¼Œå®ƒå°†è¢«æä¾›ç›¸åŒçš„`MyService`å®ä¾‹ã€‚å½“æˆ‘ä»¬ç¦»å¼€æ—¶ï¼Œå­ç»„ä»¶è¢«é”€æ¯ï¼Œ`MyService`çš„å®ä¾‹ä¹Ÿå°†è¢«é”€æ¯ã€‚*

*æœ¬æ–‡åˆ°æ­¤ä¸ºæ­¢ï¼æ‚¨ç°åœ¨åº”è¯¥æŒæ¡å¹¶ä¼˜åŒ– Angular ä¸­çš„æ³¨å…¥æœåŠ¡ã€‚*

*å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·è€ƒè™‘æ”¯æŒæˆ‘çš„å·¥ä½œï¼Œä¸ºå®ƒé¼“æŒğŸ‘ğŸ‘å¸®åŠ©å®ƒæ¥è§¦åˆ°æ›´å¹¿æ³›çš„å—ä¼—ã€‚éå¸¸æ„Ÿè°¢ä½ çš„æ”¯æŒã€‚*

*æˆ‘å¸Œæœ›ä½ å­¦åˆ°äº†æ–°çš„è§’åº¦æ¦‚å¿µã€‚ä½ å¯ä»¥åœ¨ [Medium](https://medium.com/@thomas.laforge) ã€ [Twitter](https://twitter.com/laforge_toma) æˆ–è€… [Github](https://github.com/tomalaforge) ä¸Šæ‰¾åˆ°æˆ‘ã€‚å¦‚æœä½ æœ‰æ›´å¤šçš„é—®é¢˜ï¼Œä¸è¦çŠ¹è±«æ¥æ‰¾æˆ‘*

> **ğŸ‘‰è€Œå¦‚æœä½ æƒ³åŠ é€Ÿä½ çš„è§’åº¦å­¦ä¹ ä¹‹æ—…ï¼Œå¿«æ¥çœ‹çœ‹* [*è§’åº¦æŒ‘æˆ˜*](https://github.com/tomalaforge/angular-challenges) *ã€‚**