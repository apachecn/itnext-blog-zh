<html>
<head>
<title>How I built my first Progressive Web App (PWA)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æˆ‘å¦‚ä½•æ„å»ºæˆ‘çš„ç¬¬ä¸€ä¸ªæ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº(PWA)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-i-built-my-first-progressive-web-app-pwa-6fd3f5a164c0?source=collection_archive---------0-----------------------#2019-11-20">https://itnext.io/how-i-built-my-first-progressive-web-app-pwa-6fd3f5a164c0?source=collection_archive---------0-----------------------#2019-11-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="2743" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">æ¸è¿›å¼ç½‘ç»œåº”ç”¨</h2><div class=""/><div class=""><h2 id="0665" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">å¾—åˆ°å®Œç¾çš„ç¯å¡”åˆ†æ•°</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/95f262dbd16d04bc4268754da11d58b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xz2OcptBSxv6XkY5Cnw-WA.jpeg"/></div></div></figure><p id="c473" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">ä»ä»Šå¤©èµ·ï¼Œæˆ‘çš„ç½‘ç«™å¯ä»¥ä½œä¸ºä¸€ä¸ªè¿›æ­¥çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚è€¶ï¼ğŸ’¯</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lw"><img src="../Images/1a7e88def5e9c1cbef772ae4ca45db73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6iFn36MIl6YAAU7V.gif"/></div></div></figure><p id="98ab" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†ä¼šäº†è§£åˆ°æ›´å¤šå…³äºæˆ‘å¦‚ä½•ä»¥åŠä¸ºä»€ä¹ˆåœ¨æˆ‘çš„ç½‘ç«™ä¸Šæ·»åŠ è¿™ä¸ªä»¤äººå…´å¥‹çš„ç‰¹æ€§ã€‚</p><h1 id="aa9a" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">æˆ‘ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</h1><p id="ad1c" class="pw-post-body-paragraph la lb iq lc b ld mp ka lf lg mq kd li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">æˆ‘å–œæ¬¢è®¤ä¸ºè‡ªå·±æ˜¯ä¸€ä¸ªéå¸¸è¿‚è…çš„äººï¼Œæˆ‘ä»ç¬¬ä¸€å¤©å¼€å§‹å°±è¯•å›¾è®©æˆ‘çš„ç½‘ç«™å˜å¾—æ›´å¥½ã€‚å½“æˆ‘å»ºç«‹æˆ‘çš„ç½‘ç«™æ—¶ï¼Œæˆ‘å¹¶ä¸äº†è§£æ‰€æœ‰æ¥è‡ªç½‘é¡µæ€§èƒ½å·¥å…·çš„æŒ‡æ ‡ï¼Œå¦‚PageSpeed Insightsæˆ–WebPageTestã€‚ä½†æ˜¯ï¼Œå½“æˆ‘è¯•å›¾è®©æˆ‘çš„ç½‘ç«™æ›´å¥½çš„æ—¶å€™ï¼Œæˆ‘åœ¨å­¦ä¹ æ–°çš„æŠ€æœ¯ï¼Œæˆ‘çš„ç½‘ç«™å˜å¾—è¶Šæ¥è¶Šå¥½ã€‚</p><p id="dd65" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">ç°åœ¨æˆ‘çš„ç½‘ç«™å¾—åˆ†æœ€é«˜ï¼Œä½†æœ‰ä¸€ä»¶äº‹å›°æ‰°äº†æˆ‘ä¸€æ®µæ—¶é—´ã€‚è¿™æ˜¯æ¸è¿›å¼ç½‘ç»œåº”ç”¨è¯„åˆ†ã€‚</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lw"><img src="../Images/c09f20968d295d837e5746f32df537cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sZC4Fl9tRM82p-a-.png"/></div></div></figure><p id="0903" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">é€šè¿‡æŸ¥çœ‹PWAæŠ¥å‘Šï¼Œæˆ‘æ„è¯†åˆ°æˆ‘çš„ç½‘ç«™å·²ç»ä¸ºPWAåšå¥½äº†å‡†å¤‡ã€‚åªæœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚æˆ‘ä¸ç†è§£è¿™äº›é—®é¢˜ï¼Œä½†è¿™ä»æœªé˜»æ­¢è¿‡æˆ‘ã€‚</p><h1 id="fdda" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">æˆ‘æ˜¯å¦‚ä½•åšåˆ°çš„</h1><p id="1ddb" class="pw-post-body-paragraph la lb iq lc b ld mp ka lf lg mq kd li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">ä½œä¸ºæˆ‘çš„èµ·ç‚¹ï¼Œæˆ‘å†³å®šéµå¾ª<a class="ae mu" href="https://codelabs.developers.google.com/codelabs/your-first-pwapp/#4" rel="noopener ugc nofollow" target="_blank">â€œä½ çš„ç¬¬ä¸€ä¸ªæ¸è¿›å¼Webåº”ç”¨â€æ•™ç¨‹</a>ã€‚ç¬¬ä¸€æ­¥æ˜¯æ›´æ–°æˆ‘çš„<code class="fe mv mw mx my b">webmanifest.json</code>æ–‡ä»¶ã€‚æˆ‘æ·»åŠ äº†<code class="fe mv mw mx my b">start_url</code>å’Œ<code class="fe mv mw mx my b">display</code>é€‰é¡¹ä»¥åŠä¸€äº›å¿…éœ€çš„metaæ ‡ç­¾ï¼Œæ¯”å¦‚<code class="fe mv mw mx my b">&lt;meta name="apple-mobile-web-app-capable" content="yes"&gt;</code>ã€‚</p><pre class="kp kq kr ks gt mz my na nb aw nc bi"><span id="c29c" class="nd ly iq my b gy ne nf l ng nh">{<br/>  "name": "SB site - Silvestar BistroviÄ‡ website",<br/>  "short_name": "SB site - Silvestar BistroviÄ‡ website",<br/>  "icons": [<br/>    â€¦<br/>  ],<br/>  "theme_color": "#12e09f",<br/>  "background_color": "#fff",<br/>  "start_url": "/offline.html",<br/>  "display": "standalone"<br/>}</span></pre><p id="f74d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä¸ºæœåŠ¡äººå‘˜åˆ›å»ºäº†<code class="fe mv mw mx my b">sw.js</code>æ–‡ä»¶ã€‚è¦æ³¨å†ŒæœåŠ¡äººå‘˜ï¼Œéœ€è¦å°†ä¸€å°æ®µä»£ç æ·»åŠ åˆ°æ‚¨çš„ç´¢å¼•é¡µé¢ä¸­:</p><pre class="kp kq kr ks gt mz my na nb aw nc bi"><span id="e010" class="nd ly iq my b gy ne nf l ng nh">// CODELAB: Register service worker.<br/>if ('serviceWorker' in navigator) {<br/>  window.addEventListener('load', () =&gt; {<br/>    navigator.serviceWorker.register('/service-worker.js')<br/>      .then((reg) =&gt; {<br/>        console.log('Service worker registered.', reg);<br/>      });<br/>  });<br/>}</span></pre><p id="d9de" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æœåŠ¡å·¥ä½œè€…æ–‡ä»¶çš„å†…å®¹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œè¿™å–å†³äºæ‚¨å¸Œæœ›åœ¨æ‚¨çš„ç«™ç‚¹ä¸Šå®ç°ä»€ä¹ˆã€‚ç”±äºæˆ‘çš„ç½‘ç«™éå¸¸ç®€å•ï¼Œæˆ‘å†³å®šåªä½¿ç”¨åŸºæœ¬çš„ç¦»çº¿ä½“éªŒã€‚è¿™æ„å‘³ç€æˆ‘éœ€è¦ä¸€ä¸ª<code class="fe mv mw mx my b">offline.html</code>æ–‡ä»¶ç”¨äºç¦»çº¿ä½“éªŒã€‚è¿™å°†æ˜¯æˆ‘ä¸»é¡µçš„ç²¾ç®€ç‰ˆã€‚æ‰€ä»¥æˆ‘ç§»é™¤äº†å¤–éƒ¨å›¾åƒï¼Œå¹¶ç”¨CSSåˆ›å»ºäº†ä¸€ä¸ªå ä½ç¬¦ã€‚æˆ‘ç§»é™¤äº†å¤–éƒ¨CSSæ–‡ä»¶å¹¶å°†å…¶å†…è”åˆ°<code class="fe mv mw mx my b">head</code>éƒ¨åˆ†ã€‚å‰©ä¸‹å”¯ä¸€è¦åšçš„å°±æ˜¯æ·»åŠ faviconæ–‡ä»¶ã€‚æˆ‘è¿˜ä¸ç¡®å®šè¿™æ˜¯å¦éœ€è¦ï¼Œä½†æˆ‘å†³å®šæŠŠå®ƒæ”¾åœ¨é‚£é‡Œï¼Œä»¥é˜²ä¸‡ä¸€ã€‚åæ­£é‚£äº›æ–‡ä»¶ä¹Ÿä¸å¤§ã€‚</p><p id="20be" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><code class="fe mv mw mx my b">sw.js</code>æ–‡ä»¶å¯ä»¥åˆ†æˆå››ä¸ªéƒ¨åˆ†:</p><ul class=""><li id="e6a3" class="ni nj iq lc b ld le lg lh lj nk ln nl lr nm lv nn no np nq bi translated">å®šä¹‰å¸¸æ•°ï¼Œ</li><li id="525e" class="ni nj iq lc b ld nr lg ns lj nt ln nu lr nv lv nn no np nq bi translated">å®‰è£…ï¼Œ</li><li id="7ba0" class="ni nj iq lc b ld nr lg ns lj nt ln nu lr nv lv nn no np nq bi translated">æ¿€æ´»ï¼Œä»¥åŠ</li><li id="21d0" class="ni nj iq lc b ld nr lg ns lj nt ln nu lr nv lv nn no np nq bi translated">å¼•äººå…¥èƒœã€‚</li></ul><p id="67ed" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">é¦–å…ˆï¼Œæˆ‘å®šä¹‰äº†ç¼“å­˜åç§°å’Œè¦ç¼“å­˜çš„æ–‡ä»¶ã€‚</p><pre class="kp kq kr ks gt mz my na nb aw nc bi"><span id="7058" class="nd ly iq my b gy ne nf l ng nh">// constants<br/>const CACHE_NAME = 'sb-cache-v1.3'<br/>const FILES_TO_CACHE = [<br/>  '/offline.html',<br/>  '/favicon/apple-touch-icon.png',<br/>  '/favicon/favicon-32x32.png',<br/>  '/favicon/favicon-16x16.png',<br/>  '/favicon/site.webmanifest',<br/>  '/favicon/safari-pinned-tab.svg',<br/>  '/favicon/favicon.ico',<br/>  '/favicon/mstile-144x144.png',<br/>  '/favicon/browserconfig.xml'<br/>]</span></pre><p id="f923" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘åˆ›å»ºäº†<code class="fe mv mw mx my b">install</code>äº‹ä»¶ï¼Œå®ƒä½¿ç”¨ç»™å®šçš„ç¼“å­˜åç§°æ‰“å¼€ç¼“å­˜å¹¶ç¼“å­˜æ–‡ä»¶ã€‚</p><pre class="kp kq kr ks gt mz my na nb aw nc bi"><span id="1ad5" class="nd ly iq my b gy ne nf l ng nh">self.addEventListener('install', (event) =&gt; {<br/>  // CODELAB: Precache static resources here.<br/>  event.waitUntil(<br/>    caches.open(CACHE_NAME).then((cache) =&gt; {<br/>      console.log('[ServiceWorker] Pre-caching offline page')<br/>      return cache.addAll(FILES_TO_CACHE)<br/>    })<br/>  )<br/>})</span></pre><p id="4324" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">ä¹‹åï¼Œæˆ‘åˆ›å»ºäº†<code class="fe mv mw mx my b">activate</code>äº‹ä»¶ï¼Œå®ƒä»ç£ç›˜ä¸­æ¸…é™¤ç¼“å­˜çš„æ–‡ä»¶ã€‚</p><pre class="kp kq kr ks gt mz my na nb aw nc bi"><span id="8d9e" class="nd ly iq my b gy ne nf l ng nh">self.addEventListener('activate', (event) =&gt; {<br/>  // CODELAB: Remove previous cached data from disk.<br/>  event.waitUntil(<br/>    caches.keys().then(keyList =&gt; Promise.all(keyList.map((key) =&gt; {<br/>      if (key !== CACHE_NAME) {<br/>        console.log('[ServiceWorker] Removing old cache', key)<br/>        return caches.delete(key)<br/>      }<br/>    })))<br/>  )<br/>})</span></pre><p id="60d9" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æœ€åï¼Œæˆ‘åˆ›å»ºäº†<code class="fe mv mw mx my b">fetch</code>äº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä»…åœ¨è¯·æ±‚<code class="fe mv mw mx my b">.mode</code>ä¸º<code class="fe mv mw mx my b">navigate</code>æ—¶å¤„ç†é¡µé¢å¯¼èˆªã€‚å¦‚æœè¯·æ±‚æ— æ³•ä»ç½‘ç»œä¸Šè·å–é¡¹ç›®ï¼Œå®ƒä¼šå°è¯•è·å–<code class="fe mv mw mx my b">offline.html</code>æ–‡ä»¶ã€‚</p><pre class="kp kq kr ks gt mz my na nb aw nc bi"><span id="9284" class="nd ly iq my b gy ne nf l ng nh">self.addEventListener('fetch', (event) =&gt; {<br/>  // CODELAB: Add fetch event handler here.<br/>  if (event.request.mode === 'navigate') {<br/>    event.respondWith(<br/>      fetch(event.request)<br/>        .catch(() =&gt; caches.open(CACHE_NAME)<br/>          .then(cache =&gt; cache.match('offline.html')))<br/>    )<br/>  }<br/>})</span></pre><h1 id="9cd8" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">å†³èµ›æˆç»©</h1><p id="f7da" class="pw-post-body-paragraph la lb iq lc b ld mp ka lf lg mq kd li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">éƒ¨ç½²å®Œæˆåï¼Œæˆ‘è¿è¡Œäº†ç«™ç‚¹çš„å®¡è®¡ï¼Œç°åœ¨å®ƒçœ‹èµ·æ¥åƒè¿™æ ·:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lw"><img src="../Images/af425e0f7ebedc392bcad4f99c6f4c1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9Mm2NPsD1a97-MHd.png"/></div></div></figure><p id="6812" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æˆ‘è§‰å¾—çƒŸèŠ±å€¼å¾—å¦ä¸€ä¸ªæ ·å­ã€‚ğŸ’¯</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lw"><img src="../Images/83683d46b4ea6f204b437cbc82146a24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WgWF1d9LggB4S_dQ.gif"/></div></div></figure><h1 id="edf2" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">åç»­æ­¥éª¤</h1><p id="eb35" class="pw-post-body-paragraph la lb iq lc b ld mp ka lf lg mq kd li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">æ¥ä¸‹æ¥çš„æ­¥éª¤æ˜¯äº†è§£æ›´å¤šå…³äº<a class="ae mu" href="https://developers.google.com/web/tools/workbox/" rel="noopener ugc nofollow" target="_blank">å·¥å…·ç®±</a>çš„ä¿¡æ¯ã€‚åœ¨é‚£ä¹‹åï¼Œæˆ‘è®¡åˆ’ä¸ºæˆ‘çš„è¾¹é¡¹ç›®<a class="ae mu" href="https://cld.silvestar.codes/" rel="noopener ugc nofollow" target="_blank">ä»£ç è¡Œæ¯æ—¥</a>æ·»åŠ å®Œæ•´çš„ç¦»çº¿ä½“éªŒã€‚</p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="ac52" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="od">æœ€åˆå‘å¸ƒäº</em><a class="ae mu" href="https://www.silvestar.codes/articles/how-i-built-my-first-progressive-web-app-pwa/" rel="noopener ugc nofollow" target="_blank"><em class="od">https://www . silvestar . codes</em></a><em class="od">ã€‚</em></p></div></div>    
</body>
</html>