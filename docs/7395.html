<html>
<head>
<title>How to use System Environment variables (process.env) in Angular application.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨Angularåº”ç”¨ä¸­ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡(process.env)ï¼Ÿ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-to-use-system-environment-variables-process-env-in-angular-application-b9e7104dcc98?source=collection_archive---------0-----------------------#2022-09-11">https://itnext.io/how-to-use-system-environment-variables-process-env-in-angular-application-b9e7104dcc98?source=collection_archive---------0-----------------------#2022-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c4b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”¨<code class="fe kl km kn ko b">@angular/cli</code>è®¾ç½®çš„ç¯å¢ƒå˜é‡å¾ˆæ£’ã€‚é™¤éæˆ‘ä»¬éœ€è¦å‘åº”ç”¨ç¨‹åºä¼ é€’ä¸€äº›æˆ‘ä»¬ä¸æƒ³æäº¤ç»™å­˜å‚¨åº“çš„å€¼ã€‚</p><p id="76cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¾‹å¦‚:</p><ul class=""><li id="f3d9" class="kp kq iq jp b jq jr ju jv jy kr kc ks kg kt kk ku kv kw kx bi translated">åç«¯API URLæ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥ç»å¸¸æ›´æ”¹ã€‚<br/>ã€‚å¦‚æœæˆ‘ä»¬æœ‰å¤šä¸ªå¼€å‘ç¯å¢ƒã€‚<br/>ã€‚åœ¨æ¯æ¬¡éƒ¨ç½²æœŸé—´ï¼ŒAPI URLså¯ä»¥æ˜¯å”¯ä¸€çš„ã€‚</li><li id="3c2b" class="kp kq iq jp b jq ky ju kz jy la kc lb kg lc kk ku kv kw kx bi translated">æˆ‘ä»¬ç”¨çš„æ˜¯ä¼æœ¨æœºã€‚æˆ‘ä»¬æƒ³è¦çš„åªæ˜¯æ”¹å˜åº”ç”¨ç¨‹åºçš„æ—¥å¿—çº§åˆ«ã€‚<br/>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ”¹æˆ‘ä»¬çš„<code class="fe kl km kn ko b">environment.ts</code>æ–‡ä»¶ä¸­çš„<code class="fe kl km kn ko b">LOG_LEVEL</code>å¹¶é‡æ–°æ„å»ºã€‚æˆ‘ä»¬ä¸éœ€è¦å°†æ­¤æ›´æ”¹æäº¤ç»™å›è´­ã€‚</li><li id="5403" class="kp kq iq jp b jq ky ju kz jy la kc lb kg lc kk ku kv kw kx bi translated">åœ¨CI/CDæµç¨‹(ç®¡é“)ä¸­ï¼Œä¸€äº›å€¼å¯ä»¥ç”±å…¶ä»–ä½œä¸šæä¾›ã€‚</li><li id="77a9" class="kp kq iq jp b jq ky ju kz jy la kc lb kg lc kk ku kv kw kx bi translated">ä»¥åŠè®¸å¤šå…¶ä»–ä½¿ç”¨æ¡ˆä¾‹â€¦</li></ul></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="8fca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦è§£å†³å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å‡ ç§è§£å†³æ–¹æ³•ã€‚</p><ul class=""><li id="92fd" class="kp kq iq jp b jq jr ju jv jy kr kc ks kg kt kk ku kv kw kx bi translated">ä½¿ç”¨<code class="fe kl km kn ko b">fs</code>åº“åˆ›å»º/ç”ŸæˆåŠ¨æ€<code class="fe kl km kn ko b">environment.ts</code>æ–‡ä»¶ã€‚<br/> â€”éœ€è¦ç¼–å†™å’Œç»´æŠ¤ä¸€ä¸ªè„šæœ¬ï¼Œè¯¥è„šæœ¬å°†å®é™…ç”Ÿæˆ<code class="fe kl km kn ko b">environment.ts</code>æ–‡ä»¶ã€‚</li><li id="928f" class="kp kq iq jp b jq ky ju kz jy la kc lb kg lc kk ku kv kw kx bi translated">è‡ªå®šä¹‰webpacké…ç½®ã€‚<br/> â€”åªæœ‰å½“ä½ å–œæ¬¢ç©webpacké…ç½®æ—¶ã€‚</li><li id="a43c" class="kp kq iq jp b jq ky ju kz jy la kc lb kg lc kk ku kv kw kx bi translated"><a class="ae lk" href="https://www.npmjs.com/package/@ngx-env/builder" rel="noopener ugc nofollow" target="_blank">@ ngx-env/builder</a><br/>â€”è¦æ±‚å¯¹æ‰€æœ‰ç¯å¢ƒå˜é‡ä½¿ç”¨<code class="fe kl km kn ko b">NG_APP_</code>å‰ç¼€</li><li id="19c7" class="kp kq iq jp b jq ky ju kz jy la kc lb kg lc kk ku kv kw kx bi translated"><a class="ae lk" href="https://www.npmjs.com/package/ngx-build-plus" rel="noopener ugc nofollow" target="_blank"> ngx-build-plus </a>ä½œè€…<a class="ll lm ep" href="https://medium.com/u/acb3f1945710?source=post_page-----b9e7104dcc98--------------------------------" rel="noopener" target="_blank">æ›¼å¼—é›·å¾·Â·æ–½æ³°å°”</a> <br/> â€”æ‰©å±•Angular CLIçš„é»˜è®¤æ„å»ºè¡Œä¸ºï¼Œä¸å¼¹å‡ºã€‚<br/> â€”ä¸ºæ‚¨æä¾›ä¸€ç§æ“ä½œwebpacké…ç½®çš„ç®€ä¾¿æ–¹æ³•ã€‚</li></ul><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/3e02c04e644f44288a349372c201b1f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gm7AkM36A05FQCWtgKv5jA.png"/></div></div></figure><p id="4b15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³è€ƒè™‘ä¸€ç§ä½¿ç”¨åŸç”Ÿè§’åº¦åŠŸèƒ½çš„æ–¹æ³•ï¼Œæ¯”å¦‚builderå’Œschematicsã€‚</p><h1 id="9c7b" class="lz ma iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">å¤©ç„¶æ°”å¤„ç†ç¯å¢ƒ</h1><p id="384c" class="pw-post-body-paragraph jn jo iq jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj kk ij bi translated">å…ˆè¯´<code class="fe kl km kn ko b">npm i ng-process-env</code></p><p id="f8a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™ä¸ªåº“çš„ä¸»è¦æ€æƒ³æ˜¯åœ¨<code class="fe kl km kn ko b">angular.json</code>å’Œç›¸å…³çš„<code class="fe kl km kn ko b">environment.ts</code>æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªä¸“ç”¨çš„é…ç½®éƒ¨åˆ†ã€‚</p><p id="1e9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å¯èƒ½çŸ¥é“ï¼Œåœ¨æ¯ä¸ªé…ç½®ä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ª<code class="fe kl km kn ko b">environment.ts</code>æ–‡ä»¶æ›¿æ¢çš„å®šä¹‰:</p><pre class="lo lp lq lr gt nc ko nd ne aw nf bi"><span id="90f3" class="ng ma iq ko b gy nh ni l nj nk">// angular.json<br/>{<br/>  "targets": {<br/>    "build": {<br/>      ...<br/>      "configurations": {<br/>        "myconfig": {<br/>          "fileReplacements": [<br/>            {<br/>              "replace": "apps/myblogs/src/environments/environment.ts",<br/>              "with": "apps/myblogs/src/environments/environment.myconfig.ts"<br/>            }<br/>          ]<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="757d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®‰è£…ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªæ–°çš„é…ç½®éƒ¨åˆ†ã€‚ä¸ºæ­¤ï¼Œåªéœ€è¿è¡Œ<code class="fe kl km kn ko b">ng generate ng-process-env:process-env --project &lt;projectname&gt; --config &lt;configname&gt;</code>ã€‚<br/>å…¶ä¸­<code class="fe kl km kn ko b">--project</code>æ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„åç§°ï¼Œ<code class="fe kl km kn ko b">--config</code>æ˜¯æˆ‘ä»¬é…ç½®çš„åç§°ã€‚<br/>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåº”ç”¨ç¨‹åº<strong class="jp ir"> myblogsã€</strong>ï¼Œé™¤äº†é»˜è®¤é…ç½®(<em class="nl">å¼€å‘</em>å’Œ<em class="nl">ç”Ÿäº§</em>)ï¼Œæˆ‘ä»¬è¿˜æƒ³æ·»åŠ ä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åº- <em class="nl">éƒ¨ç½²</em>ã€‚<br/>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å‘½ä»¤åº”è¯¥æ˜¯è¿™æ ·çš„:<code class="fe kl km kn ko b">ng generate ng-process-nv:process-env --project myblogs --config deployment</code></p><p id="a025" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ­¤å‘½ä»¤å°†å¯¹æ‚¨çš„ä»£ç è¿›è¡Œä»¥ä¸‹æ›´æ”¹:</p><ol class=""><li id="8fb8" class="kp kq iq jp b jq jr ju jv jy kr kc ks kg kt kk nm kv kw kx bi translated">å°†åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="fe kl km kn ko b">environment.deployment.ts</code>æ–‡ä»¶ã€‚</li></ol><pre class="lo lp lq lr gt nc ko nd ne aw nf bi"><span id="fb59" class="ng ma iq ko b gy nh ni l nj nk">// <!-- -->environment.deployment.ts<br/>export const environment = {<br/>  production: false,<br/>  baseUrl: 'http://localhost:4200',<br/>  envVar: {<br/>    /**<br/>     * Add environment variables you want to retriev from process<br/>     * PORT:4200,<br/>     * VAR_NAME: defaultValue<br/>     */<br/>  }<br/>};</span></pre><p id="952f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.ç”¨æ–°çš„é…ç½®éƒ¨åˆ†<code class="fe kl km kn ko b">deployment</code>æ›´æ–°<code class="fe kl km kn ko b">angular.json</code></p><pre class="lo lp lq lr gt nc ko nd ne aw nf bi"><span id="1d04" class="ng ma iq ko b gy nh ni l nj nk">{<br/>  "targets": {<br/>    "build": {<br/>      ...<br/>      "configurations": {<br/>        "production": {<br/>          ...<br/>        },<br/>        "development": {<br/>          ...<br/>        },<br/>        "deployment": {<br/>          "fileReplacements": [<br/>            {<br/>              "replace": "apps/myblogs/src/environments/environment.ts",<br/>              "with": "apps/myblogs/src/environments/environment.deployment.ts"<br/>            }<br/>          ]<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="4ed1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨é…ç½®æ ‡å¿—<br/> <code class="fe kl km kn ko b">--configuration deployment</code>æ„å»º/æœåŠ¡æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚é»˜è®¤çš„<code class="fe kl km kn ko b">environment.ts</code>æ–‡ä»¶<br/>å°†è¢«æ›¿æ¢ä¸º<code class="fe kl km kn ko b">environment.deployment.ts</code>ã€‚</p><h1 id="900c" class="lz ma iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">é…ç½®æ‚¨çš„é…ç½®</h1><p id="ebe3" class="pw-post-body-paragraph jn jo iq jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj kk ij bi translated">æ­¤æ—¶æ˜¯å‘<code class="fe kl km kn ko b">deployment</code>éƒ¨åˆ†æ·»åŠ é¢å¤–æ‰€éœ€é…ç½®çš„å¥½æ—¶æœºï¼Œæˆ–è€…ç®€å•åœ°ä»<code class="fe kl km kn ko b">production</code>é…ç½®å¤åˆ¶/ç²˜è´´ã€‚</p><p id="e833" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦è®¾ç½®ä»<code class="fe kl km kn ko b">process.env</code>ä¸­æ£€ç´¢çš„å˜é‡ã€‚<br/>æ‰“å¼€åˆ›å»ºçš„<code class="fe kl km kn ko b">environment.deployment.ts</code>æ–‡ä»¶ï¼Œç”¨ä½ éœ€è¦çš„å˜é‡æ›´æ–°<code class="fe kl km kn ko b">envVar</code>éƒ¨åˆ†ã€‚</p><pre class="lo lp lq lr gt nc ko nd ne aw nf bi"><span id="a349" class="ng ma iq ko b gy nh ni l nj nk">// environment.deployment.ts<br/>export const environment = {<br/>  production: false,<br/>  baseUrl: 'http://localhost:4200',<br/>  envVar: {<br/>    endpointUrl: 'http://myapi.com',<br/>    LOG_LEVEL: 'debug',<br/>    version: 0<br/>  }<br/>};</span></pre><h1 id="f431" class="lz ma iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">è¿™æ˜¯ä¸€ä¸ªæ„å»ºæ—¶é—´</h1><p id="c886" class="pw-post-body-paragraph jn jo iq jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å‡†å¤‡æ”¶é›†æˆ‘ä»¬çš„ç¯å¢ƒå˜é‡å¹¶æ„å»ºåº”ç”¨ç¨‹åº(åœ¨æœ¬åœ°æˆ–åœ¨<strong class="jp ir"> CI/CD </strong>æœŸé—´)ã€‚</p><p id="0d74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬å‡è®¾è¿™æ˜¯æˆ‘ä»¬çš„ç¯å¢ƒå˜é‡:</p><pre class="lo lp lq lr gt nc ko nd ne aw nf bi"><span id="6a3d" class="ng ma iq ko b gy nh ni l nj nk">export endpointUrl='http://otherapi.com'<br/>export LOG_LEVEL='info'<br/>export version=34</span></pre><p id="e11e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†æ”¶é›†å˜é‡ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œ<code class="fe kl km kn ko b">ng run myblogs:collect-vars</code>å‘½ä»¤ã€‚<br/><code class="fe kl km kn ko b">environemnt.deployment.ts</code>æ–‡ä»¶å°†æ”¹ä¸º:</p><pre class="lo lp lq lr gt nc ko nd ne aw nf bi"><span id="a30f" class="ng ma iq ko b gy nh ni l nj nk">// environemnt.deployment.ts<br/>export const environment = {<br/>  production: false,<br/>  baseUrl: "http://localhost:4200",<br/>  envVar: {<br/>    endpointUrl: "http://otherapi.com",<br/>    LOG_LEVEL: "info",<br/>    version: 34 as number<br/>  }<br/>};</span></pre><p id="c456" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬ç°åœ¨éœ€è¦åšçš„å°±æ˜¯ç”¨<code class="fe kl km kn ko b">deployment</code>é…ç½®æ„å»ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚<br/> <code class="fe kl km kn ko b">ng build myblogs â€” configuration deployment</code></p><h1 id="edf7" class="lz ma iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">è®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹</h1><p id="58b1" class="pw-post-body-paragraph jn jo iq jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj kk ij bi translated">å¸Œæœ›æœ‰ä¸€å¤©<code class="fe kl km kn ko b">@angular/cli</code>ä¼šåŸç”Ÿæ”¯æŒç¯å¢ƒå˜é‡çš„ä½¿ç”¨ã€‚å¯ä»¥æŒ‰ç…§è¿™ä¸ª<a class="ae lk" href="https://github.com/angular/angular-cli/issues/4318" rel="noopener ugc nofollow" target="_blank">ç”±æ¥å·²ä¹…çš„ç‰¹æ€§è¦æ±‚ã€‚</a></p><p id="c436" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨é‚£ä¹‹å‰ï¼Œä½ ç°åœ¨çŸ¥é“å¦‚ä½•è‡ªå·±åšäº†ï¼</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="2464" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·æŒ‰ğŸ‘æ‹æŒ‰é’®â™¾ï¸æ—¶æŠ¥ã€‚<br/>åœ¨<a class="ae lk" href="https://twitter.com/danduh81" rel="noopener ugc nofollow" target="_blank"> Twitter </a>å’Œ<a class="ae lk" href="https://medium.com/@danduh" rel="noopener"> Medium </a>ä¸Šå…³æ³¨æˆ‘çš„åšå®¢æ›´æ–°ã€‚<br/>æŸ¥çœ‹æˆ‘çš„<a class="ae lk" href="https://danduh.me/" rel="noopener ugc nofollow" target="_blank">ç½‘ç«™</a>å’Œ<a class="ae lk" href="https://www.youtube.com/channel/UC6lsCdwzHYQZzudJtKW-00g" rel="noopener ugc nofollow" target="_blank"> Youtube </a>çš„è§†é¢‘å’Œå…¬å¼€æ¼”è®²ã€‚</p><p id="24e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¯·éšæ„æé—®ã€‚</p><p id="d6e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">éå¸¸æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼</p></div></div>    
</body>
</html>