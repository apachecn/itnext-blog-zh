# è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ JavaScript ä¸­æ˜ å°„ä¸€ä¸ªæ„é€ å¥½çš„æ•°ç»„ä¸èµ·ä½œç”¨çš„åŸå› 

> åŸæ–‡ï¼š<https://itnext.io/heres-why-mapping-a-constructed-array-doesn-t-work-in-javascript-f1195138615a?source=collection_archive---------0----------------------->

## ä»¥åŠå¦‚ä½•æ­£ç¡®åœ°å»åš

![](img/870b1b67d5cff4d6363056a0f3b97a5e.png)

# æ–¹æ¡ˆ

ä¸ºäº†ä¾¿äºæ¼”ç¤ºï¼Œå‡è®¾æ‚¨éœ€è¦ç”Ÿæˆä¸€ä¸ªä» 0 åˆ° 99 çš„æ•°å­—æ•°ç»„ã€‚ä½ ä¼šæ€ä¹ˆåšï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ªé€‰æ‹©:

```
const arr = [];for (let i = 0; i < 100; i++) {
  arr[i] = i;
}
```

å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œåœ¨ JavaScript ä¸­çœ‹åˆ°ä¼ ç»Ÿçš„ for å¾ªç¯ä¼šè®©ä½ æœ‰ç‚¹ä¸èˆ’æœã€‚äº‹å®ä¸Šï¼Œç”±äºé«˜é˜¶å‡½æ•°å¦‚ [forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach) ã€ [map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map) ã€ [filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter) ã€ [reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce) ï¼Œæˆ‘å·²ç»*å¹´*æ²¡æœ‰å†™è¿‡ä¸€ä¸ªä¼ ç»Ÿçš„ for-loop *ã€T1ã€‚é¢å‘èƒœåˆ©çš„å£°æ˜å¼å‡½æ•°ç¼–ç¨‹ï¼*

ä¹Ÿè®¸ä½ è¿˜æ²¡æœ‰å–è¿‡å‡½æ•°å¼ç¼–ç¨‹çš„è‹¦è‰¾é…’ï¼Œä½ è®¤ä¸ºä¸Šé¢çš„è§£å†³æ–¹æ¡ˆçœ‹èµ·æ¥éå¸¸å¥½ã€‚ä»æŠ€æœ¯ä¸Šæ¥è¯´ç¡®å®å¦‚æ­¤ï¼Œä½†æ˜¯åœ¨ä½ é¢†ç•¥äº†é«˜é˜¶å‡½æ•°çš„é­”åŠ›ä¹‹åï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œâ€œ *There* ***ä¸€å®šæ˜¯æ›´å¥½çš„æ–¹æ³•ã€‚***

æˆ‘å¯¹è¿™ä¸ªé—®é¢˜çš„ç¬¬ä¸€ååº”æ˜¯ï¼Œâ€œ*æˆ‘çŸ¥é“ï¼æˆ‘å°†åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 100 çš„ç©ºæ•°ç»„ï¼Œå¹¶å°†ç´¢å¼•æ˜ å°„åˆ°æ¯ä¸ªå…ƒç´ ï¼* " JavaScript å…è®¸æ‚¨ä½¿ç”¨æ•°ç»„æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º *n* çš„ç©ºæ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
const arr = Array(100);
```

å®Œç¾ï¼Œå¯¹å§ï¼Ÿæˆ‘æœ‰ä¸€ä¸ªé•¿åº¦ä¸º 100 çš„æ•°ç»„ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘åªéœ€è¦å°†ç´¢å¼•æ˜ å°„åˆ°æ¯ä¸ªå…ƒç´ ã€‚

```
const arr = Array(100).map((_, i) => i);console.log(arr[0] === undefined);  // true
```

ä»€ä¹ˆé¬¼ä¸œè¥¿ï¼ï¼Ÿæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ åº”è¯¥æ˜¯ *0* ï¼Œä½†å®é™…ä¸Šæ˜¯*æœªå®šä¹‰*ï¼

# è¯´æ˜

ä¸ºäº†è§£é‡Šä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæˆ‘éœ€è¦åœ¨è¿™é‡Œåšä¸€ä¸ªé‡è¦çš„æŠ€æœ¯åŒºåˆ†ã€‚åœ¨å†…éƒ¨ï¼ŒJavaScript æ•°ç»„**æ˜¯**å¯¹è±¡ï¼Œä»¥æ•°å­—ä½œä¸ºé”®ã€‚ä¾‹å¦‚:

```
['a', 'b', 'c']
```

æœ¬è´¨ä¸Šç­‰åŒäºè¿™ä¸ªå¯¹è±¡:

```
{
  0: 'a',
  1: 'b',
  2: 'c',
  length: 3
}
```

å½“è®¿é—®æ•°ç»„ä¸­ç´¢å¼•ä¸º 0 çš„å…ƒç´ æ—¶ï¼Œå®é™…ä¸Šåªæ˜¯è®¿é—®ä¸€ä¸ªé”®ä¸º 0 çš„å¯¹è±¡å±æ€§ã€‚è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºå½“æ‚¨å°†æ•°ç»„è§†ä¸ºå¯¹è±¡å¹¶ç»“åˆè¿™äº›é«˜é˜¶å‡½æ•°çš„å®ç°æ–¹å¼æ—¶(åˆ«æ‹…å¿ƒï¼Œæˆ‘å·²ç»ä¸ºæ‚¨å®Œæˆäº†è¿™ä¸€éƒ¨åˆ†)ï¼Œæˆ‘ä»¬é—®é¢˜çš„åŸå› å°±å¾ˆæ¸…æ¥šäº†ã€‚

å½“ä½ ç”¨æ•°ç»„æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ï¼Œå®ƒçš„*é•¿åº¦*å±æ€§è¢«è®¾ç½®ä¸ºä½ ä¼ å…¥çš„å€¼ï¼Œå¦åˆ™*å¯¹è±¡å°±æ˜¯ä¸€ä¸ªçœŸç©º*ã€‚æ— è®ºå¦‚ä½•ï¼Œåœ¨æ•°ç»„çš„å¯¹è±¡è¡¨ç¤ºä¸­æ²¡æœ‰ç´¢å¼•é”®ã€‚

```
{
  //no index keys!
  length: 100
}
```

å½“æ‚¨è¯•å›¾è®¿é—®ç´¢å¼• 0 å¤„çš„æ•°ç»„å€¼æ—¶ï¼Œæ‚¨ä¼šå¾—åˆ°*æœªå®šä¹‰çš„*ï¼Œä½†è¿™å¹¶ä¸æ˜¯è¯´å€¼*æœªå®šä¹‰çš„*å­˜å‚¨åœ¨ç´¢å¼• 0 å¤„ï¼Œè€Œæ˜¯è¯´å¦‚æœæ‚¨è¯•å›¾è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„é”®çš„å¯¹è±¡çš„å€¼ï¼ŒJavaScript ä¸­çš„é»˜è®¤è¡Œä¸ºæ˜¯è¿”å›*æœªå®šä¹‰çš„*ã€‚

æ°å¥½é«˜é˜¶å‡½æ•°*æ˜ å°„*ã€*å½’çº¦*ã€*è¿‡æ»¤*ã€ *forEach* ä» 0 åˆ°*é•¿åº¦*è¿­ä»£æ•°ç»„å¯¹è±¡çš„ç´¢å¼•é”®ï¼Œä½†æ˜¯åªæœ‰åœ¨å¯¹è±¡ä¸Šå­˜åœ¨çš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œ*å›è°ƒã€‚è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„å›è°ƒå‡½æ•°ä»æ¥æ²¡æœ‰è¢«è°ƒç”¨ï¼Œå½“æˆ‘ä»¬åœ¨æ•°ç»„ä¸Šè°ƒç”¨ map å‡½æ•°æ—¶ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿâ€”â€”å› ä¸ºæ²¡æœ‰ç´¢å¼•é”®ï¼*

# è§£å†³åŠæ³•

æ­£å¦‚ä½ ç°åœ¨æ‰€çŸ¥é“çš„ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„å†…éƒ¨å¯¹è±¡è¡¨ç¤ºåŒ…å«ä¸€ä¸ªä» 0 åˆ°*é•¿åº¦*çš„æ¯ä¸ªæ•°å­—çš„é”®ã€‚æœ€å¥½çš„æ–¹æ³•æ˜¯[å°†æ•°ç»„](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)å±•å¼€æˆä¸€ä¸ªç©ºæ•°ç»„ã€‚

```
const arr = [...Array(100)].map((_, i) => i);console.log(arr[0]);
// 0
```

å°†æ•°ç»„å±•å¼€ä¸ºç©ºæ•°ç»„ä¼šå¯¼è‡´æ•°ç»„åœ¨æ¯ä¸ªç´¢å¼•å¤„å¡«å……æœªå®šä¹‰çš„*ã€‚*

```
*{
  0: undefined,
  1: undefined,
  2: undefined,
  ...
  99: undefined,
  length: 100
}*
```

*è¿™æ˜¯å› ä¸º spread è¿ç®—ç¬¦æ¯” map å‡½æ•°ç®€å•ã€‚å®ƒç®€å•åœ°ä» 0 åˆ°*é•¿åº¦*éå†æ•°ç»„(æˆ–ä»»ä½•å¯è¿­ä»£çš„å¯¹è±¡),å¹¶åœ¨å°é—­æ•°ç»„ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•é”®ï¼Œè¯¥ç´¢å¼•é”®çš„å€¼æ¥è‡ªå½“å‰ç´¢å¼•å¤„çš„æ‰©å±•æ•°ç»„ã€‚ç”±äº JavaScript åœ¨å…¶æ¯ä¸ªç´¢å¼•å¤„ä»æˆ‘ä»¬çš„æ‰©å±•æ•°ç»„è¿”å› *undefined* (è®°ä½ï¼Œå®ƒé»˜è®¤è¿™æ ·åšï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¯¥å€¼çš„ç´¢å¼•é”®)ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå®é™…ä¸Šå¡«å……äº†ç´¢å¼•é”®çš„æ–°æ•°ç»„ï¼Œå› æ­¤*æ˜ å°„* -able(ä»¥åŠ*å‡å°‘* -ableã€*è¿‡æ»¤* -able å’Œ *forEach* -able)ã€‚*

# *ç»“è®º*

*æˆ‘ä»¬å‘ç°äº†æ•°ç»„åœ¨ Javascript ä¸­è¢«å†…éƒ¨è¡¨ç¤ºä¸ºå¯¹è±¡çš„ä¸€äº›å«ä¹‰ï¼Œå¹¶äº†è§£äº†åˆ›å»ºä»»æ„é•¿åº¦çš„æ•°ç»„çš„æœ€ä½³æ–¹å¼ï¼Œå…¶ä¸­å¡«å……äº†æ‚¨éœ€è¦çš„ä»»ä½•å€¼ã€‚*

**ä¸€å¦‚æ—¢å¾€ï¼Œè¯·åœ¨ä¸‹é¢ç•™ä¸‹æ‚¨çš„è¯„è®ºã€é—®é¢˜å’Œåé¦ˆï¼**

*ç¼–ç å¿«ä¹ï¼ğŸ‘*

# *è·Ÿæˆ‘æ¥ã€‚*

*å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·å…³æ³¨æˆ‘ï¼æˆ–è€…è‡³å°‘ç»™æˆ‘ä¸€ä¸¤ä¸‹æŒå£°ã€‚ä½ èƒ½çœä¸‹ä¸€ç‚¹æŒå£°ï¼Œå¯¹å§ï¼Ÿ*

***ä¸­**:[@ Shawn . web dev](https://medium.com/@shawn.webdev)
**æ¨ç‰¹**:[@ reisner Shawn](https://twitter.com/ReisnerShawn)
**dev . to**:**[@ sreisner](https://dev.to/sreisner) **insta gram**:[@ Shawn . web dev](https://www.instagram.com/shawn.webdev)***

# ***æŸ¥çœ‹æˆ‘çš„æ›´å¤šä½œå“***

***[](/a-quick-practical-use-case-for-es6-generators-building-an-infinitely-repeating-array-49d74f555666) [## ES6 å‘ç”µæœºçš„å¿«é€Ÿå®ç”¨ç”¨ä¾‹

### æ„å»ºæ— é™é‡å¤çš„æ•°ç»„

itnext.io](/a-quick-practical-use-case-for-es6-generators-building-an-infinitely-repeating-array-49d74f555666) [](/understanding-the-react-context-api-through-building-a-shared-snackbar-for-in-app-notifications-6c199446b80c) [## å­¦ä¹  React Context APIï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°æ‚¨çš„åº”ç”¨ä¸­

### ä¸ºåº”ç”¨å†…é€šçŸ¥æ„å»ºå…±äº«ç´ æ UI Snackbar

itnext.io](/understanding-the-react-context-api-through-building-a-shared-snackbar-for-in-app-notifications-6c199446b80c) [](/building-a-toggled-mask-password-input-component-w-react-and-material-ui-f55e6bd73434) [## ä½¿ç”¨ React å’Œ Material UI æ„å»ºâ€œMask Toggleâ€å¯†ç è¾“å…¥ç»„ä»¶

### ä¼—æ‰€å‘¨çŸ¥ï¼Œå…è®¸ç”¨æˆ·åˆ‡æ¢å¯†ç è¾“å…¥å¯è§æ€§æ¶ˆé™¤äº†æ‘©æ“¦å¹¶æé«˜äº†ç”¨æˆ·â€¦

itnext.io](/building-a-toggled-mask-password-input-component-w-react-and-material-ui-f55e6bd73434)***