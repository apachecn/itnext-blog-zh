<html>
<head>
<title>The right way to use PHPicker and retrieve EXIF data without requesting library permissions in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨PHPickerå’Œæ£€ç´¢EXIFæ•°æ®è€Œæ— éœ€åœ¨Swiftä¸­è¯·æ±‚åº“æƒé™çš„æ­£ç¡®æ–¹æ³•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/the-right-way-to-use-phpicker-and-retrieve-exif-data-without-requesting-library-permissions-in-336c13f87e3f?source=collection_archive---------0-----------------------#2022-06-08">https://itnext.io/the-right-way-to-use-phpicker-and-retrieve-exif-data-without-requesting-library-permissions-in-336c13f87e3f?source=collection_archive---------0-----------------------#2022-06-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8cf1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ç¯‡çŸ­æ–‡ä¸­ï¼Œæˆ‘å°†æ¦‚è¿°ä½¿ç”¨PHPickerçš„æ­£ç¡®æ–¹æ³•ä»¥åŠä½•æ—¶ä¸ä½¿ç”¨PHPickerã€‚è¿™ç¯‡æ–‡ç« èƒŒåçš„åŸå› æ˜¯æˆ‘åœ¨å°è¯•ç”¨PHPickeræ„å»ºä¸€ä¸ªæœ¬åœ°åº“æ—¶é‡åˆ°çš„æŒ«æŠ˜ã€‚äº’è”ç½‘ä¸Šçš„è®¸å¤šæ–‡ç« éƒ½åœ¨æ–¹æ³•ä¸Šæœ‰æ‰€é™åˆ¶ï¼Œæ²¡æœ‰è§£å†³ä¸€äº›æ ¸å¿ƒé—®é¢˜ä»¥åŠPHPickerå’ŒiOSæƒé™çš„é—®é¢˜ã€‚</p><p id="e605" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬æ¥è°ˆè°ˆå­˜åœ¨çš„é—®é¢˜ã€‚</p><h2 id="0e26" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">PHPickeræ˜¯ä»€ä¹ˆï¼Ÿ</h2><p id="de55" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">ä»iOS 14å¼€å§‹ï¼ŒPHPickeræ˜¯ç³»ç»Ÿæä¾›çš„Pickerï¼Œå®ƒå…è®¸æ‚¨è®¿é—®ç”¨æˆ·ç…§ç‰‡åº“ä¸­çš„ç…§ç‰‡å’Œè§†é¢‘ã€‚</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/e4530528fe066e40fb9f77a54f3138b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JoNgbmOS7EJsOsAQMgPNsQ.jpeg"/></div></div></figure><h2 id="23a0" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">PHPickerå’Œåº“æƒé™çš„é—®é¢˜</h2><blockquote class="lv"><p id="3153" class="lw lx iq bd ly lz ma mb mc md me kk dk translated">åº“æƒé™ä¸åº”è¯¥ä¸PHPickerä¸€èµ·ä½¿ç”¨ã€‚</p></blockquote><p id="6c32" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">åœ¨ä½¿ç”¨å…·æœ‰åº“æƒé™çš„PHPickeræ—¶ï¼Œå­˜åœ¨ä¸€äº›åŸºæœ¬çš„ç”¨æˆ·ä½“éªŒé—®é¢˜ã€‚ä½†æ˜¯é¦–å…ˆï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åœ¨ä½¿ç”¨PHPickeræ—¶è¯·æ±‚åº“æƒé™å‘¢ï¼Ÿ</p><p id="4a72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">äº’è”ç½‘ä¸Šæ’åæœ€é«˜çš„æ–‡ç« é¼“åŠ±æ‚¨ä½¿ç”¨PHAssetå’ŒPHPickeræ¥è·å–é¢å¤–çš„æ•°æ®ï¼Œå¦‚exifå’Œç»“æœçš„ä½ç½®ä¿¡æ¯ã€‚è¿™æ ·åšçš„é—®é¢˜æ˜¯ï¼Œè¦è·å–PHAssetï¼Œæ‚¨å¿…é¡»æ‹¥æœ‰åº“æƒé™æ¥è®¿é—®èµ„äº§ï¼Œè¿™è¿èƒŒäº†PHPickerçš„æ ¸å¿ƒç†å¿µ:Pickerå¯ä»¥åœ¨ä¸éœ€è¦è¯·æ±‚æƒé™çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p><p id="e306" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è‹¹æœå…¬å¸è‡ªå·±ç”šè‡³å»ºè®®ï¼Œä½ åº”è¯¥åªåœ¨â€œå¿…è¦â€æ—¶è¯·æ±‚è®¸å¯ï¼Œä½†ä¸è¦è¯¦ç»†è¯´æ˜è¿™å¯¼è‡´çš„è¾¹ç¼˜æƒ…å†µã€‚</p><p id="fa3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±åƒæˆ‘è¯´çš„â€¦å‡ ä¸ªå°æ—¶çš„æŒ«æŠ˜ï¼Œæˆ‘é‡åˆ°çš„æ‰€æœ‰æ•™ç¨‹éƒ½é¼“åŠ±ä½ ä½¿ç”¨PHAssetæ¥è·å–å…ƒæ•°æ®ã€‚æ²¡æœ‰äººå»ºè®®ä½ ç”¨å…¶ä»–æ–¹å¼è·å¾—exifå…ƒæ•°æ®ï¼Œè¿™å°±æ˜¯æˆ‘ä»Šå¤©è¦ç»™ä½ æä¾›çš„ï¼Œå…¶ä»–æ–¹å¼â€¦æ­£ç¡®çš„æ–¹å¼ã€‚</p><p id="f048" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é™¤äº†éœ€è¦è¯·æ±‚æƒé™ä¹‹å¤–ï¼Œå¦ä¸€ä¸ªé—®é¢˜æ˜¯ç”¨æˆ·ä½•æ—¶é€‰æ‹©å—é™çš„åº“è®¿é—®ã€‚è¿™å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›ä»¤äººå›°æƒ‘çš„ç”¨æˆ·ä½“éªŒé—®é¢˜ã€‚PHPickerä»ç„¶ä¼šæ˜¾ç¤ºæ‰€æœ‰ç…§ç‰‡(ç”šè‡³æ˜¯æ²¡æœ‰é€šè¿‡æœ‰é™Pickerè·å¾—è®¸å¯çš„ç…§ç‰‡),é€‰æ‹©ä¸€å¼ æ²¡æœ‰é€šè¿‡æœ‰é™ç…§ç‰‡é€‰æ‹©å¯¹è¯æ¡†è·å¾—è®¸å¯çš„ç…§ç‰‡å°†å¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•æ£€ç´¢â´.ç›¸æ²¡æœ‰PHAssetï¼Œå¤§å¤šæ•°å…³äºå¦‚ä½•è·å–å…ƒæ•°æ®å’Œå¤„ç†PHPickerç»“æœçš„æ•™ç¨‹éƒ½æœ‰æ‰€æ¬ ç¼ºã€‚</p><p id="04cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·:</p><p id="cad5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ çš„åº”ç”¨ç¨‹åºè¯·æ±‚è®¿é—®ç”¨æˆ·åº“<br/> <em class="mk">ç”¨æˆ·è¯´:â€œæˆ‘å°†åªç»™è¿™ä¸ªåº”ç”¨ç¨‹åºæœ‰é™çš„è®¿é—®ä¸€äº›ç…§ç‰‡â€</em></p><p id="f13a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨çš„åº”ç”¨ç¨‹åºæ‰“å¼€PHPickerå¹¶æ˜¾ç¤ºæ‰€æœ‰ç…§ç‰‡<br/> <em class="mk">ç”¨æˆ·è¯´:â€œå“ˆï¼Œæˆ‘ä»¥ä¸ºæˆ‘åªç»™äº†æœ‰é™çš„è®¿é—®æƒé™ï¼Œå“¦å¥½å§â€</em></p><p id="1191" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”¨æˆ·é€‰æ‹©äº†ä¸€å¼ ä»–ä»¬æ²¡æœ‰ç»™æˆ‘ä»¬è®¿é—®æƒé™çš„ç…§ç‰‡ã€‚<br/> <em class="mk">åº”ç”¨ç¨‹åºç°åœ¨éœ€è¦ä»€ä¹ˆéƒ½ä¸åšï¼Œæˆ–è€…å‘ç”¨æˆ·è§£é‡Šï¼Œè¦æ£€ç´¢ä»–ä»¬é€‰æ‹©çš„ç…§ç‰‡çš„æŸäº›å…ƒæ•°æ®ï¼Œä»–ä»¬å¿…é¡»å†æ¬¡æ›´æ–°ä»–ä»¬çš„æƒé™ã€‚</em></p><p id="9f69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ã€‚</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ml"><img src="../Images/cf8f8d16632b6ff7bcb394d22620f12d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7JdA6CQlL72SBq7cl0xxGA.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">å…³äºPHPickerçš„è¿ç¯æ¼«ç”»</figcaption></figure><p id="5c69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€æœ‰è¿™äº›é—®é¢˜çš„å‘ç”Ÿéƒ½æ˜¯å› ä¸ºæˆ‘ä»¬å°†åº“æƒé™ä¸PHPickerç»“åˆä½¿ç”¨ã€‚PHPickerä»æ¥ä¸æ˜¯ç”¨æ¥è¿™æ ·ä½¿ç”¨çš„ã€‚è®¸å¤šæ•™ç¨‹æ¨èè¿™ç§æ–¹å¼ï¼Œæ— æ„ä¸­å»ºè®®åœ¨ä½¿ç”¨PHPickeræ—¶ä½¿ç”¨PHAssetä½œä¸ºæå–exifæ•°æ®çš„ç›´æ¥æ–¹å¼ã€‚å°†PHAssetä¸PHPickerä¸€èµ·ä½¿ç”¨æ˜¯ä¸€ç§åæ¨¡å¼ã€‚</p><h2 id="7bc5" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">ä½¿ç”¨PHPickerçš„æ­£ç¡®æ–¹æ³•</h2><p id="f49d" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ˜“äºéµå¾ªçš„æŒ‡å—ï¼Œè®©æˆ‘ä»¬ä»å¤´å¼€å§‹ã€‚<br/>æ‚¨æƒ³ç”¨ä¸€ä¸ªé…ç½®æ¥è®¾ç½®æ‚¨çš„PHPickerå¹¶å±•ç¤ºå®ƒ:</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="1b63" class="kl km iq mr b gy mv mw l mx my">var configuration = PHPickerConfiguration();<br/>...</span><span id="3cc0" class="kl km iq mr b gy mz mw l mx my">let picker = PHPickerViewController(configuration: configuration);<br/>picker.delegate = self<br/>self.present(picker, animated: true, completion: nil)</span></pre><p id="ca74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åç¡®ä¿æ‚¨çš„ç±»æ‰©å±•äº†<em class="mk">PHPickerViewControllerDelegate</em>ã€<em class="mk">UIAdaptivePresentationControllerDelegate</em>å¹¶å®ç°äº†<em class="mk"> picker() </em>å®ä¾‹æ–¹æ³•:</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="8409" class="kl km iq mr b gy mv mw l mx my">class MyPickerClass: PHPickerViewControllerDelegate,         UIAdaptivePresentationControllerDelegate {</span><span id="3b99" class="kl km iq mr b gy mz mw l mx my">   func picker(<br/>     _ picker: PHPickerViewController, <br/>     didFinishPicking results: [PHPickerResult]<br/>   ) {<br/>      // This is where the magic happens ğŸª„<br/>   }<br/>}</span></pre><p id="b7e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨åœ¨<em class="mk"> picker </em>æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ£€ç´¢èµ„äº§å’Œå…ƒæ•°æ®ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œå¤§å¤šæ•°æ–‡ç« è¦ä¹ˆæŒ‡å¯¼ä½ ä½¿ç”¨<em class="mk">nsiteprovider</em>(å®ƒä¸éœ€è¦åº“æƒé™)ï¼Œä½†æ²¡æœ‰å‘Šè¯‰ä½ å¦‚ä½•è·å¾—exifæ•°æ®ï¼Œè¦ä¹ˆå‘Šè¯‰ä½ ä½¿ç”¨<em class="mk"> PHAsset </em>ï¼Œè¿™æ˜¯ä½¿ç”¨<em class="mk"> PHPicker </em>çš„é”™è¯¯æ–¹å¼ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦âµ.çš„æƒé™</p><blockquote class="lv"><p id="25c7" class="lw lx iq bd ly lz ma mb mc md me kk dk translated">PHAssetä¸åº”è¯¥ä¸PHPickerä¸€èµ·ä½¿ç”¨ï¼Œè¿™ä¸æ˜¯ä½¿ç”¨è¿™äº›APIçš„æ­£ç¡®æ–¹å¼</p></blockquote><p id="9a7b" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç ã€‚</p><p id="7579" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å¸Œæœ›å¾ªç¯éå†ç»“æœå¹¶æå–NSItemProvider:</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="bf9c" class="kl km iq mr b gy mv mw l mx my">func picker(<br/>  _ picker: PHPickerViewController, <br/>  didFinishPicking results: [PHPickerResult]<br/>) {<br/>  for result in results {<br/>     let itemProvider: NSItemProvider = result.itemProvider;<br/>  }<br/>}</span></pre><p id="2c66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½¿ç”¨<em class="mk"> itemProvider </em>æˆ‘ä»¬ç°åœ¨å¯ä»¥è¯»å–å¯¹è±¡çš„ç±»å‹ï¼Œå¹¶æ ¹æ®å®ƒæ˜¯ç…§ç‰‡ã€è§†é¢‘è¿˜æ˜¯å…¶ä»–ä¸œè¥¿æ¥å¤„ç†å®ƒã€‚æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æˆ‘å‘ç°æœ€å¥½çš„æ–¹æ³•æ˜¯:</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="0eb0" class="kl km iq mr b gy mv mw l mx my">func picker(_ picker: PHPickerViewController, didFinishPicking results: [PHPickerResult]) {</span><span id="3700" class="kl km iq mr b gy mz mw l mx my">for result in results {<br/>        let itemProvider: NSItemProvider = result.itemProvider;</span><span id="c9ad" class="kl km iq mr b gy mz mw l mx my">if(itemProvider.hasItemConformingToTypeIdentifier(UTType.image.identifier)) {<br/>   // Handle the image here<br/>        } else  if(itemProvider.hasItemConformingToTypeIdentifier(UTType.movie.identifier)) {<br/>          // Handle the video here<br/>        } else {<br/>          // Unsupported asset<br/>        }<br/>    }<br/>}</span></pre><p id="bb73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦æˆ‘ä»¬çŸ¥é“äº†èµ„äº§çš„ç±»å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŠ è½½å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»<em class="mk">nsiteprovider</em>åŠ è½½èµ„äº§çš„æœ€ä½³æ–¹å¼æ˜¯<em class="mk"> loadFileRepresentation </em>ï¼Œå®ƒå…è®¸æˆ‘ä»¬è½»æ¾åœ°è®¿é—®exifæ•°æ®ã€‚è™½ç„¶æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä½¿ç”¨<em class="mk"> loadItem </em>ã€<em class="mk"> loadFileRepresentation </em>ã€<em class="mk"> loadObject </em>ç­‰ã€‚å‚è§<a class="ae na" href="https://developer.apple.com/documentation/foundation/nsitemprovider" rel="noopener ugc nofollow" target="_blank"> NSItemProvider </a>æ–‡æ¡£ã€‚</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="065b" class="kl km iq mr b gy mv mw l mx my">func picker(_ picker: PHPickerViewController, didFinishPicking results: [PHPickerResult]) {</span><span id="2187" class="kl km iq mr b gy mz mw l mx my">for result in results {<br/>        let itemProvider: NSItemProvider = result.itemProvider;</span><span id="df36" class="kl km iq mr b gy mz mw l mx my">if(itemProvider.hasItemConformingToTypeIdentifier(UTType.image.identifier)) {<br/>   itemProvider.loadFileRepresentation(forTypeIdentifier: UTType.image.identifier) { data, error in<br/>    // Now we can get EXIF data<br/>           }<br/>        }<br/>    }<br/>}</span></pre><p id="344a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦æˆ‘ä»¬æœ‰äº†<em class="mk">æ•°æ®</em>å¯¹è±¡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“åœ¨å›¾åƒä¸Šä½¿ç”¨<em class="mk">åŠ è½½æ–‡ä»¶è¡¨ç¤º</em>æ—¶ï¼Œå®ƒå°†æ˜¯ç±»å‹<em class="mk"> URL </em>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä»èµ„äº§ä¸­åŠ è½½exifæ•°æ®:</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="e4ca" class="kl km iq mr b gy mv mw l mx my">if let url = data as? URL {<br/>   let options = [kCGImageSourceShouldCache as String:  kCFBooleanFalse]<br/>   let data = NSData(contentsOf: url)<br/>   let imgSrc = CGImageSourceCreateWithData(data, options as CFDictionary)<br/>   let metadata = CGImageSourceCopyPropertiesAtIndex(imgSrc, 0, options as CFDictionary)<br/>}</span></pre><p id="3151" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å…ƒæ•°æ®æ•°æ®å¯¹è±¡å¦‚ä¸‹æ‰€ç¤º(ä»Xcodeæ§åˆ¶å°æ‹·è´):</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="db6f" class="kl km iq mr b gy mv mw l mx my">ColorModel = RGB;<br/>DPIHeight = 72;<br/>DPIWidth = 72;<br/>Depth = 8;<br/>Orientation = 6;<br/>PixelHeight = 3024;<br/>PixelWidth = 4032;<br/>PrimaryImage = 1;<br/>ProfileName = "Display P3";<br/>"{TIFF}" = {<br/>    DateTime = "2022:05:26 14:28:29";<br/>    HostComputer = "iPhone XR";<br/>    Make = Apple;<br/>    Model = "iPhone XR";<br/>    Orientation = 6;<br/>    ResolutionUnit = 2;<br/>    Software = "15.4.1";<br/>    TileLength = 512;<br/>    TileWidth = 512;<br/>    XResolution = 72;<br/>    YResolution = 72;<br/>},<br/>"{Exif}" = {<br/>    ApertureValue = "1.69599381283836";<br/>    BrightnessValue = "2.126521070833867";<br/>    ColorSpace = 65535;<br/>    CompositeImage = 2;<br/>    DateTimeDigitized = "2022:05:26 14:28:29";<br/>    DateTimeOriginal = "2022:05:26 14:28:29";<br/>    ExifVersion =     (<br/>        2,<br/>        3,<br/>        2<br/>    );<br/>    ExposureBiasValue = 0;<br/>    ExposureMode = 0;<br/>    ExposureProgram = 2;<br/>    ExposureTime = "0.02";<br/>    FNumber = "1.8";<br/>    Flash = 16;<br/>    FocalLenIn35mmFilm = 26;<br/>    FocalLength = "4.25";<br/>    ISOSpeedRatings =     (<br/>        200<br/>    );<br/>    LensMake = Apple;<br/>    LensModel = "iPhone XR back camera 4.25mm f/1.8";<br/>    LensSpecification =     (<br/>        "4.25",<br/>        "4.25",<br/>        "1.8",<br/>        "1.8"<br/>    );<br/>    MeteringMode = 5;<br/>    OffsetTime = "+02:00";<br/>    OffsetTimeDigitized = "+02:00";<br/>    OffsetTimeOriginal = "+02:00";<br/>    PixelXDimension = 4032;<br/>    PixelYDimension = 3024;<br/>    SceneType = 1;<br/>    SensingMethod = 2;<br/>    ShutterSpeedValue = "5.644289064920122";<br/>    SubjectArea =     (<br/>        2013,<br/>        1511,<br/>        2217,<br/>        1330<br/>    );<br/>    SubsecTimeDigitized = 579;<br/>    SubsecTimeOriginal = 579;<br/>    WhiteBalance = 0;<br/>},<br/>"{GPS}" = {<br/>    Altitude = "19.96612929490311";<br/>    AltitudeRef = 0;<br/>    DestBearing = "272.5662841313811";<br/>    DestBearingRef = T;<br/>    HPositioningError = "7.460463890353189";<br/>    ImgDirection = "272.5662841313811";<br/>    ImgDirectionRef = T;<br/>    Latitude = "39.47537";<br/>    LatitudeRef = N;<br/>    Longitude = "0.3831666666666667";<br/>    LongitudeRef = W;<br/>    Speed = 0;<br/>    SpeedRef = K;<br/>},</span></pre><p id="2b86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åï¼Œæ‚¨å¯ä»¥ä»å…ƒæ•°æ®å˜é‡ä¸­æå–å¦‚ä¸‹å±æ€§:</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="9970" class="kl km iq mr b gy mv mw l mx my">metadata[kCGImagePropertyColorModel];<br/>metadata[kCGImagePropertyPixelWidth];<br/>metadata[kCGImagePropertyPixelHeight];</span></pre><p id="3e3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¾ˆéš¾å¤„ç†è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘åˆ›å»ºäº†ä¸€ä¸ªåä¸º<a class="ae na" href="https://gist.github.com/lukebrandonfarrell/961a6dbc8367f0ac9cabc89b0052d1fe" rel="noopener ugc nofollow" target="_blank"> ExifData </a>çš„ç±»ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å¤„ç†è¿™ä¸ªå¯¹è±¡ï¼Œå®ƒç›®å‰æ”¯æŒæ¥è‡ªexifå¯¹è±¡çš„26ä¸ªå€¼ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ‰©å±•è¿™ä¸ªç±»ã€‚å®ƒå¯ä»¥è¿™æ ·ä½¿ç”¨:</p><pre class="lk ll lm ln gt mq mr ms mt aw mu bi"><span id="0393" class="kl km iq mr b gy mv mw l mx my">let exif = ExifData(data: data);<br/>let exif = ExifData(url: url);</span><span id="fda6" class="kl km iq mr b gy mz mw l mx my">exif.dateTimeDigitized</span></pre><p id="0829" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®ƒæ”¯æŒä½¿ç”¨<em class="mk">æ•°æ®</em>ã€<em class="mk"> URL </em>æˆ–<em class="mk"> UIImage </em>è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•<em class="mk"> loadItem </em>(å°†è¿”å›ä¸€ä¸ª<em class="mk"> UIImage </em>)ã€<em class="mk"> loadDataRepresentation </em>(å°†è¿”å›ä¸€ä¸ª<em class="mk">æ•°æ®</em>å¯¹è±¡)å’Œ<em class="mk"> loadFileRepresentation </em>(å°†è¿”å›ä¸€ä¸ª<em class="mk"> URL </em>)ã€‚</p><p id="39c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">é‡è¦ï¼</strong>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯<em class="mk"> UIImage.pngData() </em>å’Œ<em class="mk"> UIImage.jpegData() </em>ä»è¿™äº›æ–¹æ³•è¿”å›çš„ç»“æœ<em class="mk"> Data </em>å¯¹è±¡ä¸­å‰¥ç¦»exifæ•°æ®ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨ä½¿ç”¨è¿™äº›æ–¹æ³•è¿›è¡Œå‹ç¼©ï¼Œè¯·ç¡®ä¿åœ¨æ­¤ä¹‹å‰æå–exifæ•°æ®ï¼</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="e833" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬åšåˆ°äº†ï¼æˆ‘ä»¬æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥ä½¿ç”¨<em class="mk"> PHPicker </em>è·å¾—èµ„äº§ï¼Œå¹¶ä¸”åœ¨ä¸è¯·æ±‚è®¸å¯çš„æƒ…å†µä¸‹æ£€ç´¢exifæ•°æ®ã€‚ç”±äº<em class="mk"> ExifData </em>ç±»æˆ‘å·²ç»ä¸ä½ åˆ†äº«äº†æ¥å—<em class="mk"> URL </em>ã€<em class="mk">æ•°æ®</em>å’Œ<em class="mk"> UIImage </em>æ•°æ®ç±»å‹ï¼Œå®ƒåº”è¯¥ç»™ä½ åœ¨é€‰æ‹©ä¹‹ååšä½ å¯èƒ½æƒ³è¦åœ¨å›¾åƒä¸Šæ‰§è¡Œçš„å…¶ä»–æ“ä½œçš„çµæ´»æ€§ï¼Œä¾‹å¦‚å‹ç¼©å’Œè°ƒæ•´å¤§å°ã€‚è¿™é‡Œæœ‰ä¸€ç¯‡å…³äºUIImageçš„å¤§å°è°ƒæ•´å’Œå‹ç¼©çš„å¾ˆæ£’çš„æ–‡ç« :<a class="ae na" href="https://nshipster.com/image-resizing/" rel="noopener ugc nofollow" target="_blank">å›¾åƒå¤§å°è°ƒæ•´æŠ€æœ¯â€” NSHipster </a>ã€‚</p><h2 id="3202" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">å‚è€ƒ</h2><ul class=""><li id="89af" class="ni nj iq jp b jq le ju lf jy nk kc nl kg nm kk nn no np nq bi translated">[1] â€”è‹¹æœå¼€å‘è€…æ–‡æ¡£[è‹¹æœå¼€å‘è€…æ–‡æ¡£](<a class="ae na" href="https://developer.apple.com/documentation/photokit/phpickerviewcontroller" rel="noopener ugc nofollow" target="_blank">https://Developer . Apple . com/Documentation/photokit/phpickerviewcontroller</a>)ã€‚</li><li id="21cc" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">[2] â€”å»ºè®®ä½¿ç”¨PHPickerçš„PHAssetçš„æ’åé å‰çš„æ–‡ç« :[åœ¨SwiftUIä¸­ä½¿ç”¨PHPickerè·å–ç…§ç‰‡å…ƒæ•°æ®â€”Felix Larsen](<a class="ae na" href="https://www.felixlarsen.com/blog/photo-metadata-phpickerview" rel="noopener ugc nofollow" target="_blank">https://www . Felix Larsen . com/blog/photo-metadata-PHPicker view</a>)ã€‚</li><li id="4af6" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">[3] â€”è‹¹æœå»ºè®®åªæœ‰åœ¨â€œå¿…è¦â€çš„æƒ…å†µä¸‹æ‰è¯·æ±‚è®¸å¯[è§è§æ–°çš„ç…§ç‰‡æ‹¾å–å™¨â€” WWDC20 â€”è§†é¢‘â€”è‹¹æœå¼€å‘è€…](ã€https://developer.apple.com/videos/play/wwdc2020/10652/? T42ã€‘æ—¶é—´=633 )ã€‚</li><li id="1a39" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">[4] â€” PHPickerå’Œæƒé™æ··æ·†ã€å¯¹PHPickerçš„éšç§|è‹¹æœå¼€å‘è€…è®ºå›æ„Ÿåˆ°å›°æƒ‘ã€‘(<a class="ae na" href="https://developer.apple.com/forums/thread/652819" rel="noopener ugc nofollow" target="_blank">https://developer.apple.com/forums/thread/652819</a>)ã€‚</li><li id="b816" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">[5] â€”å…³äºPHPickerçš„æ·±åº¦æŒ‡å—(ä¸åŒ…æ‹¬å¦‚ä½•æå–exifæ•°æ®)iOS 14ä¸­PHPickerçš„å®Œæ•´æŒ‡å—](<a class="ae na" href="https://www.appcoda.com/phpicker/" rel="noopener ugc nofollow" target="_blank">https://www.appcoda.com/phpicker/</a>)ã€‚</li></ul></div></div>    
</body>
</html>