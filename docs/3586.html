<html>
<head>
<title>Laravel and Vue: Creating a Portfolio website with a CRUD admin panel â€” Chapter 16</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravelå’ŒVue:ç”¨CRUDç®¡ç†é¢æ¿åˆ›å»ºä½œå“é›†ç½‘ç«™â€”â€”ç¬¬16ç« </h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-16-2ee3ffef1c32?source=collection_archive---------9-----------------------#2020-01-12">https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-16-2ee3ffef1c32?source=collection_archive---------9-----------------------#2020-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c9e5a989bcf27a6cae4a7475704bab68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QckeZGe8uhX5Hkx0N8HmTg.png"/></div></div></figure><div class=""/><div class=""><h2 id="d827" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">CVé€‰æ‹©å™¨</h2></div><p id="c1f2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">æˆ‘ä»¬åº”è¯¥æ„å»ºä¸€ä¸ªCVSelectorç»„ä»¶ï¼Œå¹¶å°†å…¶ä½œä¸ºAboutEditorçš„å­ç»„ä»¶ã€‚</p><p id="9c11" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">å…³äºEditor.vueçš„æ¨¡æ¿:ğŸ‘‡</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="7344" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;section <em class="me">id</em>="about-editor"&gt;<br/>        &lt;h1&gt;About Editor&lt;/h1&gt;<br/>        &lt;form <em class="me">enctype</em>="multipart/form-data" <em class="me">id</em>="about-form"&gt;<br/>            &lt;input <em class="me">type</em>="file" <em class="me">@change</em>="selectFile" <em class="me">name</em>="cv" <em class="me">accept</em>=".doc, .docx, .pdf" <em class="me">id</em>="cv_upload"&gt;<br/>            &lt;button <em class="me">@click.prevent</em>="onSubmit"&gt;Submit&lt;/button&gt;<br/>        &lt;/form&gt;<br/>        <strong class="lu jf">&lt;CVSelector/&gt;</strong><br/>    &lt;/section&gt;<br/>&lt;/template&gt;</span></pre><p id="a0fa" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">å¯¼å…¥CVSelectorç»„ä»¶å¹¶å°†å…¶æ”¾å…¥componentså—ä¸­</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="df3f" class="ly lz je lu b gy ma mb l mc md">&lt;script&gt;<br/>    <em class="me">import </em><strong class="lu jf">CVSelector</strong> <em class="me">from </em>'./<strong class="lu jf">CVSelector</strong>';<br/>    <em class="me">export default </em>{<br/>        name: 'AboutEditor',<br/>        components: {<br/>            <strong class="lu jf">CVSelector</strong><br/>        },<br/>....<br/>&lt;/script&gt;</span></pre><p id="ab05" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">CVSelectorç»„ä»¶å¯ä»¥åŒ…å«ä¸€ä¸ªå¸¦æœ‰<code class="fe mf mg mh lu b"><strong class="kv jf">v-for</strong></code>å¾ªç¯çš„è¡¨ã€‚è¡¨æ ¼åˆ—çš„æ ‡é¢˜ä¸º<strong class="kv jf"> CV </strong>ã€<strong class="kv jf">é€‰æ‹©</strong>å’Œ<strong class="kv jf">åˆ é™¤</strong>ã€‚CVåˆ—å°†æœ‰æ¥è‡ªv-forå¾ªç¯çš„<code class="fe mf mg mh lu b"><strong class="kv jf">cv_path</strong></code> <strong class="kv jf"> </strong>ã€‚é€‰æ‹©æ å°†æœ‰'<strong class="kv jf">é€‰æ‹©cv' </strong>æŒ‰é’®<strong class="kv jf"> </strong>ï¼Œåˆ é™¤æ å°†æœ‰<strong class="kv jf">'åˆ é™¤cv' </strong>æŒ‰é’®ã€‚</p><p id="d460" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">CVSelector.vueçš„æ¨¡æ¿:ğŸ‘‡</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="401b" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;table&gt;<br/>        &lt;thead&gt;<br/>        &lt;tr&gt;<br/>            &lt;th&gt;CV&lt;/th&gt;<br/>            &lt;th&gt;Select&lt;/th&gt;<br/>            &lt;th&gt;Delete&lt;/th&gt;<br/>        &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>        &lt;tr <em class="me">v-for</em>="cv <em class="me">in </em>cvlist"&gt;<br/>            &lt;td&gt;{{cv.cv_path}}&lt;/td&gt;<br/>            &lt;td&gt;<br/>                &lt;button <em class="me">@click</em>="selectCVPopup(cv)"&gt;SELECT CV&lt;/button&gt;<br/>            &lt;/td&gt;<br/>            &lt;td&gt;<br/>                &lt;button <em class="me">@click</em>="deleteCVPopup(cv)"&gt;DELETE CV&lt;/button&gt;<br/>            &lt;/td&gt;<br/>        &lt;/tr&gt;<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>&lt;/template&gt;</span></pre><p id="78fa" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><code class="fe mf mg mh lu b"><strong class="kv jf">cvlist</strong></code>åº”åœ¨æ•°æ®()è¿”å›{}</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="523e" class="ly lz je lu b gy ma mb l mc md">data() {<br/>    <em class="me">return </em>{<br/>        cvlist: '',<br/>    }<br/>},</span></pre><p id="70cd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">è·å–cvlistçš„æ–¹æ³•</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="b115" class="ly lz je lu b gy ma mb l mc md">getCVList() {<br/>    axios.get('/api/cvlist').then(<br/>        response =&gt; <em class="me">this</em>.cvlist = response.data<br/>    )<br/>},</span></pre><p id="0825" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">è£…è½½åè¿è¡Œè¯¥æ–¹æ³•</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="3b2c" class="ly lz je lu b gy ma mb l mc md">mounted() {<br/>    <em class="me">this</em>.getCVList();<br/>},</span></pre><p id="12e2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">è·å–cvlistçš„apiè·¯å¾„</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="56cc" class="ly lz je lu b gy ma mb l mc md">Route::<em class="me">get</em>('/cvlist', 'AboutController@getCVList');</span></pre><p id="f62b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">AboutControllerä¸­çš„getCVList()å‡½æ•°åº”è¯¥è·å–æ‰€æœ‰çš„Aboutè¡¨</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="6281" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>getCVList() {<br/>    <em class="me">return </em>About::<em class="me">all</em>();<br/>}</span></pre><p id="2e94" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬è®¿é—®è¯¥é¡µé¢å¹¶ä¸Šä¼ å‡ ä»½ç®€å†ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹:</p><figure class="lp lq lr ls gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mi"><img src="../Images/1ce78c20730e6bbb2061bfd3b778be75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BHwh_b3Fh9pU9rnFsiH0jg.png"/></div></div></figure><p id="444b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">ç°åœ¨æ˜¯æ„å»ºselectCVModalçš„æ—¶å€™äº†ã€‚</p><h2 id="af0f" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">é€‰æ‹©CVModal</h2><p id="d464" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">åœ¨æ¡Œå­ä¸‹é¢ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ª<strong class="kv jf"> selectCVModal </strong>ç»„ä»¶ã€‚æˆ‘ä»¬å¿…é¡»è®°ä½ï¼Œæˆ‘ä»¬åªèƒ½æ‹¥æœ‰<strong class="kv jf"/><strong class="kv jf">ä¸€ä¸ªæ ¹å…ƒç´ </strong>ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»å°†è¡¨å’ŒselectCVModalç»„ä»¶æ”¾åœ¨ä¸€ä¸ªå…ƒç´ ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="ca75" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;div <em class="me">id</em>="cv-selector"&gt;<br/>        &lt;table&gt;<br/>          ...<br/>        &lt;/table&gt;<br/>        &lt;<strong class="lu jf">selectCVModal</strong> <em class="me">v-if</em>="<strong class="lu jf">selectCVModal</strong>" <em class="me">:cv</em>="cv"/&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="e72c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">ä¸å…¶ä»–æ¨¡æ€ç±»ä¼¼ï¼Œè¿™ä¹Ÿä¾èµ–äºä¸€ä¸ªä¸ºçœŸçš„<strong class="kv jf">æ•°æ®å±æ€§</strong>å’Œä¸€ä¸ªé€šè¿‡å±æ€§çš„<strong class="kv jf">ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®å±æ€§æ˜¯<code class="fe mf mg mh lu b"><strong class="kv jf">selectCVModal</strong></code> <strong class="kv jf"> </strong>ï¼Œä¼ é€’çš„å±æ€§æ˜¯<code class="fe mf mg mh lu b"><strong class="kv jf">cv</strong></code> <strong class="kv jf">ã€‚</strong></strong></p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="cf0f" class="ly lz je lu b gy ma mb l mc md">data() {<br/>    <em class="me">return </em>{<br/>        cvlist: '',<br/>        cv: '',<br/>        selectCVModal: <em class="me">false</em>,<br/>    }<br/>},</span></pre><p id="9cbb" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">selectCVModalåº”è¯¥æœ‰ä¸€ä¸ªæ˜¯/å¦é—®é¢˜ã€‚å¦ä¸€ä¸ªæ¨¡æ€ï¼Œæˆ‘ä»¬åœ¨æ˜¯<strong class="kv jf">confirmdeletedemodalä¸­æœ‰ä¸€ä¸ªæ˜¯/å¦é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•åœ°å¤åˆ¶ç»„ä»¶å¹¶ä¿®æ”¹å®ƒä»¥é€‚åº”è¿™ç§æƒ…å†µã€‚</strong></p><p id="13b1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">ä»¥ä¸‹ä¿®æ”¹ä»¥<strong class="kv jf">ç²—ä½“</strong>æ˜¾ç¤º</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="8939" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;transition <em class="me">name</em>="fade"&gt;<br/>        &lt;div <em class="me">id</em>="my-modal" <em class="me">class</em>="modal"&gt;<br/>            &lt;div <em class="me">class</em>="modal-body"&gt;<br/>                <strong class="lu jf">&lt;h1&gt;Select &lt;b <em class="me">style</em>="color:red"&gt;{{cv.cv_path}}&lt;/b&gt;?&lt;/h1&gt;</strong><br/>                &lt;div <em class="me">class</em>="btn-row"&gt;<br/>                    &lt;button <em class="me">@click</em>="confirm"&gt;Yes&lt;/button&gt;<br/>                    &lt;button <em class="me">@click</em>="cancel"&gt;No&lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/transition&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>    <em class="me">export default </em>{<br/>        name: '<strong class="lu jf">selectCVPopup</strong>',<br/>        props: {<br/>            <strong class="lu jf">cv: ''</strong><br/>        },<br/>        methods: {<br/>            confirm() {<br/>                axios.post(<strong class="lu jf">`api/selectcv/${<em class="me">this</em>.cv.id}`</strong>).then(<br/>                    <strong class="lu jf"><em class="me">this</em>.$parent.selectCVModal = <em class="me">false</em></strong><em class="me"><br/>                </em>).then(<br/>                    <strong class="lu jf"><em class="me">this</em>.$parent.getCVList()</strong><br/>                )<br/>            },<br/>            cancel() {<br/>                <strong class="lu jf"><em class="me">this</em>.$parent.selectCVModal = <em class="me">false</em>;</strong><br/>            },<br/>        }<br/>    }<br/>&lt;/script&gt;</span></pre><p id="70e6" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">é€‰æ‹©cvçš„apiè·¯ç”±åº”è¯¥åŒ…å«/{id}</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="445f" class="ly lz je lu b gy ma mb l mc md">Route::<em class="me">post</em>('/selectcv/{id}', 'AboutController@selectCV');</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="61ff" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">åœ¨æ•°æ®åº“ä¸­é€‰æ‹©ç®€å†</h2><ul class=""><li id="f24f" class="nm nn je kv b kw na kz nb lc no lg np lk nq lo nr ns nt nu bi translated">é€‰æ‹©ç®€å†çš„æ–¹æ³•æ˜¯è®©<strong class="kv jf">æ•°æ®åº“è®°å½•</strong>æœ‰ä¸€äº›ç‹¬ç‰¹çš„ä¸åŒ</li><li id="483a" class="nm nn je kv b kw nv kz nw lc nx lg ny lk nz lo nr ns nt nu bi translated">å…·æœ‰å”¯ä¸€å·®å¼‚çš„<strong class="kv jf">è®°å½•å¯åœ¨è·¯çº¿ä¸Šè·å¾—ã€‚</strong></li><li id="6c9f" class="nm nn je kv b kw nv kz nw lc nx lg ny lk nz lo nr ns nt nu bi translated">è¯¥ç‰¹å®šè®°å½•çš„<code class="fe mf mg mh lu b"><strong class="kv jf">cv_path</strong></code> <strong class="kv jf"> </strong>å°†ç”¨äºAbout.vueçš„è„šæœ¬å’Œæ¨¡æ¿ä¸­ã€‚</li></ul><h2 id="d96f" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak">ç‹¬ç‰¹çš„å·®å¼‚</strong></h2><p id="edb7" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ª<strong class="kv jf"> cv_active </strong>åˆ—ã€‚åˆ—çš„ç±»å‹æ˜¯<strong class="kv jf">å¸ƒå°”å‹</strong>(è€Œä¸æ˜¯é€šå¸¸çš„å­—ç¬¦ä¸²åˆ—)ã€‚</p><p id="0296" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">å¸ƒå°”åˆ—åŒ…å«<code class="fe mf mg mh lu b"><strong class="kv jf">1</strong></code>æˆ–<code class="fe mf mg mh lu b"><strong class="kv jf">0</strong></code>ã€‚</p><p id="52bc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">æ‰€é€‰cv çš„<strong class="kv jf">å¸ƒå°”åˆ—å°†ä»¥<code class="fe mf mg mh lu b"><strong class="kv jf">1</strong></code>ä½œä¸ºå…¶å€¼ã€‚</strong></p><p id="1bdd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">å…¶ä»–cvçš„<strong class="kv jf">å¸ƒå°”åˆ—å°†ä½¿ç”¨<code class="fe mf mg mh lu b"><strong class="kv jf">0</strong></code>ä½œä¸ºå®ƒä»¬çš„å€¼ã€‚</strong></p><p id="e0d5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">è®©æˆ‘ä»¬åšä¸€ä¸ªè¿ç§»æ¥æ·»åŠ å¸ƒå°”åˆ—ã€‚</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="9e77" class="ly lz je lu b gy ma mb l mc md"><strong class="lu jf">php artisan make:migration AddCVActiveColumn</strong></span></pre><p id="e601" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">åœ¨AddCVActiveColumnè¿ç§»çš„up()å‡½æ•°ä¸­:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="ba7a" class="ly lz je lu b gy ma mb l mc md">Schema::table('about', <em class="me">function </em>(Blueprint $table) {<br/>    $table-&gt;<strong class="lu jf">boolean</strong>('<strong class="lu jf">cv_active</strong>');<br/>});</span></pre><p id="670f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">è®©æˆ‘ä»¬è¿ç§»:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="54b4" class="ly lz je lu b gy ma mb l mc md"><strong class="lu jf">php artisan migrate</strong></span></pre><p id="93bc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†å¸ƒå°”åˆ—ï¼Œæˆ‘ä»¬åº”è¯¥ç¼–å†™æ§åˆ¶å™¨å‡½æ•°ã€‚</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="64bb" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>selectCV() {<br/>    $id = request()-&gt;id;<br/>    About::<em class="me">where</em>('id', $id)-&gt;update(['cv_active' =&gt; 1]);<br/>    About::<em class="me">where</em>('id', '!=',$id)-&gt;update(['cv_active' =&gt; 0]);<br/>}</span></pre><blockquote class="oa ob oc"><p id="0a2d" class="kt ku me kv b kw kx kf ky kz la ki lb od ld le lf oe lh li lj of ll lm ln lo im bi translated">ä»£ç è§£é‡Š:å½“<code class="fe mf mg mh lu b"><strong class="kv jf">id</strong></code> <strong class="kv jf">åˆ—çš„å€¼</strong>ä¸æ‰€é€‰cv çš„<code class="fe mf mg mh lu b"><strong class="kv jf">id</strong></code> <strong class="kv jf">åŒ¹é…æ—¶ï¼Œå°†<code class="fe mf mg mh lu b"><strong class="kv jf">cv_active</strong></code>åˆ—å˜ä¸º<code class="fe mf mg mh lu b"><strong class="kv jf">1</strong></code>ã€‚å“ªé‡Œä¸åŒ¹é…ï¼Œå°±æŠŠcv_activeåˆ—è½¬åˆ°<code class="fe mf mg mh lu b"><strong class="kv jf">0</strong></code>ã€‚</strong></p></blockquote><h2 id="2bd8" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">æ¸²æŸ“æ´»åŠ¨CVé“¾æ¥</h2><p id="ba97" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">ç°åœ¨æˆ‘ä»¬å¿…é¡»ä¿®æ”¹AboutControllerçš„getCVPath()å‡½æ•°æ¥è·å¾—cvï¼Œå…¶ä¸­cv_activeçš„å€¼ä¸º1:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="2d63" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>getCVPath() {<br/>    <em class="me">return </em>About::<em class="me">all</em>()<br/>        -&gt;where('cv_active', 1)<br/>        -&gt;first()<br/>        -&gt;cv_path;<br/>}</span></pre><p id="d293" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">ç°åœ¨ï¼Œæ‚¨å°†è·å¾—æ¸²æŸ“åˆ°about.vueç»„ä»¶ä¸Šçš„æ´»åŠ¨CVé“¾æ¥ã€‚</p><p id="55c8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">å¦‚æœä½ åªæ˜¯æƒ³æ˜¾ç¤ºæœ€æ–°ä¸Šä¼ çš„ç®€å†ä½œä¸ºé“¾æ¥ï¼Œè€Œä¸æ˜¯é€šè¿‡é€‰æ‹©å™¨ã€‚</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="2098" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">æ˜¾ç¤ºæ²¡æœ‰CVé€‰æ‹©å™¨çš„æœ€æ–°CV</h2><p id="8fe3" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">æˆ‘ä»¬å¯ä»¥åœ¨postAboutForm()å‡½æ•°ä¸­ä½¿ç”¨<code class="fe mf mg mh lu b"><strong class="kv jf">cv_active</strong></code>åˆ—ï¼Œè¿™æ ·å½“æˆ‘ä»¬ä¸Šä¼ cvæ—¶ï¼Œcvçš„cv_activeåˆ—æ˜¾ç¤ºä¸º1ã€‚</p><p id="ac53" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">å…¶ä»–åˆ—å¯ä»¥é€šè¿‡ä½¿ç”¨<strong class="kv jf"> $about- &gt; id </strong>å˜ä¸º0(å› ä¸ºå½“æ‚¨å‘æ•°æ®åº“è¡¨ä¸­æ’å…¥ä¸€è¡Œæ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªid)ã€‚</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="cbf4" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>postAboutForm(){<br/>    $file = request()-&gt;file('cv');<br/>    $originalName = $file-&gt;getClientOriginalName();<br/>    $file-&gt;storeAs('public/cvs', $originalName);<br/>    $about = <em class="me">new </em>About();<br/>    $about-&gt;cv_path = $originalName;<br/>    <strong class="lu jf">$about-&gt;cv_active = 1;<br/>    About::<em class="me">where</em>('id', '!=',$about-&gt;id)-&gt;update(['cv_active' =&gt; 0]);</strong><br/>    $about-&gt;save();<br/>}</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="dc77" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">deleteCVModal</h2><p id="1748" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">æœ¬ç« æœ€åè¦åšçš„æ˜¯deleteCVModalã€‚å®ƒå¯ä»¥æ”¾åœ¨selectCVModalä¸‹ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="e11f" class="ly lz je lu b gy ma mb l mc md">&lt;selectCVModal <em class="me">v-if</em>="selectCVModal" <em class="me">:cv</em>="cv"/&gt;<br/>&lt;deleteCVModal <em class="me">v-if</em>="deleteCVModal" <em class="me">:cv</em>="cv"/&gt;</span></pre><p id="49ad" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">è®©æˆ‘ä»¬å°†deleteCVModalæ·»åŠ åˆ°data() return {}ä¸­</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="d846" class="ly lz je lu b gy ma mb l mc md">data() {<br/>    <em class="me">return </em>{<br/>        cvlist: '',<br/>        cv: '',<br/>        selectCVModal: <em class="me">false</em>,<br/>        <strong class="lu jf">deleteCVModal: <em class="me">false</em>,</strong><br/>    }<br/>},</span></pre><p id="543f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">å°†å…¶ä½œä¸ºå­ç»„ä»¶å¯¼å…¥CVSelector.vue</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="438b" class="ly lz je lu b gy ma mb l mc md"><em class="me">import </em>deleteCVModal <em class="me">from </em>'./deleteCVModal';</span></pre><p id="d8fc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">å°†å®ƒæ”¾åœ¨ç»„ä»¶å—ä¸­</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="7e3d" class="ly lz je lu b gy ma mb l mc md">components: {<br/>    selectCVModal,<br/>    <strong class="lu jf">deleteCVModal</strong><br/>},</span></pre><p id="0653" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">éå¸¸ç±»ä¼¼äºselectCVModalã€‚æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åŒºåˆ«</p><p id="abf7" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">éœ€è¦æ³¨æ„çš„åŒºåˆ«:æˆ‘ä»¬ç”¨<code class="fe mf mg mh lu b"><strong class="kv jf">cv_path</strong></code> <strong class="kv jf"> </strong>ä»£æ›¿idã€‚æˆ‘ä»¬å°†ä½¿ç”¨cv_pathåˆ é™¤ã€‚</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="348a" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;transition <em class="me">name</em>="fade"&gt;<br/>        &lt;div <em class="me">id</em>="my-modal" <em class="me">style</em>="border: solid; z-index: 1" <em class="me">class</em>="modal"&gt;<br/>            &lt;div <em class="me">class</em>="modal-body"&gt;<br/>                <strong class="lu jf">&lt;h1&gt;Delete &lt;b <em class="me">style</em>="color:red"&gt;{{cv.cv_path}}&lt;/b&gt; from the cv list?&lt;/h1&gt;</strong><br/>                &lt;div <em class="me">class</em>="btn-row"&gt;<br/>                    &lt;button <em class="me">@click</em>="confirm"&gt;Yes&lt;/button&gt;<br/>                    &lt;button <em class="me">@click</em>="cancel"&gt;No&lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/transition&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>    <em class="me">export default </em>{<br/>        props: {<br/>            cv: ''<br/>        },<br/>        methods: {<br/>            confirm() {<br/>                <strong class="lu jf">axios.delete(`api/cv/${<em class="me">this</em>.cv.cv_path}`)</strong>.then(<br/>                    <em class="me">this</em>.$parent.deleteCVModal = <em class="me">false<br/>                </em>).then(<br/>                    <em class="me">this</em>.$parent.getCVList()<br/>                )<br/>            },<br/>            cancel() {<br/>                <em class="me">this</em>.$parent.confirmDeleteModal = <em class="me">false</em>;<br/>            },<br/><br/>        },<br/>    }<br/>&lt;/script&gt;</span></pre><p id="b5db" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">ä½¿ç”¨cv_pathè·¯çº¿åˆ é™¤cv</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="6e83" class="ly lz je lu b gy ma mb l mc md">Route::<em class="me">delete</em>('/cv/{cv_path}', 'AboutController@destroy');</span></pre><p id="6676" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">AboutController.phpçš„é”€æ¯åŠŸèƒ½å¯ä»¥ç”¨æ¥åˆ é™¤æ•°æ®åº“è®°å½•å’Œæ–‡ä»¶ã€‚</p><p id="10d9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Storage::deleteæ­£åœ¨ä½¿ç”¨cv_pathåˆ é™¤æ–‡ä»¶ã€‚</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="d8ca" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>destroy($cv_path) {<br/>    About::<em class="me">where</em>('cv_path', $cv_path)-&gt;delete();<br/>    Storage::<em class="me">delete</em>('public/cvs/' . $cv_path);<br/>}</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="ce4b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">åœ¨ç¬¬17ç« ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè”ç³»è¡¨å•ã€‚</p></div></div>    
</body>
</html>