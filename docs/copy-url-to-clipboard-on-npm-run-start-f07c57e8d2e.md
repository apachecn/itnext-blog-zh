# åœ¨ Npm è¿è¡Œå¼€å§‹æ—¶å°† URL å¤åˆ¶åˆ°å‰ªè´´æ¿

> åŸæ–‡ï¼š<https://itnext.io/copy-url-to-clipboard-on-npm-run-start-f07c57e8d2e?source=collection_archive---------2----------------------->

## å¦‚ä½•åœ¨æœ¬åœ°å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶å°†å®ƒçš„å¯åŠ¨ URL å’Œå‚æ•°å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚

![](img/e07893242f5bb682d2017d7f784414ed.png)

ç…§ç‰‡ç”± [Gia Oris](https://unsplash.com/@giabyte?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„

æˆ‘ä¸ç¡®å®šæ˜¯å¦æœ‰äººä¼šéœ€è¦ä¸‹é¢çš„æŠ€å·§ï¼Œä½†æ˜¯åœ¨æˆ‘çš„å®¢æˆ·é‚£é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåªèƒ½é€šè¿‡åŒ…å«åŠ¨æ€ base64 å‚æ•°çš„ URL è®¿é—®çš„åº”ç”¨ç¨‹åºã€‚ä¸ç”¨è¯´ï¼Œè¿™è®©å®ƒåœ¨å½“åœ°çš„å‘å±•æœ‰ç‚¹ä¸æ–¹ä¾¿ã€‚

æ­¤å¤–ï¼Œæˆ‘ä¸å¾—ä¸æ‰¿è®¤ï¼Œæˆ‘ä¸æ˜¯ä¸€ä¸ªå¤§é£æ‰‡çš„ CLI çš„é€‰é¡¹ï¼Œå¯ä»¥è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ã€‚å°½ç®¡æˆ‘ä¸»è¦ä½¿ç”¨ Chrome éšå§“åŸ‹åæ¨¡å¼è¿›è¡Œå¼€å‘ï¼Œä½†æˆ‘å–œæ¬¢ç»å¸¸åœ¨æµè§ˆå™¨ä¹‹é—´åˆ‡æ¢ï¼Œå°è¯•æˆ‘å¼€å‘çš„ä¸œè¥¿ã€‚

æœ€åï¼Œæˆ‘ä¸ä½¿ç”¨ä¹¦ç­¾(ä¸è¦è¯„ä»·æˆ‘)å¹¶ä¸”ï¼Œæˆ‘ç»å¸¸åœ¨æŠ€æœ¯ä¹‹é—´åˆ‡æ¢ã€‚å› æ­¤ï¼Œåœ¨æ²¡æœ‰é…ç½®çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡éƒ½å¿…é¡»ä½¿ç”¨å¦ä¸€ä¸ªç«¯å£(`:3333`æˆ–`:4200`æˆ–`:8000`æˆ–`:8100`ç­‰)ã€‚).

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘æƒ³ç»™åº”ç”¨ç¨‹åºæ·»åŠ ä¸€ä¸ªé¢„å¯åŠ¨è„šæœ¬ï¼Œå®ƒåº”è¯¥å°†åº”ç”¨ç¨‹åºçš„å¼€å§‹ URL å¤åˆ¶åˆ°æˆ‘çš„å‰ªè´´æ¿ã€‚è¿™æ ·åšï¼Œæˆ‘å°±å¯ä»¥é€‰æ‹©ä¸€ä¸ªæµè§ˆå™¨ï¼Œç²˜è´´ URIï¼Œæˆ‘å°±å¯ä»¥èµ°äº†ã€‚

# å±å›½

ä¸ºäº†ä» NodeJS è„šæœ¬å‘å‰ªè´´æ¿å¤åˆ¶æˆ–è¯»å–å€¼ï¼Œæˆ‘ä½¿ç”¨äº†åº“ [clipboardy](https://github.com/sindresorhus/clipboardy) ï¼Œå®ƒå®ç°äº†è¿™æ ·ä¸€ä¸ªè·¨å¹³å°ç‰¹æ€§ã€‚

æ­¤å¤–ï¼Œæˆ‘è¿˜æ·»åŠ äº†[ç²‰ç¬”](https://github.com/chalk/chalk)å’Œ [boxen](https://github.com/sindresorhus/boxen) ä»¥æ—¶å°šçš„æ–¹å¼æ‰“å°å‡ºæ§åˆ¶å°çš„ URLã€‚

æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œæ‰€æœ‰è¿™äº›ä¾èµ–é¡¹éƒ½æ˜¯å¼€æºçš„ï¼Œå¹¶ä¸”æ˜¯ç”±åŒä¸€ä¸ªäººå¼€å‘çš„ï¼Œ [Sindre Sorhus](https://twitter.com/sindresorhus) ï¼Œä»–çš„è´¡çŒ®å’Œå·¥ä½œç»å¯¹å€¼å¾—ç§°èµğŸ‘ã€‚

```
npm i clipboardy chalk boxen --save-dev
```

# è„šæœ¬

è·å–ä¾èµ–é¡¹åï¼Œæˆ‘åˆ›å»ºäº†é¢„å¯åŠ¨è„šæœ¬æœ¬èº«ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶`start-url.js`ã€‚

è¯¥è„šæœ¬ä¸»è¦ç”Ÿæˆæˆ‘å¸Œæœ›å¤åˆ¶åˆ°æˆ‘çš„å‰ªè´´æ¿ä¸­çš„`url`ã€‚æˆ‘ç‰¹æ„ä½¿ç”¨äº†ä¸€ä¸ª`Hello World ğŸ‘‹`å­—ç¬¦ä¸²æ¥æ¼”ç¤ºå¯¹å¤æ‚å‚æ•°è¿›è¡Œç¼–ç æ˜¯å¯èƒ½çš„ã€‚

ä¸ºäº†æ‰“å°å‡ºæ¼‚äº®çš„ä¿¡æ¯ï¼Œæˆ‘ä½¿ç”¨äº†å¸¦æœ‰é¢œè‰²çš„`chalk`ï¼Œåœ¨ for-å’Œ background ä¸­ï¼Œè¿˜æœ‰ç²—ä½“é€‰é¡¹ã€‚æˆ‘ä½¿ç”¨`\n\n`æ¥åˆ›å»ºæ¢è¡Œç¬¦ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯¥åº“æä¾›äº†è®¸å¤šé€‰é¡¹ï¼Œå¦‚ç»„åˆæˆ–åµŒå¥—æ ·å¼ã€‚

ä½¿ç”¨`clipboardy`å°† URL å¤åˆ¶åˆ°å‰ªè´´æ¿å®é™…ä¸Šå¾ˆç®€å•ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•°`copy`å°† all URL ä½œä¸ºè¾“å…¥å‚æ•°æ¥è§£å†³ã€‚

æœ€åï¼Œåœ¨ä¸€ä¸ª`console.log`ä¸­ï¼Œæˆ‘æ‰“å°å‡ºäº†ç”¨`boxen`ç”Ÿæˆçš„ä¸€ä¸ªæ¡†ä¸­çš„æ¶ˆæ¯ã€‚

```
const { write: copy } = require('clipboardy');
const chalk = require('chalk');
const boxen = require('boxen');

const params = encodeURIComponent('Hello World ğŸ‘‹');

const url = `http://localhost:3333/profile/${params}`;

(async () => {
    let message = chalk.yellow.inverse('Your URL');

    message += `\n\n${chalk.bold(`${url}`)}`;

    try {
        await copy(url); message += `\n\n${chalk.grey('Copied local address to clipboard!')}`;
    } catch (err) {
        message = chalk.red.bold(`Cannot copy ${url} to clipboard ğŸ¥º\n\n${err.message}`);
    }

    console.log(
        boxen(message, {
            borderStyle: 'round',
            padding: 1,
            borderColor: 'yellow',
            margin: 1
        })
    );
})();
```

# ç”Ÿå‘½å‘¨æœŸ

å¤šäºäº† [npm](https://docs.npmjs.com/cli/v6/using-npm/scripts) ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œè„šæœ¬ã€‚å› ä¸ºæˆ‘åœ¨æœ¬åœ°å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶å¸Œæœ›å¤åˆ¶ URLï¼Œæ‰€ä»¥æˆ‘å°†å®ƒä½œä¸ºä¸€ä¸ª`prestart`è„šæœ¬æ·»åŠ åˆ°æˆ‘çš„`package.json`ä¸­ã€‚

```
"scripts": {
  "prestart": "node start-url.js"
}
```

æ‚¨å¯èƒ½ä¼šé—®â€œä½†æ˜¯ Davidï¼Œä¸ºä»€ä¹ˆæ˜¯é¢„å¯åŠ¨è€Œä¸æ˜¯åå¯åŠ¨ï¼Ÿâ€å¯¹æ­¤æˆ‘çš„å›ç­”æ˜¯`prestart`è‚¯å®šä¼šæ‰§è¡Œã€‚ç›¸åï¼Œ`poststart`ä¹Ÿç¡®å®è¢«æ‰§è¡Œï¼Œä½†ä»…å½“`start`ç”Ÿå‘½å‘¨æœŸè¢«é‡Šæ”¾æ—¶ã€‚å¦‚æœæ‚¨çš„æœ¬åœ°æœåŠ¡å™¨åƒå¾€å¸¸ä¸€æ ·ä¿æŒæ´»åŠ¨ä»¥è§‚å¯Ÿå˜åŒ–ï¼Œ`poststart`å°†åªåœ¨æ‚¨å–æ¶ˆæœ¬åœ°æœåŠ¡å™¨æ—¶æ‰ä¼šè§£å†³ã€‚

# æ¼”ç¤º

ä¸€åˆ‡å°±ç»ªåï¼Œå½“æˆ‘åœ¨æ§åˆ¶å°ä¸­ç‚¹å‡»`npm run start`æ—¶ï¼ŒURL è¢«ç”Ÿæˆå¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæˆ‘æ³¨æ„åˆ°ä»¥ä¸‹è¾“å‡ºã€‚

![](img/9753a616fe7b1952f9cf6f55e6616797.png)

å¦‚æœæˆ‘æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œæˆ‘å¯ä»¥å°†ç»“æœç²˜è´´åˆ°å¯¼èˆªæ ä¸­ã€‚

![](img/58e66e42915f60c5cebb0c21054d79b8.png)

æœ€åï¼Œç‚¹å‡»`enter`å¹¶ä½¿ç”¨ç”Ÿæˆçš„å‚æ•°è®¿é—®æˆ‘çš„ URLã€‚

![](img/cf729575d1a58b27940641a683021224.png)

# æ‘˜è¦

æ­£å¦‚åœ¨è¿™ç¯‡æ–‡ç« çš„ä»‹ç»ä¸­æ‰€å¼ºè°ƒçš„ï¼Œæˆ‘çœŸçš„ä¸ç¡®å®šæ˜¯å¦æœ‰äººä¼šéœ€è¦è¿™ä¸ªè§£å†³æ–¹æ¡ˆğŸ˜…ã€‚æ— è®ºå¦‚ä½•ï¼Œæˆ‘å¸Œæœ›è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„é˜…è¯»ï¼Œè®©æˆ‘çŸ¥é“ä½ æ˜¯å¦ä¼šæ”¹å–„ä»»ä½•ä¸œè¥¿ã€‚

åˆ°æ— é™å’Œæ›´è¿œçš„åœ°æ–¹ï¼

å¤§å«

ä½ å¯ä»¥åœ¨æ¨ç‰¹ä¸Šè”ç³»æˆ‘ï¼Œä¸ºä»€ä¹ˆä¸è¯•ç€åœ¨ä½ çš„ä¸‹ä¸€æ¬¡æ¼”è®²ä¸­è”ç³»æˆ‘ã€‚

[![](img/084fe1923331f770afe6ef5fbc827f7f.png)](https://deckdeckgo.com)