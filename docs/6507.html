<html>
<head>
<title>Ultimate Local Development Setup with Angular, Firebase &amp; Stripe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å…·æœ‰è§’å½¢ã€ç«åŸºå’Œæ¡çº¹çš„ç»ˆææœ¬åœ°å¼€å‘è®¾ç½®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/ultimate-local-development-setup-with-angular-firebase-stripe-fcc6fca3543c?source=collection_archive---------6-----------------------#2021-12-05">https://itnext.io/ultimate-local-development-setup-with-angular-firebase-stripe-fcc6fca3543c?source=collection_archive---------6-----------------------#2021-12-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c55a0fb605548e73c4fad6a5aad87012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i8rCu6l3M0QnFB67y84nFw.png"/></div></div></figure><p id="f408" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å»ºç«‹ä¸€ä¸ªç”µå­å•†åŠ¡ç½‘ç«™æ˜¯ä¸€é¡¹å¤æ‚çš„ä»»åŠ¡ã€‚å°¤å…¶æ˜¯å½“æ‚¨æœ‰ä¸åŒçš„æœåŠ¡éœ€è¦ç›¸äº’é€šä¿¡æ—¶ã€‚è¿™æ˜¯ä¸€ä¸ªåœºæ™¯ï¼Œæ‚¨æ²¡æœ‰åœ¨æœ¬åœ°ä¸ºå¼€å‘åšå¥½ä¸€åˆ‡å‡†å¤‡ã€‚</p><p id="a115" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚é¢˜ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªç”µå­å•†åŠ¡ç½‘ç«™çš„æ ˆæ˜¯</p><ul class=""><li id="409c" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated"><a class="ae li" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank">æ£±è§’åˆ†æ˜çš„</a> â€”å‰ç«¯</li><li id="a4c7" class="kz la it kd b ke lj ki lk km ll kq lm ku ln ky le lf lg lh bi translated"><a class="ae li" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase </a> â€”è®¤è¯+æ•°æ®åº“+å­˜å‚¨+ API</li><li id="64cb" class="kz la it kd b ke lj ki lk km ll kq lm ku ln ky le lf lg lh bi translated"><a class="ae li" href="https://stripe.com/en-ca" rel="noopener ugc nofollow" target="_blank">æ¡çº¹</a> â€”æ”¯ä»˜å¤„ç†</li></ul><p id="461e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">æ²¡æœ‰æœ¬åœ°å¼€å‘èƒ½åŠ›</strong></p><p id="0f99" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä½ åº”è¯¥è®¾ç½®æœ¬åœ°å¼€å‘çš„å¤§éƒ¨åˆ†åŸå› æ˜¯<strong class="kd iu">èŠ‚çœæ—¶é—´</strong>ï¼Œè€Œ<strong class="kd iu">æ—¶é—´</strong>æ˜¯$$$ã€‚</p><ul class=""><li id="a8ef" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">ç›´æ¥å¯¹firebaseé¡¹ç›®è¿›è¡Œèº«ä»½éªŒè¯</li><li id="5125" class="kz la it kd b ke lj ki lk km ll kq lm ku ln ky le lf lg lh bi translated">å¦‚æœä½ æ­£åœ¨ä½¿ç”¨Webhookï¼Œäº‘åŠŸèƒ½çš„éƒ¨ç½²éœ€è¦æ—¶é—´å’Œé‡‘é’±â€”â€”å°¤å…¶æ˜¯å¯¹äºåˆå­¦è€…</li><li id="cf1b" class="kz la it kd b ke lj ki lk km ll kq lm ku ln ky le lf lg lh bi translated">æ•°æ®åº“æ´»åŠ¨æ­£åœ¨åå™¬ä½ çš„å…è´¹è½®èƒâ€”â€”ä½ ä¸åº”è¯¥å¤„ç†ç”Ÿäº§æ•°æ®</li></ul><p id="1ff3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">æ²¡æœ‰æœ¬åœ°å¼€å‘èƒ½åŠ›</strong></p><p id="c5f1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨å½“åœ°å‘ç”Ÿçš„äº‹æƒ…ï¼Œç•™åœ¨å½“åœ°â€”â€”è€Œä¸æ˜¯ç”¨äºå¼€å‘çš„æ¡çº¹æ”¯ä»˜è®°å½•ã€‚</p><h2 id="e30f" class="lo lp it bd lq lr ls dn lt lu lv dp lw km lx ly lz kq ma mb mc ku md me mf mg bi translated">è§’åº¦å’Œç«ç„°æ¨¡æ‹Ÿå™¨è®¾ç½®</h2><p id="ea63" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">æˆ‘ä¸æ‰“ç®—è¯¦ç»†ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ–°çš„è§’åº¦é¡¹ç›®ã€‚å‡è®¾æ‚¨çš„package.jsonä¸­å·²ç»æœ‰äº†ä¸€ä¸ªå¸¦æœ‰<code class="fe mm mn mo mp b">@angular/fire</code>çš„Angularé¡¹ç›®</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="4225" class="lo lp it mp b gy my mz l na nb">// app.module.ts</span><span id="bb17" class="lo lp it mp b gy nc mz l na nb">import { AngularFireAuthModule, USE_EMULATOR as USE_AUTH_EMULATOR } from '@angular/fire/auth'</span><span id="a4ff" class="lo lp it mp b gy nc mz l na nb">import { AngularFirestoreModule, USE_EMULATOR as USE_FIRESTORE_EMULATOR } from '@angular/fire/firestore'</span><span id="4720" class="lo lp it mp b gy nc mz l na nb">import { AngularFireFunctionsModule, USE_EMULATOR as USE_FUNCTIONS_EMULATOR } from '@angular/fire/functions'</span><span id="86b3" class="lo lp it mp b gy nc mz l na nb">....</span><span id="f1f2" class="lo lp it mp b gy nc mz l na nb">providers: [<br/>    AuthService,<br/>    {<br/>      provide: USE_AUTH_EMULATOR,<br/>      useValue: environment.useEmulators ? ['localhost', 9099] : undefined,<br/>    },<br/>    {<br/>      provide: USE_FIRESTORE_EMULATOR,<br/>      useValue: environment.useEmulators ? ['localhost', 8080] : undefined,<br/>    },<br/>    {<br/>      provide: USE_FUNCTIONS_EMULATOR,<br/>      useValue: environment.useEmulators ? ['localhost', 5001] : undefined,<br/>    },<br/>  ],</span></pre><p id="3131" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç¡®ä¿æ£€æŸ¥<code class="fe mm mn mo mp b">firebase.json</code>æ–‡ä»¶ä¸­çš„<a class="ae li" href="https://firebase.google.com/docs/emulator-suite" rel="noopener ugc nofollow" target="_blank">ä»¿çœŸå™¨</a>ç«¯å£ã€‚</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="21b3" class="lo lp it mp b gy my mz l na nb">// firebase.json</span><span id="b7d6" class="lo lp it mp b gy nc mz l na nb">"emulators": {<br/>    "firestore": {<br/>      "port": "8080"<br/>    },<br/>    "ui": {<br/>      "enabled": true,<br/>      "host": "localhost",<br/>      "port": 4001<br/>    },<br/>    "functions": {<br/>      "port": "5001"<br/>    },<br/>    "database": {<br/>      "port": "9000"<br/>    },<br/>    "pubsub": {<br/>      "port": "8085"<br/>    },<br/>    "auth": {<br/>      "port": 9099<br/>    },<br/>    "hosting": {<br/>      "port": 5000<br/>    }<br/>  }</span></pre><p id="8a7f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç„¶åï¼Œå½“æ‚¨ä¸ºfirebaseå‡½æ•°è¿è¡Œæ¨¡æ‹Ÿå™¨æ—¶ï¼ŒAngularé¡¹ç›®å°†ä½¿ç”¨æœ¬åœ°æ¨¡æ‹Ÿå™¨æ¥å¤„ç†èº«ä»½éªŒè¯ã€æ•°æ®åº“ã€å‡½æ•°â€¦</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="6c40" class="lo lp it mp b gy my mz l na nb">firebase emulators:start</span></pre><h2 id="d63c" class="lo lp it bd lq lr ls dn lt lu lv dp lw km lx ly lz kq ma mb mc ku md me mf mg bi translated">æ¡å¸¦è®¾ç½®</h2><p id="e448" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">é¦–å…ˆï¼Œæ‚¨éœ€è¦å®‰è£…<a class="ae li" href="https://stripe.com/docs/stripe-cli" rel="noopener ugc nofollow" target="_blank"> Stripe CLI </a>å¹¶ä½¿ç”¨<code class="fe mm mn mo mp b">stripe login</code>è¿›è¡Œè®¤è¯ã€‚</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nd"><img src="../Images/4b5542a4ac5163bb3da6017bf3a67af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RLl6RRnirLnnM_oSKRuZVQ.png"/></div></div></figure><p id="6ba9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å°†äº‹ä»¶è½¬å‘åˆ°æœ¬åœ°æœåŠ¡å™¨</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="f8cb" class="lo lp it mp b gy my mz l na nb">dalenguyen$ stripe listen --forward-to localhost:5000/api-stripe</span><span id="df80" class="lo lp it mp b gy nc mz l na nb">A newer version of the Stripe CLI is available, please update to: v1.7.8<br/>&gt; Ready! Your webhook signing secret is whsec_gD8ixxxnxxxg1tv (^C to quit)</span></pre><p id="02eb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç„¶åï¼Œæ‚¨å¯ä»¥é€šè¿‡æœ¬åœ°è§¦å‘å™¨è§¦å‘äº‹ä»¶</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="b69d" class="lo lp it mp b gy my mz l na nb">dalenguyen$ stripe trigger payment_intent.created</span><span id="fed6" class="lo lp it mp b gy nc mz l na nb">A newer version of the Stripe CLI is available, please update to: v1.7.8<br/>Setting up fixture for: payment_intent<br/>Trigger succeeded! Check dashboard for event details.</span><span id="06b2" class="lo lp it mp b gy nc mz l na nb">----&gt; on another terminal</span><span id="4a08" class="lo lp it mp b gy nc mz l na nb">2021-11-21 10:34:54   --&gt; payment_intent.created [evt_3JyI49ESKh0WH3011opuksXb]<br/>2021-11-21 10:34:54  &lt;--  [200] POST <a class="ae li" href="http://localhost:5000/api-stripe" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/api-stripe</a> [evt_3JyI49ESKh0WH3011opuksXb]</span><span id="4957" class="lo lp it mp b gy nc mz l na nb">----&gt; on firebase functions log</span><span id="6ab4" class="lo lp it mp b gy nc mz l na nb">i  functions: Beginning execution of "us-central1-api-stripe"<br/>&gt;  stripeObjectid pi_3JyI49ESKh0WH3011Hl3lDrr<br/>i  functions: Finished "us-central1-api-stripe" in ~1s</span></pre><p id="8a46" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨ï¼Œä¸€åˆ‡å‡†å¤‡å‘å±•ã€‚ä¸€åˆ‡éƒ½å‘ç”Ÿåœ¨ä½ çš„æœºå™¨ä¸Šã€‚</p><h2 id="a234" class="lo lp it bd lq lr ls dn lt lu lv dp lw km lx ly lz kq ma mb mc ku md me mf mg bi translated">æµ‹è¯•æ¡çº¹ç½‘é’©</h2><p id="e7a1" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">å½“æ‚¨å°†äº‹ä»¶è½¬å‘åˆ°æœ¬åœ°è®¡ç®—æœºæ—¶ã€‚æ‰€æœ‰çš„webhooksäº‹ä»¶éƒ½å°†è¢«è½¬å‘ç»™Firebaseæ¨¡æ‹Ÿå™¨å‡½æ•°ã€‚</p><p id="8cd2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä¾‹å¦‚ï¼Œæ‚¨åˆ›å»ºäº†ä¸€ä¸ªæ¡å¸¦ç»“å¸ä¼šè¯ï¼Œä»–ä»¬ä¸ºè¯¥ä¼šè¯ä»˜è´¹ã€‚ç„¶åï¼Œå°†ä»æ¡å¸¦ä»ªè¡¨æ¿è§¦å‘webhooksã€‚ç„¶ååœ¨æ‚¨çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œè¯¥äº‹ä»¶å°†åœ¨æ‚¨çš„Stripeç»ˆç«¯å’Œfirebaseæ¨¡æ‹Ÿå™¨å‡½æ•°ä¸Šè¢«è§¦å‘ã€‚</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="280b" class="lo lp it mp b gy my mz l na nb">---&gt; stripe terminal</span><span id="a076" class="lo lp it mp b gy nc mz l na nb">2021-11-21 11:25:52   --&gt; customer.created [evt_1JyIrUESKh0WH301SrYeIZkg]<br/>2021-11-21 11:25:52   --&gt; payment_intent.succeeded [evt_3JyIpzESKh0WH3011OWfb84B]<br/>2021-11-21 11:25:53   --&gt; charge.succeeded [evt_3JyIpzESKh0WH30115gKa8GM]<br/>2021-11-21 11:25:53   --&gt; checkout.session.completed [evt_1JyIrVESKh0WH301osTVBhQI]<br/>2021-11-21 11:25:54  &lt;--  [200] POST <a class="ae li" href="http://localhost:5000/api-stripe" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/api-stripe</a> [evt_1JyIrUESKh0WH301SrYeIZkg]<br/>2021-11-21 11:25:54  &lt;--  [200] POST <a class="ae li" href="http://localhost:5000/api-stripe" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/api-stripe</a> [evt_3JyIpzESKh0WH30115gKa8GM]<br/>2021-11-21 11:25:54  &lt;--  [200] POST <a class="ae li" href="http://localhost:5000/api-stripe" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/api-stripe</a> [evt_3JyIpzESKh0WH3011OWfb84B]<br/>2021-11-21 11:25:54  &lt;--  [200] POST <a class="ae li" href="http://localhost:5000/api-stripe" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/api-stripe</a> [evt_1JyIrVESKh0WH301osTVBhQI]</span></pre><p id="1a60" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae li" href="https://twitter.com/dale_nguyen" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">åœ¨Twitterä¸Šå…³æ³¨æˆ‘</strong> </a>è·å–Angularã€JavaScript &amp; WebDevelopmentçš„æœ€æ–°å†…å®¹ğŸ‘</p></div></div>    
</body>
</html>