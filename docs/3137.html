<html>
<head>
<title>How to connect to Azure Event Hubs for Kafka using Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨Goè¿æ¥åˆ°Kafkaçš„Azureäº‹ä»¶ä¸­å¿ƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-to-connect-to-azure-event-hubs-for-kafka-using-go-3957f8d98d6e?source=collection_archive---------3-----------------------#2019-10-10">https://itnext.io/how-to-connect-to-azure-event-hubs-for-kafka-using-go-3957f8d98d6e?source=collection_archive---------3-----------------------#2019-10-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="de15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™ä¸ªåšå®¢å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨<a class="ae kl" href="https://github.com/Shopify/sarama" rel="noopener ugc nofollow" target="_blank"> Sarama Kafkaå®¢æˆ·ç«¯</a>åº“ä¸<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">äº‹ä»¶ä¸­å¿ƒKafka </a>é›†ç¾¤è¿›è¡Œäº¤äº’ã€‚<code class="fe km kn ko kp b"><a class="ae kl" href="https://godoc.org/github.com/Shopify/sarama" rel="noopener ugc nofollow" target="_blank">sarama</a></code> <a class="ae kl" href="https://godoc.org/github.com/Shopify/sarama" rel="noopener ugc nofollow" target="_blank">åŒ…</a>æä¾›æ”¯æŒKafka v 0.8åŠä»¥ä¸Šç‰ˆæœ¬çš„çº¯Goå®¢æˆ·ç«¯ã€‚</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/4f36de83364040de2408fec2ee20e880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qRB923ojGtgXcditCBWvJQ.jpeg"/></div></div></figure><p id="0b8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Event Hubs </a>æ˜¯ä¸€ä¸ªæµåª’ä½“å¹³å°å’Œäº‹ä»¶æ‘„å–æœåŠ¡ï¼Œæ¯ç§’èƒ½å¤Ÿæ¥æ”¶å’Œå¤„ç†æ•°ç™¾ä¸‡ä¸ªäº‹ä»¶ã€‚å®ƒè¿˜æä¾›äº†ä¸€ä¸ªKafkaç«¯ç‚¹ï¼Œæ‚¨ç°æœ‰çš„åŸºäºKafkaçš„åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨å®ƒä½œä¸ºè¿è¡Œæ‚¨è‡ªå·±çš„Kafkaé›†ç¾¤çš„æ›¿ä»£æ–¹æ³•ã€‚ç”±äºAzure Event Hubså…¬å¼€äº†ä¸€ä¸ªä¸Kafka 1.0ç‰ˆäºŒè¿›åˆ¶å…¼å®¹çš„åè®®ï¼Œæ‰€ä»¥æ‚¨å¯ä»¥ä»ç°æœ‰çš„åº”ç”¨ç¨‹åºä¸­å¼€å§‹ä½¿ç”¨Kafkaç«¯ç‚¹ï¼Œè€Œæ— éœ€æ›´æ”¹ä»£ç ï¼Œåªéœ€è¿›è¡Œæœ€å°çš„é…ç½®æ›´æ”¹ã€‚è¿™ä¹Ÿæ”¯æŒåƒ<a class="ae kl" href="https://kafka.apache.org/documentation/#connect" rel="noopener ugc nofollow" target="_blank"> Kafka Connect </a>(ç›®å‰åœ¨é¢„è§ˆç‰ˆä¸­)ã€<a class="ae kl" href="https://kafka.apache.org/documentation/#basic_ops_mirror_maker" rel="noopener ugc nofollow" target="_blank"> MirrorMaker </a>ç­‰æ¡†æ¶ã€‚</p><p id="8d37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å°†äº†è§£åˆ°:</p><ul class=""><li id="95c1" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">ä»£ç :å¦‚ä½•é…ç½®å’Œä½¿ç”¨Sarama Goå®¢æˆ·ç«¯ä¸äº‹ä»¶ä¸­å¿ƒKafka endpointå¯¹è¯ï¼Œå¹¶æ„å»ºç”Ÿäº§è€…ã€æ¶ˆè´¹è€…åº”ç”¨ç¨‹åº</li><li id="e899" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">è®¾ç½®:ä½¿ç”¨Azure CLIå¿«é€Ÿå¼•å¯¼Kafkaå®ä¾‹çš„äº‹ä»¶ä¸­å¿ƒ</li><li id="5552" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">æµ‹è¯•:è¿è¡Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åº”ç”¨ç¨‹åºï¼Œå°è¯•ç«¯åˆ°ç«¯åœºæ™¯</li></ul><blockquote class="lq lr ls"><p id="0146" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">ä¸€å¦‚æ—¢å¾€ï¼Œä»£ç åœ¨</em> <a class="ae kl" href="https://github.com/abhirockzz/eventhubs-kafka-go-sarama" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> GitHub </em> </a>ä¸Šå¯ç”¨</p></blockquote><h1 id="344d" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">å…ˆå†³æ¡ä»¶</h1><p id="ff29" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">å¦‚æœä½ æ²¡æœ‰Azureè®¢é˜…ï¼Œåªéœ€åˆ›å»ºä¸€ä¸ª<a class="ae kl" href="https://azure.microsoft.com/free/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å…è´¹å¸æˆ·</a>å°±å¯ä»¥å¼€å§‹äº†ï¼ä½ è¿˜éœ€è¦T21çš„Azureå‘½ä»¤è¡Œç•Œé¢ã€‚å½“ç„¶ï¼Œä½ è¿˜éœ€è¦å®‰è£…<a class="ae kl" href="https://golang.org/doc/install" rel="noopener ugc nofollow" target="_blank"> Goå’Œ</a>ã€‚</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="7d7e" class="lx ly iq bd lz ma nh mc md me ni mg mh mi nj mk ml mm nk mo mp mq nl ms mt mu bi translated">ä»£ç èµ°æŸ¥</h1><p id="6ed3" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">è¯¥åº”ç”¨ç¨‹åºéå¸¸ç®€å•ï¼Œç”±ä½¿ç”¨Sarama Goå®¢æˆ·ç«¯æ„å»ºçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç»„æˆã€‚è®©æˆ‘ä»¬å¿«é€Ÿæµè§ˆä¸€ä¸‹ä»£ç </p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f0217df3d9384d6ea1234995019a57e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/0*IZU2OGmoSeE-Gb3a.gif"/></div></figure><h2 id="bd88" class="nn ly iq bd lz no np dn md nq nr dp mh jy ns nt ml kc nu nv mp kg nw nx mt ny bi translated">ç”¨äºè¿æ¥åˆ°Kafkaäº‹ä»¶ä¸­å¿ƒçš„é…ç½®</h2><p id="dea4" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">ä¸ºäº†åˆ›å»ºç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…å®ä¾‹ï¼Œæ‚¨éœ€è¦ä¼ é€’ä¸€ä¸ª<code class="fe km kn ko kp b">sarama.Config</code>å¯¹è±¡ã€‚</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="e014" class="nn ly iq kp b gy od oe l of og">func getConfig() *sarama.Config {<br/>    config := sarama.NewConfig()<br/>    config.Net.DialTimeout = 10 * time.Second<br/>    config.Net.SASL.Enable = true<br/>    config.Net.SASL.User = "$ConnectionString"<br/>    config.Net.SASL.Password = getEnv(eventHubsConnStringEnvVar)<br/>    config.Net.SASL.Mechanism = "PLAIN"</span><span id="5ec2" class="nn ly iq kp b gy oh oe l of og">    config.Net.TLS.Enable = true<br/>    config.Net.TLS.Config = &amp;tls.Config{<br/>        InsecureSkipVerify: true,<br/>        ClientAuth:         0,<br/>    }<br/>    config.Version = sarama.V1_0_0_0</span><span id="0f15" class="nn ly iq kp b gy oh oe l of og">    return config<br/>}</span></pre><p id="1510" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">èº«ä»½éªŒè¯æ˜¯è¿™é‡Œçš„å…³é”®â€”â€”Azure Event Hubs(åŒ…æ‹¬Kafkaç‰¹æ€§)è¦æ±‚æ‰€æœ‰é€šä¿¡éƒ½ä½¿ç”¨SSLæˆ–TLSï¼Œå¹¶ä½¿ç”¨å…±äº«è®¿é—®ç­¾å(SAS)è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p><blockquote class="lq lr ls"><p id="5eb6" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">å…³äºå®‰å…¨æ¨¡å‹</em>çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a class="ae kl" href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-authentication-and-security-model-overview?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">æ–‡æ¡£</em> </a> <em class="iq"/></p></blockquote><ul class=""><li id="a1ed" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">SASLé€šè¿‡<code class="fe km kn ko kp b">config.Net.SASL.Enable = true</code>å¯ç”¨ï¼Œå¹¶ä½¿ç”¨<code class="fe km kn ko kp b">PLAIN</code>æœºåˆ¶(é…ç½®ã€‚Net.SASL.Mechanism)</li><li id="da1f" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">ä½¿ç”¨<code class="fe km kn ko kp b">config.Net.SASL.User</code>å®šä¹‰SASLç”¨æˆ·ï¼Œå¹¶è®¾ç½®ä¸º<code class="fe km kn ko kp b">$ConnectionString</code>(æ˜¯çš„ï¼Œè¿™æ˜¯é™æ€çš„)</li><li id="0f9d" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">SASLå¯†ç (<code class="fe km kn ko kp b">config.Net.SASL.Password</code>)è¢«è®¾ç½®ä¸ºäº‹ä»¶é›†çº¿å™¨è¿æ¥å­—ç¬¦ä¸²(è¯¦æƒ…è§ä¸‹ä¸€èŠ‚)</li><li id="31bb" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">æœ€åï¼ŒTLSè¢«å¯ç”¨(<code class="fe km kn ko kp b">config.Net.TLS.Enable</code>)å¹¶ä¸”<code class="fe km kn ko kp b">config.Net.TLS.Config</code>è¢«è®¾ç½®ä¸º<a class="ae kl" href="https://godoc.org/crypto/tls#Config" rel="noopener ugc nofollow" target="_blank"> TLSé…ç½®</a>çš„å®ä¾‹</li></ul><blockquote class="lq lr ls"><p id="9b24" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">é™¤äº†</em> <code class="fe km kn ko kp b"><em class="iq">config.Producer.Return.Successes = true</em></code> <em class="iq">æ˜¯ç”Ÿäº§è€…</em>çš„åŒæ­¥ç‰ˆæœ¬æ‰€å¿…éœ€çš„ä¹‹å¤–ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…(å¯¹äºæœ¬ä¾‹)çš„é…ç½®æ˜¯ç›¸åŒçš„</p></blockquote><p id="e61f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">éœ€è¦æ³¨æ„çš„äº‹é¡¹:</p><ul class=""><li id="655a" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">å¦‚æœæ²¡æœ‰æ­£ç¡®é…ç½®TLSï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°è¿™ä¸ªé”™è¯¯â€” <code class="fe km kn ko kp b">Failed to start Sarama producer: kafka: client has run out of available brokers to talk to (Is your cluster reachable?)</code></li><li id="27bb" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œ<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview?WT.mc_id=medium-blog-abhishgu#features-that-are-not-yet-supported" rel="noopener ugc nofollow" target="_blank"> Event Hubsä¸æ”¯æŒæ¶ˆæ¯å‹ç¼©</a>ï¼Œå› æ­¤è¯·ç¡®ä¿ä½¿ç”¨é»˜è®¤å€¼<code class="fe km kn ko kp b">config.Producer.Compression</code>(å³<code class="fe km kn ko kp b">none</code>)æˆ–ä½¿ç”¨<code class="fe km kn ko kp b">config.Producer.Compression = sarama.CompressionNone</code>æ˜¾å¼è®¾ç½®å®ƒã€‚å¦åˆ™ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°æ­¤é”™è¯¯<code class="fe km kn ko kp b">Failed to send msg: kafka server: The requested operation is not supported by the message format version.</code></li><li id="3247" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">ç¡®ä¿å°†Kafka brokerç‰ˆæœ¬è®¾ç½®ä¸º<code class="fe km kn ko kp b">config.Version = sarama.V1_0_0_0</code>æˆ–æ›´é«˜ç‰ˆæœ¬</li></ul><h2 id="2f8f" class="nn ly iq bd lz no np dn md nq nr dp mh jy ns nt ml kc nu nv mp kg nw nx mt ny bi translated">æ´»åŠ¨ä¸­å¿ƒå¡å¤«å¡åˆ¶ä½œäºº</h2><p id="f4e7" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">åˆ›å»ºä¸€ä¸ªç”Ÿäº§è€…å®ä¾‹ï¼Œä¼ å…¥äº‹ä»¶ä¸­å¿ƒä»£ç†å’Œæ‰€éœ€çš„é…ç½®(<code class="fe km kn ko kp b">sarama.Config</code>)</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="91c2" class="nn ly iq kp b gy od oe l of og">producer, err := sarama.NewSyncProducer(brokerList, getConfig())<br/>if err != nil {<br/>	fmt.Println("Failed to start Sarama producer:", err)<br/>	os.Exit(1)<br/>}</span></pre><p id="0c4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯åŠ¨ç”¨äºç”Ÿæˆæ¶ˆæ¯çš„goroutineã€‚è¿™å‘ç”Ÿåœ¨ä¸€ä¸ªæ— é™forå¾ªç¯ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code class="fe km kn ko kp b">ctrl+c</code>åœæ­¢</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="ca7d" class="nn ly iq kp b gy od oe l of og">go func() {<br/>	for {<br/>		if producerOpen {<br/>			ts := time.Now().String()<br/>			msg := &amp;sarama.ProducerMessage{Topic: eventHubsTopic, Key: sarama.StringEncoder("key-" + ts), Value: sarama.StringEncoder("value-" + ts)}<br/>			p, o, err := producer.SendMessage(msg)<br/>			if err != nil {<br/>				fmt.Println("Failed to send msg:", err)<br/>				continue<br/>			}<br/>		}<br/>		...<br/>	}<br/>}()</span></pre><p id="cfd6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†å¹²å‡€åœ°é€€å‡ºï¼Œç›‘å¬ä¸­æ–­ä¿¡å·(<code class="fe km kn ko kp b">ctrl+c</code>)å¹¶å…³é—­å‘ç”Ÿå™¨</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="7621" class="nn ly iq kp b gy od oe l of og">close := make(chan os.Signal)<br/>signal.Notify(close, syscall.SIGTERM, syscall.SIGINT)<br/>&lt;-close<br/>err = producer.Close()</span></pre><h2 id="3124" class="nn ly iq bd lz no np dn md nq nr dp mh jy ns nt ml kc nu nv mp kg nw nx mt ny bi translated">æ´»åŠ¨ä¸­å¿ƒKafkaæ¶ˆè´¹è€…</h2><p id="f615" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">åˆ›å»ºä¸€ä¸ªä¼ å…¥äº‹ä»¶ä¸­å¿ƒä»£ç†çš„æ¶ˆè´¹è€…ç»„å®ä¾‹</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="220f" class="nn ly iq kp b gy od oe l of og">consumer, err := sarama.NewConsumerGroup(brokerList, consumerGroupID, getConfig())</span></pre><p id="a889" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¼€å§‹åœ¨å•ç‹¬çš„goroutineæ¶ˆè´¹</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="46f6" class="nn ly iq kp b gy od oe l of og">go func() {<br/>	for {<br/>		err = consumer.Consume(ctx, []string{getEnv(eventHubsTopicEnvVar)}, messageHandler{})<br/>		....<br/>		if ctx.Err() != nil {<br/>			return<br/>		}<br/>	}<br/>}()</span></pre><p id="4811" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe km kn ko kp b">messageHandler</code>å®ç°<code class="fe km kn ko kp b"><a class="ae kl" href="https://godoc.org/github.com/Shopify/sarama#ConsumerGroupHandler" rel="noopener ugc nofollow" target="_blank">sarama.ConsumerGroupHandler</a></code>(åŠŸèƒ½- <code class="fe km kn ko kp b">Setup</code>ã€<code class="fe km kn ko kp b">Cleanup</code>ã€<code class="fe km kn ko kp b">ConsumeClaim</code>)ã€‚<code class="fe km kn ko kp b">ConsumeClaim</code>åŠŸèƒ½æ˜¯é‡è¦çš„ä¸€é¡¹ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®šå¦‚ä½•å¤„ç†æ¯æ¡æ¶ˆæ¯â€”â€”åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒè¢«è®°å½•åˆ°æ ‡å‡†è¾“å‡ºï¼Œå¹¶è¢«æ ‡è®°ä¸ºå·²ä½¿ç”¨</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="d63e" class="nn ly iq kp b gy od oe l of og">func (h messageHandler) ConsumeClaim(s sarama.ConsumerGroupSession, c sarama.ConsumerGroupClaim) error {<br/>    for msg := range c.Messages() {<br/>        fmt.Printf("Message topic:%q partition:%d offset:%d\n", msg.Topic, msg.Partition, msg.Offset)<br/>        fmt.Println("Message content", string(msg.Value))<br/>        s.MarkMessage(msg, "")<br/>    }<br/>    return nil<br/>}</span></pre><p id="3d27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯é€šè¿‡é€€å‡ºç¨‹åº(æŒ‰ä¸‹<code class="fe km kn ko kp b">ctrl+c</code>)åœæ­¢ç”¨æˆ·ã€‚å¯¹äºå¹²å‡€é€€å‡ºï¼Œä½¿ç”¨è€…å®ä¾‹è¢«å…³é—­</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="d5a2" class="nn ly iq kp b gy od oe l of og">close := make(chan os.Signal)<br/>signal.Notify(close, syscall.SIGTERM, syscall.SIGINT)<br/>&lt;-close<br/>cancel()<br/>if err := consumer.Close(); err != nil {<br/>    ......<br/>}</span></pre><p id="9e7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¥½äº†ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒé›†ç¾¤ï¼Œå¹¶å°è¯•ç«¯åˆ°ç«¯åœºæ™¯ã€‚</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="e5fb" class="lx ly iq bd lz ma nh mc md me ni mg mh mi nj mk ml mm nk mo mp mq nl ms mt mu bi translated">åˆ›å»ºæ‚¨çš„Kafkaæ´»åŠ¨ä¸­å¿ƒé›†ç¾¤</h1><p id="4a80" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">å¦‚æœæ‚¨å·²ç»æœ‰ä¸€ä¸ªé›†ç¾¤ï¼Œè¯·è·³è¿‡è¿™ä¸€æ­¥ï¼Œè½¬åˆ°<em class="lt">â€œäº‹ä»¶ä¸­å¿ƒè¿æ¥è¯¦ç»†ä¿¡æ¯â€</em>å°èŠ‚</p><p id="12da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®¾ç½®ç¯å¢ƒå˜é‡:</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="3452" class="nn ly iq kp b gy od oe l of og">export AZURE_SUBSCRIPTION=[to be filled]<br/>export AZURE_RESOURCE_GROUP=[to be filled]<br/>export AZURE_LOCATION=[to be filled]<br/>export EVENT_HUBS_NAMESPACE=[name of the event hub namespace - to be filled]<br/>export EVENT_HUB_NAME=[name of the event hub (topic) - to be filled]</span></pre><p id="4af6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœè¿˜æ²¡æœ‰èµ„æºç»„ï¼Œè¯·åˆ›å»ºä¸€ä¸ª</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="52e2" class="nn ly iq kp b gy od oe l of og">az account set --subscription $AZURE_SUBSCRIPTION<br/>az group create --name $AZURE_RESOURCE_GROUP --location $AZURE_LOCATION</span></pre><p id="c28d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›å»ºä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒåç§°ç©ºé—´(ç±»ä¼¼äºKafkaé›†ç¾¤)</p><blockquote class="lq lr ls"><p id="e4c3" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">å…³äºäº‹ä»¶ä¸­æ¢å‘½åç©ºé—´çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§</em> <a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-features?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">äº‹ä»¶ä¸­æ¢æ–‡æ¡£</em> </a></p></blockquote><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="c863" class="nn ly iq kp b gy od oe l of og">az eventhubs namespace create --name $EVENT_HUBS_NAMESPACE --resource-group $AZURE_RESOURCE_GROUP --location $AZURE_LOCATION --enable-kafka true --enable-auto-inflate false</span></pre><blockquote class="lq lr ls"><p id="84fb" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">æ–‡æ¡£ä¸º</em> <code class="fe km kn ko kp b"><a class="ae kl" href="https://docs.microsoft.com/cli/azure/eventhubs/namespace?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-eventhubs-namespace-create" rel="noopener ugc nofollow" target="_blank"><em class="iq">az eventhubs namespace create</em></a></code></p></blockquote><p id="5460" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶ååˆ›å»ºä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒ(ä¸Kafkaä¸»é¢˜ç›¸åŒ)</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="e9fd" class="nn ly iq kp b gy od oe l of og">az eventhubs eventhub create --name $EVENT_HUB_NAME --resource-group $AZURE_RESOURCE_GROUP --namespace-name $EVENT_HUBS_NAMESPACE --partition-count 10</span></pre><blockquote class="lq lr ls"><p id="cfcd" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">æ–‡æ¡£</em>æ–‡æ¡£<code class="fe km kn ko kp b"><a class="ae kl" href="https://docs.microsoft.com/cli/azure/eventhubs/eventhub?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-eventhubs-eventhub-create" rel="noopener ugc nofollow" target="_blank"><em class="iq">az eventhub create</em></a></code></p></blockquote><h2 id="cc11" class="nn ly iq bd lz no np dn md nq nr dp mh jy ns nt ml kc nu nv mp kg nw nx mt ny bi translated">æ´»åŠ¨ä¸­å¿ƒè¿æ¥è¯¦æƒ…</h2><p id="9962" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">è·å–é›†ç¾¤çš„è¿æ¥å­—ç¬¦ä¸²å’Œå‡­æ®</p><blockquote class="lq lr ls"><p id="65f9" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»</em> <a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/authorize-access-shared-access-signature?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">äº‹ä»¶ä¸­å¿ƒå¦‚ä½•ä½¿ç”¨å…±äº«è®¿é—®ç­¾åè¿›è¡Œæˆæƒ</em> </a></p></blockquote><p id="c125" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é¦–å…ˆè·å–äº‹ä»¶ä¸­å¿ƒè§„åˆ™/ç­–ç•¥åç§°</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="479e" class="nn ly iq kp b gy od oe l of og">az eventhubs namespace authorization-rule list --resource-group $AZURE_RESOURCE_GROUP --namespace-name $EVENT_HUBS_NAMESPACE</span></pre><blockquote class="lq lr ls"><p id="a06c" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">æ–‡æ¡£ä¸º</em> <code class="fe km kn ko kp b"><a class="ae kl" href="https://docs.microsoft.com/cli/azure/eventhubs/namespace/authorization-rule?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-eventhubs-namespace-authorization-rule-list" rel="noopener ugc nofollow" target="_blank"><em class="iq">az eventhubs namespace authorization-rule list</em></a></code></p></blockquote><p id="df7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å°†å¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„JSONè¾“å‡º:</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="c9c1" class="nn ly iq kp b gy od oe l of og">[<br/>    {<br/>        "id": "/subscriptions/qwerty42-ae29-4924-b6a7-dda0ea91d347/resourceGroups/foobar-resource/providers/Microsoft.EventHub/namespaces/foobar-event-hub-ns/AuthorizationRules/RootManageSharedAccessKey",<br/>        "location": "Southeast Asia",<br/><strong class="kp ir">        "name": "RootManageSharedAccessKey",<br/></strong>        "resourceGroup": "foobar-resource",<br/>        "rights": [<br/>        "Listen",<br/>        "Manage",<br/>        "Send"<br/>        ],<br/>        "type": "Microsoft.EventHub/Namespaces/AuthorizationRules"<br/>    }<br/>]</span></pre><p id="1495" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆæƒè§„åˆ™åç§°æ˜¯<code class="fe km kn ko kp b">name</code>å±æ€§çš„å€¼(æ²¡æœ‰å¼•å·)ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯<code class="fe km kn ko kp b">RootManageSharedAccessKey</code></p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="8f56" class="nn ly iq kp b gy od oe l of og">export EVENT_HUB_AUTH_RULE_NAME=RootManageSharedAccessKey</span></pre><p id="1290" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åï¼Œåˆ©ç”¨è§„åˆ™åæå–è¿æ¥å­—ç¬¦ä¸²</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="3fe4" class="nn ly iq kp b gy od oe l of og">az eventhubs namespace authorization-rule keys list --resource-group $AZURE_RESOURCE_GROUP --namespace-name $EVENT_HUBS_NAMESPACE --name $EVENT_HUB_AUTH_RULE_NAME</span></pre><blockquote class="lq lr ls"><p id="d225" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">æ–‡æ¡£</em>T3ã€‘</p></blockquote><p id="1d1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å°†å¾—åˆ°å¦‚ä¸‹JSONå“åº”:</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="2a16" class="nn ly iq kp b gy od oe l of og">{<br/>    "aliasPrimaryConnectionString": null,<br/>    "aliasSecondaryConnectionString": null,<br/>    "keyName": "RootManageSharedAccessKey",<br/><strong class="kp ir">    "primaryConnectionString": "Endpoint=sb://foobar-eventhub-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=Nbaz0D42MT7qwerty6D/W51ao42r6EJuxR/zEqwerty=",<br/></strong>    "primaryKey": "qwertyEiQHIirSNDPzqcqvZEUs6VAW+JIK3L46tqwerty",<br/>    "secondaryConnectionString": "Endpoint=sb://abhishgu-temp-event-hub-ns.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=qwertyPF2/YRGzxKmb06Z8NBFLCjnX38O7ch6aiYkN0=",<br/>    "secondaryKey": "qwertyPF2/YRGzxKmb06Z8NBqwertyX38O7ch6aiYk42="<br/>}</span></pre><p id="d9da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸»è¿æ¥å­—ç¬¦ä¸²æ˜¯<code class="fe km kn ko kp b">primaryConnectionString</code>å±æ€§çš„å€¼(æ²¡æœ‰å¼•å·)ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯<code class="fe km kn ko kp b">"Endpoint=sb://foobar-eventhub-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=Nbaz0D42MT7qwerty6D/W51ao42r6EJuxR/zEqwerty="</code>ã€‚è®°ä¸‹è¿æ¥å­—ç¬¦ä¸²ï¼Œå› ä¸ºæ‚¨å°†åœ¨ä¸‹ä¸€æ­¥ä¸­ä½¿ç”¨å®ƒã€‚</p><blockquote class="lq lr ls"><p id="4a4a" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/authorize-access-shared-access-signature?&amp;WT.mc_id=medium-blog-abhishgu#best-practices-when-using-sas" rel="noopener ugc nofollow" target="_blank"> <em class="iq">æ­¤ä¿¡æ¯è¾ƒä¸ºæ•æ„Ÿï¼Œè¯·è°¨æ…</em> </a></p></blockquote></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="7148" class="lx ly iq bd lz ma nh mc md me ni mg mh mi nj mk ml mm nk mo mp mq nl ms mt mu bi translated">æµ‹è¯•ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</h1><p id="cf8d" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">å…‹éš†GitHubå­˜å‚¨åº“å¹¶å¯¼èˆªåˆ°æ­£ç¡®çš„ç›®å½•:</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="1449" class="nn ly iq kp b gy od oe l of og">git clone https://github.com/abhirockzz/eventhubs-kafka-go-sarama<br/>cd eventhubs-kafka-go-sarama</span></pre><p id="2319" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è·å–Sarama Kafkaå®¢æˆ·ç«¯åº“</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="f3e4" class="nn ly iq kp b gy od oe l of og">go get github.com/Shopify/sarama</span></pre><h2 id="619d" class="nn ly iq bd lz no np dn md nq nr dp mh jy ns nt ml kc nu nv mp kg nw nx mt ny bi translated">ç”Ÿäº§è€…</h2><p id="7da0" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">è®¾ç½®ç¯å¢ƒå˜é‡</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="2f2c" class="nn ly iq kp b gy od oe l of og">export EVENTHUBS_CONNECTION_STRING=[value of primary connection string obtained in the previous step]<br/>export EVENT_HUBS_NAMESPACE=[event hub namespace]<br/>export EVENTHUBS_BROKER=$EVENT_HUBS_NAMESPACE.servicebus.windows.net:9093<br/>export EVENTHUBS_TOPIC=[name of the event hub (topic)]</span></pre><blockquote class="lq lr ls"><p id="0d84" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">å¯¹äº</em> <code class="fe km kn ko kp b"><em class="iq">EVENTHUBS_CONNECTION_STRING</em></code> <em class="iq">å˜é‡ï¼Œè¯·ç¡®ä¿</em>åœ¨ä½¿ç”¨Azure CLIæ¥æ”¶çš„å€¼ä¸­åŒ…å«<em class="iq">åŒå¼•å·ï¼Œä¾‹å¦‚</em> <code class="fe km kn ko kp b"><em class="iq">export EVENTHUBS_CONNECTION_STRING="Endpoint=sb://foobar-eventhub-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=Nbaz0D42MT7qwerty6D/W51ao42r6EJuxR/zEqwerty="</em></code></p></blockquote><p id="5405" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯åŠ¨ç”Ÿæˆå™¨</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="79af" class="nn ly iq kp b gy od oe l of og">go run producer/sarama-producer.go</span></pre><p id="c678" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦å¯åŠ¨ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ—¥å¿—</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="791f" class="nn ly iq kp b gy od oe l of og">Event Hubs broker [foo-bar.servicebus.windows.net:9093]<br/>Event Hubs topic testhub<br/>Waiting for program to exit...<br/>sent message to partition 0 offset 1<br/>sent message to partition 7 offset 1<br/>sent message to partition 6 offset 1<br/>sent message to partition 8 offset 1<br/>sent message to partition 2 offset 1</span></pre><blockquote class="lq lr ls"><p id="7c05" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">è¦åœæ­¢ï¼Œåªéœ€æŒ‰ä¸‹ç»ˆç«¯</em>ä¸Šçš„ <code class="fe km kn ko kp b"><em class="iq">ctrl+c</em></code> <em class="iq"/></p></blockquote><h2 id="d855" class="nn ly iq bd lz no np dn md nq nr dp mh jy ns nt ml kc nu nv mp kg nw nx mt ny bi translated">æ¶ˆè´¹è€…</h2><p id="ef59" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">åœ¨ä¸åŒçš„ç»ˆç«¯ä¸­å¯åŠ¨æ¶ˆè´¹è€…è¿›ç¨‹ã€‚è®¾ç½®ç¯å¢ƒå˜é‡</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="8621" class="nn ly iq kp b gy od oe l of og">export EVENTHUBS_CONNECTION_STRING=[value of primary connection string obtained in the previous step]<br/>export EVENT_HUBS_NAMESPACE=[event hub namespace]<br/>export EVENTHUBS_BROKER=$EVENT_HUBS_NAMESPACE.servicebus.windows.net:9093<br/>export EVENTHUBS_TOPIC=[name of the event hub (topic) - to be filled]<br/>export EVENTHUBS_CONSUMER_GROUPID=[name of consumer group e.g. testgroup]</span></pre><blockquote class="lq lr ls"><p id="6dd7" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">å¯¹äº</em> <code class="fe km kn ko kp b"><em class="iq">EVENTHUBS_CONNECTION_STRING</em></code> <em class="iq">å˜é‡ï¼Œè¯·ç¡®ä¿</em>åœ¨ä½¿ç”¨Azure CLIæ¥æ”¶çš„å€¼ä¸­åŒ…å«<em class="iq">åŒå¼•å·ï¼Œä¾‹å¦‚</em> <code class="fe km kn ko kp b"><em class="iq">export EVENTHUBS_CONNECTION_STRING="Endpoint=sb://foobar-eventhub-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=Nbaz0D42MT7qwerty6D/W51ao42r6EJuxR/zEqwerty="</em></code></p></blockquote><p id="5076" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯åŠ¨æ¶ˆè´¹è€…</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="e673" class="nn ly iq kp b gy od oe l of og">go run consumer/sarama-consumer.go</span></pre><p id="55c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æ—¥å¿—ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°æ¶ˆè´¹è€…ç»„è¢«åˆ›å»ºï¼Œå¹¶ä¸”æ‰€æœ‰çš„åˆ†åŒº(åœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯10ä¸ª)éƒ½è¢«åˆ†é…ç»™å®ƒ</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="9c28" class="nn ly iq kp b gy od oe l of og">Event Hubs broker [foo-bar.servicebus.windows.net:9093]<br/>Sarama client consumer group ID testgroup<br/>new consumer group created<br/>Event Hubs topic testhub<br/>Waiting for program to exit<br/>Partition allocation - map[testhub:[0 1 2 3 4 5 6 7 8 9]]<br/>Message topic:"testhub" partition:9 offset:45<br/>Message content value-2019-10-08 16:12:23.704802 +0530 IST m=+1.003667284<br/>Message topic:"testhub" partition:3 offset:32<br/>Message content value-2019-10-08 17:05:42.388301 +0530 IST m=+0.912420074</span></pre><h2 id="fc1c" class="nn ly iq bd lz no np dn md nq nr dp mh jy ns nt ml kc nu nv mp kg nw nx mt ny bi translated">å‘å¤–æ‰©å±•â€¦</h2><p id="62fa" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">åœ¨ä¸åŒçš„ç»ˆç«¯ä¸­ï¼Œå¯åŠ¨æ¶ˆè´¹è€…çš„å¦ä¸€ä¸ªå®ä¾‹ã€‚è¿™å°†è§¦å‘åˆ†åŒºçš„é‡æ–°å¹³è¡¡ï¼Œæ‚¨å°†çœ‹åˆ°å¾ˆå°‘(æœ¬ä¾‹ä¸­ä¸º5ä¸ª)åˆ†åŒºè¢«åˆ†é…ç»™è¿™ä¸ª(æ–°çš„)æ¶ˆè´¹è€…å®ä¾‹</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="f9a5" class="nn ly iq kp b gy od oe l of og">Event Hubs broker [foo-bar.servicebus.windows.net:9093]<br/>Sarama client consumer group ID testgroup<br/>new consumer group created<br/>Event Hubs topic testhub<br/>Waiting for program to exit<br/>Partition allocation - map[testhub:[0 1 2 3 4]]</span></pre><p id="49e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨è¿”å›åˆ°ç¬¬ä¸€ä¸ªæ¶ˆè´¹è€…å®ä¾‹çš„ç»ˆç«¯ï¼Œæ‚¨ä¼šçœ‹åˆ°ç”±äºé‡æ–°å¹³è¡¡ï¼Œå‡ ä¹æ²¡æœ‰åˆ†åŒºè¢«å–èµ°</p><pre class="kr ks kt ku gt nz kp oa ob aw oc bi"><span id="9185" class="nn ly iq kp b gy od oe l of og">Consumer group clean up initiated<br/>Partition allocation - map[testhub:[5 6 7 8 9]]</span></pre><blockquote class="lq lr ls"><p id="a7c3" class="jn jo lt jp b jq jr js jt ju jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj kk ij bi translated"><em class="iq">è¦åœæ­¢ï¼Œåªéœ€æŒ‰ä¸‹ç»ˆç«¯</em>ä¸Šçš„ <code class="fe km kn ko kp b"><em class="iq">ctrl+c</em></code> <em class="iq"/></p></blockquote><p id="90c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œä¸¤ä¸ªæ¶ˆè´¹è€…éƒ½å°†åˆ†æ‹…å·¥ä½œè´Ÿè½½ï¼Œå¹¶ä½¿ç”¨æ¥è‡ªäº‹ä»¶ä¸­å¿ƒçš„æ¶ˆæ¯ã€‚æ‚¨é€šè¿‡å¯åŠ¨æ›´å¤šçš„æ¶ˆè´¹è€…å®ä¾‹æ¥ä¿æŒå‘å¤–æ‰©å±•ï¼Œä½†æ˜¯è¿™åªæœ‰åœ¨æ¶ˆè´¹è€…å®ä¾‹çš„æ•°é‡ç­‰äºåˆ†åŒºçš„æ•°é‡æ—¶æ‰æœ‰ç”¨ã€‚æœ¬è´¨ä¸Šï¼ŒEvents Hubçš„åˆ†åŒºæ•°é‡æ˜¯å¹¶è¡Œæ€§å’Œè§„æ¨¡çš„å•ä½ã€‚</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="39c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™ä¸ªåšå®¢åˆ°æ­¤ä¸ºæ­¢ã€‚æˆ‘å¸Œæœ›å¾—åˆ°æ‚¨çš„åé¦ˆå’Œå»ºè®®ï¼ä¸è¦å®³ç¾ï¼Œåªéœ€<a class="ae kl" href="https://twitter.com/abhi_tweeter" rel="noopener ugc nofollow" target="_blank">å‘æ¨æ–‡</a>æˆ–å‘è¡¨è¯„è®ºã€‚å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·ç‚¹èµå¹¶å…³æ³¨ğŸ˜ƒğŸ˜ƒ</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div></div>    
</body>
</html>