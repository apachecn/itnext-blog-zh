# ç®¡é“æ“ä½œå‘˜ç°åœ¨ï¼

> åŸæ–‡ï¼š<https://itnext.io/an-emoji-lovers-guide-to-functional-programming-part-4-735c17ca4113?source=collection_archive---------0----------------------->

![](img/340a0bbf86d5ec4926929328322c8f60.png)

## è¡¨æƒ…ç¬¦å·çˆ±å¥½è€…çš„å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—

## ä½¿ç”¨æ­£å¼çš„ ECMAScript ç®¡é“æ“ä½œç¬¦ã€‚

*ç”¨è¡¨æƒ…ç¬¦å·å’Œ JavaScript å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ã€‚ä»£ç ç¤ºä¾‹åº”è¯¥è¶³å¤Ÿç®€å•ï¼Œä¸éœ€è¦ä»»ä½•å…ˆéªŒçŸ¥è¯†å°±å¯ä»¥ç†è§£ï¼Œä½†æ˜¯æˆ‘å¯ä»¥æƒ³è±¡å®ƒçœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªã€‚è¿˜æœ‰ï¼ŒJavaScript å®é™…ä¸Šä¸å…è®¸è¡¨æƒ…ç¬¦å·ä½œä¸º JavaScript å˜é‡åã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œè¿™äº›ä»£ç ç¤ºä¾‹ä¸ä¼šåœ¨æ²¡æœ‰ä¿®æ”¹çš„æƒ…å†µä¸‹è¿è¡Œã€‚*

*   [*ç”¨é£Ÿç‰©è¡¨æƒ…ç¬¦å·åˆ¶ä½œä¾¿ä¾¿ã€‚*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-1-241d8d4c9223)
*   [*æŠŠæš´é£äº‘å˜æˆæ™´æœ—çš„äº‘ã€‚*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-2-800b438c7ce3)
*   [*ç”¨å‡é€Ÿå™¨é€ ç‹¬è§’å…½ï¼*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-3-ef78e3156e)
*   [*ç°åœ¨çš„ç®¡é“æ“ä½œå‘˜æ˜¯ï¼*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-4-735c17ca4113)
*   [*ä¸ºé£Ÿè‚‰åŠ¨ç‰©è¿‡æ»¤è‚‰ç±»ã€‚*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-5-a6bc3324a839)
*   [*ä½¿ç”¨é€’å½’ä¸å½’çº¦ã€‚*](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-6-5c1d441d36af)

æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨çš„`pipe`å‡½æ•°å®é™…ä¸Šæ˜¯ pipeline çš„ç®€ç§°ã€‚å½“ä½ è¯»åˆ°è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå®ƒå¯èƒ½å·²ç»å‘å¸ƒäº†ï¼Œæˆ‘ä»¬ç›®å‰æ­£å¤„äº JavaScript ä¸­[ç®¡é“æ“ä½œç¬¦çš„ç¬¬ä¸€é˜¶æ®µ](https://github.com/tc39/proposal-pipeline-operator)ã€‚

è®©æˆ‘ä»¬å›åˆ° unicorn çš„ä¾‹å­ï¼Œå¦‚æœä¸éå†ä¸€ä¸ªæ•°ç»„ï¼Œé“¾æ¥æˆ‘ä»¬çš„`add`å‡½æ•°ä¼šæœ‰ä¸€ä¸ªå¤§é—®é¢˜ã€‚

```
add = additive => item => item + additiveğŸ¦„ = (
    add(ğŸ¶)(
        add(âœ¨)(
            add(ğŸŒˆ)(
                add(ğŸ¤˜)(ğŸ´)
            )
        )
    )
)
```

æœ‰æ—¶å€™æˆ‘ä»¬ä¸æƒ³éå†æ•°ç»„ã€‚ä¹Ÿè®¸æˆ‘ä»¬æƒ³è¦ä¸€ä¸ª`subtract`å’Œä¸€ä¸ª`add`æ··åˆåœ¨ä¸€èµ·ï¼Œå½“å¾ªç¯ä¸€ä¸ªå‡½æ•°æ—¶ä¼šå˜å¾—ç¨å¾®å¤æ‚ä¸€ç‚¹ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªä¸‰å…ƒç»„ï¼Œå¹¶æ‹†åˆ†æˆ‘ä»¬åœ¨`map`ä¸Šè°ƒç”¨çš„å‡½æ•°ï¼Œä½†è¿™ä¸ä¼šéå¸¸å¹²å‡€åœ°è§£å†³æ‰€æœ‰æƒ…å†µã€‚

è¿™æ˜¯æˆ‘ä»¬ä¹‹å‰ç”¨è‡ªå·±çš„`pipe`å‡½æ•°å¾—åˆ°çš„è§£å†³æ–¹æ¡ˆ:

```
ğŸ¦„ = pipe(
    ğŸ´,
    add(ğŸ¤˜),
    add(ğŸŒˆ),
    add(âœ¨),
    add(ğŸ¶)
)
```

ä½¿ç”¨æœ¬åœ°ç®¡é“æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ”¹è¿›:

```
ğŸ¦„ = ğŸ´ |> add(ğŸ¤˜) |> add(ğŸŒˆ) |> add(âœ¨) |> add(ğŸ¶)ğŸ¦„ = (
    ğŸ´
    |> add(ğŸ¤˜)
    |> add(ğŸŒˆ)
    |> add(âœ¨)
    |> add(ğŸ¶)
)
```

ç®¡é“æ“ä½œç¬¦è·å–ä¸€ä¸ªå€¼ï¼Œç„¶åå°†å…¶ä¼ é€’ç»™é“¾ä¸­çš„æ¯ä¸ªå‡½æ•°ã€‚çœ‹çœ‹è¿™æ®µä»£ç ï¼Œå¾ˆå®¹æ˜“æ¨ç†å¹¶ä»¥æ­£ç¡®çš„é¡ºåºå®Œæˆæˆ‘ä»¬éœ€è¦çš„ä»»åŠ¡ã€‚

å›åˆ°æˆ‘ä»¬æœ€åˆçš„ç®¡é“ï¼Œå®ƒè¿”å›ä¸€ä¸ªå‡½æ•°ï¼›ç®¡é“è¿è¥å•†æ²¡æœ‰ã€‚è¿™æ˜¯å¦æ„å‘³ç€ç®¡é“è¿è¥å•†åŠ¿åœ¨å¿…è¡Œï¼Ÿä¸ã€‚ä½†è¿™ç¡®å®æ„å‘³ç€å¦‚æœæˆ‘ä»¬æƒ³è¦åƒä»¥å‰ä¸€æ ·çš„åŠŸèƒ½ç®¡é“ï¼Œæˆ‘ä»¬éœ€è¦åŒ…è£…å®ƒ:

```
rockBand = item => (
    item
    |> add(ğŸ¤˜)
    |> add(ğŸ¶)
)luckyCharms = item => (
    item
    |> add(ğŸŒˆ)
    |> add(âœ¨)
)kidsTheseDays = item => rockBand(luckyCharms(item))ğŸ¦„ = kidsTheseDays(ğŸ´)
```

æˆ‘ä»¬å¯ä»¥ç”¨ä¸åŒçš„æ–¹å¼å†™`kidsTheseDays`,å®ç°åŒæ ·çš„äº‹æƒ…:

```
kidsTheseDays = item => (
    item 
    |> rockBand
    |> luckyCharms
)ğŸ¦„ = kidsTheseDays(ğŸ´)
```

æ³¨æ„æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨åŠŸèƒ½ç®¡é“æ¥è¿æ¥å…¶ä»–åŠŸèƒ½ç®¡é“ã€‚è¿™å°†å¯¼è‡´ä¸€äº›å¥‡å¦™çš„ä»£ç é‡ç”¨ï¼ä¸€ä¸ªé¢å¤–çš„å¥½å¤„æ˜¯ï¼Œåªæœ‰åœ¨æˆ‘ä»¬ä¼ é€’äº†`item`ä¹‹åï¼Œå¤„ç†æ‰ä¼šå‘ç”Ÿã€‚

å› ä¸ºæ‰€æœ‰ç®¡é“æ“ä½œç¬¦(`|>`)éƒ½å¯ä»¥æ˜¯æˆ‘ä»¬å¸¸è§„çš„æ—§`pipe`å‡½æ•°çš„ç‹¬ç«‹å‚æ•°ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç”¨ JavaScript çš„åŸç”Ÿ`pipe`å®ç”¨ç¨‹åº`Promise`åˆ¶ä½œä¸€ä¸ªç‹¬è§’å…½:

```
rockBand = item => (
    Promise.resolve(item)
    .then(add(ğŸ¤˜))
    .then(add(ğŸ¶))
)luckyCharms = item => (
    Promise.resolve(item)
    .then(add(ğŸŒˆ))
    .then(add(âœ¨))
)kidsTheseDays = item => (
    Promise.resolve(item)
    .then(rockBand)
    .then(luckyCharms)
)promiseICanHasUnicorn = kidsTheseDays(ğŸ´)promiseICanHasUnicorn
.then(console.log)
// ğŸ¦„
```

ä½¿ç”¨`Promise.resolve`ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåšä¸ç®¡é“æ“ä½œç¬¦å®Œå…¨ç›¸åŒçš„äº‹æƒ…ï¼Œå¹¶ä¸”æˆ‘ä»¬è·å¾—äº†å†…ç½®çš„é”™è¯¯å¤„ç†çš„é¢å¤–å¥½å¤„ã€‚

å¦‚æœä½ è¿˜æ²¡æœ‰ä½¿ç”¨è¿‡æ‰¿è¯ºï¼Œä½ å¯èƒ½ä¼šæ„è¯†åˆ°å®ƒä»¬æ˜¯å¼‚æ­¥å‘ç”Ÿçš„ï¼›å› æ­¤ï¼Œæ‚¨å®é™…ä¸Šå¯¹å®ƒä»¬çš„æ‰§è¡Œæ²¡æœ‰å¤šå°‘æ§åˆ¶æƒã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰å¯¹ unicorn åšä»»ä½•äº‹æƒ…ï¼Œä½†æ˜¯åœ¨æ™®é€šçš„ä»£ç åº“ä¸­ï¼Œæ‚¨é€šå¸¸ä¼šä¸€ç›´è¿›è¡Œå¤„ç†ï¼Œç›´åˆ°æ‚¨è§¦å‘äº†å‰¯ä½œç”¨ï¼Œæ¯”å¦‚å†™å…¥æ•°æ®åº“æˆ–å‘ˆç°åˆ° DOMã€‚

è™½ç„¶ JavaScript çš„æœ¬æœº`Promise`å…è®¸æˆ‘ä»¬åƒä½¿ç”¨ç®¡é“æ“ä½œç¬¦ä¸€æ ·ä½¿ç”¨ç®¡é“ï¼Œä½†å®ƒå›ºæœ‰çš„å¼‚æ­¥æ€§å¯èƒ½ä¸ç¬¦åˆæ‚¨çš„ç‰¹å®šé™åˆ¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥åƒè¿™æ ·ä½¿ç”¨`await`:

```
ğŸ¦„ = await kidsTheseDays(ğŸ´)
```

å½“ç›´æ¥å¤„ç†æ‰¿è¯ºæ—¶ï¼Œæ‚¨ä¸éœ€è¦æŒ‡å®š`async`å…³é”®å­—ï¼Œå› ä¸ºå®ƒåªæ˜¯å°†æ‚¨çš„è¿”å›å€¼åŒ…è£…åœ¨æ‰¿è¯ºä¸­çš„è¯­æ³•ç³–ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªä¸ä¸€å®šæ˜¯å¼‚æ­¥çš„åŸç”Ÿ JavaScript `pipe`ã€‚

ä¸`async-await`æœ‰å–èˆå†™æ³•ã€‚`Promise`æ˜¯å¤„ç†å‰¯ä½œç”¨çš„åŠŸèƒ½æ€§æ–¹æ³•ã€‚ä½¿ç”¨`async-await`å°†ä½ çš„åŠŸèƒ½æ€§çš„åŸºäºæ‰¿è¯ºçš„ä»£ç è½¬å˜ä¸ºä¸€æ­¥ä¸€æ­¥çš„å‘½ä»¤å¼æ–¹æ³•ã€‚è¿™é‡Œéœ€è¦ä¸€ä¸ª`await`çš„ä¾‹å­çœ‹èµ·æ¥å¾ˆæ£’ï¼Œä½†æ˜¯å½“ä½ å›´ç»•å…¶ä»–å‡½æ•°åˆ›å»ºå‡½æ•°æ—¶ï¼Œ`async-await`å°±å˜æˆäº†ä¸€ç§ç–¾ç—…ã€‚

æ¯ä¸ªåŒ…å«`await`çš„å‡½æ•°éƒ½éœ€è¦å®šä¹‰ä¸º`async`ã€‚ä»»ä½•è°ƒç”¨é“¾ä¸Šçš„`async`å‡½æ•°çš„å‡½æ•°åœ¨è¢«è°ƒç”¨ä¹‹å‰ä¹Ÿéœ€è¦æœ‰`await`ï¼Œç„¶åä¹Ÿéœ€è¦è¢«åŒ…è£…åœ¨`async`ä¸­ã€‚è¿™æ„å‘³ç€æ·±å…¥ä»£ç åº“çš„ä¸€ä¸ª`async-await`ä¼šå¯¼è‡´é“¾ä¸Šæ‰€æœ‰æ›´é«˜çš„åŠŸèƒ½éœ€è¦ç›¸åŒçš„å¤„ç†ã€‚å› æ­¤ï¼Œå½“éœ€è¦å¼‚æ­¥æ“ä½œæ—¶ï¼Œæœ€å¥½ä½¿ç”¨åŸºäº`Promise`çš„ç®¡é“ï¼Œè€Œä¸æ˜¯`async-await`ã€‚

**æ„Ÿå—æœªæ¥ï¼**

## [ç‚¹å‡»æ­¤å¤„è¿›å…¥ç¬¬ 5 éƒ¨åˆ†ï¼](https://medium.com/@Sawtaytoes/an-emoji-lovers-guide-to-functional-programming-part-5-a6bc3324a839)

# æ›´å¤šé˜…è¯»

å¦‚æœæ‚¨å¯¹ä¸å‡½æ•°å¼ç¼–ç¨‹ç›¸å…³çš„æ›´å¤šä¸»é¢˜æ„Ÿå…´è¶£ï¼Œæ‚¨åº”è¯¥çœ‹çœ‹æˆ‘çš„å…¶ä»–æ–‡ç« :

*   [å®‰å…¨é‡æ„æ—§ä»£ç :ç¬¬ 1 éƒ¨åˆ†](/how-to-safely-refactor-old-code-part-1-a1a853263fec)
*   [ä½¿ç”¨ Redux çš„ç§˜å¯†:createNamespaceReducer](https://medium.com/@Sawtaytoes/the-secret-to-using-redux-createnamespacereducer-d3fed2ccca4a)
*   [åœ¨ React ç»„ä»¶ä¸­ä½¿ç”¨ Redux è¿˜åŸå‰‚](https://medium.com/@Sawtaytoes/using-redux-reducers-in-react-components-4e92985dd9cb)
*   [Redux-Observable å¯ä»¥è§£å†³ä½ çš„çŠ¶æ€é—®é¢˜](https://medium.com/@Sawtaytoes/redux-observable-can-solve-your-state-problems-15b23a9649d7)
*   [RxJS å’Œå¯è§‚å¯Ÿçš„ Flic æŒ‰é’®](https://medium.com/flicblog/flic-buttons-and-the-observable-customization-using-rxjs-2214bc53d407)