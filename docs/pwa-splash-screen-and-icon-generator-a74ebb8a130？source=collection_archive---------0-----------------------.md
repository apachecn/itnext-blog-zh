# PWA é—ªå±å’Œå›¾æ ‡ç”Ÿæˆå™¨

> åŸæ–‡ï¼š<https://itnext.io/pwa-splash-screen-and-icon-generator-a74ebb8a130?source=collection_archive---------0----------------------->

![](img/1101f23242d5a7519b1c251272f5e728.png)

æ¼”ç¤ºç”±[**PWA-asset-generator**](https://github.com/onderceylan/pwa-asset-generator)ç”Ÿæˆçš„åœ¨ iOS ä¸Šå¸¦æœ‰é—ªå±å’Œå›¾æ ‡çš„ PWA

é•¿è¯çŸ­è¯´ï¼›åœ¨ä¸ºæˆ‘çš„ä¸‹ä¸€æ¬¡æ¼”è®²è¯•éªŒå…³äº Puppeteer çš„æƒ³æ³•æ—¶ï¼Œæˆ‘å‘ç°è‡ªå·±æ­£åœ¨æ„å»ºä¸€ä¸ªå¼€æºçš„ CLI å·¥å…·â€”[**ã€pwaâ€”èµ„äº§â€”ç”Ÿæˆå™¨**](https://github.com/onderceylan/pwa-asset-generator) **ï¼:)**

å®ƒä¼šè‡ªåŠ¨ä¸ºæ‚¨çš„æ¸è¿›å¼ Web åº”ç”¨ç¨‹åºç”Ÿæˆé—ªå±å’Œå›¾æ ‡å›¾åƒï¼Œä»¥ä¾¿åœ¨å¤šä¸ªå¹³å°ä¸Šæä¾›ç±»ä¼¼æœ¬æœºçš„ç”¨æˆ·ä½“éªŒã€‚å®ƒè¿˜æ›´æ–°æ‚¨çš„`index.html`å’Œ`manifest.json`æ–‡ä»¶ï¼Œå‘æ‚¨çš„ PWA å£°æ˜ç”Ÿæˆçš„èµ„äº§ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»æˆ‘æ„å»ºè¿™æ ·ä¸€ä¸ªåº“çš„åŠ¨æœºï¼Œä»¥åŠä¸€äº›é«˜çº§çš„ä½¿ç”¨ç¤ºä¾‹ã€‚

![](img/f5fbf9778851453525748f53d138d87f.png)

[**pwa-asset-generator**](https://github.com/onderceylan/pwa-asset-generator)çš„åŸºæœ¬ä½¿ç”¨æ¼”ç¤º

[](https://www.npmjs.com/package/pwa-asset-generator) [## èµ„äº§ç”Ÿæˆå™¨

### åŸºäºæœ¨å¶å¸ˆçš„ PWA èµ„äº§ç”Ÿæˆå™¨ã€‚æ ¹æ® Web åº”ç”¨ç¨‹åºæ¸…å•è‡ªåŠ¨ç”Ÿæˆå›¾æ ‡å’Œé—ªå±â€¦

www.npmjs.com](https://www.npmjs.com/package/pwa-asset-generator) 

åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘å°†è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·ä¸€ä¸ªåº“ï¼Œä»¥åŠå®ƒä¸ä¸ºæ‚¨çš„ PWA ç”Ÿæˆèµ„äº§çš„å…¶ä»–ç°æœ‰é€‰é¡¹ç›¸æ¯”å¦‚ä½•ã€‚

> è¯·éšæ„è·³åˆ°æ–‡ç« çš„æœ€åä¸€ç« â¬æŸ¥çœ‹è¯¥åº“çš„åŠŸèƒ½å’Œé«˜çº§ç”¨æ³•ç¤ºä¾‹ã€‚

# æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·ä¸€ä¸ªå›¾ä¹¦é¦†ï¼Ÿ

å½“æ‚¨æ„å»º PWA çš„ç›®æ ‡æ˜¯åœ¨å¤šä¸ªå¹³å°å’Œå•†åº—ä¸Šæä¾›ç±»ä¼¼æœ¬æœºçš„ç”¨æˆ·ä½“éªŒæ—¶ï¼Œæ‚¨éœ€è¦ç”¨æ‚¨çš„ PWA èµ„äº§æ¥æ»¡è¶³é‚£äº›å¹³å°å’Œå•†åº—çš„æ ‡å‡†ï¼›**å›¾æ ‡**å’Œ**é—ªå±**ã€‚è¿™äº›æ ‡å‡†æ˜¯:

*   **è°·æ­Œçš„ Android** å¹³å°å°Šé‡ Web åº”ç”¨æ¸…å• API è§„èŒƒï¼Œå®ƒå¸Œæœ›ä½ åœ¨æ¸…å•æ–‡ä»¶ä¸­è‡³å°‘æä¾›**ä¸¤ç§å›¾æ ‡å¤§å°**â€”[https://developers . Google . com/Web/fundamentals/we b-App-Manifest/# icons](https://developers.google.com/web/fundamentals/web-app-manifest/#icons)
*   æ­£å¦‚ Microsoft docs ä¸­æ‰€æŒ‡å‡ºçš„ï¼Œæ‚¨çš„ PWA å¿…é¡»æ»¡è¶³ Web åº”ç”¨ç¨‹åºæ¸…å•ä¸­å£°æ˜çš„ç‰¹å®šå›¾åƒæ ‡å‡†ï¼Œæ‰èƒ½è‡ªåŠ¨æ‰“åŒ…ç”¨äº**Microsoft Store**â€”[https://docs . Microsoft . com/en-us/Microsoft-edge/progressive-we B- apps/get-started # we B- App-Manifest](https://docs.microsoft.com/en-us/microsoft-edge/progressive-web-apps/get-started#web-app-manifest)

> ä¸€æ—¦æ‚¨ä½¿ç”¨æ‰€éœ€å¤§å°çš„å›¾æ ‡ä½œä¸º Web åº”ç”¨ç¨‹åºæ¸…å• API çš„ä¸€éƒ¨åˆ†ï¼Œæ‚¨å°±ä¸éœ€è¦ä¸ºä¸Šè¿°å¹³å°æä¾›é¢å¤–çš„é—ªå±å›¾åƒã€‚å®ƒä»¬æ˜¯è‡ªåŠ¨ä¸ºæ‚¨ç”Ÿæˆçš„ã€‚

## ç›‘ç£åŠçš„æ ‡å‡†

å¤æ‚ã€‚ç›®å‰ï¼ŒiOS ä¸æ”¯æŒ Web App Manifest API è§„èŒƒï¼Œå°½ç®¡è¯¥è§„èŒƒæ­£åœ¨å¼€å‘ä¸­â€”â€”ç‚¹å‡»æ­¤å¤„è·Ÿè¸ªè¿›å±•[ã€‚ç›®å‰è¿˜ä¸æ¸…æ¥šè‹¹æœæ˜¯å¦ä¼šåœ¨æ ‡å‡†å®æ–½æœŸé—´æ”¹å˜æ˜¾ç¤ºé—ªå±çš„æ–¹å¼ï¼Œå› ä¸º*é—ªå±ä¸æ˜¯ Web åº”ç”¨æ¸…å•è§„èŒƒ*çš„ä¸€éƒ¨åˆ†ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨ iOS ä¸Šä¸ºä½ çš„ PWA è®¾ç½®å›¾æ ‡å’Œé—ªå±çš„å”¯ä¸€æ–¹æ³•æ˜¯ï¼Œæ·»åŠ ç‰¹æ®Šçš„ HTML æ ‡ç­¾ã€‚](https://webkit.org/status/#specification-web-app-manifest)

å½“ PWA è¢«æ·»åŠ åˆ°ç”¨æˆ·çš„ä¸»å±å¹•æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå¸¦æœ‰ rel `apple-touch-icon`çš„ç‰¹æ®Š HTML é“¾æ¥æ ‡ç­¾æ¥ä¸ºå®ƒæä¾›å›¾æ ‡ã€‚åœ¨[è‹¹æœå›¾æ ‡æŒ‡å—](https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/)å’Œ [Safari ç½‘ç»œå†…å®¹æŒ‡å—](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)ä¸Šé˜…è¯»æ›´å¤šç›¸å…³å†…å®¹ã€‚

![](img/4633b31851639ff7c1483b2391ab9210.png)

æ¥è‡ª[è‹¹æœå›¾æ ‡æŒ‡å—](https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/)çš„å›¾æ ‡è§„æ ¼ç¤ºä¾‹

å¦‚æœæ‚¨è¿˜æƒ³ä¸º PWA æä¾›é—ªå±ï¼Œåˆ™éœ€è¦å¦ä¸€ä¸ªå¸¦æœ‰ rel `apple-touch-startup-image`çš„ç‰¹æ®Š HTML é“¾æ¥æ ‡ç­¾ã€‚å½“ä½ çš„ PWA åœ¨åå°æ‰“å¼€æ—¶ï¼ŒiOS ä¼šæ˜¾ç¤ºè¿™äº›å±å¹•ã€‚åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©ï¼

ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé™·é˜±:ä½ éœ€è¦ä¸º[è‹¹æœçš„å¯åŠ¨å±å¹•æŒ‡å—](https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/launch-screen/#static-launch-screen-images-not-recommended)ä¸Šçš„**æ¯ä¸ªåˆ†è¾¨ç‡**åˆ›å»ºä¸€ä¸ªé—ªå±å›¾åƒï¼Œå¹¶ä¸ºæ¯ä¸ªè®¾å¤‡åˆ†è¾¨ç‡å’Œæ–¹å‘æ·»åŠ ä¸€ä¸ªå¸¦æœ‰åª’ä½“å±æ€§çš„ HTML æ ‡ç­¾ğŸ™€ï¼ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸€è¦æ±‚åœ¨ Safari Web å†…å®¹æŒ‡å—ä¸­æ²¡æœ‰å¾—åˆ°å……åˆ†çš„è®°å½•ã€‚

**ä»…ä¸€ä¸ª**åˆ†è¾¨ç‡&æ–¹ä½å¯¹çš„é“¾æ¥æ ‡ç­¾ç¤ºä¾‹ï¼›

```
<link rel="apple-touch-startup-image" href="temp/apple-splash-2048-2732.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
```

![](img/438194b0424104d663992143bde73548.png)

è‹¹æœå‘å¸ƒå±å¹•æŒ‡å—ä¸­çš„é—ªå±è§„æ ¼ç¤ºä¾‹

> ğŸ’¡ä¸ºæ‰€æœ‰å¹³å°åˆ›å»ºå›¾æ ‡å’Œé—ªå±å›¾åƒï¼Œç»´æŠ¤æ‰€æœ‰å¹³å°çš„å¤§å°å’Œè´¨é‡ï¼Œå¹¶ä¸ºæ¯ä¸ªå›¾åƒæ·»åŠ  HTML æ ‡ç­¾ï¼Œè¿™äº›å·¥ä½œå¯èƒ½ä¼šè®©äººä¸çŸ¥æ‰€æªã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸è‡ªåŠ¨åŒ–å‘¢ï¼ŸğŸ¤–

# ç°æœ‰è§£å†³æ–¹æ¡ˆçš„ç¼ºç‚¹

å½“æˆ‘å†³å®šæ„å»ºè¿™æ ·ä¸€ä¸ª CLI åº“æ—¶ï¼Œå·²ç»æœ‰å‡ ä¸ªé€‰é¡¹å¯ä»¥ä¸º pwa å’Œä¸å®ƒä»¬ç›¸å…³è”çš„å…ƒç”Ÿæˆèµ„äº§ã€‚å®ƒä»¬å¯èƒ½å¾ˆé€‚åˆä½ çš„éœ€è¦ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºåœ¨å†³å®šä½¿ç”¨ä»€ä¹ˆçš„æ—¶å€™äº†è§£å®ƒä»¬çš„ç¼ºç‚¹æ˜¯æ˜æ™ºçš„ã€‚

æˆ‘åœ¨ä½¿ç”¨æ—¶æ³¨æ„åˆ°çš„*çš„ä¸€äº›ç¼ºç‚¹æ˜¯*ï¼›**

## è¿è¡Œæ—¶ä¾èµ–æ€§

ç”Ÿæˆå’Œä½¿ç”¨ PWA èµ„äº§çš„ä¸€ä¸ªé€‰é¡¹æ˜¯ä½¿ç”¨ [PWACompat](https://github.com/GoogleChromeLabs/pwacompat) ã€‚æˆ‘è®¤ä¸ºè·¨å¹³å°ä¿æŒæ ‡å‡†çš„é—ªå±å¤–è§‚æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œå®ƒä½¿ç”¨ä¸€ç§æ–¹æ³•åœ¨è¿è¡Œæ—¶(iOS)ç”Ÿæˆ PWA å›¾åƒï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨æµè§ˆå™¨çš„ä¼šè¯å­˜å‚¨ä¸­ã€‚è¯·è®°ä½ï¼Œè¿™ç§æ–¹æ³•ä¸ä»…ä¼šå½±å“ PWA çš„åˆå§‹åŒ–æ€§èƒ½ï¼Œè¿˜ä¼šæ¥ç®¡æ‚¨çš„ *manifest.json* æ–‡ä»¶å’Œèµ„äº§çš„æ‰€æœ‰æƒã€‚

## å¸¦æ¥ç»´æŠ¤æˆæœ¬

ç”Ÿæˆå’Œä½¿ç”¨ PWA èµ„äº§çš„ä¸€äº›å…¶ä»–é€‰é¡¹æ˜¯åœ¨çº¿å·¥å…·ï¼Œå¦‚ [AppScope é—ªå±ç”Ÿæˆå™¨](https://appsco.pe/developer/splash-screens)æˆ– [PWABuilder](https://www.pwabuilder.com/generate) ã€‚è¿™äº›å·¥å…·åˆ†åˆ«ç”Ÿæˆå›¾æ ‡*æˆ–*é—ªå±ï¼Œæ²¡æœ‰ä»»ä½•åœ¨çº¿å·¥å…·å¯ä»¥ç”Ÿæˆè¿™ä¸¤ç§èµ„äº§ç±»å‹ã€‚å®ƒä»¬è¿˜ä¼´éšç€ç»´æŠ¤æˆæœ¬ï¼Œä¾‹å¦‚:

*   è§£å‹ç¼©å†…å®¹å¹¶é‡æ–°å®šä½èµ„äº§
*   æ‰‹åŠ¨æ›´æ–° *manifest.json* æˆ–*index.html*æ–‡ä»¶
*   å…³æ³¨æ ‡å‡†å’ŒæŒ‡å—ï¼Œç¡®ä¿æ‚¨çš„ PWA å…¼å®¹æ‰€æœ‰è®¾å¤‡ç±»å‹å’Œå¹³å°

å¹¶ä¸”ï¼Œä¸€éåˆä¸€éçš„åšè¿™ç§æ‰‹å·¥ã€‚

## **éš¾ä»¥è‡ªåŠ¨åŒ–**

ä½¿ç”¨åœ¨çº¿å·¥å…·çš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ƒä»¬å¾ˆéš¾è‡ªåŠ¨åŒ–ã€‚è®©æ‚¨çš„ PWA èµ„äº§ä¿æŒæœ€æ–°å¹¶ä»¥è‡ªåŠ¨åŒ–æ–¹å¼å…¼å®¹æ‰€æœ‰å¹³å°çš„ç†æƒ³åœºæ™¯æ˜¯å°†[**PWA-asset-generator**](https://github.com/onderceylan/pwa-asset-generator)é›†æˆåˆ°æ‚¨æœ€å–œæ¬¢çš„ CI çš„æ„å»ºæ­¥éª¤ä¸­ã€‚å®ƒå¯ä»¥ç”Ÿæˆæ‰€æœ‰çš„èµ„äº§ï¼Œå¹¶æ ¹æ®æœ€æ–°çš„å¹³å°è§„èŒƒæ›´æ–°æ‚¨çš„*index.html*å’Œ *manifest.json* æ–‡ä»¶ä»¥åŠç›¸å…³çš„å…ƒæ•°æ®ã€‚

## ç¼ºä¹å¯¹å†…å®¹çš„çµæ´»æ€§å’Œæ‰€æœ‰æƒ

ä½ æ— æ³•æ§åˆ¶ä½ çš„èµ„äº§æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚ç°æœ‰çš„è§£å†³æ–¹æ¡ˆéƒ½ä¸èƒ½å®Œå…¨æ§åˆ¶èµ„äº§æ˜¯å¦‚ä½•ç”Ÿæˆçš„ã€‚PWACompat æ ¹æœ¬ä¸æä¾›ä»»ä½•æ§ä»¶ï¼Œå®ƒè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰é—ªå±éƒ½æ˜¯åŒä¸€ç§å½¢å¼ã€‚æ­¤å¤–ï¼Œå½“æ‚¨ç”Ÿæˆèµ„äº§æ—¶ï¼Œåœ¨çº¿å·¥å…·æä¾›æœ‰é™çš„å®šåˆ¶é€‰é¡¹ã€‚[**pwa-asset-generator**](https://github.com/onderceylan/pwa-asset-generator)é€šè¿‡ HTML è¾“å…¥è®©ä½ å®Œå…¨æ§åˆ¶ä½ çš„èµ„äº§ã€‚æˆ‘å°†åœ¨ä¸‹ä¸€ç« è¯¦ç»†æè¿°è¿™ä¸€ç‚¹ã€‚

# åº“çš„åŠŸèƒ½å’Œç”¨æ³•

PWA èµ„äº§ç”Ÿæˆå™¨ä»¥åˆ›é€ æ€§çš„æ–¹å¼è‡ªåŠ¨ç”Ÿæˆå›¾åƒã€‚ä»¥[æœ¨å¶å¸ˆ](https://pptr.dev)ä¸ºæ ¸å¿ƒå¯ä»¥å®ç°å¾ˆå¤šå¯èƒ½æ€§ã€‚

â€”ç”Ÿæˆå¸¦æœ‰å¯é€‰`--icon-only` `--splash-only` `--landscape-only`å’Œ`--portrait-only`æ ‡å¿—âœ¨çš„å›¾æ ‡å’Œé—ªå±

â€”è‡ªåŠ¨æ›´æ–°æ‚¨çš„ *manifest.json* å’Œ*index.html*æ–‡ä»¶ï¼Œç”¨äºå£°æ˜ç”Ÿæˆçš„å›¾åƒèµ„äº§ğŸ™Œ

â€”é€šè¿‡æœ¨å¶å¸ˆä»è‹¹æœäººæœºç•Œé¢æŒ‡å—ç½‘ç«™æŠ“å–æœ€æ–°è§„æ ¼ï¼Œä½¿æ‚¨çš„ PWA ä¸ºæ‰€æœ‰/æœ€æ–°çš„ iOS è®¾å¤‡åšå¥½å‡†å¤‡ğŸ¤–

*   æ”¯æŒç¦»çº¿æ¨¡å¼ï¼Œå¹¶åœ¨æŠ“å–å‡ºé”™æ—¶ä½¿ç”¨é™æ€è§„èŒƒæ•°æ®ğŸ“´
*   æ¯æ¬¡å‘å¸ƒå‰è‡ªåŠ¨æ›´æ–°é™æ€è§„æ ¼æ•°æ®ï¼Œå¹¶ä¸”[æ¯å¤©ç›‘æ§è§„æ ¼å˜åŒ–](https://github.com/onderceylan/pwa-asset-generator/actions?query=workflow%3A%22Sanity+Check%22)ğŸ”„

â€”ä½¿ç”¨ Chrome æµè§ˆå™¨ï¼Œå› ä¸ºå®ƒæ˜¯æ‚¨æœ€å–œæ¬¢çš„å›¾åƒç¼–è¾‘å™¨çš„ç”»å¸ƒã€‚å®ƒä½¿ç”¨ä¸€ä¸ª shell HTML æ–‡ä»¶ä½œä¸ºç”»æ¿ï¼Œå¹¶åœ¨é€šè¿‡ Puppeteer ä¸ºæ¯ä¸ªåˆ†è¾¨ç‡æˆªå›¾ä¹‹å‰å°†æ‚¨çš„å¾½æ ‡å±…ä¸­ğŸ¤–

â€”æ‚¨å¯ä»¥ä»¥å¤šç§æ ¼å¼æä¾›æ‚¨çš„æºï¼›æœ¬åœ°å›¾åƒæ–‡ä»¶ã€æœ¬åœ° HTML æ–‡ä»¶ã€è¿œç¨‹å›¾åƒæˆ– HTML æ–‡ä»¶ğŸ™Œ

*   å½“å®ƒæ˜¯ä¸€ä¸ªå›¾åƒæºæ—¶ï¼Œå®ƒä½äºæ‚¨æä¾›çš„èƒŒæ™¯é€‰é¡¹çš„ä¸­å¿ƒğŸŒ…
*   å½“å®ƒæ˜¯ä¸€ä¸ª HTML æºä»£ç æ—¶ï¼Œä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°å‘æŒ¥åˆ›é€ åŠ›ï¼›å®šä½ä½ çš„æ ‡å¿—ï¼Œä½¿ç”¨ SVG è¿‡æ»¤å™¨ï¼Œä½¿ç”¨å¯å˜å­—ä½“ï¼Œä½¿ç”¨æ¸å˜èƒŒæ™¯ï¼Œä½¿ç”¨æ’ç‰ˆç­‰ã€‚ä½ çš„ HTML æ–‡ä»¶åœ¨ Chrome ä¸Šå‘ˆç°ï¼Œç„¶åå¯¹æ¯ä¸ªåˆ†è¾¨ç‡è¿›è¡Œæˆªå›¾ğŸ¨

â€”å®ƒä½¿ç”¨[æœ¨å¶æ ¸å¿ƒ](https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#puppeteer-vs-puppeteer-core)è€Œä¸æ˜¯æœ¨å¶ï¼Œå¹¶ä¸”åªåœ¨ç³»ç»Ÿä¸Šä¸å­˜åœ¨ Chromium æ—¶æ‰å®‰è£…å®ƒã€‚ä¸ºæ¯ä¸ªç”¨æˆ·èŠ‚çœå¤§çº¦ 110-150 MB çš„ç£ç›˜ç©ºé—´å’Œè®¸å¤šç§’é’ŸğŸŒï¸ï¸âš¡ï¸

â€”æ”¯æŒ iOS ä¸Šçš„é»‘æš—æ¨¡å¼é—ªå±ï¼æ‰€ä»¥ï¼Œä½ å¯ä»¥æä¾›ä¸¤ç§å…‰ğŸŒ•å’Œé»‘æš—ğŸŒšåŸºäºç”¨æˆ·åå¥½åŒºåˆ†åº”ç”¨å¤–è§‚çš„é—ªå±å›¾åƒğŸŒ™

## ä¾‹å­

1.  æœ¬åœ° PNG è¾“å…¥çš„åŸºæœ¬ç”¨æ³•ï¼Œè·³è¿‡æŠ“å–è§„æ ¼ï¼Œç”Ÿæˆé—ªå±å’Œå›¾æ ‡ï¼›

```
npx pwa-asset-generator ./img/logo.png --background "#ababab" --scrape false
```

![](img/733fbfd512f5c3ade5b733acaaaa8885.png)

2.è¿œç¨‹ SVG è¾“å…¥çš„é«˜çº§ç”¨æ³•ï¼Œä½¿ç”¨è‡ªå®šä¹‰æ¸å˜èƒŒæ™¯ğŸ³ï¸â€ğŸŒˆï¼Œåªç”Ÿæˆå›¾æ ‡ï¼›

```
npx pwa-asset-generator [https://animejs.com/documentation/assets/img/icons/icon-github.svg](https://animejs.com/documentation/assets/img/icons/icon-github.svg) ./temp -b "linear-gradient(180deg, #f00000, #f00000 16.67%, #ff8000 16.67%, #ff8000 33.33%, #ffff00 33.33%, #ffff00 50%, #007940 50%, #007940 66.67%, #4040ff 66.67%, #4040ff 83.33%, #a000c0 83.33%, #a000c0) fixed" --icon-only
```

![](img/acddb3a1210b379d97d117884a1781ef.png)

> ğŸ’¡äººä»¬å¯ä»¥åœ¨ CI ä¸Šå¼•å…¥æ„å»ºæ­¥éª¤ï¼Œä»¥åœ¨ç‰¹æ®Šåœºåˆè‡ªåŠ¨åŒºåˆ† PWA çš„å“ç‰Œã€‚å²‚ä¸æ˜¯å¾ˆç‰›é€¼ï¼Ÿ

3.å…ˆè¿›çš„ä½¿ç”¨è‡ªå®šä¹‰ HTML è¾“å…¥ï¼Œä½¿ç”¨èƒŒæ™¯ç“·ç –å’Œè‡ªå®šä¹‰å¯å˜ç½‘ç»œå­—ä½“ï¼Œåªäº§ç”Ÿé—ªå±ï¼Œè¾“å‡º 70%è´¨é‡çš„ JPEG æ–‡ä»¶ç±»å‹ï¼Œä»£ç è¾“å‡ºä¿å­˜åˆ°æ‚¨çš„ PWA çš„ index.html æ–‡ä»¶ï¼›

```
# The local nyan.html can be a remote url as well
# npx pwa-asset-generator [https://ny.an/nyan.html](https://ny.an/nyan.html)npx pwa-asset-generator nyan.html ./src/app/temp --splash-only --type=jpeg --quality=70 --index ./src/app/index.html
```

![](img/d7f5b9800a1bcf404fe28da59f79f20f.png)

å¦‚æœä½ å¥½å¥‡è¿™æ ·ä¸€ä¸ª HTML æ˜¯å¦‚ä½•æ„å»ºçš„ï¼Œ[è¿™é‡Œæ˜¯è¦ç‚¹](https://gist.github.com/onderceylan/67f4d33f3317138905e1c7234cb70731)ã€‚

> ğŸ’¡å½“ä½¿ç”¨ HTML è¾“å…¥æ—¶ï¼Œæ‚¨å¯ä»¥å®Œå…¨æ§åˆ¶æ‚¨çš„èµ„äº§ğŸ‘©â€ğŸ’»æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»å‹çš„ web æŠ€æœ¯æ¥å‘ˆç°æ‚¨çš„èµ„äº§å†…å®¹ã€‚æœ‰äº›å¯èƒ½åŒ…æ‹¬ä½†ä¸é™äº SVG è¿‡æ»¤å™¨ã€css åª’ä½“æŸ¥è¯¢ã€å¯å˜å­—ä½“ã€css å›¾åƒè¿‡æ»¤å™¨ã€æ¸å˜èƒŒæ™¯å’Œå›¾åƒæ‹¼è´´ğŸ‘©â€ğŸ¨

4.ç”Ÿæˆ iOS çš„äº®æš—æ¨¡å¼é—ªå±ï¼Œè¾“å‡º 80%è´¨é‡çš„ JPEG æ–‡ä»¶ç±»å‹ï¼Œä»£ç è¾“å‡ºä¿å­˜åˆ°ä½ çš„ PWA çš„ index.html æ–‡ä»¶ï¼›

```
npx pwa-asset-generator light-logo.svg ./assets --dark-mode --background dimgrey --splash-only --type jpeg --quality 80 --index ./src/app/index.htmlnpx pwa-asset-generator dark-logo.svg ./assets --background lightgray --splash-only --type jpeg --quality 80 --index ./src/app/index.html
```

iOS ä¸Šé»‘æš—æ¨¡å¼é—ªå±çš„è§†é¢‘æ¼”ç¤º

# é¢å¤–æ”¶è·:å¼•æ“ç›–ä¸‹

å¯¹äºè¯»åˆ°è¿™é‡Œçš„å¥½å¥‡çš„è¯»è€…ï¼Œæˆ‘æƒ³åˆ†äº«ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„æ¦‚å¿µï¼Œè¿™ä¸ªæ¦‚å¿µæ˜¯å›¾ä¹¦é¦†åœ¨å¹•åä½¿ç”¨çš„ã€‚

æ­£å¦‚æˆ‘å‰é¢æåˆ°çš„ï¼Œåœ¨å¼•æ“ç›–ä¸‹ä½¿ç”¨æœ¨å¶å¸ˆæ‰“å¼€äº†ä¸€æ‰‡å¯èƒ½æ€§ä¹‹é—¨ã€‚[**pwa-asset-generator**](https://github.com/onderceylan/pwa-asset-generator)ä½¿ç”¨çš„æœ¨å¶å¸ˆçš„ä¸€ä¸ªå…³é”®ç‰¹æ€§ï¼Œå°±æ˜¯å®ƒçš„[æˆªå›¾ API](https://pptr.dev/#?product=Puppeteer&version=v1.19.0&show=api-pagescreenshotoptions) ã€‚

æœ¨å¶æˆå…è®¸ä¿å­˜æˆªå›¾åœ¨ PNG å’Œ JPEG æ–‡ä»¶ç±»å‹ä¸å¯é€‰çš„ JPEG å›¾åƒå‹ç¼©çš„å¯èƒ½æ€§ã€‚

æ¯æ¬¡ä½ ç”¨[**pwa-asset-generator**](https://github.com/onderceylan/pwa-asset-generator)æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œåº“å°±ä¼šä» 2 ä¸ªæ¥æºæŠ“å–æœ€æ–°çš„ iOS è§„èŒƒã€‚ç„¶åï¼Œå®ƒæ‰“å¼€æ–°çš„é€‰é¡¹å¡ï¼Œæ ¹æ®æä¾›çš„ CLI å‚æ•°å‘ˆç° *shell HTML* çš„å†…å®¹ã€‚ä¸‹é¢æ˜¯ *shell HTML* å†…å®¹ï¼›

```
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin: 0;
      background: --background;
      height: 100vh;
      padding: --padding;
      box-sizing: border-box;
    }
    img {
      width: 100%;
      height: 100%;
      margin: 0 auto;
      object-fit: contain;    
    }
  </style>
</head>
<body>
<img src="--image-input">
</body>
</html>
```

å®ƒæ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨é€‰é¡¹å¡ï¼Œé€šè¿‡ Puppeteer ä¸ºæ¯ä¸ªå›¾æ ‡å’Œé—ªå±å°ºå¯¸å‘ˆç° *shell HTML* æ–‡ä»¶å†…å®¹ï¼Œæœ€åä¿å­˜æ¯ä¸ªå›¾æ ‡å’Œé—ªå±å°ºå¯¸çš„æˆªå›¾ã€‚

```
// You can see the complete source here: [https://github.com/onderceylan/pwa-asset-generator/blob/master/src/helpers/puppets.ts](https://github.com/onderceylan/pwa-asset-generator/blob/master/src/helpers/puppets.ts)const saveImages = async (
  imageList: Image[],
  source: string,
  output: string,
  options: Options,
  browser: Browser,
): Promise<SavedImage[]> => {
  let address: string;
  let shellHtml: string;

  const logger = preLogger(saveImages.name, options);
  logger.log('Initialising puppeteer to take screenshots', 'ğŸ¤–');

  if (canNavigateTo(source)) {
    address = await url.getAddress(source, options);
  } else {
    shellHtml = await url.getShellHtml(source, options);
  }

  return Promise.all(
    imageList.map(async ({ name, width, height, scaleFactor, orientation }) => {
      const { type, quality } = options;
      const path = file.getImageSavePath(name, output, type);

      try {
        const page = await browser.newPage();
        await page.setViewport({ width, height });

        if (address) {
          await page.goto(address);
        } else {
          await page.setContent(shellHtml);
        }

        await page.screenshot({
          path,
          omitBackground: !options.opaque,
          type: options.type,
          ...(type !== 'png' ? { quality } : {}),
        });

        await page.close();

        logger.success(`Saved image ${name}`);

        return { name, width, height, scaleFactor, path, orientation };
      } catch (e) {
        logger.error(e.message);
        throw Error(`Failed to save image ${name}`);
      }
    }),
  );
};
```

æˆ‘çš„çµæ„Ÿæ¥è‡ªè¿™ç¯‡åšæ–‡æœ€åˆæ˜¯ä¸ºäº†ä¿å­˜è°ƒæ•´åçš„å“åº”å¼ç½‘é¡µçš„æˆªå›¾ï¼Œæ„Ÿè°¢å¼ ç§€å¤çš„å¯å‘ï¼

> âš¡ï¸ä¸æœ¨å¶å¸ˆä¸åŒï¼Œpwa-asset-generator ä½¿ç”¨*ç³»ç»Ÿæµè§ˆå™¨ä¼˜å…ˆ*æ–¹æ³•ï¼Œä½¿ç”¨ [chrome-launcher](https://github.com/GoogleChrome/chrome-launcher) å’Œ[æœ¨å¶å¸ˆæ ¸å¿ƒ](https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#puppeteer-vs-puppeteer-core)ï¼Œå¹¶ä¸”å®ƒåªåœ¨ chrome æ²¡æœ‰å®‰è£…åœ¨æ‰§è¡Œç¯å¢ƒä¸­æ—¶æ‰å®‰è£… chromeã€‚

ç”±äºåº“åœ¨æ— å¤´æ¨¡å¼ä¸‹ä½¿ç”¨æœ¨å¶å¸ˆï¼Œä½ çœ‹ä¸åˆ°å¹•åå‘ç”Ÿäº†ä»€ä¹ˆã€‚ä¸ºäº†ä½¿å®ƒå¯è§ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªè¿‡ç¨‹çš„æ¼”ç¤ºï¼Œé€šè¿‡ç¦ç”¨[æ“çºµæœ¨å¶è€…å¯åŠ¨é€‰é¡¹](https://pptr.dev/#?product=Puppeteer&version=v1.19.0&show=api-puppeteerlaunchoptions)ä¸­çš„`headless`æ¨¡å¼ï¼›

# æ”¯æŒ

å¦‚æœä½ å–œæ¬¢å›¾ä¹¦é¦†ï¼Œæˆ‘å¾ˆæ¬£èµä½ åœ¨ [GitHub](https://github.com/onderceylan/pwa-asset-generator) ä¸Šçš„æ˜Ÿï¼Œä»¥åŠä½ åœ¨ [Twitter](https://twitter.com/onderceylan/status/1162138795787071490?s=20) ä¸Šçš„èµ/è½¬å‘å’Œåé¦ˆã€‚å¦‚æœä½ ä¹Ÿæ˜¯ä¸€ä¸ªåšå®¢å†™æ‰‹ï¼Œé‚£ä¹ˆåœ¨ä½ çš„åšå®¢ä¸Šçœ‹åˆ°ä¸€ä¸ªå…³äºè‰¾æ»‹ç—…äººçš„å‚è€ƒä¼šå¾ˆæ£’ã€‚

[](https://github.com/onderceylan/pwa-asset-generator) [## onderceylan/pwa-èµ„äº§-ç”Ÿæˆå™¨

### åŸºäºæœ¨å¶å¸ˆçš„ PWA èµ„äº§ç”Ÿæˆå™¨ã€‚æ ¹æ® Web åº”ç”¨ç¨‹åºæ¸…å•è‡ªåŠ¨ç”Ÿæˆå›¾æ ‡å’Œé—ªå±â€¦

github.com](https://github.com/onderceylan/pwa-asset-generator) 

å¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œè¯·åœ¨ Medium å’Œ [Twitter](https://twitter.com/onderceylan) ä¸Šå…³æ³¨æˆ‘ï¼Œè®¢é˜…æˆ‘æœªæ¥çš„å¸–å­å’Œé¡¹ç›®ï¼å¹²æ¯ï¼