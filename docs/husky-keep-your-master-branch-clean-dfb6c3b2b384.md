# å“ˆå£«å¥‡â€”â€”ä¿æŒä½ çš„â€œä¸»äººâ€æ ‘æå¹²å‡€

> åŸæ–‡ï¼š<https://itnext.io/husky-keep-your-master-branch-clean-dfb6c3b2b384?source=collection_archive---------4----------------------->

æˆ‘æ•¢è‚¯å®šï¼Œæ­£åœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« çš„è®¸å¤šäººéƒ½é‡åˆ°è¿‡è¿™ç§æƒ…å†µ:ä½ æœ‰ä¸€ä¸ªé˜³å…‰æ˜åªšçš„æ—©æ™¨ï¼Œé¸Ÿå„¿åœ¨æ­Œå”±ï¼Œä½ æ¥åˆ°åŠå…¬å®¤ï¼Œä»ä¸»åº”ç”¨ç¨‹åºä¸‹è½½æœ€æ–°çš„åº”ç”¨ç¨‹åºï¼Œç»“æœåº”ç”¨ç¨‹åºåäº†ï¼Œå°±è¿™æ ·â€”â€”ä½ çš„æ—©æ™¨è¢«æ¯äº†ğŸ˜¡ã€‚

![](img/b9b88d43b42c767248634c2248bfcd00.png)

æœ‰ä¸€ä¸ªå¾ˆæ£’çš„å·¥å…·å¯ä»¥æ¶ˆé™¤è¿™ä¸ªé—®é¢˜â€”â€”[å“ˆå£«å¥‡](https://github.com/typicode/husky)ã€‚Husky è®©æ·»åŠ  git æŒ‚é’©å˜å¾—å°½å¯èƒ½ç®€å•ã€‚

> é’©å­æ˜¯å¯ä»¥æ”¾åœ¨é’©å­ç›®å½•ä¸­çš„ç¨‹åºï¼Œå¯ä»¥åœ¨ git æ‰§è¡Œçš„æŸäº›æ—¶å€™è§¦å‘åŠ¨ä½œã€‚â€”æ¥è‡ª [git æ–‡æ¡£](https://git-scm.com/docs/githooks)ã€‚

ä½¿ç”¨ huskyï¼Œæ‚¨åªéœ€åœ¨ package.json æ–‡ä»¶ä¸­æä¾›ä¸€ä¸ªè„šæœ¬ï¼Œä¾‹å¦‚ï¼Œè¯¥è„šæœ¬å°†åœ¨æäº¤æˆ–æ¨é€æ—¶è§¦å‘ã€‚

1.  å®‰è£… husky

```
npm install -D husky
```

2.æ·»åŠ [ä»»æ„æŒ‚é’©](https://git-scm.com/docs/githooks#_hooks)åˆ°ä½ çš„ package.json

```
"precommit": "your code goes here (testing, linting)..."
```

åœ¨æˆ‘çœ‹æ¥ ***prepush*** å‘½ä»¤æ˜¯æœ€æœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒä¸åƒ precommit é‚£æ ·ç»å¸¸æ‰§è¡Œï¼Œè€Œä¸”å®ƒä»ç„¶å¯ä»¥ç¡®ä¿ä¸å°†æŸåçš„ä»£ç æ¨é€åˆ°ä¸»ç¨‹åºã€‚

ä»¥ä¸‹æ˜¯æˆ‘ä»¬å›¢é˜Ÿåœ¨å½“å‰ Angular é¡¹ç›®ä¸­ä½¿ç”¨çš„é…ç½®:

```
"prepush": "run-p lint test-headless \"ng -- build --prod\" "
```

ä¸Šé¢çš„ä»£ç è¿è¡Œæ—æŒº(***" lint ":" ng lint "***)ï¼Œè¿è¡Œå•å…ƒæµ‹è¯•(***" test-headless ":" ng test-Sr-browsers chrome headless "***)ï¼Œå¹¶æ£€æŸ¥ç”Ÿäº§æ„å»ºæ²¡æœ‰å¤±è´¥(**\ " ng-build-prod \ "**)ã€‚æˆ‘è¿˜ä½¿ç”¨[NPM-run-all](https://github.com/mysticatea/npm-run-all)*æ¥å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ã€‚*

*å¸Œæœ›è¿™ç¯‡å°åšæ–‡èƒ½å¸®åŠ©æŸäººæˆä¸ºæ›´å¿«ä¹çš„å¼€å‘è€…ã€‚*