<html>
<head>
<title>How to run Kafka Streams applications on Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨Kubernetesä¸Šè¿è¡ŒKafka Streamsåº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/learn-how-to-develop-a-kafka-streams-application-for-data-processing-and-deploy-it-to-kubernetes-231d4cbb0688?source=collection_archive---------2-----------------------#2019-09-16">https://itnext.io/learn-how-to-develop-a-kafka-streams-application-for-data-processing-and-deploy-it-to-kubernetes-231d4cbb0688?source=collection_archive---------2-----------------------#2019-09-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f17d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">å¼€å‘ç”±Kafkaå’ŒKubernetesæ”¯æŒçš„æ— çŠ¶æ€æ•°æ®å¤„ç†åº”ç”¨ç¨‹åº</h2></div><p id="75ec" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™æ˜¯ä¸€ä¸ªç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„åšå®¢ç³»åˆ—ï¼Œæ¶µç›–äº†Kafka Streamsåœ¨Kubernetesä¸Šçš„åº”ç”¨</p><ul class=""><li id="d69f" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">ç¬¬1éƒ¨åˆ†â€”â€”è¿™ç¯‡åšæ–‡</li><li id="6e1b" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">ç¬¬2éƒ¨åˆ†â€” <a class="ae lp" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-kubernetes-to-deploy-stateful-kafka-streams-applications-872c77f03c3a">å¦‚ä½•åœ¨Kubernetesä¸Šè¿è¡Œæœ‰çŠ¶æ€çš„Kafka Streamsåº”ç”¨ç¨‹åº</a></li><li id="a2a4" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">ç¬¬3éƒ¨åˆ†â€” <a class="ae lp" rel="noopener ugc nofollow" target="_blank" href="/health-checks-for-kafka-streams-application-on-kubernetes-e9c5e8c21b0d">å¯¹Kubernetesä¸Šçš„Kafka Streamsåº”ç”¨ç¨‹åºè¿›è¡Œå¥åº·æ£€æŸ¥</a></li></ul></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><p id="421a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨å¦‚ä½•ä½¿ç”¨<a class="ae lp" href="https://kafka.apache.org/documentation/streams/" rel="noopener ugc nofollow" target="_blank"> Kafka Streams </a>åº“æ„å»ºæ— çŠ¶æ€æµå¤„ç†åº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨Azure (AKS) ä¸Šçš„<a class="ae lp" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Kubernetesé›†ç¾¤ä¸­è¿è¡Œå®ƒã€‚</a></p><p id="487b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å½“æ‚¨å®Œæˆæ­¤æ“ä½œæ—¶ï¼Œæ‚¨å°†äº†è§£ä»¥ä¸‹å†…å®¹:</p><ul class=""><li id="049c" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">ä»€ä¹ˆæ˜¯å¡å¤«å¡æºªæµï¼Ÿ</li><li id="c4dd" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">å¦‚ä½•åœ¨Azureä¸Šè®¾ç½®å’Œé…ç½®Dockerå®¹å™¨æ³¨å†Œè¡¨å’ŒKubernetesé›†ç¾¤</li><li id="4132" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">ä½¿ç”¨Kafkaæµçš„æµå¤„ç†é€»è¾‘çš„Javaä»£ç ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ</li><li id="6139" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">å¦‚ä½•åœ¨Kubernetesä¸Šæ„å»ºå’Œéƒ¨ç½²æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æœ€ç»ˆä½¿ç”¨Kafka CLIè¿›è¡Œæµ‹è¯•</li></ul><p id="a699" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æºä»£ç åœ¨GitHub ä¸Šçš„<a class="ae lp" href="https://github.com/abhirockzz/kafka-streams-kubernetes" rel="noopener ugc nofollow" target="_blank"/></p><blockquote class="lx ly lz"><p id="ee8a" class="kf kg ma kh b ki kj jr kk kl km ju kn mb kp kq kr mc kt ku kv md kx ky kz la ij bi translated"><em class="iq">åœ¨è¿™ç¯‡åšå®¢çš„æœ€åæœ‰ä¸€ä¸ªæ‰€æœ‰CLIå‘½ä»¤çš„åˆ—è¡¨</em></p></blockquote><p id="cbe4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæœ€ç»ˆçŠ¶æ€çš„å¿«ç…§ã€‚</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi me"><img src="../Images/e6190a8a3c3fe4630cb0b5863484cda4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LRuaKiaDsp0bqz-O.png"/></div></div></figure><h1 id="7aa3" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">å¡å¤«å¡æµæ¦‚è¿°</h1><p id="9bd4" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">å®ƒæ˜¯ä¸€ä¸ªç®€å•çš„è½»é‡çº§å®¢æˆ·ç«¯åº“ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åµŒå…¥åˆ°ä»»ä½•Java appæˆ–å¾®æœåŠ¡ä¸­ï¼Œå…¶ä¸­çš„è¾“å…¥è¾“å‡ºæ•°æ®å­˜å‚¨åœ¨<a class="ae lp" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank"> Kafka clusters </a>ä¸­ã€‚é™¤äº†Kafkaæœ¬èº«å’Œå®ƒçš„åˆ†åŒºæ¨¡å‹ä¹‹å¤–ï¼Œå®ƒå¯¹å…¶ä»–ç³»ç»Ÿæ²¡æœ‰å¤–éƒ¨ä¾èµ–æ€§ï¼Œå¯ä»¥æ°´å¹³æ‰©å±•å¤„ç†ï¼ŒåŒæ—¶ä¿æŒå¼ºå¤§çš„æ’åºä¿è¯ã€‚å®ƒæ”¯æŒå®¹é”™æœ¬åœ°çŠ¶æ€ï¼Œé‡‡ç”¨ä¸€æ¬¡ä¸€æ¡è®°å½•å¤„ç†æ¥å®ç°æ¯«ç§’çº§å¤„ç†å»¶è¿Ÿï¼Œå¹¶æä¾›å¿…è¦çš„æµå¤„ç†åŸè¯­ï¼Œä»¥åŠä¸€ä¸ª<a class="ae lp" href="https://kafka.apache.org/23/documentation/streams/developer-guide/dsl-api.html" rel="noopener ugc nofollow" target="_blank">é«˜çº§æµDSL </a>å’Œä¸€ä¸ª<a class="ae lp" href="https://kafka.apache.org/23/documentation/streams/developer-guide/processor-api.html" rel="noopener ugc nofollow" target="_blank">ä½çº§å¤„ç†å™¨API </a>ã€‚â€œçŠ¶æ€å­˜å‚¨â€å’Œâ€œäº¤äº’å¼æŸ¥è¯¢â€çš„ç»„åˆå…è®¸æ‚¨ä»åº”ç”¨ç¨‹åºå¤–éƒ¨åˆ©ç”¨åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚</p><h1 id="0c95" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">å…ˆå†³æ¡ä»¶:</h1><p id="2e40" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">å¦‚æœä½ è¿˜æ²¡æœ‰ï¼Œè¯·<a class="ae lp" href="https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å®‰è£…Azure CLI </a>å’Œ<a class="ae lp" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" rel="noopener ugc nofollow" target="_blank"> kubectl </a>ã€‚æµå¤„ç†åº”ç”¨ç¨‹åºæ˜¯ç”¨Javaç¼–å†™çš„ï¼Œä½¿ç”¨<a class="ae lp" href="https://maven.apache.org/install.html" rel="noopener ugc nofollow" target="_blank"> Maven </a>ï¼Œä½ è¿˜éœ€è¦<a class="ae lp" href="https://docs.docker.com/install/" rel="noopener ugc nofollow" target="_blank"> Docker </a>æ¥æ„å»ºåº”ç”¨ç¨‹åºå®¹å™¨æ˜ åƒã€‚</p><blockquote class="lx ly lz"><p id="c943" class="kf kg ma kh b ki kj jr kk kl km ju kn mb kp kq kr mc kt ku kv md kx ky kz la ij bi translated"><em class="iq">æœ¬æ•™ç¨‹å‡è®¾æ‚¨æœ‰ä¸€ä¸ªKafkaé›†ç¾¤ï¼Œå¯ä»¥ä»Azureä¸Šçš„Kubernetesé›†ç¾¤è®¿é—®è¯¥é›†ç¾¤</em></p></blockquote><h1 id="8125" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">AKSé›†ç¾¤è®¾ç½®</h1><p id="77df" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">ä½ åªéœ€è¦ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥åœ¨Azureä¸Šå»ºç«‹ä¸€ä¸ªKubernetesé›†ç¾¤ã€‚ä½†æ˜¯ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªèµ„æºç»„</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="7204" class="ns mr iq no b gy nt nu l nv nw">export AZURE_SUBSCRIPTION_ID=[to be filled]<br/>export AZURE_RESOURCE_GROUP=[to be filled]<br/>export AZURE_REGION=[to be filled] (e.g. southeastasia)</span></pre><p id="d5ad" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åˆ‡æ¢åˆ°æ‚¨çš„å¥—é¤å¹¶è°ƒç”¨<code class="fe nx ny nz no b">az group create</code></p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="148d" class="ns mr iq no b gy nt nu l nv nw">az account set -s $AZURE_SUBSCRIPTION_ID<br/>az group create -l $AZURE_REGION -n $AZURE_RESOURCE_GROUP</span></pre><p id="6895" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‚¨ç°åœ¨å¯ä»¥è°ƒç”¨<code class="fe nx ny nz no b">az aks create</code>æ¥åˆ›å»ºæ–°çš„é›†ç¾¤</p><blockquote class="lx ly lz"><p id="4602" class="kf kg ma kh b ki kj jr kk kl km ju kn mb kp kq kr mc kt ku kv md kx ky kz la ij bi translated">ä¸ºäº†ç®€å•èµ·è§ï¼Œä¸‹é¢çš„å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤ã€‚æŒ‰ç…§ä½ çš„è¦æ±‚éšæ„æ”¹å˜è§„æ ¼</p></blockquote><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="041a" class="ns mr iq no b gy nt nu l nv nw">export AKS_CLUSTER_NAME=[to be filled]</span><span id="a470" class="ns mr iq no b gy oa nu l nv nw">az aks create --resource-group $AZURE_RESOURCE_GROUP --name $AKS_CLUSTER_NAME --node-count 1 --node-vm-size Standard_B2s --node-osdisk-size 30 --generate-ssh-keys</span></pre><p id="8dd5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½¿ç”¨<code class="fe nx ny nz no b">az aks get-credentials</code>è·å–AKSé›†ç¾¤å‡­è¯â€”â€”å› æ­¤ï¼Œ<code class="fe nx ny nz no b">kubectl</code>ç°åœ¨å°†æŒ‡å‘æ‚¨çš„æ–°é›†ç¾¤ã€‚ä½ å¯ä»¥è¯å®è¿™ä¸€ç‚¹</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="fe7f" class="ns mr iq no b gy nt nu l nv nw">az aks get-credentials --resource-group $AZURE_RESOURCE_GROUP --name $AKS_CLUSTER_NAME<br/>kubectl get nodes</span></pre><blockquote class="lx ly lz"><p id="bca8" class="kf kg ma kh b ki kj jr kk kl km ju kn mb kp kq kr mc kt ku kv md kx ky kz la ij bi translated"><em class="iq">å¦‚æœä½ æœ‰å…´è¶£å­¦ä¹ Kuberneteså’ŒContainersä½¿ç”¨</em> <a class="ae lp" href="https://azure.microsoft.com/services/kubernetes-service/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Azure </em> </a> <em class="iq">ï¼Œåªéœ€</em> <a class="ae lp" href="https://azure.microsoft.com/en-us/free/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">åˆ›å»ºä¸€ä¸ª</em> <strong class="kh ir"> <em class="iq">å…è´¹</em> </strong> <em class="iq">è´¦å·</em> </a> <em class="iq">å°±å¯ä»¥å¼€å§‹äº†ï¼ä¸€ä¸ªå¥½çš„èµ·ç‚¹æ˜¯ä½¿ç”¨æ–‡æ¡£ä¸­çš„</em> <a class="ae lp" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">å¿«é€Ÿå…¥é—¨ã€æ•™ç¨‹å’Œä»£ç ç¤ºä¾‹</em> </a> <em class="iq">æ¥ç†Ÿæ‚‰è¯¥æœåŠ¡ã€‚æˆ‘ä¹Ÿå¼ºçƒˆæ¨èæŸ¥çœ‹ä¸€ä¸‹</em> <a class="ae lp" href="https://azure.microsoft.com/resources/kubernetes-learning-path/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> 50å¤©Kuberneteså­¦ä¹ è·¯å¾„</em> </a> <em class="iq">ã€‚é«˜çº§ç”¨æˆ·å¯èƒ½å¸Œæœ›å‚è€ƒ</em> <a class="ae lp" href="https://docs.microsoft.com/azure/aks/best-practices?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Kubernetesæœ€ä½³å®è·µ</em> </a> <em class="iq">æˆ–è§‚çœ‹ä¸€äº›</em> <a class="ae lp" href="https://azure.microsoft.com/resources/videos/index/?services=kubernetes-service&amp;WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">è§†é¢‘</em> </a> <em class="iq">ä»¥äº†è§£æ¼”ç¤ºã€ä¸»è¦åŠŸèƒ½å’ŒæŠ€æœ¯ä¼šè®®ã€‚</em></p></blockquote><h1 id="83c0" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">è®¾ç½®Azureå®¹å™¨æ³¨å†Œè¡¨</h1><p id="b359" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">ç®€å•åœ°è¯´ï¼Œ<a class="ae lp" href="https://azure.microsoft.com/services/container-registry/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Container Registry </a>(ç®€ç§°<code class="fe nx ny nz no b">ACR</code>)æ˜¯äº‘ä¸­çš„ä¸€ä¸ªæ‰˜ç®¡ç§æœ‰Dockeræ³¨å†Œè¡¨ï¼Œå®ƒå…è®¸æ‚¨ä¸ºæ‰€æœ‰ç±»å‹çš„å®¹å™¨éƒ¨ç½²æ„å»ºã€å­˜å‚¨å’Œç®¡ç†æ˜ åƒã€‚</p><p id="ca74" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é¦–å…ˆåˆ›å»ºä¸€ä¸ªACRå®ä¾‹</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="dec4" class="ns mr iq no b gy nt nu l nv nw">export ACR_NAME=[to be filled]<br/>az acr create --resource-group $AZURE_RESOURCE_GROUP --name $ACR_NAME --sku Basic</span></pre><blockquote class="lx ly lz"><p id="3ced" class="kf kg ma kh b ki kj jr kk kl km ju kn mb kp kq kr mc kt ku kv md kx ky kz la ij bi translated"><em class="iq">æœ‰æ•ˆçš„SKUå€¼â€”â€”</em><code class="fe nx ny nz no b"><em class="iq">Basic</em></code><em class="iq"/><code class="fe nx ny nz no b"><em class="iq">Classic</em></code><em class="iq"/><code class="fe nx ny nz no b"><em class="iq">Premium</em></code><em class="iq"/><code class="fe nx ny nz no b"><em class="iq">Standard</em></code><em class="iq">ã€‚å‚è§</em> <a class="ae lp" href="https://docs.microsoft.com/cli/azure/acr?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-acr-create" rel="noopener ugc nofollow" target="_blank"> <em class="iq">å‘½ä»¤æ–‡æ¡£</em> </a></p></blockquote><h1 id="d427" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">é…ç½®ACRä»¥ä½¿ç”¨AKS</h1><p id="c75e" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">è¦è®¿é—®å­˜å‚¨åœ¨ACRä¸­çš„å›¾åƒï¼Œæ‚¨å¿…é¡»æˆäºˆAKSæœåŠ¡ä¸»ä½“ä»ACRæå–å›¾åƒçš„æ­£ç¡®æƒé™ã€‚</p><p id="764c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è·å–ä¸æ‚¨çš„AKSé›†ç¾¤ç›¸å…³è”çš„æœåŠ¡ä¸»ä½“çš„<code class="fe nx ny nz no b">appId</code></p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="df83" class="ns mr iq no b gy nt nu l nv nw">AKS_SERVICE_PRINCIPAL_APPID=$(az aks show --name $AKS_CLUSTER_NAME --resource-group $AZURE_RESOURCE_GROUP --query servicePrincipalProfile.clientId -o tsv)</span></pre><p id="acfc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æŸ¥æ‰¾ACRèµ„æºID</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="9aef" class="ns mr iq no b gy nt nu l nv nw">ACR_RESOURCE_ID=$(az acr show --resource-group $AZURE_RESOURCE_GROUP --name $ACR_NAME --query "id" --output tsv)</span></pre><p id="c70b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆäºˆAKSæœåŠ¡ä¸»ä½“<code class="fe nx ny nz no b">acrpull</code>æƒé™</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="54db" class="ns mr iq no b gy nt nu l nv nw">az role assignment create --assignee $AKS_SERVICE_PRINCIPAL_APPID --scope $ACR_RESOURCE_ID --role acrpull</span></pre><p id="e089" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å…³äºè¿™ä¸ªè¯é¢˜çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·çœ‹æˆ‘ä¹‹å‰çš„ä¸€ç¯‡åšå®¢</p><p id="6cd8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¥½äº†ï¼Œæˆ‘ä»¬çš„AKSé›†ç¾¤å’ŒACRå·²ç»å¯ä»¥ä½¿ç”¨äº†ï¼è®©æˆ‘ä»¬æ¢ä¸ªè¯é¢˜ï¼Œçœ‹çœ‹Kafka Streamsä»£ç â€”â€”å®ƒå¾ˆç®€æ´ï¼Œä¸ºäº†æœ¬æ•™ç¨‹çš„ç›®çš„ï¼Œå®ƒä¸€ç›´ä¿æŒç®€å•ã€‚</p><h1 id="a538" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">æµå¤„ç†ä»£ç </h1><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/f2aa1ef2d50a748bc641e452daa9b81a.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/0*RYANRBdkIpt6Lq3O.gif"/></div></figure><p id="e11b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¤„ç†ç®¡é“åšçš„äº‹æƒ…éå¸¸ç®€å•ã€‚å®ƒåˆ©ç”¨äº†<a class="ae lp" href="https://kafka.apache.org/23/documentation/streams/developer-guide/dsl-api.html" rel="noopener ugc nofollow" target="_blank">é«˜çº§æµDSL </a> API:</p><ul class=""><li id="59fe" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">ä»è¾“å…¥/æºKafkaä¸»é¢˜æ¥æ”¶å•è¯</li><li id="78e4" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">å°†å…¶è½¬æ¢ä¸ºå¤§å†™</li><li id="dfe1" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">å°†è®°å½•å­˜å‚¨åœ¨è¾“å‡ºKafkaä¸»é¢˜(æ¥æ”¶å™¨)ä¸­</li></ul><p id="645b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¯·ä¸è¦å¿˜è®°ï¼Œåœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæœ€æ–°çš„Kafka Streamsåº“ç‰ˆæœ¬æ˜¯<code class="fe nx ny nz no b">2.3.0</code>ï¼Œè¿™å°±æ˜¯è¿™ä¸ªåº”ç”¨ç¨‹åºæ‰€ä½¿ç”¨çš„</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="f838" class="ns mr iq no b gy nt nu l nv nw">    &lt;dependency&gt;<br/>        &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;<br/>        &lt;artifactId&gt;kafka-streams&lt;/artifactId&gt;<br/>        &lt;version&gt;2.3.0&lt;/version&gt;<br/>    &lt;/dependency&gt;</span></pre><p id="5d2b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬ä»<code class="fe nx ny nz no b">StreamsBuilder</code>çš„ä¸€ä¸ªå®ä¾‹å¼€å§‹ï¼Œè°ƒç”¨å®ƒçš„<code class="fe nx ny nz no b">stream</code>æ–¹æ³•æ¥æŒ‚é’©æºä¸»é¢˜(åç§°:<code class="fe nx ny nz no b">lower-case</code>)ã€‚æˆ‘ä»¬å¾—åˆ°çš„æ˜¯ä¸€ä¸ª<code class="fe nx ny nz no b"><a class="ae lp" href="https://kafka.apache.org/23/javadoc/org/apache/kafka/streams/kstream/KStream.html" rel="noopener ugc nofollow" target="_blank">KStream</a></code> <a class="ae lp" href="https://kafka.apache.org/23/javadoc/org/apache/kafka/streams/kstream/KStream.html" rel="noopener ugc nofollow" target="_blank">å¯¹è±¡</a>ï¼Œå®ƒè¡¨ç¤ºå‘é€åˆ°ä¸»é¢˜<code class="fe nx ny nz no b">lower-case</code>çš„è¿ç»­è®°å½•æµã€‚è¯·æ³¨æ„ï¼Œè¾“å…¥è®°å½•åªæ˜¯é”®å€¼å¯¹ã€‚</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="9e19" class="ns mr iq no b gy nt nu l nv nw">StreamsBuilder builder = new StreamsBuilder();<br/>    KStream&lt;String, String&gt; lowerCaseStrings = builder.stream(INPUT_TOPIC);</span></pre><p id="3497" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¥½äº†ï¼Œæˆ‘ä»¬æœ‰äº†å¯¹è±¡å½¢å¼çš„è®°å½•â€”â€”æˆ‘ä»¬è¯¥æ€ä¹ˆå¤„ç†å®ƒä»¬å‘¢ï¼Ÿæˆ‘ä»¬å¦‚ä½•å¤„ç†å®ƒä»¬ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰€åšçš„å°±æ˜¯åº”ç”¨ä¸€ä¸ªç®€å•çš„<code class="fe nx ny nz no b">transformation</code>ï¼Œä½¿ç”¨<code class="fe nx ny nz no b">mapValues</code>å°†è®°å½•(å€¼ï¼Œè€Œä¸æ˜¯é”®)è½¬æ¢æˆå¤§å†™å­—æ¯ã€‚è¿™ç»™äº†æˆ‘ä»¬å¦ä¸€ä¸ª<code class="fe nx ny nz no b">KStream</code>å®ä¾‹- <code class="fe nx ny nz no b">upperCaseStrings</code>ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨<code class="fe nx ny nz no b">to</code>æ–¹æ³•å°†å®ƒçš„è®°å½•æ¨é€åˆ°ä¸€ä¸ªåä¸º<code class="fe nx ny nz no b">upper-case</code>çš„æ¥æ”¶å™¨ä¸»é¢˜ã€‚</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="f3a1" class="ns mr iq no b gy nt nu l nv nw">KStream&lt;String, String&gt; upperCaseStrings = lowerCaseStrings.mapValues(new ValueMapper&lt;String, String&gt;() {<br/>        @Override<br/>        public String apply(String str) {<br/>            return str.toUpperCase();<br/>        }<br/>    });<br/>    upperCaseStrings.to(OUTPUT_TOPIC);</span></pre><p id="0f83" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™å°±æ˜¯å»ºç«‹æµç¨‹å’Œå®šä¹‰é€»è¾‘çš„å…¨éƒ¨å†…å®¹ã€‚æˆ‘ä»¬ä½¿ç”¨<code class="fe nx ny nz no b">StreamsBuilder</code>ä¸­çš„<code class="fe nx ny nz no b">build</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ª<code class="fe nx ny nz no b">Topology</code>å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªå¯¹è±¡åˆ›å»ºä¸€ä¸ª<code class="fe nx ny nz no b"><a class="ae lp" href="https://kafka.apache.org/23/javadoc/org/apache/kafka/streams/KafkaStreams.html" rel="noopener ugc nofollow" target="_blank">KafkaStreams</a></code>å®ä¾‹ï¼Œå®ƒæ˜¯æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæœ¬èº«çš„è¡¨ç¤ºã€‚æˆ‘ä»¬ä½¿ç”¨<code class="fe nx ny nz no b">start</code>æ–¹æ³•å¼€å§‹æµå¤„ç†</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="88b3" class="ns mr iq no b gy nt nu l nv nw">Topology topology = builder.build();<br/>    KafkaStreams streamsApp = new KafkaStreams(topology, getKafkaStreamsConfig());<br/>    streamsApp.start();</span></pre><p id="d4e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe nx ny nz no b">getKafkaStreamsConfig()</code>åªæ˜¯ä¸€ä¸ªå¸®åŠ©å™¨æ–¹æ³•ï¼Œå®ƒåˆ›å»ºä¸€ä¸ª<code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html?is-external=true" rel="noopener ugc nofollow" target="_blank">Properties</a></code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«Kafka Streamsçš„ç‰¹å®šé…ç½®ï¼ŒåŒ…æ‹¬Kafka brokerç«¯ç‚¹ç­‰ã€‚</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="fa17" class="ns mr iq no b gy nt nu l nv nw">static Properties getKafkaStreamsConfig() {<br/>    String kafkaBroker = System.getenv().get(KAFKA_BROKER_ENV_VAR);<br/>    Properties configurations = new Properties();<br/>    configurations.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBroker + ":9092");<br/>    configurations.put(StreamsConfig.APPLICATION_ID_CONFIG, APP_ID);<br/>    configurations.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());<br/>    configurations.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());<br/>    configurations.put(StreamsConfig.REQUEST_TIMEOUT_MS_CONFIG, "20000");<br/>    configurations.put(StreamsConfig.RETRY_BACKOFF_MS_CONFIG, "500");</span><span id="2a8a" class="ns mr iq no b gy oa nu l nv nw">    return configurations;<br/>}</span></pre><p id="b773" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä»£ç åˆ°æ­¤ä¸ºæ­¢ã€‚æ˜¯æ—¶å€™éƒ¨ç½²äº†ï¼</p><h1 id="ba0a" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">ä»æ‚¨çš„ç¬”è®°æœ¬ç”µè„‘åˆ°äº‘ä¸­çš„Dockeræ³¨å†Œè¡¨</h1><p id="61d3" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">å…‹éš†GitHub repoï¼Œåˆ‡æ¢åˆ°æ­£ç¡®çš„ç›®å½•å¹¶æ„å»ºåº”ç”¨ç¨‹åºJAR</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="5a1f" class="ns mr iq no b gy nt nu l nv nw">git clone https://github.com/abhirockzz/kafka-streams-kubernetes<br/>cd kafka-streams-kubernetes<br/>mvn clean isntall</span></pre><blockquote class="lx ly lz"><p id="9cd2" class="kf kg ma kh b ki kj jr kk kl km ju kn mb kp kq kr mc kt ku kv md kx ky kz la ij bi translated"><em class="iq">ä½ åº”è¯¥çœ‹åˆ°</em> <code class="fe nx ny nz no b"><em class="iq">target</em></code> <em class="iq">ç›®å½•ä¸‹çš„</em> <code class="fe nx ny nz no b"><em class="iq">kstreams-lower-to-upper-1.0.jar</em></code> <em class="iq"/></p></blockquote><p id="4f87" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™æ˜¯æˆ‘ä»¬çš„æµå¤„ç†åº”ç”¨ç¨‹åºçš„<code class="fe nx ny nz no b">Dockerfile</code></p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="66c6" class="ns mr iq no b gy nt nu l nv nw">FROM openjdk:8-jre<br/>WORKDIR /<br/>COPY target/kstreams-lower-to-upper-1.0.jar /<br/>CMD ["java", "-jar","kstreams-lower-to-upper-1.0.jar"]</span></pre><p id="6d5d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬ç°åœ¨å°†æ„å»ºä¸€ä¸ªDockeræ˜ åƒâ€¦</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="f825" class="ns mr iq no b gy nt nu l nv nw">export DOCKER_IMAGE=kstreams-lower-to-upper:v1<br/>export ACR_SERVER=$ACR_NAME.azurecr.io<br/>docker build -t $DOCKER_IMAGE .</span></pre><p id="7b7b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">â€¦å¹¶å°†å…¶æ¨é€åˆ°<a class="ae lp" href="https://azure.microsoft.com/services/container-registry/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azureå®¹å™¨æ³¨å†Œè¡¨</a></p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="f983" class="ns mr iq no b gy nt nu l nv nw">az acr login --name $ACR_NAME<br/>docker tag $DOCKER_IMAGE $ACR_SERVER/$DOCKER_IMAGE<br/>docker push $ACR_SERVER/$DOCKER_IMAGE</span></pre><p id="b597" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å®Œæˆåï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="fe nx ny nz no b">az acr repository list</code>è¿›è¡Œç¡®è®¤</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="bbee" class="ns mr iq no b gy nt nu l nv nw">az acr repository list --name $ACR_NAME --output table</span></pre><h1 id="3a4b" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">éƒ¨ç½²åˆ°Kubernetes</h1><p id="47b8" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªæ— çŠ¶æ€å¤„ç†å™¨ï¼Œæˆ‘ä»¬å°†æŠŠå®ƒéƒ¨ç½²ä¸ºä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå®ä¾‹(å‰¯æœ¬)çš„Kubernetes <code class="fe nx ny nz no b">Deployment</code>ã€‚</p><p id="3313" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœæ‚¨å¯¹ç®¡ç†æ— çŠ¶æ€åº”ç”¨ç¨‹åºçš„åŸç”ŸKubernetesåŸè¯­æ„Ÿå…´è¶£ï¼Œè¯·æŸ¥çœ‹è¿™ä¸ªåšå®¢</p><p id="aded" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ–‡ä»¶<code class="fe nx ny nz no b">kstreams-deployment.yaml</code>åŒ…å«è§„èŒƒ<code class="fe nx ny nz no b">Deployment</code>ï¼Œå®ƒå°†ä»£è¡¨æˆ‘ä»¬çš„æµå¤„ç†åº”ç”¨ç¨‹åºã€‚æ‚¨éœ€è¦ä¿®æ”¹å®ƒï¼Œæ ¹æ®æ‚¨çš„ç¯å¢ƒæ·»åŠ ä»¥ä¸‹ä¿¡æ¯</p><ul class=""><li id="d726" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">Azureå®¹å™¨æ³¨å†Œå(æ‚¨ä¹‹å‰ä½¿ç”¨<code class="fe nx ny nz no b">ACR_NAME</code>æŒ‡å®šçš„)</li><li id="0457" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">æ‚¨çš„Kafkaç»çºªäººçš„ç«¯ç‚¹ï¼Œä¾‹å¦‚<code class="fe nx ny nz no b">my-kafka:9092</code></li></ul><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="ad4c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">éƒ¨ç½²å’Œç¡®è®¤</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="e8dc" class="ns mr iq no b gy nt nu l nv nw">kubectl apply -f kstreams-deployment.yaml<br/>kubectl get pods -l=app=kstream-lower-to-upper</span></pre><p id="05c6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸¤ä¸ªpodå¤„äº<code class="fe nx ny nz no b">Running</code>çŠ¶æ€</p><h1 id="f99d" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">å…³é”®æ—¶åˆ»åˆ°äº†ã€‚</h1><p id="a4a0" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">æ˜¯æ—¶å€™æµ‹è¯•æˆ‘ä»¬çš„ç«¯åˆ°ç«¯æµç¨‹äº†ã€‚æ€»ç»“ä¸€ä¸‹:</p><ul class=""><li id="f920" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">æ‚¨å°†åœ¨æœ¬åœ°ä½¿ç”¨Kafka CLIå‘è¾“å…¥Kafkaä¸»é¢˜(<code class="fe nx ny nz no b">lower-case</code>)ç”Ÿæˆæ•°æ®</li><li id="363f" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">AKSä¸­çš„æµå¤„ç†åº”ç”¨ç¨‹åºå°†æ…åŠ¨æ•°æ®ï¼Œå¹¶å°†å…¶æ”¾å›å¦ä¸€ä¸ªKafkaä¸»é¢˜</li><li id="910a" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">æ‚¨çš„æœ¬åœ°åŸºäºKafka CLIçš„æ¶ˆè´¹è€…è¿›ç¨‹å°†ä»è¾“å‡ºä¸»é¢˜(<code class="fe nx ny nz no b">upper-case</code>)ä¸­è·å–è¯¥æ•°æ®</li></ul><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/b08767a9ef36c733e8b305daba9b6fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*2R1YLU5N_ir6Cd2u.gif"/></div></figure><p id="339f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è®©æˆ‘ä»¬å…ˆåˆ›é€ å¡å¤«å¡çš„ä¸»é¢˜</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="05c2" class="ns mr iq no b gy nt nu l nv nw">export KAFKA_HOME=[kafka installation directory]<br/>export INPUT_TOPIC=lower-case<br/>export OUTPUT_TOPIC=upper-case</span><span id="ed55" class="ns mr iq no b gy oa nu l nv nw">$KAFKA_HOME/bin/kafka-topics.sh --create --topic $INPUT_TOPIC --partitions 2 --replication-factor 1 --bootstrap-server $KAFKA_BROKER<br/>$KAFKA_HOME/bin/kafka-topics.sh --create --topic $OUTPUT_TOPIC --partitions 2 --replication-factor 1 --bootstrap-server $KAFKA_BROKER</span><span id="0b4a" class="ns mr iq no b gy oa nu l nv nw">$KAFKA_HOME/bin/kafka-topics.sh --list --bootstrap-server $KAFKA_BROKER</span></pre><h1 id="d207" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">å¯åŠ¨æ¶ˆè´¹è€…æµç¨‹</h1><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="4ad4" class="ns mr iq no b gy nt nu l nv nw">export KAFKA_HOME=[kafka installation directory]<br/>export KAFKA_BROKER=[kafka broker e.g. localhost:9092]<br/>export OUTPUT_TOPIC=upper-case</span><span id="2d59" class="ns mr iq no b gy oa nu l nv nw">$KAFKA_HOME/bin/kafka-console-consumer.sh --bootstrap-server <br/>$KAFKA_BROKER --topic $OUTPUT_TOPIC --from-beginning</span></pre><h1 id="ec08" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">å¯åŠ¨ç”Ÿäº§è€…è¿›ç¨‹(ä¸åŒçš„ç»ˆç«¯)</h1><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="7e47" class="ns mr iq no b gy nt nu l nv nw">export KAFKA_HOME=[kafka installation directory]<br/>export KAFKA_BROKER=[kafka broker e.g. localhost:9092]<br/>export INPUT_TOPIC=lower-case</span><span id="753c" class="ns mr iq no b gy oa nu l nv nw">$KAFKA_HOME/bin/kafka-console-producer.sh --broker-list $KAFKA_BROKER --topic $INPUT_TOPIC</span></pre><p id="e685" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªæç¤ºï¼Œç„¶åæ‚¨å¯ä»¥å¼€å§‹è¾“å…¥å€¼ï¼Œä¾‹å¦‚</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="9638" class="ns mr iq no b gy nt nu l nv nw">&gt; foo<br/>&gt; bar<br/>&gt; baz<br/>&gt; john<br/>&gt; doe</span></pre><p id="0ead" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç­‰å¾…å‡ ç§’é’Ÿï¼Œæ£€æŸ¥ç»ˆç«¯çª—å£ã€‚ä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸Šè®°å½•çš„å¤§å†™å½¢å¼ï¼Œå³<code class="fe nx ny nz no b">FOO</code>ã€<code class="fe nx ny nz no b">BAR</code>ç­‰ã€‚</p><h1 id="5f49" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">æ‰“æ‰«</h1><p id="bd84" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">æ¸…ç†AKSé›†ç¾¤ã€ACRå®ä¾‹å’Œç›¸å…³èµ„æº</p><pre class="mf mg mh mi gt nn no np nq aw nr bi"><span id="b626" class="ns mr iq no b gy nt nu l nv nw">az group delete --name $AZURE_RESOURCE_GROUP --yes --no-wait</span></pre><p id="eee9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">(å¦‚æ‰¿è¯ºçš„é‚£æ ·)</p><h1 id="1cf7" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">æ–¹ä¾¿çš„å‘½ä»¤åˆ—è¡¨..</h1><p id="1d0e" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">..ä¾›æ‚¨å‚è€ƒ</p><h2 id="0390" class="ns mr iq bd ms of og dn mw oh oi dp na ko oj ok nc ks ol om ne kw on oo ng op bi translated">è“è‰²åº“ä¼¯å†…ç‰¹æœåŠ¡</h2><ul class=""><li id="f93f" class="lb lc iq kh b ki ni kl nj ko oq ks or kw os la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/aks?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-aks-create" rel="noopener ugc nofollow" target="_blank">az aks create</a></code> -åˆ›å»ºæ–°çš„æ‰˜ç®¡Kubernetesé›†ç¾¤</li><li id="dbbc" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/aks?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-aks-get-credentials" rel="noopener ugc nofollow" target="_blank">az aks get-credentials</a></code> -è·å–å—ç®¡Kubernetesé›†ç¾¤çš„è®¿é—®å‡­è¯</li><li id="74be" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/aks?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-aks-show" rel="noopener ugc nofollow" target="_blank">az aks show</a></code> -æ˜¾ç¤ºè¢«ç®¡ç†çš„Kubernetesé›†ç¾¤çš„è¯¦ç»†ä¿¡æ¯</li></ul><h2 id="95cd" class="ns mr iq bd ms of og dn mw oh oi dp na ko oj ok nc ks ol om ne kw on oo ng op bi translated">Azureå®¹å™¨æ³¨å†Œè¡¨</h2><ul class=""><li id="875e" class="lb lc iq kh b ki ni kl nj ko oq ks or kw os la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/acr?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-acr-create" rel="noopener ugc nofollow" target="_blank">az acr create</a></code> -åˆ›å»ºAzureå®¹å™¨æ³¨å†Œä¸­å¿ƒ</li><li id="e885" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/acr?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-acr-show" rel="noopener ugc nofollow" target="_blank">az acr show</a></code> -è·å–Azureå®¹å™¨æ³¨å†Œè¡¨çš„è¯¦ç»†ä¿¡æ¯</li><li id="769b" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/acr?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-acr-login" rel="noopener ugc nofollow" target="_blank">az acr login</a></code> -é€šè¿‡Docker CLIç™»å½•Azureå®¹å™¨æ³¨å†Œä¸­å¿ƒ</li><li id="7f41" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/acr/repository?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-acr-repository-list" rel="noopener ugc nofollow" target="_blank">az acr repository list</a></code> -åœ¨Azureå®¹å™¨æ³¨å†Œè¡¨ä¸­åˆ—å‡ºå­˜å‚¨åº“ã€‚</li></ul><h2 id="810a" class="ns mr iq bd ms of og dn mw oh oi dp na ko oj ok nc ks ol om ne kw on oo ng op bi translated">é€šç”¨å‘½ä»¤</h2><ul class=""><li id="de94" class="lb lc iq kh b ki ni kl nj ko oq ks or kw os la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/account?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-account-set" rel="noopener ugc nofollow" target="_blank">az account set</a></code> -å°†è®¢é˜…è®¾ç½®ä¸ºå½“å‰æ´»åŠ¨çš„è®¢é˜…</li><li id="e6e7" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/group?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-group-create" rel="noopener ugc nofollow" target="_blank">az group create</a></code> -åˆ›å»ºæ–°çš„èµ„æºç»„</li><li id="62b8" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe nx ny nz no b"><a class="ae lp" href="https://docs.microsoft.com/cli/azure/role/assignment?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-role-assignment-create" rel="noopener ugc nofollow" target="_blank">az role assignment create</a></code> -ä¸ºç”¨æˆ·ã€ç»„æˆ–æœåŠ¡ä¸»ä½“åˆ›å»ºæ–°çš„è§’è‰²åˆ†é…</li></ul><p id="d91a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œè¯·å–œæ¬¢å¹¶å…³æ³¨ï¼å¾ˆé«˜å…´é€šè¿‡<a class="ae lp" href="https://twitter.com/abhi_tweeter" rel="noopener ugc nofollow" target="_blank"> @abhi_tweeter </a>è·å¾—åé¦ˆï¼Œæˆ–è€…å‘è¡¨è¯„è®º:-)</p><div class="ot ou gp gr ov ow"><a href="https://twitter.com/abhi_tweeter" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd ir gy z fp pb fr fs pc fu fw ip bi translated">é˜¿å¸ƒèˆå…‹</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">Abhishekçš„æœ€æ–°æ¨æ–‡(@abhi_tweeter)ã€‚äº‘å¼€å‘è€…ğŸ¥‘@Microsoft @azureadvocates |â€¦</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">twitter.com</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk mo ow"/></div></div></a></div></div></div>    
</body>
</html>