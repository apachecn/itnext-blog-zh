<html>
<head>
<title>Azure Functions tip: making sense of GSON JsonSyntaxException</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azureå‡½æ•°æç¤º:ç†è§£GSON JsonSyntaxException</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/azure-functions-tip-making-sense-of-gson-jsonsyntaxexception-45d7039338c9?source=collection_archive---------7-----------------------#2020-03-16">https://itnext.io/azure-functions-tip-making-sense-of-gson-jsonsyntaxexception-45d7039338c9?source=collection_archive---------7-----------------------#2020-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/be6d9eccd3f739cf2e9e8216780902e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sll2fYXkkP_IL9sm6dPWzA.png"/></div></div></figure><p id="337e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘æ­£åœ¨ä½¿ç”¨<a class="ae kw" href="https://docs.microsoft.com/azure/event-hubs/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Event Hubs </a> triggerå¼€å‘<a class="ae kw" href="https://docs.microsoft.com/azure/azure-functions/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azureå‡½æ•°</a>ï¼Œçªç„¶å‡ºç°äº†è¿™ä¸ªé”™è¯¯:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="797d" class="lg lh iq lc b gy li lj l lk ll">Result: Failure<br/>Exception: IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2 path $<br/>Stack: <strong class="lc ir">com.google.gson.JsonSyntaxException</strong>: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was BEGIN_ARRAY at line 1 column 2 path $<br/>	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:226)<br/>	at com.google.gson.Gson.fromJson(Gson.java:927)<br/>	at com.google.gson.Gson.fromJson(Gson.java:892)<br/>	at com.google.gson.Gson.fromJson(Gson.java:841)</span><span id="fda5" class="lg lh iq lc b gy lm lj l lk ll">.... //omitted for brevity</span></pre><h1 id="2bd0" class="ln lh iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">ä¼šå‡ºä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</h1><h2 id="63f0" class="lg lh iq bd lo mk ml dn ls mm mn dp lw kj mo mp ma kn mq mr me kr ms mt mi mu bi translated"><strong class="ak">TLï¼›åšå£«</strong></h2><p id="54e8" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">å½“ä½¿ç”¨Azureå‡½æ•°çš„<a class="ae kw" href="https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">äº‹ä»¶ä¸­å¿ƒè§¦å‘å™¨æ—¶ï¼Œè¯·ä¸è¦å¿˜è®°ä½¿ç”¨æ­£ç¡®çš„åŸºæ•°ï¼Œå¦‚æœä½ è¿™æ ·åšäº†ï¼Œå¸Œæœ›ä½ å¶ç„¶çœ‹åˆ°è¿™ç¯‡åšæ–‡ï¼Œå¦‚æœä½ <code class="fe na nb nc lc b">Google it on Bing!</code>ï¼›-)</a></p><h2 id="7768" class="lg lh iq bd lo mk ml dn ls mm mn dp lw kj mo mp ma kn mq mr me kr ms mt mi mu bi translated">(ç¨å¾®)é•¿ä¸€ç‚¹çš„ç‰ˆæœ¬â€¦</h2><p id="ac96" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">è¿™ä¸ªé”™è¯¯å¯¹æˆ‘æ¥è¯´æ˜¯æ–°çš„ã€‚ç»è¿‡è¿›ä¸€æ­¥åçœï¼Œæˆ‘æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ä¸Azure Functionså¹³å°ä¸èƒ½è°ƒç”¨å‡½æ•°æ–¹æ³•æœ¬èº«æœ‰å…³(ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸å‡½æ•°é€»è¾‘æœ¬èº«æ— å…³)</p><blockquote class="nd ne nf"><p id="bc24" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated">é¡ºä¾¿è¯´ä¸€å¥ï¼Œæœ‰å¾ˆå¤šç‰¹æ€§å¯ä»¥è®©Azureå‡½æ•°çš„æ•…éšœæ’é™¤å˜å¾—æ›´å®¹æ˜“</p><p id="82f6" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated"><a class="ae kw" href="https://docs.microsoft.com/azure/azure-functions/functions-monitoring?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å†…ç½®ç›‘æ§</a>å’Œ<a class="ae kw" href="https://docs.microsoft.com/azure/azure-functions/functions-monitor-log-analytics?tabs=csharp&amp;WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">æ—¥å¿—åˆ†æ</a></p><p id="7d8a" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated"><a class="ae kw" href="https://docs.microsoft.com/azure/azure-functions/functions-diagnostics?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">è¯Šæ–­</a></p><p id="a244" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated">ä½¿ç”¨VSä»£ç è¿›è¡Œè¿œç¨‹è°ƒè¯•<a class="ae kw" href="https://code.visualstudio.com/docs/java/" rel="noopener ugc nofollow" target="_blank"/></p></blockquote><p id="007f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Azure Functionsä½¿ç”¨<code class="fe na nb nc lc b"><a class="ae kw" href="https://docs.microsoft.com/azure/azure-functions/functions-reference-java?WT.mc_id=medium-blog-abhishgu#pojos" rel="noopener ugc nofollow" target="_blank">gson</a></code> <a class="ae kw" href="https://docs.microsoft.com/azure/azure-functions/functions-reference-java?WT.mc_id=medium-blog-abhishgu#pojos" rel="noopener ugc nofollow" target="_blank">åº“æ¥åºåˆ—åŒ–/ååºåˆ—åŒ–æœ‰æ•ˆè´Ÿè½½</a></p><p id="f5d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸‹é¢æ˜¯è¯¥æ–¹æ³•çš„ä¸€ä¸ªç‰‡æ®µ:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="53ed" class="lg lh iq lc b gy li lj l lk ll">@FunctionName("processData")<br/>public void process(<br/>    @EventHubTrigger(name = "event", eventHubName = "", connection = "EventHubConnectionString") <br/>    Data data, final ExecutionContext context) {<br/>        //implementation<br/>    }</span></pre><p id="3f89" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ— æ³•å°†Event Hubsæœ‰æ•ˆè´Ÿè½½è½¬æ¢ä¸ºè¯¥æ–¹æ³•æ‰€æœŸæœ›çš„<code class="fe na nb nc lc b">Data</code> POJOã€‚</p><p id="5678" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘æŸ¥çœ‹äº†Azure Functions Java APIæ–‡æ¡£ï¼Œä»¥ç¡®è®¤æˆ‘æ˜¯å¦æ­£ç¡®åœ°ä½¿ç”¨äº†<code class="fe na nb nc lc b"><a class="ae kw" href="https://docs.microsoft.com/java/api/com.microsoft.azure.functions.annotation.eventhubtrigger?view=azure-java-stable&amp;WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">@EventHubTrigger</a></code>ã€‚è€Œæˆ‘å¶ç„¶å‘ç°äº†<code class="fe na nb nc lc b"><a class="ae kw" href="https://docs.microsoft.com/java/api/com.microsoft.azure.functions.annotation.eventhubtrigger.cardinality?view=azure-java-stable&amp;WT.mc_id=medium-blog-abhishgu#com_microsoft_azure_functions_annotation_EventHubTrigger_cardinality__" rel="noopener ugc nofollow" target="_blank">cardinality</a></code> <a class="ae kw" href="https://docs.microsoft.com/java/api/com.microsoft.azure.functions.annotation.eventhubtrigger.cardinality?view=azure-java-stable&amp;WT.mc_id=medium-blog-abhishgu#com_microsoft_azure_functions_annotation_EventHubTrigger_cardinality__" rel="noopener ugc nofollow" target="_blank">å±æ€§</a></p><p id="cd8b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å®šä¹‰å¦‚ä¸‹:</p><blockquote class="nd ne nf"><p id="86b6" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated">è§¦å‘å™¨è¾“å…¥çš„åŸºæ•°ã€‚å¦‚æœè¾“å…¥æ˜¯ä¸€æ¡æ¶ˆæ¯ï¼Œè¯·é€‰æ‹©â€œä¸€â€ï¼›å¦‚æœè¾“å…¥æ˜¯ä¸€ç»„æ¶ˆæ¯ï¼Œè¯·é€‰æ‹©â€œå¤šâ€ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ºâ€œå¤šâ€..å®ƒçš„é»˜è®¤å€¼æ˜¯<code class="fe na nb nc lc b">Cardinality.MANY</code></p></blockquote><p id="722d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å•Šå“ˆæ—¶åˆ»ï¼ç°åœ¨ç†è§£é”™è¯¯æ¶ˆæ¯<code class="fe na nb nc lc b">Expected BEGIN_OBJECT but was BEGIN_ARRAY</code>å¹¶ä¸å¤ªéš¾â€”â€”å› ä¸º<code class="fe na nb nc lc b">Cardinality</code>ï¼Œå¹³å°è¯•å›¾åºåˆ—åŒ–ä¸€ä¸ª<code class="fe na nb nc lc b">Data</code>POJOçš„åˆ—è¡¨/æ•°ç»„ï¼Œä½†æ˜¯æ–¹æ³•åªæœŸæœ›ä¸€ä¸ªã€‚æ˜¾å¼åŒ…å«<code class="fe na nb nc lc b">cardinality</code>(<code class="fe na nb nc lc b">Cardinality.ONE</code>)æ˜¯è§£å†³æ–¹æ¡ˆï¼Œå³</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="d432" class="lg lh iq lc b gy li lj l lk ll">@EventHubTrigger(<br/>    name = "event", <br/>    eventHubName = "", <br/>    connection = "EventHubConnectionString",<br/>    <strong class="lc ir">cardinality = Cardinality.ONE</strong>)</span></pre><blockquote class="nd ne nf"><p id="b1b7" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated"><em class="iq">å¦ä¸€ç§æ–¹æ³•æ˜¯å°†ç­¾åæ”¹ä¸ºæ¥å—</em> <code class="fe na nb nc lc b"><em class="iq">List&lt;Data&gt;</em></code> <em class="iq">å¹¶é€‰æ‹©åˆ—è¡¨ä¸­çš„ç¬¬ä¸€é¡¹ï¼Œä¾‹å¦‚</em> <code class="fe na nb nc lc b"><em class="iq">data.get(0)</em></code></p></blockquote><p id="d646" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç›®å‰å°±è¿™äº›ã€‚å¦‚æœä½ è§‰å¾—è¿™å¾ˆæœ‰å¸®åŠ©ï¼Œå±•ç¤ºä¸€äº›:å¿ƒ:å¹¶ç»§ç»­å…³æ³¨æ›´å¤šğŸ™Œï¼</p></div></div>    
</body>
</html>