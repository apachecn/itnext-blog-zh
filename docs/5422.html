<html>
<head>
<title>Autoscaling Redis applications on Kubernetes ğŸš€ğŸš€</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetesä¸Šçš„è‡ªåŠ¨ç¼©æ”¾Redisåº”ç”¨ğŸš€ğŸš€</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/autoscaling-redis-applications-on-kubernetes-25c1867e95d7?source=collection_archive---------0-----------------------#2021-03-02">https://itnext.io/autoscaling-redis-applications-on-kubernetes-25c1867e95d7?source=collection_archive---------0-----------------------#2021-03-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="13a6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">ä½¿ç”¨KEDAæ”¾å¤§/ç¼©å°èŠ¹èœå·¥äººå®¹å™¨</h2></div><p id="4806" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™ç¯‡åšæ–‡æ¼”ç¤ºäº†å¦‚ä½•åœ¨Kubernetesä¸Šè‡ªåŠ¨ç¼©æ”¾åŸºäºRedisçš„åº”ç”¨ç¨‹åºã€‚<a class="ae lb" href="https://redis.io/" rel="noopener ugc nofollow" target="_blank"> Redis </a>æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„(<a class="ae lb" href="https://redislabs.com/blog/redis-is-the-most-loved-database-for-the-4th-year-in-a-row/" rel="noopener ugc nofollow" target="_blank">å¹¶ä¸”æ·±å—å–œçˆ±ï¼</a>)æ•°æ®åº“ï¼Œæ”¯æŒä¸€ç»„ä¸°å¯Œçš„æ•°æ®ç»“æ„(å­—ç¬¦ä¸²ã€å“ˆå¸Œã€æµã€åœ°ç†ç©ºé—´)ï¼Œä»¥åŠå…¶ä»–åŠŸèƒ½ï¼Œå¦‚å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯ã€é›†ç¾¤(HA)ç­‰ã€‚ä¸€ç§è¿™æ ·çš„æ•°æ®ç»“æ„æ˜¯æ”¯æŒè¯¸å¦‚æ’å…¥(<code class="fe lc ld le lf b">LPUSH</code>ã€<code class="fe lc ld le lf b">RPUSH</code>ã€<code class="fe lc ld le lf b">LINSERT</code>ç­‰æ“ä½œçš„<a class="ae lb" href="https://redis.io/topics/data-types-intro#lists" rel="noopener ugc nofollow" target="_blank">åˆ—è¡¨</a>ã€‚)ï¼Œè¯»å–(<code class="fe lc ld le lf b">LRANGE</code>)ï¼Œåˆ é™¤(<code class="fe lc ld le lf b">LREM</code>ï¼Œ<code class="fe lc ld le lf b">LPOP</code>ç­‰ã€‚)ç­‰ã€‚ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ï¼</p><p id="5f22" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Redisåˆ—è¡¨éå¸¸é€šç”¨ï¼Œç”¨ä½œå®ç°å¯ä¼¸ç¼©æ¶æ„æ¨¡å¼çš„ä¸»å¹²ï¼Œå¦‚æ¶ˆè´¹è€…-ç”Ÿäº§è€…(åŸºäºé˜Ÿåˆ—)ï¼Œç”Ÿäº§è€…åº”ç”¨ç¨‹åºå°†é¡¹ç›®æ¨å…¥åˆ—è¡¨ï¼Œæ¶ˆè´¹è€…(ä¹Ÿç§°ä¸ºå·¥äºº)å¤„ç†è¿™äº›é¡¹ç›®ã€‚çƒ­é—¨é¡¹ç›®å¦‚<code class="fe lc ld le lf b"><a class="ae lb" href="https://github.com/resque/resque" rel="noopener ugc nofollow" target="_blank">resque</a></code>ã€<code class="fe lc ld le lf b"><a class="ae lb" href="https://sidekiq.org/" rel="noopener ugc nofollow" target="_blank">sidekiq</a></code>ã€<code class="fe lc ld le lf b"><a class="ae lb" href="https://docs.celeryproject.org/en/stable/getting-started/brokers/redis.html" rel="noopener ugc nofollow" target="_blank">celery</a></code>ç­‰ã€‚åœ¨åå°ä½¿ç”¨Rediså®ç°åå°ä½œä¸šã€‚</p><p id="7086" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•è‡ªåŠ¨æ‰©å±•ä½¿ç”¨Redisä½œä¸ºä»£ç†çš„èŠ¹èœå·¥äººã€‚æœ‰å¤šç§æ–¹æ³•å¯ä»¥å®ç°è¿™ä¸€ç‚¹â€”â€”è¿™ä¸ªåšå®¢ä½¿ç”¨äº†ä¸€ä¸ªåŸºäºKubernetesçš„äº‹ä»¶é©±åŠ¨è‡ªåŠ¨ç¼©æ”¾å™¨(<code class="fe lc ld le lf b"><a class="ae lb" href="https://keda.sh/" rel="noopener ugc nofollow" target="_blank">KEDA</a></code>)æ¥å®Œæˆç¹é‡çš„å·¥ä½œï¼ŒåŒ…æ‹¬æ ¹æ®å·¥ä½œè´Ÿè½½æ‰©å¤§å·¥ä½œäººå‘˜é˜Ÿä¼ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰ä»»åŠ¡ï¼Œè¿˜å¯ä»¥å°†å…¶ç¼©å°åˆ°é›¶ï¼</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/8b66bb66ade892d3b9d11b63cd70c182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nMJA5-hLXiJtHbsbQABjng.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">ä½¿ç”¨KEDAè‡ªåŠ¨ç¼©æ”¾èŠ¹èœå·¥ä½œè¿›ç¨‹</figcaption></figure><blockquote class="lw lx ly"><p id="6c3e" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq">è¯·æ³¨æ„ï¼Œè¿™ç¯‡åšæ–‡ä½¿ç”¨äº†ä¸€ä¸ª</em> <a class="ae lb" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Golang </em> </a> <em class="iq">åº”ç”¨(æ„Ÿè°¢</em><a class="ae lb" href="https://github.com/gocelery/gocelery/" rel="noopener ugc nofollow" target="_blank"><em class="iq">go celery</em></a><em class="iq">ï¼)ä½œä¸ºä¾‹å­ï¼Œä½†è¿™åŒæ ·é€‚ç”¨äºPythonæˆ–ä»»ä½•å…¶ä»–ä½¿ç”¨Celeryåè®®çš„åº”ç”¨ç¨‹åºã€‚</em></p></blockquote><p id="70ba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å®ƒæ¶µç›–ä»¥ä¸‹ä¸»é¢˜:</p><ul class=""><li id="515c" class="md me iq kh b ki kj kl km ko mf ks mg kw mh la mi mj mk ml bi translated">ä»åº”ç”¨ç¨‹åºçš„åŸºæœ¬æ¦‚è¿°å¼€å§‹</li><li id="a7e5" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">è®¾ç½®infra (AKSã€Redis)å¹¶éškEDAéƒ¨ç½²workeråº”ç”¨ç¨‹åº</li><li id="2ff0" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">æµ‹è¯•ç«¯åˆ°ç«¯è‡ªåŠ¨ç¼©æ”¾çš„è¿è¡Œæƒ…å†µ</li></ul><blockquote class="lw lx ly"><p id="cc5f" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq">æ ·ä¾‹ä»£ç å¯åœ¨</em> <a class="ae lb" href="https://github.com/abhirockzz/redis-celery-kubernetes-keda" rel="noopener ugc nofollow" target="_blank"> <em class="iq">è¿™ä¸ªGitHubèµ„æºåº“</em> </a>ä¸­æ‰¾åˆ°</p></blockquote><p id="f786" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é¦–å…ˆï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¿«é€Ÿçš„ä»‹ç»ï¼</p><h1 id="9dd1" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">èŠ¹èœ</h1><p id="1f39" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">ç®€å•åœ°è¯´ï¼Œ<strong class="kh ir">èŠ¹èœ</strong>æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ¶ˆæ¯å¤„ç†ç³»ç»Ÿã€‚å®ƒä½¿ç”¨ç»çºªäººæ¥åè°ƒå®¢æˆ·å’Œå‘˜å·¥ä¹‹é—´çš„äº¤æµã€‚å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå‘ä»£ç†æ·»åŠ æ¶ˆæ¯(ä»»åŠ¡),ç„¶åå°†æ¶ˆæ¯äº¤ä»˜ç»™ä¸€ä¸ªæˆ–å¤šä¸ªå·¥ä½œå™¨â€”â€”è¿™ç§è®¾ç½®æ˜¯æ°´å¹³å¯ä¼¸ç¼©çš„(å¹¶ä¸”é«˜åº¦å¯ç”¨),å› ä¸ºæ‚¨å¯ä»¥è®©å¤šä¸ªå·¥ä½œå™¨åˆ†æ‹…å¤„ç†è´Ÿè½½ã€‚</p><p id="e31d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è™½ç„¶Celeryæ˜¯ç”¨Pythonå†™çš„ï¼Œä½†å¥½åœ¨åè®®å¯ä»¥ç”¨ä»»ä½•è¯­è¨€å®ç°ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ç”¨å®Œå…¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ç¼–å†™å®¢æˆ·ç«¯å’Œå·¥ä½œè€…åº”ç”¨ç¨‹åº(ä¸€ä¸ªåŸºäºNode.jsçš„å®¢æˆ·ç«¯å’Œä¸€ä¸ªåŸºäºPythonçš„å·¥ä½œè€…åº”ç”¨ç¨‹åº)ï¼Œä½†å®ƒä»¬å°†èƒ½å¤Ÿäº’æ“ä½œï¼Œåªè¦å®ƒä»¬ä½¿ç”¨Celeryåè®®ï¼</p><h1 id="3755" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">KEDA</h1><p id="6611" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">KEDAé‡‡ç”¨å³æ’å³ç”¨çš„æ¶æ„ï¼Œå¹¶åœ¨ç°æœ‰çš„KubernetesåŸè¯­(å¦‚Horizontal Pod Autoscaler)çš„åŸºç¡€ä¸Šæ„å»º(æ‰©å±•),ä»¥æ ¹æ®éœ€è¦å¤„ç†çš„äº‹ä»¶æ•°é‡æ¥æ‰©å±•ä»»ä½•Kuberneteså®¹å™¨ã€‚</p><p id="2f38" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸€ä¸ª<code class="fe lc ld le lf b">KEDA</code>ç¼©æ”¾å™¨è´Ÿè´£ä¸å¤–éƒ¨æœåŠ¡é›†æˆï¼Œä»¥è·å–é©±åŠ¨è‡ªåŠ¨ç¼©æ”¾çš„æŒ‡æ ‡ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<a class="ae lb" href="https://keda.sh/docs/scalers/redis-lists/" rel="noopener ugc nofollow" target="_blank">Redisçš„KEDAç¼©æ”¾å™¨</a>ï¼Œå®ƒæ ¹æ®Redisåˆ—è¡¨çš„é•¿åº¦(æ¡ç›®æ•°)è‡ªåŠ¨ç¼©æ”¾åº”ç”¨ç¨‹åºã€‚</p><blockquote class="lw lx ly"><p id="a9d4" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated">æ·±å…¥æ¢è®¨ä¸åœ¨è¿™ç¯‡åšæ–‡çš„è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚è¦äº†è§£æ›´å¤šï¼Œè¯·å‚è€ƒä»¥ä¸‹èµ„æº:<a class="ae lb" href="https://keda.sh/docs/2.1/concepts/" rel="noopener ugc nofollow" target="_blank">æ¦‚å¿µ</a>ã€<a class="ae lb" href="https://keda.sh/docs/2.1/concepts/#architecture" rel="noopener ugc nofollow" target="_blank">æ¶æ„</a>ã€<a class="ae lb" href="https://cloudblogs.microsoft.com/opensource/2020/05/12/scaling-kubernetes-keda-intro-kubernetes-based-event-driven-autoscaling/" rel="noopener ugc nofollow" target="_blank">å…¥é—¨åšæ–‡</a>ã€<a class="ae lb" href="https://levelup.gitconnected.com/auto-scale-kafka-applications-on-kubernetes-with-keda-6fde6aef9d800" rel="noopener ugc nofollow" target="_blank">ä½¿ç”¨Kafkaçš„åŠ¨æ‰‹æ•™ç¨‹</a>ç­‰ã€‚</p></blockquote><p id="5e3b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨æˆ‘ä»¬æ·±å…¥ç ”ç©¶æœ¬è´¨ä¹‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„é«˜çº§æ¦‚è¿°ã€‚</p><h1 id="76fe" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">é«˜å±‚æ¶æ„</h1><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi no"><img src="../Images/57b4b378df04e767f19924797e32dcdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*3GgIXIq2n4NhAPd2FCOJSQ.jpeg"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">é«˜å±‚æ¶æ„</figcaption></figure><p id="a81b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¯¥åº”ç”¨ç¨‹åºåŒ…æ‹¬ä»¥ä¸‹ç»„ä»¶:</p><ul class=""><li id="2c6c" class="md me iq kh b ki kj kl km ko mf ks mg kw mh la mi mj mk ml bi translated">Redis(ç”¨ä½œèŠ¹èœç»çºªäºº)</li><li id="2944" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">æ¨¡æ‹Ÿæäº¤ä»»åŠ¡çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„ç”Ÿæˆå™¨</li><li id="12ef" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">å¤„ç†ä»»åŠ¡çš„å·¥ä½œåº”ç”¨ç¨‹åº(è¿è¡Œåœ¨Kubernetesä¸­)</li></ul><h2 id="c854" class="np ms iq bd mt nq nr dn mx ns nt dp nb ko nu nv nd ks nw nx nf kw ny nz nh oa bi translated">ç”Ÿäº§è€…åº”ç”¨</h2><p id="4cea" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">ç”Ÿäº§è€…æ˜¯ä¸€ä¸ªå‘Redisæäº¤ä»»åŠ¡çš„Goåº”ç”¨ç¨‹åº(ä½¿ç”¨<code class="fe lc ld le lf b">gocelery</code>åº“)ã€‚ä½ å¯ä»¥åœ¨GitHub ä¸ŠæŸ¥çœ‹<a class="ae lb" href="https://github.com/abhirockzz/redis-celery-kubernetes-keda/blob/master/celery-go-app/producer.go" rel="noopener ugc nofollow" target="_blank">ä»£ç ï¼Œä½†è¿™é‡Œæœ‰ä¸€ä¸ªç‰‡æ®µ:</a></p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="d2ed" class="np ms iq lf b gy of og l oh oi">go func() {<br/>        for !closed {<br/>            _, err := celeryClient.Delay(taskName, rdata.FullName(rdata.RandomGender), rdata.Email(), rdata.Address())<br/>            if err != nil {<br/>                panic(err)<br/>            }<br/>            time.Sleep(1 * time.Second)<br/>        }<br/>    }()</span></pre><p id="423c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å®ƒè¿è¡Œä¸€ä¸ªå¾ªç¯(ä½œä¸ºgoroutine)å¹¶å‘é€éšæœºç”Ÿæˆçš„æ•°æ®(å…¨åã€ç”µå­é‚®ä»¶å’Œåœ°å€)ã€‚</p><blockquote class="lw lx ly"><p id="6ffe" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq">produceråº”ç”¨ç¨‹åºå¯ç”¨ä½œé¢„æ„å»ºçš„Dockeræ˜ åƒ</em><a class="ae lb" href="https://hub.docker.com/repository/docker/abhirockzz/celery-go-producer" rel="noopener ugc nofollow" target="_blank"><em class="iq">abhirockzz/celery-go-producer</em></a><em class="iq">ï¼Œä½†æ˜¯ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨repoä¸­æä¾›çš„</em> <code class="fe lc ld le lf b"><em class="iq">Dockerfile</em></code> <em class="iq">æ„å»ºå¦ä¸€ä¸ªæ˜ åƒã€‚</em></p></blockquote><h2 id="7345" class="np ms iq bd mt nq nr dn mx ns nt dp nb ko nu nv nd ks nw nx nf kw ny nz nh oa bi translated">èŠ¹èœå·¥äºº</h2><p id="e2e8" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">Celery workeråº”ç”¨ç¨‹åºå¤„ç†è¿™äº›ä¿¡æ¯(é€šè¿‡Redisä½œä¸šé˜Ÿåˆ—)ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤„ç†é€»è¾‘åŒ…æ‹¬å°†æ•°æ®å­˜å‚¨åœ¨Redis <code class="fe lc ld le lf b">HASH</code>ä¸­(ä½†å®ƒå¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿)ã€‚ä½ å¯ä»¥åœ¨GitHub ä¸ŠæŸ¥çœ‹<a class="ae lb" href="https://github.com/abhirockzz/redis-celery-kubernetes-keda/blob/master/celery-go-app/worker.go" rel="noopener ugc nofollow" target="_blank">ä»£ç ï¼Œä½†è¿™é‡Œæœ‰ä¸€ä¸ªç‰‡æ®µ:</a></p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="5a85" class="np ms iq lf b gy of og l oh oi">save := func(name, email, address string) string {<br/>        sleepFor := rand.Intn(9) + 1<br/>        time.Sleep(time.Duration(sleepFor) * time.Second)</span><span id="7719" class="np ms iq lf b gy oj og l oh oi">        info := map[string]string{"name": name, "email": email, "address": address, "worker": workerID, "processed_at": time.Now().UTC().String()}</span><span id="b3ca" class="np ms iq lf b gy oj og l oh oi">        hashName := hashNamePrefix + strconv.Itoa(rand.Intn(1000)+1)</span><span id="7832" class="np ms iq lf b gy oj og l oh oi">        _, err := redisPool.Get().Do("HSET", redis.Args{}.Add(hashName).AddFlat(info)...)<br/>        if err != nil {<br/>            log.Fatal(err)<br/>        }<br/>        return hashName<br/>    }</span></pre><p id="d5ea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ·»åŠ <a class="ae lb" href="https://dev.to/abhirockzz/autoscale-redis-applications-on-kubernetes-using-keda-4bca-temp-slug-8481103?preview=430909cfebb8f7ca2982f68c48be98f943ca2755dadc606497190778d83e459653095be962eec082fdc964acff0274bfa083f865d89e546b5066e4d8" rel="noopener ugc nofollow" target="_blank">ç¡çœ </a>æ˜¯ä¸ºäº†è®©å·¥ä½œåº”ç”¨ç¨‹åºå¯ä»¥åœ¨0åˆ°10ç§’ä¹‹é—´æš‚åœ(è¿™æ˜¯éšæœºçš„)ã€‚è¿™å°†æœ‰åŠ©äºæ¨¡æ‹Ÿä¸€ä¸ªâ€œé«˜è´Ÿè½½â€åœºæ™¯ï¼Œå¹¶æœ‰åŠ©äºæ¼”ç¤ºè‡ªåŠ¨ç¼©æ”¾(åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­æœ‰è¯¦ç»†ä»‹ç»)ã€‚</p><blockquote class="lw lx ly"><p id="d9cf" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq">workeråº”ç”¨ç¨‹åºå¯ç”¨ä½œé¢„æ„å»ºçš„Dockeræ˜ åƒ</em><a class="ae lb" href="https://hub.docker.com/repository/docker/abhirockzz/celery-go-worker" rel="noopener ugc nofollow" target="_blank"><em class="iq">abhirockzz/celery-go-worker</em></a><em class="iq">ï¼Œä½†æ˜¯ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨repoä¸­æä¾›çš„</em> <code class="fe lc ld le lf b"><em class="iq">Dockerfile</em></code> <em class="iq">æ„å»ºå¦ä¸€ä¸ªæ˜ åƒã€‚</em></p></blockquote><h2 id="e625" class="np ms iq bd mt nq nr dn mx ns nt dp nb ko nu nv nd ks nw nx nf kw ny nz nh oa bi translated">KEDA <code class="fe lc ld le lf b">ScaledObject</code></h2><p id="fa3c" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">ä¸€ä¸ª<code class="fe lc ld le lf b">ScaledObject</code>å°†æˆ‘ä»¬æƒ³è¦è‡ªåŠ¨ä¼¸ç¼©çš„<code class="fe lc ld le lf b">Deployment</code>(åœ¨æœ¬ä¾‹ä¸­ï¼Œæ˜¯èŠ¹èœå·¥äººåº”ç”¨ç¨‹åº)ä¸åº¦é‡çš„æ¥æº(Redisåˆ—è¡¨çš„é•¿åº¦)å…³è”èµ·æ¥:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="e2b5" class="np ms iq lf b gy of og l oh oi">apiVersion: keda.sh/v1alpha1<br/>kind: ScaledObject<br/>metadata:<br/>  name: redis-scaledobject<br/>  namespace: default<br/>spec:<br/>  scaleTargetRef:<br/>    kind: Deployment<br/>    name: celery-worker<br/>  pollingInterval: 15<br/>  cooldownPeriod: 200<br/>  maxReplicaCount: 10<br/>  triggers:<br/>    - type: redis<br/>      metadata:<br/>        addressFromEnv: REDIS_HOST<br/>        passwordFromEnv: REDIS_PASSWORD<br/>        enableTLS: "true"<br/>        listName: celery<br/>        listLength: "10"</span></pre><p id="a224" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä»¥ä¸‹æ˜¯æ¸…å•ä¸­ä½¿ç”¨çš„å±æ€§çš„æ‘˜è¦:</p><ul class=""><li id="3f09" class="md me iq kh b ki kj kl km ko mf ks mg kw mh la mi mj mk ml bi translated">(<code class="fe lc ld le lf b">spec.scaleTargetRef.deploymentName</code>)æŒ‡å®šè‡ªåŠ¨ç¼©æ”¾çš„ç›®æ ‡<code class="fe lc ld le lf b">Deployment</code>ã€‚</li><li id="a35b" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">è§¦å‘ç±»å‹ä¸º<code class="fe lc ld le lf b">redis</code>ï¼Œè€Œ<code class="fe lc ld le lf b">triggers.metadata</code>éƒ¨åˆ†ç”¨äºæä¾›æ›´å¤šç»†èŠ‚:</li><li id="89e7" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">æœ¬ä¾‹ä¸­<code class="fe lc ld le lf b">address</code>çš„å€¼æ˜¯<code class="fe lc ld le lf b">REDIS_HOST</code>ï¼Œè¿™æ˜¯æœŸæœ›å‡ºç°åœ¨<code class="fe lc ld le lf b">Deployment</code>ä¸­çš„ç¯å¢ƒå˜é‡çš„åç§°(è¿è¡Œæ—¶)</li><li id="4b19" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated"><code class="fe lc ld le lf b">listName</code>æ˜¯Redisåˆ—è¡¨çš„åç§°ï¼Œå…¶å¾…å®šé¡¹ç”¨äºé©±åŠ¨è‡ªåŠ¨ç¼©æ”¾è¿‡ç¨‹</li><li id="6017" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated"><code class="fe lc ld le lf b">listLength</code>æ˜¯é˜ˆå€¼(åˆ—è¡¨é¡¹ç›®çš„æ•°é‡)ï¼Œè¶…è¿‡è¯¥é˜ˆå€¼å°†åˆ›å»ºæ–°çš„<code class="fe lc ld le lf b">Pod</code>(é’ˆå¯¹æŒ‡å®šçš„<code class="fe lc ld le lf b">Deployment</code>)ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå°†ä¸ºRedisåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ª<code class="fe lc ld le lf b">10</code>æœªå†³é¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="fe lc ld le lf b">Pod</code>(ä¸ºäº†ä¾¿äºæµ‹è¯•ï¼Œè¯¥æ•°å­—ä¿æŒè¾ƒä½)</li><li id="9cc9" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated"><code class="fe lc ld le lf b">maxReplicaCount</code>å®šä¹‰åº”ç”¨ç¨‹åºå¯æ‰©å±•çš„ä¸Šé™ï¼Œå³æ— è®ºæ‰©å±•æ ‡å‡†å¦‚ä½•ï¼Œéƒ½æ˜¯å¯åˆ›å»ºçš„<code class="fe lc ld le lf b">Pod</code>çš„æœ€å¤§æ•°é‡</li></ul><p id="8a58" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ˜¯æ—¶å€™è½¬å‘å®é™…çš„ä¸œè¥¿äº†ã€‚ä½†æ˜¯ï¼Œåœ¨ä½ å»é‚£é‡Œä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»å‡†å¤‡å¥½äº†:</p></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><h1 id="a778" class="mr ms iq bd mt mu or mw mx my os na nb jw ot jx nd jz ou ka nf kc ov kd nh ni bi translated">å…ˆå†³æ¡ä»¶</h1><p id="c9ad" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">è¦ä½¿ç”¨æœ¬åšå®¢ä¸­çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨éœ€è¦:</p><ul class=""><li id="b6b3" class="md me iq kh b ki kj kl km ko mf ks mg kw mh la mi mj mk ml bi translated">Azureè´¦æˆ·ã€‚ä½ å¯ä»¥<a class="ae lb" href="https://azure.microsoft.com/free/?WT.mc_id=data-18088-abhishgu" rel="noopener ugc nofollow" target="_blank">åˆ›å»ºä¸€ä¸ªå…è´¹è´¦æˆ·</a>è·å¾—12ä¸ªæœˆçš„å…è´¹æœåŠ¡ã€‚</li><li id="5a94" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">å®‰è£…äº†<a class="ae lb" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank"> Docker </a>å’Œ<a class="ae lb" href="https://docs.microsoft.com/cli/azure/install-azure-cli?WT.mc_id=data-18088-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure CLI </a></li><li id="bb55" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated"><a class="ae lb" href="http://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>å’Œ<code class="fe lc ld le lf b"><a class="ae lb" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" rel="noopener ugc nofollow" target="_blank">kubectl</a></code>ä¸€èµ·é›†ç¾¤:æˆ‘å·²ç»ä½¿ç”¨äº†<a class="ae lb" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=data-18088-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure KubernetesæœåŠ¡</a>ï¼Œå°½ç®¡<code class="fe lc ld le lf b"><a class="ae lb" href="https://kubernetes.io/docs/tasks/tools/install-minikube" rel="noopener ugc nofollow" target="_blank">minikube</a></code>åº”è¯¥ä¹Ÿèƒ½å·¥ä½œã€‚</li><li id="531e" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">Redis:æˆ‘å·²ç»ä¸ºRedis ä½¿ç”¨äº†<a class="ae lb" href="https://docs.microsoft.com/azure/azure-cache-for-redis/?WT.mc_id=data-18088-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Cacheï¼Œä½†æ˜¯å¯ä»¥è‡ªç”±æ¢ç´¢å…¶ä»–é€‰é¡¹ï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨<code class="fe lc ld le lf b"><a class="ae lb" href="https://github.com/helm/charts/tree/master/stable/redis" rel="noopener ugc nofollow" target="_blank">Helm</a></code> </a><a class="ae lb" href="https://github.com/helm/charts/tree/master/stable/redis" rel="noopener ugc nofollow" target="_blank">å›¾è¡¨</a>åœ¨ä½ çš„Kubernetesé›†ç¾¤ä¸­å®‰è£…ä¸€ä¸ª</li></ul><p id="81cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†:</p><ul class=""><li id="7553" class="md me iq kh b ki kj kl km ko mf ks mg kw mh la mi mj mk ml bi translated">å®‰è£…<code class="fe lc ld le lf b">KEDA</code></li><li id="a736" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">éƒ¨ç½²å•ä¸ªç»„ä»¶â€”èŠ¹èœå·¥ã€<code class="fe lc ld le lf b">ScaledObject</code>ç­‰ã€‚</li><li id="bd53" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">ç”Ÿæˆè´Ÿè½½å¹¶æµ‹è¯•è‡ªåŠ¨ä¼¸ç¼©</li></ul><h1 id="2e7e" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">åŸºæœ¬è®¾ç½®</h1><p id="c537" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">é¦–å…ˆï¼Œè¯·ç¡®ä¿:</p><ul class=""><li id="810e" class="md me iq kh b ki kj kl km ko mf ks mg kw mh la mi mj mk ml bi translated">åœ¨Azure ä¸Šå»ºç«‹ä¸€ä¸ªKubernetesé›†ç¾¤</li><li id="0115" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated"><a class="ae lb" href="https://docs.microsoft.com/azure/azure-cache-for-redis/quickstart-create-redis?WT.mc_id=data-18088-abhishgu" rel="noopener ugc nofollow" target="_blank">ä¸ºRediså®ä¾‹åˆ›å»ºAzureç¼“å­˜</a></li></ul><h2 id="4167" class="np ms iq bd mt nq nr dn mx ns nt dp nb ko nu nv nd ks nw nx nf kw ny nz nh oa bi translated">å®‰è£…KEDA</h2><p id="221e" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated"><code class="fe lc ld le lf b">KEDA</code>å…è®¸<a class="ae lb" href="https://keda.sh/docs/deploy/" rel="noopener ugc nofollow" target="_blank">å¤šç§å®‰è£…é€‰é¡¹</a>ã€‚æˆ‘å°†<a class="ae lb" href="https://keda.sh/docs/deploy/#yaml" rel="noopener ugc nofollow" target="_blank">ç›´æ¥ä½¿ç”¨YAML</a></p><blockquote class="lw lx ly"><p id="93ed" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq"> KEDAç»„ä»¶å°†è¢«å®‰è£…åˆ°</em> <code class="fe lc ld le lf b"><em class="iq">keda</em></code> <em class="iq">å‘½åç©ºé—´ä¸­ã€‚</em></p></blockquote><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="68ff" class="np ms iq lf b gy of og l oh oi">kubectl apply -f <a class="ae lb" href="https://github.com/kedacore/keda/releases/download/v2.1.0/keda-2.1.0.yaml" rel="noopener ugc nofollow" target="_blank">https://github.com/kedacore/keda/releases/download/v2.1.0/keda-2.1.0.yaml</a></span></pre><p id="a5a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™å°†åˆ†åˆ«å¯åŠ¨<code class="fe lc ld le lf b">KEDA</code>æ“ä½œå‘˜å’ŒMetrics APIæœåŠ¡å™¨<code class="fe lc ld le lf b">Deployment</code></p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="535a" class="np ms iq lf b gy of og l oh oi">kubectl get deployment -n keda</span><span id="a111" class="np ms iq lf b gy oj og l oh oi">NAME                              READY   UP-TO-DATE   AVAILABLE   AGE<br/>keda-operator                     1/1     1            1           1h</span><span id="0de4" class="np ms iq lf b gy oj og l oh oi">keda-operator-metrics-apiserver   1/1     1            1           1h</span></pre><blockquote class="lw lx ly"><p id="5838" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq">åœ¨ä½ ç»§ç»­ä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œç­‰å¾…</em> <code class="fe lc ld le lf b"><em class="iq">Deployment</em></code> <em class="iq"> sæˆä¸º</em> <code class="fe lc ld le lf b"><em class="iq">READY</em></code></p></blockquote><p id="b677" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬ç°åœ¨å¯ä»¥éƒ¨ç½²è‡ªåŠ¨æ‰©å±•åº”ç”¨ç¨‹åºæ‰€éœ€çš„ç»„ä»¶ã€‚é¦–å…ˆå…‹éš†æ­¤å­˜å‚¨åº“ï¼Œç„¶ååˆ‡æ¢åˆ°æ­£ç¡®çš„æ–‡ä»¶å¤¹:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="8f81" class="np ms iq lf b gy of og l oh oi">git clone https://github.com/abhirockzz/redis-celery-kubernetes-keda<br/>cd redis-celery-kubernetes-keda</span></pre><h2 id="568b" class="np ms iq bd mt nq nr dn mx ns nt dp nb ko nu nv nd ks nw nx nf kw ny nz nh oa bi translated">éƒ¨ç½²èŠ¹èœå·¥å’ŒKEDA <code class="fe lc ld le lf b">ScaledObject</code></h2><p id="bdc2" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">æˆ‘ä»¬éœ€è¦é¦–å…ˆéƒ¨ç½²<code class="fe lc ld le lf b">Secret</code>ï¼Œå› ä¸ºèŠ¹èœå·¥äºº<code class="fe lc ld le lf b">Deployment</code>ä½¿ç”¨å®ƒã€‚é¦–å…ˆï¼Œå¯¹Rediså®ä¾‹çš„å¯†ç è¿›è¡Œç¼–ç (<code class="fe lc ld le lf b">base64</code>)(æ£€æŸ¥Azure Portal ä¸­çš„<a class="ae lb" href="https://docs.microsoft.com/azure/azure-cache-for-redis/cache-development-faq?WT.mc_id=data-18088-abhishgu#retrieve-host-name-ports-and-access-keys-from-the-azure-portal" rel="noopener ugc nofollow" target="_blank">è®¿é—®å¯†é’¥)ï¼Œä»¥ä¾¿å°†å…¶å­˜å‚¨ä¸º<code class="fe lc ld le lf b">Secret</code>ã€‚</a></p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="77d0" class="np ms iq lf b gy of og l oh oi">echo 'enter_redis_password' | base64</span></pre><p id="a22d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨<code class="fe lc ld le lf b">secret.yaml</code>çš„<code class="fe lc ld le lf b">credentials</code>å±æ€§ä¸­æ›¿æ¢å®ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¯†ç æ˜¯<code class="fe lc ld le lf b">foobared</code>:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="9f88" class="np ms iq lf b gy of og l oh oi">echo -n 'foobared' | base64</span><span id="fd14" class="np ms iq lf b gy oj og l oh oi">//output: Zm9vYmFyZWQ=</span></pre><p id="d87e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lc ld le lf b">secret.yaml</code>çš„æœ€ç»ˆç‰ˆæœ¬å°†å¦‚ä¸‹æ‰€ç¤º(æ³¨æ„<code class="fe lc ld le lf b">credentials</code>å±æ€§ä¸­çš„ç¼–ç å¯†ç ):</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="6f2c" class="np ms iq lf b gy of og l oh oi">apiVersion: v1<br/>kind: Secret<br/>metadata:<br/>  name: redis-password<br/>type: Opaque<br/>data:<br/>  credentials: Zm9vYmFyZWQ=</span></pre><p id="be03" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åˆ›å»º<code class="fe lc ld le lf b">Secret</code>:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="6c89" class="np ms iq lf b gy of og l oh oi">kubectl apply -f deploy/secret.yaml</span></pre><p id="9d74" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬å‡ ä¹å·²ç»å‡†å¤‡å¥½éƒ¨ç½²èŠ¹èœå·¥äººåº”ç”¨ç¨‹åºäº†ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œè¯·ç”¨Redisä¸»æœºå’Œç«¯å£æ›´æ–°<code class="fe lc ld le lf b">consumer.yaml</code>æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯ç‰‡æ®µ:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="46fb" class="np ms iq lf b gy of og l oh oi">...<br/>          env:<br/>            - name: REDIS_PASSWORD<br/>              valueFrom:<br/>                secretKeyRef:<br/>                  name: redis-password<br/>                  key: credentials<br/>            - name: REDIS_HOST<br/>              value: <strong class="lf ir">[replace with redis host and port e.g. foobar.redis.cache.windows.net:6380]</strong><br/>            - name: REDIS_LIST<br/>              value: celery<br/>...</span></pre><blockquote class="lw lx ly"><p id="0b4e" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><code class="fe lc ld le lf b"><em class="iq">celery</em></code> <em class="iq">æ˜¯èŠ¹èœå·¥åˆ›å»ºçš„Redis </em> <code class="fe lc ld le lf b"><em class="iq">LIST</em></code> <em class="iq">çš„é»˜è®¤åç§°â€”â€”è¯·ä¿æŒä¸å˜ã€‚</em></p></blockquote><p id="1a28" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">éƒ¨ç½²å·¥äººåº”ç”¨ç¨‹åºï¼Œæ£€æŸ¥<code class="fe lc ld le lf b">Pod</code>å¹¶ç­‰å¾…çŠ¶æ€è½¬æ¢åˆ°<code class="fe lc ld le lf b">Running</code>:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="d53e" class="np ms iq lf b gy of og l oh oi">kubectl apply -f deploy/consumer.yaml</span><span id="6008" class="np ms iq lf b gy oj og l oh oi">kubectl get pods -l=app=celery-worker -w</span><span id="8a81" class="np ms iq lf b gy oj og l oh oi">NAME                              READY   STATUS    RESTARTS   AGE<br/>celery-worker-5b644c6688-m8nf4   1/1     Running   0          20s</span></pre><blockquote class="lw lx ly"><p id="0e26" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq">æ‚¨å¯ä»¥ä½¿ç”¨</em> <code class="fe lc ld le lf b"><em class="iq">kubectl logs &lt;pod_name&gt;</em></code>æŸ¥çœ‹æ—¥å¿—</p></blockquote><p id="af9d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å±•å¼€KEDA <code class="fe lc ld le lf b">ScaledObject</code>:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="4eb9" class="np ms iq lf b gy of og l oh oi">kubectl apply -f deploy/redis-scaledobject.yaml</span></pre></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><h1 id="9efe" class="mr ms iq bd mt mu or mw mx my os na nb jw ot jx nd jz ou ka nf kc ov kd nh ni bi translated">è‡ªåŠ¨ç¼©æ”¾æ­£åœ¨è¿è¡Œ</h1><p id="b9f2" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½æµ‹è¯•ç«¯åˆ°ç«¯è®¾ç½®äº†ï¼</p><h2 id="a030" class="np ms iq bd mt nq nr dn mx ns nt dp nb ko nu nv nd ks nw nx nf kw ny nz nh oa bi translated">ç¼©æ”¾è‡³é›¶ğŸ’¥ğŸ’¥</h2><p id="fc8c" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">æ£€æŸ¥èŠ¹èœå·¥<code class="fe lc ld le lf b">Pod</code>:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="abb3" class="np ms iq lf b gy of og l oh oi">kubectl get pods -l=app=celery-worker</span><span id="66ff" class="np ms iq lf b gy oj og l oh oi">//output: No resources found</span></pre><p id="4e17" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lc ld le lf b">No resources found</code>ï¼Ÿï¼Ÿï¼Ÿç­‰ç­‰ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†ä¸€ä¸ªæ¶ˆè´¹è€…åº”ç”¨ç¨‹åº<code class="fe lc ld le lf b">Pod</code>ï¼Œåˆšåˆšå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿåˆ«æ€¥ï¼Œè¿™æ˜¯<code class="fe lc ld le lf b">KEDA</code>åœ¨è¡ŒåŠ¨ï¼å› ä¸ºRedisåˆ—è¡¨ä¸­ç°åœ¨æ²¡æœ‰æ¡ç›®(å› æ­¤å·¥äººæ²¡æœ‰å·¥ä½œ)ï¼Œ<code class="fe lc ld le lf b">KEDA</code>ç¡®ä¿æ²¡æœ‰ç©ºé—²çš„<code class="fe lc ld le lf b">Pod</code>åœ¨è¿è¡Œã€‚</p><blockquote class="lw lx ly"><p id="8a7d" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq">è¿™ç§è¡Œä¸ºå¯ä»¥é€šè¿‡</em> <code class="fe lc ld le lf b"><em class="iq">ScaledObject</em></code> <em class="iq">ä¸­çš„</em> <code class="fe lc ld le lf b"><em class="iq">minReplicaCount</em></code> <em class="iq">å±æ€§æ¥æ§åˆ¶(å‚è€ƒ</em> <a class="ae lb" href="https://keda.sh/docs/concepts/scaling-deployments/#details" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> KEDAæ–‡æ¡£</em> </a> <em class="iq"> ) </em></p></blockquote><p id="f736" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lc ld le lf b">KEDA</code>ä½¿ç”¨<code class="fe lc ld le lf b">ScaledObject</code>ä¸­çš„ä¿¡æ¯åˆ›å»ºä¸€ä¸ª<a class="ae lb" href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/" rel="noopener ugc nofollow" target="_blank">æ°´å¹³Podè‡ªåŠ¨ç¼©æ”¾å™¨</a>å¯¹è±¡:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="16da" class="np ms iq lf b gy of og l oh oi">kubectl get hpa </span><span id="bdc8" class="np ms iq lf b gy oj og l oh oi">NAME                          REFERENCE                  TARGETS              MINPODS   MAXPODS   REPLICAS   AGE<br/>keda-hpa-redis-scaledobject   Deployment/celery-worker   &lt;unknown&gt;/10 (avg)   1         10        0          2m51s</span></pre><h2 id="c127" class="np ms iq bd mt nq nr dn mx ns nt dp nb ko nu nv nd ks nw nx nf kw ny nz nh oa bi translated">æ‰©å¤§â¬†ï¸</h2><p id="8d3c" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">è®©æˆ‘ä»¬è¿è¡ŒCelery produceråº”ç”¨ç¨‹åºï¼Œå¹¶é€šè¿‡å°†é¡¹ç›®æ¨å…¥Redisåˆ—è¡¨æ¥æ¨¡æ‹Ÿä¸€äº›å·¥ä½œã€‚åœ¨æ­¤ä¹‹å‰ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªç»ˆç«¯å¹¶å¼€å§‹è§‚å¯Ÿæ¶ˆè´¹è€…<code class="fe lc ld le lf b">Deployment</code>ä»¥è·Ÿè¸ªè‡ªåŠ¨ç¼©æ”¾:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="02cd" class="np ms iq lf b gy of og l oh oi">kubectl get pods -l=app=celery-worker -w</span></pre><p id="59b6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿”å›ä¸Šä¸€ä¸ªç»ˆç«¯å¹¶è¿è¡Œåº”ç”¨ç¨‹åº:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="cd13" class="np ms iq lf b gy of og l oh oi">export REDIS_HOST=[replace with redis host and post info e.g. foobar.redis.cache.windows.net:6380]<br/>export REDIS_PASSWORD=[replace with redis password]</span><span id="e382" class="np ms iq lf b gy oj og l oh oi">docker run --rm -e REDIS_HOST=$REDIS_HOST -e REDIS_PASSWORD=$REDIS_PASSWORD abhirockzz/celery-go-producer</span><span id="2ba9" class="np ms iq lf b gy oj og l oh oi">//output:<br/>celery producer started...</span></pre><p id="34a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç­‰å¾…å‡ ç§’é’Ÿã€‚åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°èŠ¹èœå·¥äººæ­£åœ¨è¢«é€æ¸åˆ›å»º:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="c8ab" class="np ms iq lf b gy of og l oh oi">celery-worker-5b644c6688-2zk5c   0/1   ContainerCreating   0     0s<br/>celery-worker-5b644c6688-2zk5c   1/1   Running             0     4s<br/>celery-worker-5b644c6688-h22hp   0/1   Pending             0     0s<br/>celery-worker-5b644c6688-h22hp   0/1   Pending             0     0s<br/>celery-worker-5b644c6688-h22hp   0/1   ContainerCreating   0     0s<br/>celery-worker-5b644c6688-h22hp   1/1   Running             0     4s<br/>celery-worker-5b644c6688-r2m48   0/1   Pending             0     0s<br/>celery-worker-5b644c6688-r2m48   0/1   Pending             0     0s<br/>celery-worker-5b644c6688-r2m48   0/1   ContainerCreating   0     0s<br/>celery-worker-5b644c6688-r2m48   1/1   Running             0     3s</span></pre><p id="edac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœæ‚¨æ£€æŸ¥<code class="fe lc ld le lf b">Deployment</code> ( <code class="fe lc ld le lf b">kubectl get deployment/celery-worker</code>)ï¼Œæ‚¨å°†ä¼šçœ‹åˆ°ä¸æ­¤ç±»ä¼¼çš„å†…å®¹(å–å†³äºåˆ›å»ºäº†å¤šå°‘ä¸ª<code class="fe lc ld le lf b">Pod</code>):</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="539d" class="np ms iq lf b gy of og l oh oi">NAME            READY   UP-TO-DATE   AVAILABLE   AGE<br/>celery-worker   3/3     3            3           9m51s</span></pre><p id="fab3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‚¨ä¹Ÿå¯ä»¥æ£€æŸ¥æ°´å¹³Podè‡ªåŠ¨ç¼©æ”¾å™¨ã€‚å®ƒåº”è¯¥åæ˜ ç›¸åŒçš„ç»Ÿè®¡æ•°æ®:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="673e" class="np ms iq lf b gy of og l oh oi">kubectl get hpa</span><span id="4472" class="np ms iq lf b gy oj og l oh oi">NAME                          REFERENCE                  TARGETS      MINPODS   MAXPODS   REPLICAS   AGE<br/>keda-hpa-redis-scaledobject   Deployment/celery-worker   9/10 (avg)   1         10        3          8m15s</span></pre><p id="1ede" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœæ‚¨ç¢°å·§æ£€æŸ¥äº†æŸä¸ªå·¥ä½œåº”ç”¨ç¨‹åºçš„æ—¥å¿—ï¼Œæ‚¨å°†ä¼šè®°å½•å¦‚ä¸‹è¾“å‡º:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="e0fd" class="np ms iq lf b gy of og l oh oi">...<br/>2021/03/01 10:05:36 got info -  Benjamin Moore liammiller233@test.com 9 Franklin Circle,<br/>Burrton, WY, 37213<br/>2021/03/01 10:05:36 worker b2928e0f-2c79-a227-7547-7bd2acdaacba sleeping for 3<br/>2021/03/01 10:05:39 saved hash info users:674<br/>2021/03/01 10:05:39 got info -  Lily Smith jacobwilliams126@example.net 84 Jackson Ter,<br/>New Deal, FM, 53234<br/>2021/03/01 10:05:39 worker b2928e0f-2c79-a227-7547-7bd2acdaacba sleeping for 7<br/>2021/03/01 10:05:46 saved hash info users:473<br/>2021/03/01 10:05:46 got info -  William Williams joshuadavis821@example.com 32 Washington Rdg,<br/>Baldock, MN, 60018<br/>2021/03/01 10:05:46 worker b2928e0f-2c79-a227-7547-7bd2acdaacba sleeping for 9<br/>2021/03/01 10:05:55 saved hash info users:275<br/>...</span></pre><p id="5cea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å½“æˆ‘ä»¬çš„å‘˜å·¥å¿«ä¹åœ°å·¥ä½œæ—¶ï¼Œè®©æˆ‘ä»¬ä¹Ÿæ¥çœ‹çœ‹Redisã€‚ä½¿ç”¨<code class="fe lc ld le lf b">redis-cli</code>:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="450e" class="np ms iq lf b gy of og l oh oi">redis-cli -h [redis host e.g. foobar.redis.cache.windows.net] -p 6380 -a [redis password] --tls</span></pre><p id="06c3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é¦–å…ˆï¼Œæ£€æŸ¥Redisåˆ—è¡¨çš„é•¿åº¦(åœ¨æœ¬ä¾‹ä¸­å‘½åä¸º<code class="fe lc ld le lf b">celery</code>)ã€‚è¾“å‡ºå°†åæ˜ produceråº”ç”¨ç¨‹åºå·²ç»æ¨å…¥ä½†å°šæœªå¤„ç†çš„ä½œä¸šæ•°é‡ã€‚</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="ae03" class="np ms iq lf b gy of og l oh oi"><strong class="lf ir">llen celery</strong></span><span id="2d24" class="np ms iq lf b gy oj og l oh oi">(integer) 10</span></pre><p id="6d6f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å·¥ä½œåº”ç”¨ç¨‹åºä½¿ç”¨ç”¨æˆ·ä¿¡æ¯åˆ›å»ºæ•£åˆ—(åŸºäºå®ƒä»ç”Ÿäº§è€…åº”ç”¨ç¨‹åºæ¥æ”¶çš„éšæœºæ•°æ®)ã€‚è¦è¿›è¡Œæ£€æŸ¥ï¼Œè¯·ä½¿ç”¨<code class="fe lc ld le lf b">SCAN</code>:</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="e206" class="np ms iq lf b gy of og l oh oi"><strong class="lf ir">scan 0 match users*</strong></span><span id="5b0f" class="np ms iq lf b gy oj og l oh oi">1) "960"<br/>2) 1) "users:169"<br/>   2) "users:272"<br/>   3) "users:855"<br/>   4) "users:429"</span></pre><p id="f287" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ£€æŸ¥å‡ ä¸ªæ¡ç›®(ä½¿ç”¨<code class="fe lc ld le lf b">hgetall</code>)ã€‚ä¾‹å¦‚</p><pre class="lh li lj lk gt ob lf oc od aw oe bi"><span id="c27f" class="np ms iq lf b gy of og l oh oi"><strong class="lf ir">hgetall users:169</strong><br/> 1) "name"<br/> 2) "Natalie White"<br/> 3) "email"<br/> 4) "ethanjackson245@test.net"<br/> 5) "address"<br/> 6) "20 Jefferson Ter,\nDerby Center, ME, 18270"<br/> 7) "worker"<br/> 8) "6769253c-9dc3-9232-1860-4bc01ce760a3"<br/> 9) "processed_at"<br/>10) "2021-03-01 10:13:11.230070643 +0000 UTC"</span></pre><p id="6ddb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é™¤äº†ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æ³¨æ„å¤„ç†è¯¥è®°å½•çš„å·¥äººçš„ID<strong class="kh ir">ä¹Ÿæ˜¯å¯ç”¨çš„ã€‚è¿™æ˜¯ä¸ºäº†ç¡®è®¤ä¸åŒçš„å·¥ä½œå®ä¾‹æ­£åœ¨å…±äº«å·¥ä½œè´Ÿè½½ã€‚</strong></p><blockquote class="lw lx ly"><p id="b55f" class="kf kg lz kh b ki kj jr kk kl km ju kn ma kp kq kr mb kt ku kv mc kx ky kz la ij bi translated"><em class="iq">æˆ‘ä»¬å·²ç»å°†</em> <code class="fe lc ld le lf b"><em class="iq">10</em></code> <em class="iq">è®¾ç½®ä¸º</em> <code class="fe lc ld le lf b"><em class="iq">ScaledObject</em></code> <em class="iq">æ¸…å•ä¸­çš„</em> <code class="fe lc ld le lf b"><em class="iq">listLength</em></code> <em class="iq">ï¼Œå¹¶å°†</em> <code class="fe lc ld le lf b"><em class="iq">maxReplicaCount</em></code> <em class="iq">æŒ‡å®šä¸º</em> <code class="fe lc ld le lf b"><em class="iq">10</em></code> <em class="iq">(å› æ­¤</em> <code class="fe lc ld le lf b"><em class="iq">Pod</em></code> <em class="iq"> sçš„æ•°é‡å°†è¢«é™åˆ¶ä¸ºè¿™ä¸ªæ•°é‡)ã€‚</em></p></blockquote><h2 id="c913" class="np ms iq bd mt nq nr dn mx ns nt dp nb ko nu nv nd ks nw nx nf kw ny nz nh oa bi translated">ç¼©å°â¬‡ï¸</h2><p id="c8ee" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">åœæ­¢ç”Ÿæˆå™¨åº”ç”¨ç¨‹åºã€‚</p><p id="cadd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸€æ—¦åˆ—è¡¨ä¸­çš„æ‰€æœ‰é¡¹ç›®éƒ½è¢«æ¶ˆè€—å®Œï¼Œå¹¶ä¸”åˆ—è¡¨ä¸ºç©ºï¼Œåœ¨åˆ°è¾¾<code class="fe lc ld le lf b">cooldown</code>å‘¨æœŸ(æœ¬ä¾‹ä¸­ä¸º<code class="fe lc ld le lf b">200</code>ç§’)åï¼Œ<code class="fe lc ld le lf b">Deployment</code>å°†æŒ‰æ¯”ä¾‹ç¼©å°ã€‚æœ€ç»ˆï¼Œ<code class="fe lc ld le lf b">Pod</code>çš„æ•°é‡ä¼šå½’é›¶ã€‚æ‚¨å¯ä»¥å†æ¬¡â€œæ¸…æ´—å¹¶é‡å¤â€è¿™ä¸€è¿‡ç¨‹ï¼Œå¹¶å¯¹æ‚¨æƒ³è¦å‘é€çš„æ¶ˆæ¯æ•°é‡(æ¨¡æ‹Ÿè´Ÿè½½)ã€æ‚¨æƒ³è¦æ‰©å±•åˆ°çš„å‰¯æœ¬æ•°é‡ã€ä¸åŒçš„<code class="fe lc ld le lf b">thresholdCount</code>ç­‰è¿›è¡Œä¸åŒçš„å®éªŒã€‚</p></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><h1 id="f957" class="mr ms iq bd mt mu or mw mx my os na nb jw ot jx nd jz ou ka nf kc ov kd nh ni bi translated">æ‰“æ‰«</h1><p id="76da" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">å®Œæˆåï¼Œä¸è¦å¿˜è®°åˆ é™¤æ‚¨åˆ›å»ºçš„èµ„æº:</p><ul class=""><li id="01d0" class="md me iq kh b ki kj kl km ko mf ks mg kw mh la mi mj mk ml bi translated">åˆ é™¤èŠ¹èœå·¥appï¼Œ<code class="fe lc ld le lf b">ScaledObject</code>å’Œ<code class="fe lc ld le lf b">Secret</code> : <code class="fe lc ld le lf b">kubectl delete -f deploy</code></li><li id="90db" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated">åˆ°<a class="ae lb" href="https://keda.sh/docs/2.1/deploy/#uninstall-2" rel="noopener ugc nofollow" target="_blank">å¸è½½KEDA </a> : <code class="fe lc ld le lf b">kubectl delete -f <a class="ae lb" href="https://github.com/kedacore/keda/releases/download/v2.1.0/keda-2.1.0.yaml" rel="noopener ugc nofollow" target="_blank">https://github.com/kedacore/keda/releases/download/v2.1.0/keda-2.1.0.yaml</a></code></li><li id="99f9" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated"><a class="ae lb" href="https://docs.microsoft.com/cli/azure/aks?view=azure-cli-latest&amp;WT.mc_id=data-18088-abhishgu#az_aks_delete" rel="noopener ugc nofollow" target="_blank">å¦‚æœä¸å†éœ€è¦ï¼Œåˆ é™¤AKSé›†ç¾¤</a>:<code class="fe lc ld le lf b">az aks delete --name &lt;cluster name&gt; --resource-group &lt;group name&gt;</code></li><li id="6e51" class="md me iq kh b ki mm kl mn ko mo ks mp kw mq la mi mj mk ml bi translated"><a class="ae lb" href="https://docs.microsoft.com/azure/azure-cache-for-redis/scripts/delete-cache?WT.mc_id=data-18088-abhishgu" rel="noopener ugc nofollow" target="_blank">åˆ é™¤Rediså®ä¾‹çš„Azureç¼“å­˜</a> : <code class="fe lc ld le lf b">az redis delete --name &lt;cache name&gt; --resource-group &lt;group name&gt;</code></li></ul><h1 id="bc21" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">ç»“è®º</h1><p id="8d56" class="pw-post-body-paragraph kf kg iq kh b ki nj jr kk kl nk ju kn ko nl kq kr ks nm ku kv kw nn ky kz la ij bi translated">æˆ‘ä»¬åœ¨è¿™ä¸ªåšå®¢ä¸­è®¨è®ºè¿‡Redis Scalerï¼Œä½†æ˜¯<code class="fe lc ld le lf b">KEDA</code>æä¾›äº†<a class="ae lb" href="https://keda.sh/docs/scalers/" rel="noopener ugc nofollow" target="_blank">è®¸å¤šè¿™æ ·çš„Scaler</a>ã€‚<code class="fe lc ld le lf b">KEDA</code>å¤„ç†åº”ç”¨ç¨‹åºçš„è‡ªåŠ¨æ‰©å±•ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¯ä»¥åœ¨Kubernetesé›†ç¾¤èŠ‚ç‚¹ä¹‹å¤–çš„åŸºç¡€è®¾æ–½ä¸Šè¿è¡Œæ‰€æœ‰è¿™äº›åº”ç”¨ç¨‹åºå®ä¾‹ï¼Œä¾‹å¦‚æ— æœåŠ¡å™¨å¹³å°ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿ</p><p id="ff87" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœè¿™å¬èµ·æ¥å¾ˆæœ‰è¶£ï¼Œè¯·æŸ¥çœ‹Azure KubernetesæœåŠ¡ä¸­çš„<a class="ae lb" href="https://docs.microsoft.com/azure/aks/virtual-nodes?WT.mc_id=data-18088-abhishgu" rel="noopener ugc nofollow" target="_blank">è™šæ‹ŸèŠ‚ç‚¹</a>,çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒä»¬å°†æ‚¨çš„åº”ç”¨æ— ç¼æ‰©å±•åˆ°Azureå®¹å™¨å®ä¾‹ï¼Œå¹¶ä»podsçš„å¿«é€Ÿä¾›åº”ä¸­å—ç›Šï¼Œå¹¶ä¸”åªéœ€ä¸ºå®ƒä»¬çš„æ‰§è¡Œæ—¶é—´æŒ‰ç§’ä»˜è´¹ã€‚AKSçš„è™šæ‹ŸèŠ‚ç‚¹é™„åŠ ç»„ä»¶åŸºäºå¼€æºé¡¹ç›®<a class="ae lb" href="https://virtual-kubelet.io/" rel="noopener ugc nofollow" target="_blank"> Virtual Kubelet </a>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æº<a class="ae lb" href="https://kubernetes.io/docs/reference/generated/kubelet/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a> <code class="fe lc ld le lf b"><a class="ae lb" href="https://kubernetes.io/docs/reference/generated/kubelet/" rel="noopener ugc nofollow" target="_blank">kubelet</a></code>å®ç°ã€‚</p></div></div>    
</body>
</html>