<html>
<head>
<title>How I built my second Progressive Web App (PWA)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æˆ‘å¦‚ä½•æ„å»ºæˆ‘çš„ç¬¬äºŒä¸ªæ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº(PWA)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-i-built-my-second-progressive-web-app-pwa-3508c26d8e77?source=collection_archive---------7-----------------------#2019-12-18">https://itnext.io/how-i-built-my-second-progressive-web-app-pwa-3508c26d8e77?source=collection_archive---------7-----------------------#2019-12-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="c359" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">æ¸è¿›å¼ç½‘ç»œåº”ç”¨</h2><div class=""/><div class=""><h2 id="1f3f" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">å¾—åˆ°å®Œç¾çš„ç¯å¡”åˆ†æ•°</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c2235f4fdb629e41d40b8f6419518a4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sgWM8jv6w-JFiQY7gimMaA.jpeg"/></div></div></figure><p id="573d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">ä»ä»Šå¤©èµ·ï¼Œæˆ‘çš„å‰¯ä¸šé¡¹ç›®<a class="ae lw" href="https://cld.silvestar.codes/" rel="noopener ugc nofollow" target="_blank">ä»£ç è¡Œæ—¥æŠ¥</a>ä½œä¸ºä¸€ä¸ªæ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åºå¯ç”¨ã€‚</p><p id="04f7" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">å¦‚æœä½ ç¢°å·§è¯»è¿‡<a class="ae lw" rel="noopener ugc nofollow" target="_blank" href="/how-i-built-my-first-progressive-web-app-pwa-6fd3f5a164c0">æˆ‘ä¹‹å‰å†™çš„å…³äºâ€œæˆ‘å¦‚ä½•æ„å»ºæˆ‘çš„ç¬¬ä¸€ä¸ªæ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº(PWA)</a>â€çš„æ–‡ç« ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ç»­ç¯‡ã€‚</p><h1 id="1a42" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">å·¥å…·ç®±</h1><p id="d50a" class="pw-post-body-paragraph la lb iq lc b ld mp ka lf lg mq kd li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">åœ¨æˆ‘ä¹‹å‰åˆ¶ä½œPWAçš„å°è¯•ä¸­ï¼Œæˆ‘éƒ½æ˜¯æ‰‹åŠ¨å¤„ç†çš„ã€‚æˆ‘äº†è§£äº†å¯ç”¨çš„é€‰é¡¹å’ŒæŠ€æœ¯ï¼Œè¿™æœ‰åŠ©äºæˆ‘ç†è§£PWAç½‘ç«™æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p id="a650" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">è¿™æ¬¡æˆ‘å†³å®šç”¨<a class="ae lw" href="https://developers.google.com/web/tools/workbox" rel="noopener ugc nofollow" target="_blank">å·¥å…·ç®±</a>åšPWAã€‚Workboxæ˜¯Googleè®©PWAæ›´æµç•…çš„å·¥å…·ã€‚</p><blockquote class="mu mv mw"><p id="2b1e" class="la lb mx lc b ld le ka lf lg lh kd li my lk ll lm mz lo lp lq na ls lt lu lv ij bi translated"><em class="iq"> Workboxæ˜¯ä¸€ç»„åº“å’ŒèŠ‚ç‚¹æ¨¡å—ï¼Œå¯ä»¥è½»æ¾ç¼“å­˜èµ„æºå¹¶å……åˆ†åˆ©ç”¨ç”¨äºæ„å»º</em> <a class="ae lw" href="https://developers.google.com/web/progressive-web-apps/" rel="noopener ugc nofollow" target="_blank"> <em class="iq">æ¸è¿›å¼Webåº”ç”¨</em> </a> <em class="iq">çš„åŠŸèƒ½ã€‚</em></p></blockquote><p id="9fea" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æœ‰ä¸€ä¸ªå¾ˆæ£’çš„<a class="ae lw" href="https://developers.google.com/web/tools/workbox/guides/get-started" rel="noopener ugc nofollow" target="_blank">â€œå…¥é—¨â€æŒ‡å—</a>ï¼Œæˆ‘æŒ‰ç…§å®ƒåœ¨å‡ åˆ†é’Ÿå†…è®¾ç½®äº†åˆå§‹ç‰ˆæœ¬ã€‚Workboxæ­£åœ¨æä¾›<a class="ae lw" href="https://developers.google.com/web/tools/workbox/modules/workbox-strategies" rel="noopener ugc nofollow" target="_blank">é¢„å®šä¹‰çš„ç¼“å­˜ç­–ç•¥</a>ï¼Œå¦‚â€œCacheFirstâ€æˆ–â€œStaleWhileRevalidateâ€ã€‚æ‚¨å¯ä»¥åœ¨ä¸€è¡Œä¸­è®¾ç½®ç¼“å­˜ç­–ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kp kq kr ks gt nb nc nd ne aw nf bi"><span id="1851" class="ng ly iq nc b gy nh ni l nj nk">// Serve all CSS files with StaleWhileRevalidate strategy<br/>workbox.routing.registerRoute(<br/>  /\.css$/,<br/>  new workbox.strategies.StaleWhileRevalidate()<br/>)</span></pre><p id="0593" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">è¿™ç§ç­–ç•¥å‘Šè¯‰æœåŠ¡æ—§çš„/é™ˆæ—§çš„CSSæ–‡ä»¶å¦‚æœå¯ç”¨ã€‚å¦‚æœä¸å¯ç”¨ï¼Œè¯·ä½¿ç”¨ç½‘ç»œè¯·æ±‚æ¥è·å–æ–‡ä»¶ã€‚</p><p id="cc66" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">ä½ å¯ä»¥åœ¨GitHubåº“ä¸­çœ‹åˆ°ä»£ç è¡Œæ¯æ—¥<a class="ae lw" href="https://github.com/maliMirkec/code-line-daily/blob/master/src/sw/sw.js" rel="noopener ugc nofollow" target="_blank">çš„æ‰€æœ‰ç­–ç•¥ã€‚</a></p><h1 id="f224" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">é¢„ç¼“å­˜</h1><p id="8d7e" class="pw-post-body-paragraph la lb iq lc b ld mp ka lf lg mq kd li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">è®¾ç½®å¥½ç­–ç•¥åï¼Œæˆ‘å·²ç»ä½¿ç”¨<a class="ae lw" href="https://developers.google.com/web/tools/workbox/guides/precache-files/cli" rel="noopener ugc nofollow" target="_blank"> Workbox CLI </a>åˆ›å»ºäº†è¦é¢„ç¼“å­˜çš„æ–‡ä»¶åˆ—è¡¨ã€‚æˆ‘å·²ç»å°†Workbox CLIä½œä¸ºä¸€ä¸ªå…¨å±€<code class="fe nl nm nn nc b">npm</code>åŒ…è¿›è¡Œäº†å®‰è£…ã€‚</p><pre class="kp kq kr ks gt nb nc nd ne aw nf bi"><span id="1048" class="ng ly iq nc b gy nh ni l nj nk">npm i -g workbox-cli</span></pre><p id="5348" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">ä¹‹åï¼Œ<code class="fe nl nm nn nc b">workbox</code>å‘½ä»¤åœ¨æˆ‘çš„ç»ˆç«¯å¯ç”¨ã€‚æˆ‘å·²ç»è¿è¡Œäº†å‘½ä»¤æ¥å¯åŠ¨å‘å¯¼ã€‚</p><pre class="kp kq kr ks gt nb nc nd ne aw nf bi"><span id="3f7f" class="ng ly iq nc b gy nh ni l nj nk">workbox wizard --injectManifest</span></pre><p id="c744" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æˆ‘å·²ç»é€‰æ‹©äº†å·²é…ç½®çš„è·¯å¾„å¹¶é€‰æ‹©äº†è¦é¢„ç¼“å­˜çš„æ–‡ä»¶ï¼ŒWorkbox CLIä¸ºæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°æ–‡ä»¶ã€‚</p><p id="7329" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">ä¸ºäº†èƒ½å¤Ÿå°†è¿™äº›æ–‡ä»¶æ³¨å…¥åˆ°æœåŠ¡å·¥ä½œè€…æ–‡ä»¶ä¸­ï¼Œæˆ‘åœ¨å…¶ä¸­æ·»åŠ äº†ä¸‹é¢ä¸€è¡Œ:</p><pre class="kp kq kr ks gt nb nc nd ne aw nf bi"><span id="479f" class="ng ly iq nc b gy nh ni l nj nk">workbox.precaching.precacheAndRoute([]);</span></pre><p id="6545" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æœ€åï¼Œæˆ‘è¿è¡Œäº†å‘½ä»¤<code class="fe nl nm nn nc b">workbox injectManifest</code>,è¯¥å‘½ä»¤åˆ›å»ºäº†æ–°çš„æœåŠ¡å·¥ä½œè€…æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†è¦é¢„ç¼“å­˜çš„æ–‡ä»¶åˆ—è¡¨ã€‚</p><h1 id="2687" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">è‡ªåŠ¨åŒ–</h1><p id="3384" class="pw-post-body-paragraph la lb iq lc b ld mp ka lf lg mq kd li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">æˆ‘å¾ˆé«˜å…´ä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯æˆ‘æ„è¯†åˆ°æˆ‘éœ€è¦æ‰‹åŠ¨è¿è¡Œè¿™äº›å‘½ä»¤ã€‚å› ä¸ºæˆ‘å·²ç»èŠ±äº†å¾ˆå¤šç²¾åŠ›æ¥è‡ªåŠ¨åŒ–è¿™ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘æƒ³æŠŠWorkboxæ·»åŠ åˆ°æˆ‘çš„Gulpä»»åŠ¡ä¸­ã€‚å¹¸è¿çš„æ˜¯ï¼ŒWorkboxä¹Ÿå¯ä»¥ä½œä¸ºNode.jsç¯å¢ƒçš„æ’ä»¶ä½¿ç”¨ã€‚</p><p id="afe7" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æœ‰ä¸€ç§<code class="fe nl nm nn nc b">generateSW</code>æ¨¡å¼å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸¦æœ‰é¢„ç¼“å­˜è®¾ç½®çš„æœåŠ¡äººå‘˜ï¼Œè¿™ä¼¼ä¹æ˜¯ç¬¦åˆæˆ‘éœ€æ±‚çš„é€»è¾‘é€‰é¡¹ã€‚</p><blockquote class="mu mv mw"><p id="8738" class="la lb mx lc b ld le ka lf lg lh kd li my lk ll lm mz lo lp lq na ls lt lu lv ij bi translated"><em class="iq">è¿™å°†ç”Ÿæˆä¸€ä¸ªæœåŠ¡å·¥ä½œå™¨ï¼Œä¸ºæ‚¨çš„é…ç½®é€‰æ‹©çš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œé¢„ç¼“å­˜è®¾ç½®</em></p></blockquote><p id="f670" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">è¿™æ˜¯æˆ‘çš„é¡¹ç›®çš„é…ç½®ã€‚</p><pre class="kp kq kr ks gt nb nc nd ne aw nf bi"><span id="ef34" class="ng ly iq nc b gy nh ni l nj nk">{<br/>  "globDirectory": "dist/",<br/>  "globPatterns": [<br/>    "**/*.{html,webmanifest,css,eot,svg,ttf,woff,woff2,png,js,ico,jpg}"<br/>  ],<br/>  "globIgnores": [<br/>    "docs/**/*",<br/>    "gfx/cover/**/*"<br/>  ],<br/>  "swDest": "dist/sw.js",<br/>  "swSrc": "src/sw/sw.js"<br/>}</span></pre><p id="04f9" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">å…¶ä¸­:</p><ul class=""><li id="4e3e" class="no np iq lc b ld le lg lh lj nq ln nr lr ns lv nt nu nv nw bi translated"><code class="fe nl nm nn nc b">swSrc</code>é€‰é¡¹å‘Šè¯‰åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°æœåŠ¡äººå‘˜æ–‡ä»¶ï¼Œ</li><li id="0562" class="no np iq lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated"><code class="fe nl nm nn nc b">swDest</code>é€‰é¡¹å‘Šè¯‰åœ¨å“ªé‡Œä¿å­˜å·²å¤„ç†çš„æœåŠ¡äººå‘˜æ–‡ä»¶ï¼Œ</li><li id="eaac" class="no np iq lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated"><code class="fe nl nm nn nc b">globDirectory</code>é€‰é¡¹å‘Šè¯‰å“ªä¸ªæ–‡ä»¶å¤¹æ‰«æé¢„å…ˆç¼“å­˜çš„æ–‡ä»¶ï¼Œ</li><li id="9a92" class="no np iq lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated"><code class="fe nl nm nn nc b">globPatterns</code>é€‰é¡¹å‘ŠçŸ¥ä½¿ç”¨å“ªäº›æ¨¡å¼ï¼Œä»¥åŠ</li><li id="977b" class="no np iq lc b ld nx lg ny lj nz ln oa lr ob lv nt nu nv nw bi translated"><code class="fe nl nm nn nc b">globIgnores</code>é€‰é¡¹å‘ŠçŸ¥å¿½ç•¥å“ªäº›æ–‡ä»¶å¤¹ï¼Œå°½ç®¡æ¨¡å¼åŒ¹é…ã€‚</li></ul><p id="dab0" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">è¿è¡ŒGulpä»»åŠ¡åï¼Œæˆ‘å¾—åˆ°äº†æœ€ç»ˆçš„æœåŠ¡å·¥ä½œè€…æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kp kq kr ks gt nb nc nd ne aw nf bi"><span id="e335" class="ng ly iq nc b gy nh ni l nj nk">// load workbox<br/>importScripts('https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js')<br/><br/>// output successful message<br/>if (workbox) {<br/>  console.log(`Yay! Workbox is loaded ğŸ‰`)<br/>} else {<br/>  console.log(`Boo! Workbox didn't load ğŸ˜¬`)<br/>}<br/><br/>workbox.core.setCacheNameDetails({<br/>  prefix: 'cld',<br/>  suffix: 'v1.0',<br/>  precache: 'precache',<br/>  runtime: 'runtime'<br/>})<br/><br/>workbox.precaching.precacheAndRoute([<br/>  // precached file list<br/>])<br/><br/>// Serve all html files with StaleWhileRevalidate strategy<br/>workbox.routing.registerRoute(<br/>  /\.html$/,<br/>  new workbox.strategies.NetworkFirst()<br/>)<br/><br/>// Serve all css files with StaleWhileRevalidate strategy<br/>workbox.routing.registerRoute(<br/>  /\.js$/,<br/>  new workbox.strategies.StaleWhileRevalidate()<br/>)<br/><br/>// Serve all css files with StaleWhileRevalidate strategy<br/>workbox.routing.registerRoute(<br/>  /\.css$/,<br/>  new workbox.strategies.StaleWhileRevalidate()<br/>)<br/><br/>// Serve all other assets with CacheFirst strategy<br/>workbox.routing.registerRoute(<br/>  /\.(?:png|jpg|jpeg|svg|gif|webp|ico|webmanifest|eot,ttf,woff,woff2)$/,<br/>  new workbox.strategies.CacheFirst({<br/>    plugins: [<br/>      new workbox.expiration.Plugin({<br/>        maxEntries: 20,<br/>        maxAgeSeconds: 30 * 24 * 60 * 60<br/>      })<br/>    ]<br/>  })<br/>)</span></pre><h1 id="4978" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">å†³èµ›æˆç»©</h1><p id="896b" class="pw-post-body-paragraph la lb iq lc b ld mp ka lf lg mq kd li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">ä»£ç è¡Œæ—¥æŠ¥ç°åœ¨æ˜¯è¿›æ­¥çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚é‚£æ˜¯æˆ‘çš„ç¬¬äºŒä¸ªPWAï¼Œæˆ‘ä¼šæ¨èå¤§å®¶å¤šäº†è§£ä¸€ä¸‹ã€‚è¯¥ç½‘ç«™ç°åœ¨å¯ä»¥ç¦»çº¿è®¿é—®ï¼Œä½†å®ƒä¹Ÿé€šè¿‡å°½å¯èƒ½æä¾›ç¼“å­˜èµ„äº§ä¸ºæˆ‘çš„ç”¨æˆ·èŠ‚çœäº†å¸¦å®½ã€‚ç»§ç»­å°è¯•æ¯å¤©å®‰è£…<a class="ae lw" href="https://cld.silvestar.codes/" rel="noopener ugc nofollow" target="_blank">ä»£ç è¡Œ</a>ï¼Œè®©æˆ‘çŸ¥é“ä½ çš„æƒ³æ³•ã€‚</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c213912c049a05b5e3dfc69a6536b8d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*LmVcY_8fHnyY4hfMaee4TA.gif"/></div></figure><p id="0cf9" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">ä½œä¸ºå¥–åŠ±ï¼Œæˆ‘å·²ç»è¿è¡Œäº†Code Line Dailyç«™ç‚¹çš„å®¡è®¡ï¼Œæˆ‘å†æ¬¡çœ‹åˆ°äº†fireworksï¼Œå°±åƒåœ¨<a class="ae lw" href="https://www.silvestar.codes" rel="noopener ugc nofollow" target="_blank">æˆ‘çš„ä¸ªäººç«™ç‚¹</a>ä¸€æ ·ã€‚ğŸ’¯</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="52a8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="mx">æœ€åˆå‘å¸ƒäº</em><a class="ae lw" href="https://www.silvestar.codes/articles/how-i-built-my-second-progressive-web-app-pwa/" rel="noopener ugc nofollow" target="_blank"><em class="mx">https://www . silvestar . codes</em></a><em class="mx">ã€‚</em></p></div></div>    
</body>
</html>