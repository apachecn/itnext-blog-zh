<html>
<head>
<title>Connect to Snowflake Data Warehouse with GO</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨GOè¿æ¥åˆ°é›ªèŠ±æ•°æ®ä»“åº“</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/connect-to-snowflake-data-warehouse-with-go-c42bbcfbbfe4?source=collection_archive---------5-----------------------#2018-07-18">https://itnext.io/connect-to-snowflake-data-warehouse-with-go-c42bbcfbbfe4?source=collection_archive---------5-----------------------#2018-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4684" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ä¸€æœŸä¸­ï¼Œæˆ‘å°†ä»‹ç»è¿æ¥GOåˆ°é›ªèŠ±æ•°æ®ä»“åº“æœåŠ¡(DWaaS)çš„è¿‡ç¨‹ã€‚æœ¬æ•™ç¨‹è¦æ±‚æ‚¨æœ‰ä¸€ä¸ªé›ªèŠ±å¸æˆ·ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ³¨å†Œ<a class="ae kl" href="https://trial.snowflake.net/" rel="noopener ugc nofollow" target="_blank">30å¤©/400ç¾å…ƒçš„è¯•ç”¨æœŸã€‚</a></p><p id="4582" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸‹è½½å¹¶å®‰è£…ODBCé©±åŠ¨ç¨‹åº</p><p id="3264" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦ä½ åœ¨é›ªèŠ±ä¸­è®¾ç½®äº†ä½ çš„å¸æˆ·ï¼ŒæŒ‰ç…§æŒ‡ç¤ºä¸‹è½½ODBCé©±åŠ¨ç¨‹åºã€‚å®ƒå°†ä¸æ‚¨æ‰¾åˆ°snowSQLä¸‹è½½çš„ä½ç½®ç›¸åŒ:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/991eb09fcde8de6a3a74526d7ae845e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*syJRagZ6XOaF3V5O.png"/></div></div></figure><p id="5d8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®‰è£…GO</p><p id="0e32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®‰è£…GOå¯ä»¥é€šè¿‡è‡ªåˆ¶è½¯ä»¶æˆ–è€…è®¿é—®<a class="ae kl" href="https://golang.org/dl/" rel="noopener ugc nofollow" target="_blank"> GoLangä¸‹è½½é¡µé¢</a>æ¥å®Œæˆã€‚å¦‚æœä½ é€‰æ‹©äº†è‡ªåˆ¶ï¼Œå¯ä»¥åœ¨ä»–ä»¬çš„é¡µé¢ä¸Šæ‰¾åˆ°å®‰è£…è¯´æ˜<a class="ae kl" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">ï¼Œæˆ–è€…ä½ å¯ä»¥å¤åˆ¶ç²˜è´´:</a></p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="1085" class="ld le iq kz b gy lf lg l lh li">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span></pre><p id="c324" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™ä¼šè®©ä½ é©¬ä¸Šè¡ŒåŠ¨èµ·æ¥ã€‚ä¸€æ—¦ä½ å¼€å§‹è‡ªåˆ¶ï¼Œä½ å¯ä»¥ç®€å•åœ°è¾“å…¥:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="9fe8" class="ld le iq kz b gy lf lg l lh li">Macbook Pro:~ dbryant$ brew install go</span></pre><p id="9a9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¡®è®¤GOå·²å®‰è£…:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="426a" class="ld le iq kz b gy lf lg l lh li">Macbook Pro:~ dbryant$ go version<br/>go version go1.10.1 darwin/amd64</span></pre><p id="cff8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®‰è£…GOåï¼Œè¿™å°†æ˜¯æ›´æ–°ä½ çš„å¥½æ—¶æœºã€‚é…ç½®æ–‡ä»¶åŒ…å«ä¸€ä¸ªGOPATHç¯å¢ƒå˜é‡ã€‚å¯¹äºæˆ‘çš„é…ç½®ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="abfd" class="ld le iq kz b gy lf lg l lh li">$ cat .bash_profile<br/>export PS1="$ "<br/>export GOPATH=/Users/dbryant/go<br/><br/>$ echo $GOPATH<br/>/Users/dbryant/go</span></pre><p id="501f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®‰è£…dep</p><p id="4bef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">depæ˜¯ä¸€ä¸ªç”¨äºGoçš„åŸå‹ä¾èµ–ç®¡ç†å·¥å…·ã€‚éœ€è¦Go 1.9æˆ–æ›´æ–°ç‰ˆæœ¬æ‰èƒ½ç¼–è¯‘ã€‚ç”±äºå®¶é…¿å·²ç»åœ¨æ‚¨çš„æœºå™¨ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨brewå®‰è£…dep:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="4814" class="ld le iq kz b gy lf lg l lh li">$ brew install dep<br/>Updating Homebrew...<br/>==&gt; Auto-updated Homebrew!<br/>Updated 1 tap (homebrew/core).<br/>==&gt; New Formulae<br/>amtk<br/>==&gt; Updated Formulae<br/>annie                      git-quick-stats            nvc<br/>ansiweather                giter8                     ola<br/>apache-flink               gitlab-runner              overmind<br/>babel                      gnome-latex                packer<br/>bareos-client              grpc                       paket<br/>bazel                      harfbuzz                   proxychains-ng<br/>binaryen                   jpeg-archive               pulseaudio<br/>byteman                    kube-aws                   sane-backends<br/>ccextractor                latex2rtf                  sipp<br/>charm                      lensfun                    snakemake<br/>cmake                      libdvbpsi                  sphinx-doc<br/>cockroach                  libfixbuf                  tepl<br/>collectd                   libtorrent-rasterbar       tiger-vnc<br/>conjure-up                 liquibase                  traefik<br/>fakeroot                   mpop                       util-linux<br/>fastqc                     mutt                       vala<br/>file-roller                neomutt                    webpack<br/>fn                         net-snmp                   webtorrent-cli<br/>folly                      nifi                       weechat<br/>fwup                       npth                       xonsh<br/><br/>==&gt; Installing dependencies for dep: go<br/>==&gt; Installing dep dependency: go<br/>==&gt; Downloading <a class="ae kl" href="https://homebrew.bintray.com/bottles/go-1.10.3.high_sierra.bottl" rel="noopener ugc nofollow" target="_blank">https://homebrew.bintray.com/bottles/go-1.10.3.high_sierra.bottl</a><br/>######################################################################## 100.0%<br/>==&gt; Pouring go-1.10.3.high_sierra.bottle.tar.gz<br/>==&gt; Caveats<br/>A valid GOPATH is required to use the `go get` command.<br/>If $GOPATH is not specified, $HOME/go will be used by default:<br/>  <a class="ae kl" href="https://golang.org/doc/code.html#GOPATH" rel="noopener ugc nofollow" target="_blank">https://golang.org/doc/code.html#GOPATH</a><br/><br/>You may wish to add the GOROOT-based install location to your PATH:<br/>  export PATH=$PATH:/usr/local/opt/go/libexec/bin<br/>==&gt; Summary<br/>ğŸº  /usr/local/Cellar/go/1.10.3: 8,170 files, 336.7MB<br/>==&gt; Installing dep<br/>==&gt; Downloading <a class="ae kl" href="https://homebrew.bintray.com/bottles/dep-0.4.1_1.high_sierra.bot" rel="noopener ugc nofollow" target="_blank">https://homebrew.bintray.com/bottles/dep-0.4.1_1.high_sierra.bot</a><br/>######################################################################## 100.0%<br/>==&gt; Pouring dep-0.4.1_1.high_sierra.bottle.tar.gz<br/>ğŸº  /usr/local/Cellar/dep/0.4.1_1: 7 files, 8.8MB<br/>==&gt; Caveats<br/>==&gt; go<br/>A valid GOPATH is required to use the `go get` command.<br/>If $GOPATH is not specified, $HOME/go will be used by default:<br/>  <a class="ae kl" href="https://golang.org/doc/code.html#GOPATH" rel="noopener ugc nofollow" target="_blank">https://golang.org/doc/code.html#GOPATH</a><br/><br/>You may wish to add the GOROOT-based install location to your PATH:<br/>  export PATH=$PATH:/usr/local/opt/go/libexec/bin</span></pre><p id="3cc0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®‰è£…GOé›ªèŠ±é©±åŠ¨ç¨‹åº:</p><p id="4705" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è·å–Gosnowflakeæºä»£ç å’Œ<a class="ae kl" href="https://github.com/golang/dep" rel="noopener ugc nofollow" target="_blank"> dep </a>(ä¾èµ–ç®¡ç†å·¥å…·)ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œç¡®ä¿å®‰è£…äº†ä¾èµ–åº“ã€‚</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="0606" class="ld le iq kz b gy lf lg l lh li">go get -u github.com/snowflakedb/gosnowflake<br/>go get -u github.com/golang/dep/cmd/dep<br/>cd $GOPATH/src/github.com/snowflakedb/gosnowflake/<br/>dep ensure</span></pre><p id="441d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ—¢ç„¶æˆ‘ä»¬å·²ç»å®Œæˆäº†è¿æ¥çš„å¤§éƒ¨åˆ†å…ˆå†³æ¡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºç¤ºä¾‹ç¨‹åº</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="3270" class="ld le iq kz b gy lf lg l lh li">$ make install<br/>for c in $(ls cmd); do \<br/>		(cd cmd/$c;  GOBIN=$GOPATH/bin go install $c.go); \<br/>	done<br/>$</span></pre><p id="bbe3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æ‰§è¡Œmake installå‘½ä»¤ä¹‹åï¼Œæˆ‘åœ¨ä¸‹é¢çš„å­ç›®å½•ä¸­æ‰¾åˆ°äº†æˆ‘ä»¬çš„æµ‹è¯•æ–‡ä»¶â€œselect1.go â€:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="cccd" class="ld le iq kz b gy lf lg l lh li">/Users/dbryant/go/src/github.com/snowflakedb/gosnowflake/cmd/select1/</span></pre><p id="93cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨å·²ç»æ­£ç¡®é…ç½®äº†æ‰€æœ‰çš„è·¯å¾„ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™å¯¹äºæ‚¨æµ‹è¯•è¿æ¥åº”è¯¥æ˜¯æ²¡é—®é¢˜çš„ã€‚è¿™ä¸ªæµ‹è¯•ç¨‹åºå°†ç®€å•åœ°å°è¯•è¿æ¥åˆ°é›ªèŠ±æ•°æ®ä»“åº“ã€‚é€šè¿‡GOå’Œselect1.goæµ‹è¯•æ–‡ä»¶è¿æ¥åˆ°é›ªèŠ±éœ€è¦ä¸‰ä¸ªå‚æ•°ã€‚</p><p id="71ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬çœ‹çœ‹select1.goæ–‡ä»¶ä¸­çš„ä»£ç ç‰‡æ®µ</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="7f34" class="ld le iq kz b gy lf lg l lh li">...<br/><br/>// getDSN constructs a DSN based on the test connection parameters<br/>func getDSN() (string, *sf.Config, error) {<br/>	env := func(k string, failOnMissing bool) string {<br/>		if value := os.Getenv(k); value != "" {<br/>			return value<br/>		}<br/>		if failOnMissing {<br/>			log.Fatalf("%v environment variable is not set.", k)<br/>		}<br/>		return ""<br/>	}<br/><br/>	account := env("SNOWFLAKE_TEST_ACCOUNT", true)<br/>	user := env("SNOWFLAKE_TEST_USER", true)<br/>	password := env("SNOWFLAKE_TEST_PASSWORD", true)<br/>	host := env("SNOWFLAKE_TEST_HOST", false)<br/>	port := env("SNOWFLAKE_TEST_PORT", false)<br/>	protocol := env("SNOWFLAKE_TEST_PROTOCOL", false)<br/><br/>	portStr, _ := strconv.Atoi(port)<br/>	cfg := &amp;sf.Config{<br/>		Account:  account,<br/>		User:     user,<br/>		Password: password,<br/>		Host:     host,<br/>		Port:     portStr,<br/>		Protocol: protocol,<br/>	}<br/><br/>	dsn, err := sf.DSN(cfg)<br/>	return dsn, cfg, err<br/>}<br/>...</span></pre><p id="41d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸Šé¢çš„å‡½æ•°æ¥è‡ªselect1.goæµ‹è¯•æ–‡ä»¶ã€‚æ‚¨åº”è¯¥æ³¨æ„åˆ°<strong class="jp ir">å¸æˆ·</strong>ã€<strong class="jp ir">ç”¨æˆ·</strong>å’Œ<strong class="jp ir">å¯†ç </strong>çš„envå‡½æ•°ä¼ é€’äº†ä¸€ä¸ªtrueå‚æ•°ã€‚è¿™äº›æ˜¯ä»O/Sç¯å¢ƒå˜é‡ä¸­è¯»å–çš„å€¼ã€‚å‡ºäºæµ‹è¯•ç›®çš„ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªshellè„šæœ¬æ¥è®¾ç½®è¿™äº›å€¼ã€‚</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="8ab3" class="ld le iq kz b gy lf lg l lh li">$ cat .sfgo.sh<br/>#!/bin/sh<br/>export SNOWFLAKE_TEST_ACCOUNT=my_account_name<br/>export SNOWFLAKE_TEST_USER=user_name<br/>export SNOWFLAKE_TEST_PASSWORD=password<br/>$ <br/>$ chmod 755 .sfgo.sh<br/>$ . .sfgo.sh</span></pre><p id="04ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿è¡Œè„šæœ¬åï¼Œæ£€æŸ¥æ˜¯å¦è®¾ç½®äº†ç¯å¢ƒå˜é‡:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="243e" class="ld le iq kz b gy lf lg l lh li">$ echo $SNOWFLAKE_TEST_USER<br/>user_name<br/>$ echo $SNOWFLAKE_TEST_ACCOUNT<br/>my_account_name<br/>$ echo $SNOWFLAKE_TEST_PASSWORD<br/>password<br/>$</span></pre><p id="35cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">éªŒè¯è¿™äº›ç¯å¢ƒå˜é‡è®¾ç½®æ­£ç¡®åï¼Œç¡®è®¤æ‚¨ä½äºselect1.goæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸­ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="4e96" class="ld le iq kz b gy lf lg l lh li">$ go run select1.go<br/>Congrats! You have successfully run SELECT 1 with Snowflake DB!</span></pre><p id="bb4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ çœ‹åˆ°ç¥è´ºï¼æ¶ˆæ¯ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å·²ç»æˆåŠŸè¿æ¥åˆ°é›ªèŠ±æ•°æ®ä»“åº“äº‘æœåŠ¡ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/a4f66edcf4be20241b1a65dcbd921570.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*_MuBZOvem-gOLWNc.png"/></div></figure><p id="fea5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°½æƒ…äº«å—å§ï¼</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="9c6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lr">æœ€åˆå‘è¡¨äº</em> <a class="ae kl" href="http://dbaontap.com/2018/07/18/connect-snowflake-using-go/" rel="noopener ugc nofollow" target="_blank"> <em class="lr"> dbaonTap </em> </a> <em class="lr">ã€‚</em></p></div></div>    
</body>
</html>