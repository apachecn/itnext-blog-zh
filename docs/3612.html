<html>
<head>
<title>How to integrate Dapr and Azure Event Hubs using Kafka bindings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨Kafkaç»‘å®šé›†æˆDaprå’ŒAzureäº‹ä»¶ä¸­å¿ƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-to-integrate-dapr-and-azure-event-hubs-using-kafka-bindings-44fb8de647cb?source=collection_archive---------1-----------------------#2020-01-17">https://itnext.io/how-to-integrate-dapr-and-azure-event-hubs-using-kafka-bindings-44fb8de647cb?source=collection_archive---------1-----------------------#2020-01-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="485d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/tutorial-using-azure-event-hubs-with-the-dapr-framework-81c749b66dcf">ä¹‹å‰çš„ä¸€ç¯‡åšæ–‡</a>å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<a class="ae kl" href="https://azure.microsoft.com/services/event-hubs/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Event Hubs </a>ä½œä¸º<a class="ae kl" href="http://dapr.io/" rel="noopener ugc nofollow" target="_blank"> Dapr </a>ä¸­çš„èµ„æºç»‘å®šã€‚<a class="ae kl" href="https://github.com/dapr/components-contrib/blob/master/bindings/Readme.md" rel="noopener ugc nofollow" target="_blank">èµ„æºç»‘å®š</a>æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œé€šè¿‡æ¥è‡ªå¤–éƒ¨ç³»ç»Ÿçš„äº‹ä»¶(<em class="km">è¾“å…¥ç»‘å®š</em>)æ¥è§¦å‘åº”ç”¨ç¨‹åºï¼Œæˆ–è€…é€šè¿‡å¯é€‰çš„æ•°æ®æœ‰æ•ˆè´Ÿè½½æ¥è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿ(<em class="km">è¾“å‡ºç»‘å®š</em>)ã€‚è¿™äº›â€œå¤–éƒ¨ç³»ç»Ÿâ€å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿:é˜Ÿåˆ—ã€æ¶ˆæ¯ä¼ é€’ç®¡é“ã€äº‘æœåŠ¡ã€æ–‡ä»¶ç³»ç»Ÿç­‰ç­‰ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥æµè§ˆ<a class="ae kl" href="https://github.com/abhirockzz/dapr-kafka-eventhubs-bindings" rel="noopener ugc nofollow" target="_blank">å¦‚ä½•å°†</a><a class="ae kl" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank"> Kafka </a>ä½œä¸º<code class="fe kn ko kp kq b">Dapr</code>ç»‘å®šæ¥é›†æˆåˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ã€‚</p><blockquote class="kr ks kt"><p id="96fb" class="jn jo km jp b jq jr js jt ju jv jw jx ku jz ka kb kv kd ke kf kw kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq"> Dapr </em> </strong> <em class="iq">(åˆååˆ†å¸ƒå¼åº”ç”¨è¿è¡Œæ—¶)æ˜¯ä¸€ä¸ªå¼€æºçš„ã€å¯ç§»æ¤çš„è¿è¡Œæ—¶ï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºå¼¹æ€§çš„ã€å¾®æœåŠ¡çš„æ— çŠ¶æ€å’Œæœ‰çŠ¶æ€åº”ç”¨ã€‚å¦‚æœä½ å¯¹</em> <code class="fe kn ko kp kq b"><em class="iq">Dapr</em></code> <em class="iq">è¿˜ä¸äº†è§£ï¼Œæˆ‘æ¨èä½ æŸ¥é˜…ä¸€ä¸‹</em><a class="ae kl" href="https://github.com/dapr/dapr" rel="noopener ugc nofollow" target="_blank"><em class="iq">Github repo</em></a><em class="iq">å¹¶æµè§ˆä¸€ä¸‹</em> <a class="ae kl" href="https://github.com/dapr/docs/tree/master/getting-started" rel="noopener ugc nofollow" target="_blank"> <em class="iq">ã€å…¥é—¨ã€‘</em> </a> <em class="iq">æŒ‡å—ã€‚ä½ ä¹Ÿå¯ä»¥é˜…è¯»æˆ‘ä»¥å‰çš„ä¸€äº›åšå®¢æ–‡ç« ã€‚</em></p></blockquote><p id="6760" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">azure Event Hubs<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">è¿˜é€šè¿‡å…¬å¼€Kafkaå…¼å®¹ç«¯ç‚¹æ¥æä¾›Apache Kafkaæ”¯æŒ</a>ï¼ŒKafkaå…¼å®¹ç«¯ç‚¹å¯ç”±æ‚¨ç°æœ‰çš„åŸºäºKafkaçš„åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œä½œä¸ºè¿è¡Œæ‚¨è‡ªå·±çš„Kafkaé›†ç¾¤çš„æ›¿ä»£æ–¹æ¡ˆã€‚<code class="fe kn ko kp kq b">SASL</code>åœ¨<a class="ae kl" href="https://github.com/dapr/dapr/releases/tag/v0.2.0" rel="noopener ugc nofollow" target="_blank"> Daprç‰ˆæœ¬0.2.0 </a>ä¸­å¢åŠ äº†Kafkaç»‘å®šçš„authï¼Œä»è€Œä½¿å¾—é€šè¿‡<code class="fe kn ko kp kq b">Dapr</code>ä¸­çš„Kafkaç»‘å®šæ”¯æŒä½¿ç”¨Azureäº‹ä»¶ä¸­å¿ƒæˆä¸ºå¯èƒ½â€”â€”è¿™å°±æ˜¯è¿™ç¯‡åšå®¢å°†è¦å±•ç¤ºçš„ã€‚</p><p id="f9d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆè®¾ç½®æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ã€‚</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="8fb9" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">å…ˆå†³æ¡ä»¶</h1><ul class=""><li id="f1be" class="mc md iq jp b jq me ju mf jy mg kc mh kg mi kk mj mk ml mm bi translated">CLIå’Œè¿è¡Œæ—¶ç»„ä»¶</li><li id="8b86" class="mc md iq jp b jq mn ju mo jy mp kc mq kg mr kk mj mk ml mm bi translated">Azureæ´»åŠ¨ä¸­å¿ƒ</li></ul><h2 id="e981" class="ms lf iq bd lg mt mu dn lk mv mw dp lo jy mx my ls kc mz na lw kg nb nc ma nd bi translated">Dapr</h2><p id="df55" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">è¯·é˜…è¯»<code class="fe kn ko kp kq b">Dapr</code> <a class="ae kl" href="https://github.com/dapr/docs/blob/master/getting-started/" rel="noopener ugc nofollow" target="_blank">å…¥é—¨æŒ‡å—</a>äº†è§£å¦‚ä½•å®‰è£…Dapr CLIçš„è¯´æ˜</p><p id="bee6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¾‹å¦‚ç”¨äºmac(å®‰è£…<code class="fe kn ko kp kq b">Dapr CLI</code>åˆ°<code class="fe kn ko kp kq b">/usr/local/bin</code>)</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="d25c" class="ms lf iq kq b gy np nq l nr ns">curl -fsSL https://raw.githubusercontent.com/dapr/cli/master/install/install.sh | /bin/bash</span></pre><p id="5f8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ—¦æœ‰äº†CLIï¼Œå°±å¯ä»¥ä½¿ç”¨<code class="fe kn ko kp kq b">dapr init</code>åœ¨æœ¬åœ°è¿è¡Œï¼Œæˆ–è€…ä½¿ç”¨<code class="fe kn ko kp kq b">dapr init --kubernetes</code>åœ¨Kubernetesé›†ç¾¤ä¸Šè¿è¡Œã€‚</p><h2 id="ad42" class="ms lf iq bd lg mt mu dn lk mv mw dp lo jy mx my ls kc mz na lw kg nb nc ma nd bi translated">è®¾ç½®Azureäº‹ä»¶ä¸­å¿ƒ</h2><p id="920e" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">å¦‚æœä½ è¿˜æ²¡æœ‰ä¸€ä¸ª<a class="ae kl" href="https://docs.microsoft.com/azure/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å¾®è½¯Azureè´¦æˆ·</a>ï¼Œé‚£å°±å»æ³¨å†Œä¸€ä¸ªå…è´¹è´¦æˆ·å§ï¼ã€‚å®Œæˆåï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å¿«é€Ÿå…¥é—¨å·¥å…·ä¹‹ä¸€å¿«é€Ÿè®¾ç½®Azureäº‹ä»¶ä¸­å¿ƒ:</p><ul class=""><li id="2474" class="mc md iq jp b jq jr ju jv jy nt kc nu kg nv kk mj mk ml mm bi translated">Azureé—¨æˆ·ç½‘ç«™â€” <a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-create?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œæ˜¯ä¸€ä¸ªåˆ†æ­¥æŒ‡å—</a></li><li id="fe9a" class="mc md iq jp b jq mn ju mo jy mp kc mq kg mr kk mj mk ml mm bi translated">Azure CLIæˆ–Azure Cloud shell(åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­ï¼)â€” <a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-quickstart-cli?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œæœ‰ä¸€ä¸ªåˆ†æ­¥æŒ‡å—</a></li></ul><p id="97fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œæ‚¨åº”è¯¥æœ‰ä¸€ä¸ªå¸¦æœ‰åç§°ç©ºé—´å’Œå…³è”äº‹ä»¶ä¸­å¿ƒ(ä¸»é¢˜)çš„äº‹ä»¶ä¸­å¿ƒå®ä¾‹ã€‚ä½œä¸ºæœ€åä¸€æ­¥ï¼Œæ‚¨éœ€è¦è·å–è¿æ¥å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/authenticate-shared-access-signature?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å‘äº‹ä»¶ä¸­å¿ƒ</a> â€” <a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">è¿›è¡Œèº«ä»½éªŒè¯ã€‚ä½¿ç”¨æœ¬æŒ‡å—</a>å®Œæˆæ­¤æ­¥éª¤ã€‚</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="8b0f" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">æ¦‚è§‚</h1><p id="7616" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">ç¤ºä¾‹åº”ç”¨ç¨‹åºåŒ…æ‹¬:</p><ul class=""><li id="5ca5" class="mc md iq jp b jq jr ju jv jy nt kc nu kg nv kk mj mk ml mm bi translated">å‘Azureäº‹ä»¶ä¸­å¿ƒå‘é€äº‹ä»¶çš„ç”Ÿäº§è€…åº”ç”¨ç¨‹åºã€‚è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Goåº”ç”¨ç¨‹åºï¼Œå®ƒä½¿ç”¨<a class="ae kl" href="https://github.com/Shopify/sarama" rel="noopener ugc nofollow" target="_blank"> Saramaå®¢æˆ·ç«¯</a>ä¸Azure Event Hubs Kafkaç«¯ç‚¹å¯¹è¯ã€‚</li><li id="f321" class="mc md iq jp b jq mn ju mo jy mp kc mq kg mr kk mj mk ml mm bi translated">ä¸€ä¸ªæ¶ˆè´¹åº”ç”¨ç¨‹åºï¼Œä»Kafkaä¸»é¢˜æ¶ˆè´¹å¹¶æ‰“å°å‡ºæ•°æ®ã€‚æ­¤åº”ç”¨ç¨‹åºä½¿ç”¨Daprè¿è¡Œ</li></ul><h2 id="8a85" class="ms lf iq bd lg mt mu dn lk mv mw dp lo jy mx my ls kc mz na lw kg nb nc ma nd bi translated">ä½¿ç”¨Daprè¿è¡Œæ¶ˆè´¹è€…åº”ç”¨ç¨‹åº</h2><p id="aae5" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">ä»å…‹éš†å›è´­å¼€å§‹</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="bae9" class="ms lf iq kq b gy np nq l nr ns">git clone <a class="ae kl" href="https://github.com/abhirockzz/dapr-kafka-eventhubs-bindings" rel="noopener ugc nofollow" target="_blank">https://github.com/abhirockzz/dapr-kafka-eventhubs-bindings</a></span></pre><p id="aa60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œæ˜¯ç»‘å®šç»„ä»¶YAML</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="39f1" class="ms lf iq kq b gy np nq l nr ns">apiVersion: dapr.io/v1alpha1<br/>kind: Component<br/>metadata:<br/>  name: timebound<br/>spec:<br/>  type: bindings.kafka<br/>  metadata:<br/>    - name: brokers<br/>      value: [replace]<br/>    - name: topics<br/>      value: [replace]<br/>    - name: consumerGroup<br/>      value: $Default<br/>    - name: authRequired<br/>      value: "true"<br/>    - name: saslUsername<br/>      value: $ConnectionString<br/>    - name: saslPassword<br/>      value: [replace]</span></pre><p id="743c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ›´æ–°<code class="fe kn ko kp kq b">components/eventhubs_binding.yaml</code>ä»¥åŒ…å«Azureäº‹ä»¶ä¸­å¿ƒçš„è¯¦ç»†ä¿¡æ¯</p><ul class=""><li id="14af" class="mc md iq jp b jq jr ju jv jy nt kc nu kg nv kk mj mk ml mm bi translated"><code class="fe kn ko kp kq b">brokers</code> -æ›¿æ¢ä¸ºAzureäº‹ä»¶ä¸­å¿ƒç«¯ç‚¹ï¼Œä¾‹å¦‚<code class="fe kn ko kp kq b">foobar.servicebus.windows.net:9093</code>ï¼Œå…¶ä¸­<code class="fe kn ko kp kq b">foobar</code>æ˜¯<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-features?WT.mc_id=medium-blog-abhishgu#namespace" rel="noopener ugc nofollow" target="_blank">äº‹ä»¶ä¸­å¿ƒåç§°ç©ºé—´</a></li><li id="1cc8" class="mc md iq jp b jq mn ju mo jy mp kc mq kg mr kk mj mk ml mm bi translated"><code class="fe kn ko kp kq b">saslPassword</code> -è¿™éœ€è¦æ›´æ¢ä¸º<a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/authenticate-shared-access-signature?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">äº‹ä»¶é›†çº¿å™¨è¿æ¥å­—ç¬¦ä¸²</a> - <a class="ae kl" href="https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">ä½¿ç”¨æœ¬æŒ‡å—</a>(å¦‚å‰æ‰€è¿°)</li><li id="75ec" class="mc md iq jp b jq mn ju mo jy mp kc mq kg mr kk mj mk ml mm bi translated"><code class="fe kn ko kp kq b">consumerGroup</code> -ä½ å¯ä»¥ç»§ç»­ä½¿ç”¨<code class="fe kn ko kp kq b">$Default</code>ä½œä¸ºä»·å€¼æˆ–è€…åœ¨Azureæ´»åŠ¨ä¸­å¿ƒåˆ›å»ºä¸€ä¸ªæ–°çš„æ¶ˆè´¹è€…ç¾¤ä½“(ä½¿ç”¨<a class="ae kl" href="https://docs.microsoft.com/cli/azure/eventhubs/eventhub/consumer-group?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-eventhubs-eventhub-consumer-group-create" rel="noopener ugc nofollow" target="_blank"> Azure CLI </a>æˆ–portal)å¹¶ä½¿ç”¨å®ƒ</li></ul><p id="abba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯åŠ¨ä½¿ç”¨Azureäº‹ä»¶ä¸­å¿ƒè¾“å…¥ç»‘å®šçš„Goåº”ç”¨ç¨‹åº</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="8b02" class="ms lf iq kq b gy np nq l nr ns">cd app<br/>export APP_PORT=9090<br/>dapr run --app-port $APP_PORT go run consumer.go</span></pre><p id="0f5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„æ—¥å¿—:</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="0d4d" class="ms lf iq kq b gy np nq l nr ns">â„¹ï¸  Starting Dapr with id Bugarrow-Walker. HTTP Port: 52089. gRPC Port: 52090<br/>âœ…  You're up and running! Both Dapr and your app logs will appear here.</span><span id="2992" class="ms lf iq kq b gy nw nq l nr ns">== DAPR == time="2020-01-14T19:35:09+05:30" level=info msg="starting Dapr Runtime -- version 0.3.0 -- commit v0.3.0-rc.0-1-gfe6c306-dirty"<br/>== DAPR == time="2020-01-14T19:35:09+05:30" level=info msg="log level set to: info"<br/>== DAPR == time="2020-01-14T19:35:09+05:30" level=info msg="standalone mode configured"<br/>== DAPR == time="2020-01-14T19:35:09+05:30" level=info msg="dapr id: Bugarrow-Walker"<br/>== DAPR == time="2020-01-14T19:35:09+05:30" level=info msg="loaded component messagebus (pubsub.redis)"<br/>== DAPR == time="2020-01-14T19:35:09+05:30" level=info msg="loaded component statestore (state.redis)"<br/>== DAPR == time="2020-01-14T19:35:09+05:30" level=info msg="loaded component eventhubs-input (bindings.kafka)"<br/>== DAPR == time="2020-01-14T19:35:09+05:30" level=info msg="application protocol: http. waiting on port 9090"<br/>== DAPR == time="2020-01-14T19:35:10+05:30" level=info msg="application discovered on port 9090"</span></pre><h2 id="d2c3" class="ms lf iq bd lg mt mu dn lk mv mw dp lo jy mx my ls kc mz na lw kg nb nc ma nd bi translated">è¿è¡ŒAzureäº‹ä»¶ä¸­å¿ƒç”Ÿæˆå™¨åº”ç”¨ç¨‹åº</h2><p id="6a76" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">è®¾ç½®æ‰€éœ€çš„ç¯å¢ƒå˜é‡:</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="14cd" class="ms lf iq kq b gy np nq l nr ns">export EVENTHUBS_CONNECTION_STRING="[replace with connection string]"<br/>export EVENTHUBS_BROKER=[replace with broker endpoint]<br/>export EVENTHUBS_TOPIC=[replace with topic name]<br/>export EVENTHUBS_USERNAME="\$ConnectionString"</span></pre><blockquote class="kr ks kt"><p id="9bdb" class="jn jo km jp b jq jr js jt ju jv jw jx ku jz ka kb kv kd ke kf kw kh ki kj kk ij bi translated"><em class="iq">ä¸éœ€è¦ä¿®æ”¹</em> <code class="fe kn ko kp kq b"><em class="iq">EVENTHUBS_USERNAME</em></code></p></blockquote><p id="9ca4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿è¡Œproduceråº”ç”¨ç¨‹åºâ€”â€”å®ƒä¼šä¸€ç›´å‘æŒ‡å®šçš„äº‹ä»¶ä¸­å¿ƒä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œç›´åˆ°åœæ­¢(æŒ‰<code class="fe kn ko kp kq b">ctrl+c</code>åœæ­¢åº”ç”¨ç¨‹åº)</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="e5e6" class="ms lf iq kq b gy np nq l nr ns">cd producer<br/>go run producer.go</span></pre><p id="ecbb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨åº”è¯¥åœ¨produceråº”ç”¨ç¨‹åºä¸­çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—:</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="397a" class="ms lf iq kq b gy np nq l nr ns">Event Hubs broker [foobar.servicebus.windows.net:9093]<br/>Event Hubs topic test<br/>Waiting for ctrl+c<br/>sent message {"time":"Tue Jan 14 19:41:53 2020"} to partition 3 offset 523<br/>sent message {"time":"Tue Jan 14 19:41:56 2020"} to partition 0 offset 527<br/>sent message {"time":"Tue Jan 14 19:41:59 2020"} to partition 4 offset 456<br/>sent message {"time":"Tue Jan 14 19:42:02 2020"} to partition 2 offset 486<br/>sent message {"time":"Tue Jan 14 19:42:06 2020"} to partition 0 offset 528</span></pre><h2 id="cb1b" class="ms lf iq bd lg mt mu dn lk mv mw dp lo jy mx my ls kc mz na lw kg nb nc ma nd bi translated">ç¡®è®¤</h2><p id="009a" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">æ£€æŸ¥Dapråº”ç”¨ç¨‹åºæ—¥å¿—ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ä»äº‹ä»¶ä¸­å¿ƒæ”¶åˆ°çš„æ¶ˆæ¯ã€‚</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="0ed5" class="ms lf iq kq b gy np nq l nr ns">== APP == data from Event Hubs '{Tue Jan 14 19:35:21 2020}'<br/>== APP == data from Event Hubs '{Tue Jan 14 19:41:53 2020}'<br/>== APP == data from Event Hubs '{Tue Jan 14 19:41:56 2020}'<br/>== APP == data from Event Hubs '{Tue Jan 14 19:41:59 2020}'<br/>== APP == data from Event Hubs '{Tue Jan 14 19:42:02 2020}'<br/>== APP == data from Event Hubs '{Tue Jan 14 19:42:06 2020}'</span></pre></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="7d8d" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">å¹•åâ€¦</h1><p id="3993" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">ä¸‹é¢æ˜¯å…¶å·¥ä½œåŸç†çš„æ€»ç»“:</p><p id="700e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¾“å…¥ç»‘å®šå®šä¹‰äº†Kafkaé›†ç¾¤è¦è¿æ¥çš„è¿æ¥å‚æ•°ã€‚é™¤äº†è¿™äº›å‚æ•°ä¹‹å¤–ï¼Œ<code class="fe kn ko kp kq b">metadata.name</code>å±æ€§ä¹Ÿå¾ˆé‡è¦ã€‚</p><p id="3666" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¶ˆè´¹è€…åº”ç”¨ç¨‹åºåœ¨<code class="fe kn ko kp kq b">/timebound</code>å…¬å¼€äº†ä¸€ä¸ªRESTç«¯ç‚¹â€”â€”è¿™ä¸è¾“å…¥ç»‘å®šç»„ä»¶çš„åç§°ç›¸åŒ(ä¸æ˜¯å·§åˆï¼)</p><pre class="nh ni nj nk gt nl kq nm nn aw no bi"><span id="1312" class="ms lf iq kq b gy np nq l nr ns">func main() {<br/>	http.HandleFunc("/timebound", func(rw http.ResponseWriter, req *http.Request) {<br/>		var _time TheTime</span><span id="755a" class="ms lf iq kq b gy nw nq l nr ns">		err := json.NewDecoder(req.Body).Decode(&amp;_time)<br/>		if err != nil {<br/>			fmt.Println("error reading message from event hub binding", err)<br/>			rw.WriteHeader(500)<br/>			return<br/>		}<br/>		fmt.Printf("data from Event Hubs '%s'\n", _time)<br/>		rw.WriteHeader(200)<br/>	})<br/>	http.ListenAndServe(":"+port, nil)<br/>}</span></pre><p id="d5c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kn ko kp kq b">Dapr</code>è¿è¡Œæ—¶æ‰§è¡Œä»äº‹ä»¶ä¸­å¿ƒæ¶ˆè´¹çš„ç¹é‡å·¥ä½œï¼Œå¹¶ç¡®ä¿å®ƒåœ¨å¸¦æœ‰äº‹ä»¶æœ‰æ•ˆè´Ÿè½½çš„<code class="fe kn ko kp kq b">/timebound</code>ç«¯ç‚¹ä½¿ç”¨<code class="fe kn ko kp kq b">POST</code>è¯·æ±‚è°ƒç”¨Goåº”ç”¨ç¨‹åºã€‚ç„¶åæ‰§è¡Œappé€»è¾‘ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹åªæ˜¯è®°å½•åˆ°æ ‡å‡†è¾“å‡ºã€‚</p><h1 id="ef69" class="le lf iq bd lg lh nx lj lk ll ny ln lo lp nz lr ls lt oa lv lw lx ob lz ma mb bi translated">æ‘˜è¦</h1><p id="d066" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">åœ¨è¿™ç¯‡åšå®¢æ–‡ç« ä¸­ï¼Œæ‚¨çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨Azure Event Hubsä½¿ç”¨<code class="fe kn ko kp kq b">Dapr</code>ç»‘å®šæ¥è¿æ¥å’Œé›†æˆåŸºäºKafkaçš„åº”ç”¨ç¨‹åºã€‚</p><p id="6ea6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œ<code class="fe kn ko kp kq b">Dapr</code>æ­£å¤„äºalphaçŠ¶æ€(<code class="fe kn ko kp kq b">v0.3.0</code>)ï¼Œå¹¶ä¹äºæ¥å—ç¤¾åŒºè´¡çŒ®ğŸ˜ƒå‰å¾€https://github.com/dapr/dapræ½œæ°´å§ï¼</p><p id="3cb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œè¯·å–œæ¬¢å¹¶å…³æ³¨ğŸ™Œå¾ˆé«˜å…´é€šè¿‡<a class="ae kl" href="https://twitter.com/abhi_tweeter" rel="noopener ugc nofollow" target="_blank"> Twitter </a>è·å¾—åé¦ˆæˆ–å‘è¡¨è¯„è®ºã€‚</p></div></div>    
</body>
</html>