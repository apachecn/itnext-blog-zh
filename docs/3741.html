<html>
<head>
<title>How To Cache Http Requests in Angular with Rxjs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ç”¨Rxjsç¼“å­˜Angularä¸­çš„Httpè¯·æ±‚</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-to-cache-http-requests-in-angular-with-rxjs-9aa9d59ed044?source=collection_archive---------1-----------------------#2020-02-15">https://itnext.io/how-to-cache-http-requests-in-angular-with-rxjs-9aa9d59ed044?source=collection_archive---------1-----------------------#2020-02-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a4becac3ad01e7e35e4af7969927745d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*T5prJPUu4pbFFDCa.jpg"/></div></div></figure><p id="a173" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å½“æˆ‘åœ¨ä¸ªäººç½‘ç«™ä¸Šå»ºç«‹portfolioéƒ¨åˆ†æ—¶ï¼Œæˆ‘æƒ³è¿™æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œæˆ‘åº”è¯¥ä»Githubè·å¾—æ•°æ®ï¼Œä»¥æ˜¾ç¤ºæˆ‘â€œè‡ªè±ªâ€çš„å­˜å‚¨åº“ï¼Œæˆ‘ä¸å¿…æ‹…å¿ƒåœ¨å‰ç«¯æ›´æ–°ä»»ä½•ä¿¡æ¯ï¼Œå› ä¸ºGithubä¼šè‡ªåŠ¨ä¸ºæˆ‘åšè¿™ä»¶äº‹ã€‚</p><p id="fa17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸€åˆ‡éƒ½è¿›è¡Œå¾—éå¸¸é¡ºåˆ©ï¼Œç›´åˆ°æœ‰ä¸€å¤©ï¼Œæˆ‘å‘ç°äº†ä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œè¿™å¯¼è‡´äº†è¿™ç¯‡å…³äºå¦‚ä½•ç”¨Rxjsç¼“å­˜HTTPè¯·æ±‚çš„æ–‡ç« ã€‚</p><p id="0be8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">é—®é¢˜</strong></p><p id="8c7d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ¯æ¬¡æˆ‘æµè§ˆé¡µé¢ï¼Œå®ƒéƒ½ä¼šå‘é€å¦ä¸€ä¸ªè¯·æ±‚ã€‚æœ‰æ—¶ï¼Œä¼šå‡ºç°é”™è¯¯ï¼Œå› ä¸ºå®ƒè§¦åŠäº†GitHub APIçš„æé™ã€‚</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/925c099bfc9cfc97d34e35d534dd192f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTawwZDvT_5gtNIhqNksqg.png"/></div></div></figure><p id="1ef7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€åˆçš„æ–¹æ³•æ˜¯ä½¿ç”¨HttpClientæœåŠ¡æ¥å‘é€è¯·æ±‚å¹¶ä»Githubè·å–é¡¹ç›®ã€‚æ˜¯å› ä¸ºæˆ‘æ¯æ¬¡å›åˆ°ä¸»é¡µï¼ŒHttpè¯·æ±‚éƒ½ä¼šé‡æ–°è§¦å‘ä¸€æ¬¡ã€‚</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="700e" class="lg lh iq lc b gy li lj l lk ll">// Before</span><span id="6995" class="lg lh iq lc b gy lm lj l lk ll">getGitProjects() {<br/>    const filteredProjects = [];    <br/>    try {    <br/>      const projects = await this.http.get(this.gitBaseUrl).toPromise() as GitProject[];    <br/>      for (const project of projects) {    <br/>        if (this.gitProjects.includes(project.name)) {    <br/>          const mappedProject: GitProject = {    <br/>            name: project.name,    <br/>            description: project.description,    <br/>            html_url: project.html_url,    <br/>            language: project.language,    <br/>            stargazers_count: project.stargazers_count,    <br/>            forks: project.forks    <br/>          };    <br/>          filteredProjects.push(mappedProject)    <br/>        }    <br/>      }    <br/>    } catch (error) {    <br/>      captureException(error)    <br/>      console.error(error)    <br/>    }</span><span id="f4f6" class="lg lh iq lc b gy lm lj l lk ll">return filteredProjects<br/>}</span></pre><p id="2c3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¯¹äºæˆ‘çš„è¯»è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ï¼Œä»–ä»¬ä¼šä»ä¸€ä¸ªAPIä¸­å¤šæ¬¡è·å–æ•°æ®ã€‚åº”è¯¥æœ‰ä¸€ç§æ–¹æ³•æ¥ç¼“å­˜ç»“æœå¹¶ä½¿ç”¨å®ƒã€‚è€ŒRXJSæ°æ°å…·å¤‡äº†è¿™ä¸€ç‚¹â€”â€”<strong class="ka ir">åˆ†äº«å›æ”¾</strong>ã€‚</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="baa3" class="lg lh iq lc b gy li lj l lk ll">// After</span><span id="3c66" class="lg lh iq lc b gy lm lj l lk ll">getGitProjects(): void {<br/>    this.projects$ = this.http.get&lt;GitProject[]&gt;(this.gitBaseUrl).pipe(<br/>      map(projects =&gt;<br/>        projects.filter(project =&gt; this.gitProjects.includes(project.name))<br/>      ),<br/>      // publishReplay(1),<br/>      // refCount(),<br/>      <strong class="lc ir">shareReplay({ bufferSize: 1, refCount: true }),</strong><br/>      catchError(error =&gt; captureException(error))<br/>    ) as Observable&lt;GitProject[]&gt;<br/>}</span></pre><p id="3b62" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">è¯´æ˜</strong>:é…åˆ<a class="ae ln" href="https://www.learnrxjs.io/learn-rxjs/operators/multicasting/sharereplay" rel="noopener ugc nofollow" target="_blank">åˆ†äº«å›æ”¾</a>ä½¿ç”¨ã€‚å½“æˆ‘æ¥å›å¯¼èˆªåˆ°ä¸»é¡µæ—¶ï¼Œå®ƒæ€»æ˜¯è¿”å›æ•°æ®æµä¸­æœ€åå‘å‡ºçš„å€¼ã€‚å…³äºRxjs çš„é­”åŠ›ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæœ‰è¶£çš„è¯»ç‰©ï¼Œä½ åº”è¯¥è¯»ä¸€è¯»ã€‚</p><p id="557b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¼˜åŒ–åï¼Œæ¯å½“æˆ‘å¯¼èˆªåˆ°å…¶ä»–é¡µé¢ã€‚å®ƒä¸ä¼šå‘é€ä»»ä½•å…¶ä»–è¯·æ±‚ã€‚</p><p id="70b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç»“æœä»¤äººæ»¡æ„ã€‚</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lo"><img src="../Images/4f532d6411df00389cb134651790496d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AE5uDhkgD1mp6Ok7fqYa6Q.png"/></div></div></figure><p id="1cf8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é“¾æ¥åˆ°<a class="ae ln" href="https://github.com/dalenguyen/dalenguyen.github.io/blob/dev/apps/portfolio/src/app/shared/services/portfolio.service.ts" rel="noopener ugc nofollow" target="_blank"> portfolio.service.ts </a></p><p id="02a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¸Œæœ›è¿™æœ‰æ‰€å¸®åŠ©ï¼›)</p><p id="1cdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae ln" href="https://twitter.com/dale_nguyen" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">åœ¨Twitterä¸Šå…³æ³¨æˆ‘</strong> </a>äº†è§£Angularã€JavaScript &amp; WebDevelopmentçš„æœ€æ–°å†…å®¹ğŸ‘</p></div></div>    
</body>
</html>