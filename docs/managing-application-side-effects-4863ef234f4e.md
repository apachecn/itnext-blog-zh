# ç®¡ç†åº”ç”¨ç¨‹åºå‰¯ä½œç”¨:Redux-Saga ç®€ä»‹

> åŸæ–‡ï¼š<https://itnext.io/managing-application-side-effects-4863ef234f4e?source=collection_archive---------8----------------------->

![](img/9b49bd96eb8dca464deb77872282b0b4.png)

## å¼€å§‹ä¹‹å‰â€¦

æœ¬æ–‡ç”±ä¸¤éƒ¨åˆ†ç»„æˆ:é¦–å…ˆäº†è§£å‰¯ä½œç”¨ä»¥åŠå®ƒä»¬ä¸ Redux çš„å…³ç³»ï¼Œç„¶åæ·±å…¥ç ”ç©¶ Redux-Saga çš„åŸºæœ¬åŸç†ã€‚å¦‚æœä½ åªæ˜¯å¯¹å¿«é€Ÿç†è§£ Redux-Saga æ„Ÿå…´è¶£ï¼Œè¯·éšæ„è·³åˆ° Redux-Saga éƒ¨åˆ†ã€‚ä½†æ˜¯å¦‚æœä½ ä»ç„¶ä¸ç¡®å®š Redux-Saga æ˜¯å¦é€‚åˆä½ ï¼Œé‚£ä¹ˆæœ¬æ–‡çš„ç¬¬ä¸€éƒ¨åˆ†å¯èƒ½ä¼šå¸®åŠ©ä½ åšå‡ºå†³å®šã€‚

## ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ

Redux ä½œä¸º UI web åº”ç”¨ç¨‹åºä¸­å¤„ç†çŠ¶æ€ç®¡ç†çš„ä¸»è¦æ–¹æ³•è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­é‡‡ç”¨ Redux é€šå¸¸ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœ(å°¤å…¶æ˜¯å¯¹äºç¬¬ä¸€æ¬¡ä½¿ç”¨ Redux çš„å¼€å‘äººå‘˜):

1.  é˜…è¯»å¹¶æµè§ˆ [Redux æ•™ç¨‹](https://redux.js.org/basics/basic-tutorial)
2.  ä¸ºåº”ç”¨ç¨‹åºçš„ä¸€å°éƒ¨åˆ†å†™ä¸€äº›åŠ¨ä½œåˆ›å»ºè€…å’Œç¼©å‡è€…
3.  å°è¯•å‘å‡ºä¸€ä¸ª AJAX è¯·æ±‚ï¼Œå¹¶å°†ç»“æœæ•°æ®å­˜å‚¨åœ¨ Redux ä¸­
4.  å¼€å§‹æœç´¢å †æ ˆæº¢å‡ºï¼Œæ‰¾å‡ºä¸ºä»€ä¹ˆè¿™ä¸ªç®€å•çš„ä»»åŠ¡ä¼šå¦‚æ­¤æ··ä¹±
5.  è´¨ç–‘äººç”Ÿé€‰æ‹©

ä»–ä»¬å°†ä¼šå‘ç°ï¼ŒRedux å¯¹äºä»€ä¹ˆæ˜¯â€œæ ¸å¿ƒâ€åŠŸèƒ½çš„æ¦‚å¿µéå¸¸æœ‰é™ã€‚åœ¨çº¯ Redux åº”ç”¨ç¨‹åºä¸­ï¼Œåº”ç”¨ç¨‹åºéµå¾ªä»¥ä¸‹é¡ºåº:

1.  è°ƒåº¦ä¸€ä¸ªåŠ¨ä½œ
2.  å‡å‹å™¨æ”¹å˜å•†åº—
3.  é‡å¤

è¿™ä¸ªåº”ç”¨ç¨‹åºæµæ˜¯åŒæ­¥å’Œç¡®å®šæ€§çš„(å› ä¸º reducers è¢«é™åˆ¶ä¸ºåŒæ­¥å’Œç¡®å®šæ€§çš„)ã€‚é€šå¸¸ï¼Œè¿™ä¸ªæµç¨‹ä¹Ÿå®Œå…¨ä¸è¶³ä»¥å¤„ç†ç°ä»£ UI web åº”ç”¨ç¨‹åºæ‰§è¡Œçš„æ‰€æœ‰å¯èƒ½çš„ä»»åŠ¡ã€‚

ä» Redux çš„è§’åº¦æ¥çœ‹ï¼Œä»»ä½•å‘ç”Ÿåœ¨æ­£å¸¸æµç¨‹ä¹‹å¤–çš„äº‹æƒ…éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª**å‰¯ä½œç”¨**ï¼Œå› æ­¤å®Œå…¨ç”±å¼€å‘äººå‘˜æ¥å†³å®šä»–ä»¬åº”è¯¥å¦‚ä½•å»ºæ¨¡å’Œå®ç°è¿™äº›ä»»åŠ¡ï¼Œä»¥åŠä»–ä»¬åº”è¯¥å¦‚ä½•ä¸ Redux çš„å‡†ç³»ç»Ÿåº”ç”¨ç¨‹åºæµç¨‹è¿›è¡Œäº¤äº’ã€‚è¿™åŒ…æ‹¬ä»¥ä¸‹å†…å®¹:

*   ä¸å¼‚æ­¥ API çš„äº¤äº’
*   é€šè¿‡ AJAX è¯·æ±‚è·å–/å‘å¸ƒæ•°æ®
*   è®¾ç½®è¶…æ—¶å’Œé—´éš”
*   è°ƒåº¦æ“ä½œä»¥å“åº”å…¶ä»–æ“ä½œ

ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰`getUser(id)`æ–¹æ³•çš„ API å®¢æˆ·ç«¯ï¼Œå®ƒå°†è°ƒç”¨ä¸€ä¸ª REST API `/users/:id`æ¥è¿”å›ä¸€ä¸ªç”¨æˆ·é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬å¸Œæœ›å°†è¿™äº›æ•°æ®å­˜å‚¨åˆ° Redux ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥è·¨åº”ç”¨ç¨‹åºè®¿é—®è¿™äº›æ•°æ®ã€‚

è®©æˆ‘ä»¬ä¸ºæ­¤è®¾è®¡åŠ¨ä½œå’ŒçŠ¶æ€ã€‚ç¬¬ä¸€ååº”å¯èƒ½æ˜¯åˆ›å»ºä¸€ä¸ªåŠ¨ä½œï¼Œ`GET_USER`ï¼Œç„¶åç”¨ä¸€ä¸ª reducer å¤„ç†è¿™ä¸ªåŠ¨ä½œã€‚ç„¶è€Œï¼Œç”¨æˆ·æ•°æ®å°†è¢«å¼‚æ­¥æ£€ç´¢(å› ä¸ºå®ƒæ˜¯ä¸€ä¸ª AJAX è¯·æ±‚)ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†éµå¾ª [Redux å…³äºè®¾è®¡å¼‚æ­¥åŠ¨ä½œå’ŒçŠ¶æ€çš„å»ºè®®](https://redux.js.org/advanced/async-actions#async-actions):

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ç»„åŸºæœ¬çš„åŠ¨ä½œåˆ›å»ºè€…ï¼Œæˆ‘ä»¬æƒ³å®é™…ä¸ŠæŠŠå®ƒä»¬è¿æ¥èµ·æ¥å¹¶å‘å‡º API è¯·æ±‚(è¿™æ˜¯ Redux çš„å‰¯ä½œç”¨)ã€‚è®©æˆ‘ä»¬æ¢ç´¢å‡ ä¸ªé€‰é¡¹ï¼Œä½¿ç”¨è¿™ä¸ª Redux è®¾ç½®ä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€ã€‚

# ä½¿ç”¨ Redux æ—¶å¦‚ä½•å®ç°å‰¯ä½œç”¨ï¼Ÿ

ç”±äº [Redux å¯¹å¦‚ä½•å®ç°å‰¯ä½œç”¨å¹¶ä¸å›ºæ‰§å·±è§](https://redux.js.org/faq/actions#how-can-i-represent-side-effects-such-as-ajax-calls-why-do-we-need-things-like-action-creators-thunks-and-middleware-to-do-async-behavior)ï¼Œå› æ­¤å‡ºç°äº†è®¸å¤šç®¡ç†å®ƒä»¬çš„æ¨¡å¼ã€‚æˆ‘å–œæ¬¢å°†è¿™äº›åˆ†ä¸ºä¸¤ç±»:å®Œå…¨åœ¨ Redux ç”Ÿå‘½å‘¨æœŸä¹‹å¤–è¿è¡Œçš„æ¨¡å¼(**Redux-å¤–éƒ¨**)ï¼Œä»¥åŠä¸ Redux ç”Ÿå‘½å‘¨æœŸäº¤é”™çš„æ¨¡å¼(**ä»¥ Redux ä¸ºä¸­å¿ƒçš„**)ã€‚

# å†—ä½™å¤–éƒ¨æ¨¡å¼

å®ç°å‰¯ä½œç”¨æœ€ç›´æ¥çš„æ–¹æ³•(ä¹Ÿæ˜¯å¤§å¤šæ•°å¼€å‘äººå‘˜é¦–å…ˆä¼šé‡‡ç”¨çš„æ–¹æ³•)æ˜¯ç‹¬ç«‹äº Redux ç¼–å†™å’Œè§¦å‘å®ƒä»¬ï¼Œå¹¶è®©è¿™ä¸ªç‹¬ç«‹çš„ä»£ç [è°ƒç”¨ Redux](https://redux.js.org/api/store#store-methods) (é€šè¿‡`dispatch`æˆ–`getState`)ã€‚

## redux-å¤–éƒ¨æ¨¡å¼:è§†å›¾æ¡†æ¶

å‡è®¾æ‚¨æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªæ¡†æ¶æ¥å‘ˆç°æˆ–æ§åˆ¶åº”ç”¨ç¨‹åºï¼Œå°†å‰¯ä½œç”¨å®ç°ä½œä¸ºä»£ç çš„ä¸€éƒ¨åˆ†å­˜åœ¨ä¼¼ä¹æ˜¯å¾ˆè‡ªç„¶çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ Reactï¼Œå¸¸è§çš„æ–¹æ³•æ˜¯åœ¨æŒ‚è½½ç»„ä»¶æ—¶è§¦å‘å‰¯ä½œç”¨ï¼Œå¹¶é€šè¿‡ç»‘å®šçš„åŠ¨ä½œåˆ›å»ºå™¨å°†å‰¯ä½œç”¨çš„ä¸åŒå¼‚æ­¥è½¬æ¢ç»‘å®šåˆ° Redux:

é€šè¿‡å°† Redux ç»‘å®šåˆ°å„è‡ªçš„è§†å›¾æˆ–æœåŠ¡å±‚ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–å¸¸è§çš„ JS æ¡†æ¶ç¼–å†™ç±»ä¼¼çš„æ¨¡å¼ã€‚å¦‚æœæ²¡æœ‰æ¡†æ¶ï¼Œè¿™ç§æ¨¡å¼çœ‹èµ·æ¥å°±åƒè®© DOM äº‹ä»¶å¤„ç†ç¨‹åºè§¦å‘å‰¯ä½œç”¨ä»£ç ã€‚

**å¥½å¤„**

*   é€šè¿‡å°†å‰¯ä½œç”¨é€»è¾‘ä¸å‰¯ä½œç”¨ç»“æœçš„ä¸»è¦æ¶ˆè´¹è€…è”ç³»èµ·æ¥ï¼Œä¼šæ›´å®¹æ˜“ç†è§£
*   ä¸æ¶‰åŠæ·»åŠ æ–°çš„åº“/ä¾èµ–é¡¹

**ä¸åˆ©æ–¹é¢**

*   æ›´éš¾æµ‹è¯•å’Œé‡ç”¨ä»£ç (æœ‰æ—¶ï¼›è¿™å¯ä»¥é€šè¿‡ä»”ç»†çš„é¢„è§å’Œè®¡åˆ’æ¥é¿å…)
*   é€šå¸¸é€šè¿‡ç»™å…ˆå‰çš„çº¯é€»è¾‘å¢åŠ å‰¯ä½œç”¨æ¥å¢åŠ éƒ¨ä»¶/æ§åˆ¶å™¨é€»è¾‘çš„é•¿åº¦å’Œå¤æ‚æ€§
*   å¼ºåˆ¶å°†å‰¯ä½œç”¨ç»‘å®šåˆ°ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œè€Œä¸æ˜¯ç‹¬ç«‹è¿è¡Œ
*   ä¸å®¹æ˜“å¯¹åº”ç”¨ç¨‹åºæµä¸­å‘ç”Ÿçš„äº‹ä»¶åšå‡ºååº”ï¼Œä¾‹å¦‚è¢«åˆ†æ´¾çš„æ“ä½œ

> ***æ³¨:*** *åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œ*[***React Hooks API***](https://reactjs.org/docs/hooks-intro.html)*ä»å¤„äº alpha å¼€å‘é˜¶æ®µã€‚è¿™ä¼¼ä¹æ˜¯ä¸€ç§å¾ˆæœ‰å‰é€”çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿è¿™ç§æ¨¡å¼æ›´å®¹æ˜“åœ¨ React ä¸­æµ‹è¯•å’Œé‡ç”¨ï¼Œå¹¶æœ€å°åŒ–ç»„ä»¶ä»£ç çš„å¤æ‚æ€§ã€‚ç„¶è€Œï¼Œå®ƒä»ç„¶ä¼šå—åˆ°å‰¯ä½œç”¨ä¸ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„ä¸åˆ©å½±å“ã€‚*

# ä»¥å†—ä½™ä¸ºä¸­å¿ƒçš„æ¨¡å¼

è™½ç„¶ä½¿ç”¨ Redux-External æ¨¡å¼æ›´å®¹æ˜“å®ç°ï¼Œä½†æ˜¯å®ƒç¼ºä¹è§¦å‘æ›´å¤æ‚å‰¯ä½œç”¨çš„èƒ½åŠ›ï¼Œæ¯”å¦‚è°ƒåº¦åŠ¨ä½œæ¥å“åº”å…¶ä»–åŠ¨ä½œ(æ˜¯çš„ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`[subscribe](https://redux.js.org/api/store#a-id-subscribe-a-subscribelistener-subscribe)`æ–¹æ³•ï¼Œä½†æ˜¯ Dan Abramov è¯´[æ‚¨å¯èƒ½ä¸åº”è¯¥ä½¿ç”¨](https://github.com/reduxjs/redux/issues/303#issuecomment-125184409))ã€‚å¯¹äºåƒè¿™æ ·çš„å‰¯ä½œç”¨ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä¸€ç§é€šè¿‡æŸç§ä¸­é—´ä»¶å°†å…¶è‡ªèº«ç»‘å®šåˆ° Redux çš„æ¨¡å¼ã€‚

ä»¥ä¸‹å¯¹ä»¥ Redux ä¸ºä¸­å¿ƒçš„å‰¯ä½œç”¨æ¨¡å¼çš„æè¿°å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å— Gosha Arinich çš„æ–‡ç« [**3 Redux åº”ç”¨**](https://goshakkk.name/redux-side-effect-approaches/) ä¸­å¸¸è§çš„å‰¯ä½œç”¨å¤„ç†æ–¹æ³•çš„å¯å‘ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œåœ¨æ­¤é‡æ–°æè¿°ã€‚

## ä»¥ Redux ä¸ºä¸­å¿ƒçš„æ¨¡å¼#1:æ™ºèƒ½åŠ¨ä½œåˆ›å»ºè€…

åœ¨æ ‡å‡†çš„ Redux å®ç°ä¸­ï¼ŒåŠ¨ä½œåˆ›å»ºè€…æ˜¯çº¯ç²¹çš„**ï¼Œè¿™æ„å‘³ç€ä»–ä»¬å°†ç®€å•åœ°åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯é€‰åœ°åŸºäºä¼ é€’ç»™åŠ¨ä½œåˆ›å»ºè€…çš„ä¸€äº›å‚æ•°ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šè®©åŠ¨ä½œåˆ›å»ºè€…ä¹Ÿæ‰§è¡ŒæœŸæœ›çš„å‰¯ä½œç”¨ã€‚è¿™é€šå¸¸æ˜¯é€šè¿‡è®©åŠ¨ä½œåˆ›å»ºè€…è¿”å›ç®€å•å¯¹è±¡ä¹‹å¤–çš„å†…å®¹ï¼Œå¹¶ä½¿ç”¨ä¸­é—´ä»¶æ¥å¤„ç†è¿™äº›éå¯¹è±¡åŠ¨ä½œæ¥å®ç°çš„:**

**[**Redux-Thunk**](https://github.com/reduxjs/redux-thunk) æ˜¯è¿™ç§æ¨¡å¼çš„å¸¸ç”¨å®ç°ã€‚**

****å¥½å¤„****

*   **ä¸éœ€è¦å­¦ä¹ æ ‡å‡† JavaScript ä¹‹å¤–çš„ä»»ä½•æ–°æ¦‚å¿µæˆ–å¿ƒç†æ¨¡å‹**

****ä¸åˆ©æ–¹é¢****

*   **åŠ¨ä½œåˆ›ä½œè€…ä¸å†çº¯ç²¹ï¼Œä½¿ä»–ä»¬æ›´éš¾ç†è§£å’Œæµ‹è¯•**
*   **é™¤äº†ç®€å•çš„å‰¯ä½œç”¨ä¹‹å¤–ï¼Œç»å¸¸ä¼šå¯¼è‡´å›è°ƒåœ°ç‹±(å°½ç®¡ async-await å¯ä»¥å¸®åŠ©è§£å†³è¿™ä¸ªé—®é¢˜)**
*   **æ™ºèƒ½åŠ¨ä½œåˆ›å»ºè€…åªèƒ½åœ¨è¢«è°ƒç”¨æ—¶è¿è¡Œï¼Œè€Œä¸æ˜¯å¯¹ä»»æ„åŠ¨ä½œåšå‡ºååº”**

## **ä»¥å†—ä½™ä¸ºä¸­å¿ƒçš„æ¨¡å¼#2:æ™ºèƒ½ä¸­é—´ä»¶+ä¸“é—¨çš„åŠ¨ä½œ**

**æˆ‘ä»¬å¯ä»¥å°†å·¥ä½œè½¬ç§»åˆ°ä¸­é—´ä»¶ä¸­ï¼Œè®©æˆ‘ä»¬çš„åŠ¨ä½œä¸ºä¸­é—´ä»¶æä¾›ç‰¹æ®Šçš„æŒ‡ä»¤ï¼Œè€Œä¸æ˜¯åœ¨åŠ¨ä½œåˆ›å»ºå™¨ä¸­è¿è¡Œå‰¯ä½œç”¨ã€‚è¿™ç±»ä¼¼äº**æ™ºèƒ½åŠ¨ä½œåˆ›å»ºè€…**æ¨¡å¼ï¼Œé™¤äº†åŠ¨ä½œåˆ›å»ºè€…ä»ç„¶æ˜¯çº¯ç²¹çš„ï¼Œç°åœ¨ä¸­é—´ä»¶å°†æ‹¦æˆªåŠ¨ä½œå¹¶å¤„ç†æ‰§è¡Œä¸­çš„å‰¯ä½œç”¨:**

**[**Redux-Promise**](https://github.com/redux-utilities/redux-promise) æ˜¯è¿™ç§æ¨¡å¼çš„å¸¸ç”¨å®ç°ã€‚**

****å¥½å¤„****

*   **åŠ¨ä½œåˆ›ä½œè€…ä¿æŒçº¯æ´ï¼Œæ‰€ä»¥æ›´å®¹æ˜“æµ‹è¯•**

****ç¼ºç‚¹****

*   **æ›´éš¾æ¦‚æ‹¬æ¥å¤„ç†ä»»ä½•æœŸæœ›çš„å‰¯ä½œç”¨ï¼›æ¯ç§å‰¯ä½œç”¨é€šå¸¸éƒ½éœ€è¦è‡ªå·±ç‰¹å®šçš„ä¸­é—´ä»¶æ¥å¤„ç†**

## **ä»¥ Redux ä¸ºä¸­å¿ƒçš„æ¨¡å¼#3: Redux æŒ‚é’©/ç›‘å¬å™¨**

**æˆ‘ä»¬å¯ä»¥é‡‡ç”¨å‰é¢çš„æ¨¡å¼ï¼Œå¹¶é€šè¿‡å®Œå…¨å»é™¤åŠ¨ä½œçš„ä»»ä½•ç‰¹æ®ŠåŒ–æ¥è¿›ä¸€æ­¥æ¨å¹¿å®ƒã€‚å¦‚æœæˆ‘ä»¬ç¼–å†™å®šåˆ¶çš„ä¸­é—´ä»¶æ¥ç›‘å¬è¢«è°ƒåº¦çš„é€šç”¨åŠ¨ä½œï¼Œå¹¶ç‹¬ç«‹äº Redux ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œå‰¯ä½œç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„åŠ¨ä½œåˆ›å»ºè€…å’ŒåŠ¨ä½œå°†ä¿æŒç®€å•å’Œçº¯ç²¹ï¼Œå‰¯ä½œç”¨å°†å®Œå…¨ç”±è¯¥ä¸­é—´ä»¶æè¿°:**

**å®é™…ä¸Šï¼Œè¿™ç§æ¨¡å¼çš„å®ç°å¾ˆå°‘è®©å¼€å‘äººå‘˜ç›´æ¥ç¼–å†™æ¯ä¸ªä¸­é—´ä»¶ï¼›ä»–ä»¬é€šå¸¸ä¼šåˆ›å»ºä¸€äº›æŠ½è±¡çš„æ¨¡å‹æ¥è¿›è¡Œå¼€å‘ã€‚ [**Redux-Saga**](https://github.com/redux-saga/redux-saga) æ˜¯è¿™ç§æ¨¡å¼çš„å¸¸ç”¨å®ç°ã€‚**

****å¥½å¤„****

*   **åŠ¨ä½œå¾ˆç®€å•ï¼Œä¸åŒ…å«å‰¯ä½œç”¨çš„ä¸šåŠ¡é€»è¾‘**
*   **å…è®¸è®¸å¤šå¬ä¼—å¯¹ä¸€ä¸ªåŠ¨ä½œåšå‡ºååº”**
*   **åŒ…å«å‰¯ä½œç”¨é€»è¾‘ï¼Œå¦‚æœå®ç°æ­£ç¡®ï¼Œå¾ˆå®¹æ˜“æµ‹è¯•**

****ä¸åˆ©æ–¹é¢****

*   **è¿™ç§æ¨¡å¼çš„å®ç°åœ¨å¤æ‚æ€§å’Œæœ‰ç”¨æ€§æ–¹é¢æœ‰å¾ˆå¤§çš„ä¸åŒ**
*   **ä¼šæœ‰ä¸€ä¸ªé™¡å³­çš„å­¦ä¹ æ›²çº¿**

# **æˆ‘åº”è¯¥é€‰æ‹©å“ªç§æ¨¡å¼ï¼Ÿ**

**ä¸€å¦‚æ—¢å¾€ï¼Œè¿™å°†å–å†³äºä½ çš„é¡¹ç›®çš„éœ€æ±‚å’Œç›®æ ‡ã€‚è¿™äº›æ¨¡å¼æŒ‰ç…§å®ƒä»¬çš„ä¼¸ç¼©æ–¹å¼å¤§è‡´æ’åº(ä¸å¹¸çš„æ˜¯ï¼Œä¹ŸæŒ‰ç…§å¤æ‚æ€§æ’åº)ã€‚å¯¹äºå°è€Œç®€å•çš„é¡¹ç›®ï¼Œä½¿ç”¨ Redux-External æ–¹æ³•é€šå¸¸å°±è¶³å¤Ÿäº†ã€‚éšç€åº”ç”¨ç¨‹åºçš„å¢é•¿ï¼Œè¶Šæ¥è¶Šå¤šçš„éƒ¨åˆ†å˜å¾—ç›¸äº’ä¾èµ–ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åˆ‡æ¢åˆ°èƒ½å¤Ÿæ›´å¥½åœ°ç®¡ç†ä»£ç çš„æ¨¡å¼ã€‚**

**å¦‚æœä½ è¿˜åœ¨è¯»è¿™ç¯‡æ–‡ç« (å¾ˆé«˜å…´ä½ è¿˜åœ¨è¿™é‡Œï¼)ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å¯¹æ‚¨å½“å‰ä½¿ç”¨çš„æ¨¡å¼ä¸æ»¡æ„ï¼Œå¹¶ä¸”æœ‰å…´è¶£çœ‹çœ‹è¿˜æœ‰ä»€ä¹ˆã€‚åœ¨ [**å¹¿é˜”**](https://www.expanse.co/join-us/) è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å°† [**Redux-Saga**](https://github.com/redux-saga/redux-saga) ç”¨äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬ç»„ç»‡æˆ‘ä»¬çš„ä»£ç åº“å¹¶ç®€åŒ–æˆ‘ä»¬å®ç°å‰¯ä½œç”¨çš„æ–¹å¼ã€‚ä¸è¿‡ï¼Œç¦»å¼€åœ°é¢å¯èƒ½ä¼šå¾ˆå›°éš¾ï¼›æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†è‡´åŠ›äºä½¿å­¦ä¹ æ›²çº¿å˜å¾—æ›´å®¹æ˜“æ¥è¿‘ã€‚**

# **è¿˜åŸä¼ å¥‡**

**Redux-Saga æ˜¯ **Redux Hooks/Listeners** æ¨¡å¼çš„ä¸€ä¸ªå®ç°ï¼Œå®šä¹‰äº†ä¸€ä¸ªâ€œSagaâ€ç¼–ç¨‹æ¨¡å‹æ¥å¤„ç†å‰¯ä½œç”¨ã€‚**

**Sagas æ˜¯ä¸åº”ç”¨ç¨‹åºä¸€èµ·è¿è¡Œçš„â€œçº¿ç¨‹â€æˆ–â€œå­ä¾‹ç¨‹â€ã€‚åƒçº¿ç¨‹ä¸€æ ·ï¼Œå®ƒä»¬å¯ä»¥åœ¨ä»»ä½•ä¸Šä¸‹æ–‡ä¸­æš‚åœã€å¯åŠ¨æˆ–å–æ¶ˆ(é€šå¸¸ä½¿ç”¨ Redux æ“ä½œ)ã€‚æ­¤å¤–ï¼Œå› ä¸º Redux-Saga æ˜¯å»ºç«‹åœ¨ **Redux Hooks/Listeners** æ¨¡å¼ä¹‹ä¸Šçš„ï¼Œæ‰€ä»¥ Saga ä¹Ÿå¯ä»¥å®Œå…¨è®¿é—® Redux çŠ¶æ€ï¼Œå¯ä»¥â€œé˜»å¡â€æˆ–â€œç­‰å¾…â€Redux åŠ¨ä½œï¼Œå¹¶ä¸”å¯ä»¥è°ƒåº¦å®ƒä»¬è‡ªå·±çš„åŠ¨ä½œã€‚**

## **ES6 å‘ç”µæœº**

**ä½¿ç”¨ Redux-Saga çš„æœ€å¤§å­¦ä¹ æ›²çº¿ä¹‹ä¸€æ˜¯å®ƒä¾èµ–äº [**ES6 ç”Ÿæˆå™¨**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*#Description):React/Redux å¼€å‘äººå‘˜ä¸å¸¸ç”¨çš„è¯­è¨€ç‰¹æ€§ã€‚**

> **"ä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½ç”¨æ™®é€šä»£ç å†™ä¼ å¥‡ï¼Ÿ"**

**ç”Ÿæˆå™¨æœ‰ä¸€äº›å¥½å¤„ï¼Œæ¯”å¦‚å…è®¸ä»¥åŒæ­¥æ–¹å¼ç¼–å†™å¼‚æ­¥æµ(ç±»ä¼¼äº async/await)ã€‚ä½†ä¸»è¦çš„ç‰¹ç‚¹æ˜¯ï¼Œå®ƒä»¬å…è®¸ä¼ å¥‡â€œæŒç»­è¿è¡Œâ€ï¼Œè€Œä¸ä¼šé˜»å¡ä¸»æ‰§è¡Œçº¿ç¨‹ã€‚ä¸åœ¨ sagas ä¸­ç›´æ¥ç¼–å†™é˜»å¡è°ƒç”¨ä¸åŒï¼Œé˜»å¡è°ƒç”¨ç”¨ä¸€ä¸ª**æ•ˆæœ**æ¥æè¿°ï¼Œå¹¶ç”¨ä¸€ä¸ª`yield`æ¥â€œåŒ…è£…â€ï¼Œè¿™å°†æ‰§è¡Œæ§åˆ¶è¿”å›ç»™ Redux-Sagaã€‚è¿™å…è®¸ Redux-Saga ä»¥å¢é‡æ–¹å¼è¿è¡Œ Sagaï¼Œå°†æ‰§è¡Œä¸ä¸»åº”ç”¨ç¨‹åºäº¤é”™(åœ¨äº†è§£äº†æ›´å¤šå…³äºç”Ÿæˆå™¨çš„çŸ¥è¯†åï¼Œè¿™å°†æ›´æœ‰æ„ä¹‰)ã€‚**

> **"é‚£ä¹ˆ ES6 å‘ç”µæœºæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ"**

**ç”Ÿæˆå™¨æ˜¯å¯ä»¥è‡ªè¡Œæš‚åœå¹¶å°†æ‰§è¡Œæ§åˆ¶è¿”å›ç»™â€œæ§åˆ¶â€å‡½æ•°(ä»è¿™ä¸€ç‚¹å¼€å§‹ç§°ä¸ºâ€œæ§åˆ¶å™¨â€)çš„å‡½æ•°ã€‚ä»–ä»¬è¿˜åœ¨ç”Ÿæˆå™¨å’Œæ§åˆ¶å™¨ä¹‹é—´ä½¿ç”¨**åŒå‘æ¶ˆæ¯ä¼ é€’**æ¥å…±äº«ä¸¤ä¸ªå‡½æ•°ä¹‹é—´çš„ä¸Šä¸‹æ–‡ã€‚**

**ä¸‹é¢çš„å¹»ç¯ç‰‡æ¼”ç¤ºäº†è¿™ç§æ§åˆ¶å™¨/å‘ç”µæœºå…³ç³»çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œä»¥ [NumberWang](https://youtu.be/0obMRztklqU) ä¸ºè°ƒ:**

> **" Redux-Saga å¦‚ä½•ä½¿ç”¨ ES6 å‘ç”µæœºï¼Ÿ"**

**åœ¨ä¸Šé¢çš„å…³ç³»ä¸­ï¼Œ **Redux-Saga ä¸­é—´ä»¶å……å½“æ§åˆ¶å™¨ï¼Œ**å’Œ**åº”ç”¨çš„ Saga æ˜¯ç”Ÿæˆå™¨**ã€‚æ— è®º saga äº§ç”Ÿä»€ä¹ˆï¼Œéƒ½å°†è¢« Redux-Saga ä¸­é—´ä»¶è§£é‡Šä¸ºæŒ‡ä»¤ï¼Œå¹¶åœ¨æŒ‡ä»¤å®Œæˆæ—¶å°†æ§åˆ¶æƒå½’è¿˜ç»™ Saga:**

## **è¿˜åŸä¼ å¥‡æ•ˆåº”**

**åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œsaga å‘ Redux-Saga ä¼ é€’äº†ä¸€ä¸ªæ‰¿è¯ºï¼ŒRedux-Saga å°†å…¶è§£é‡Šä¸ºâ€œè§£æè¿™ä¸ªæ‰¿è¯ºï¼Œç„¶åæå–å¹¶å‘å›ç»“æœâ€çš„æŒ‡ä»¤ã€‚ä¸ async/await ä¸åŒï¼Œè¿™ä¸æ˜¯ ES6 ç”Ÿæˆå™¨å†…ç½®çš„åŠŸèƒ½ã€‚è¿™æ˜¯å› ä¸º Redux-Saga çš„ä¸­é—´ä»¶å®ç°(æ§åˆ¶å™¨)å†³å®šå¯¹æ‰€æœ‰ promise ç±»å‹çš„æ¶ˆæ¯éµå¾ªè¿™äº›æŒ‡ä»¤ã€‚**

****Redux-Saga å°†ä» Saga ç”Ÿæˆçš„æ‰€æœ‰æ¶ˆæ¯è§†ä¸ºæŒ‡ä»¤ã€‚**äº‹å®ä¸Šï¼Œå®ƒåœ¨åº“ä¸­æœ‰ä¸€æ•´å¥—å†…ç½®æŒ‡ä»¤ï¼Œä½ å¯ä»¥ä¼ é€’ç»™å®ƒï¼Œè¿™äº›è¢«ç§°ä¸º [**æ•ˆæœ**](https://redux-saga.js.org/docs/basics/DeclarativeEffects.html) ã€‚è¿™äº›æ•ˆæœå…è®¸å‘é€ Redux-Saga çš„å„ç§è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œä¾‹å¦‚ç­‰å¾…æˆ–è°ƒåº¦ Redux æ“ä½œï¼Œç­‰å¾…è§£å†³çš„æ‰¿è¯ºï¼Œæˆ–è€…ç»„åˆå¤šä¸ªæ•ˆæœã€‚**

**è¿™æ˜¯ä¹‹å‰çš„ Redux-Saga ç¤ºä¾‹ï¼Œç°åœ¨ä½¿ç”¨æ•ˆæœä½œä¸ºæŒ‡ç¤ºï¼Œè€Œä¸æ˜¯æ‰¿è¯º:**

> **"æˆ‘å¦‚ä½•å¼€å§‹ä½¿ç”¨ Redux-Sagaï¼Ÿ"**

**å½“ç„¶ï¼Œå­¦ä¹ ç¼–å†™ç”Ÿæˆå™¨å‡½æ•°å’Œä½¿ç”¨ Redux-Saga çš„æœ€å¥½æ–¹æ³•æ˜¯è‡ªå·±ç¼–å†™ä¸€äº› Sagaã€‚å¦‚æœä½ çŠ¹è±«è¦ä¸è¦é©¬ä¸Šè¿è¡Œ`npm i redux-saga`,æˆ‘å·²ç»æ•´ç†äº†ä¸€ä¸ªåŒ…å«ä¸€ç³»åˆ—ä»»åŠ¡çš„æ•™å­¦èµ„æºåº“ï¼Œè¿™äº›ä»»åŠ¡å°†å‘ä½ ä»‹ç»ç”Ÿæˆå™¨å‡½æ•°ã€åº”ç”¨ç¨‹åºå‰¯ä½œç”¨ä»¥åŠä½¿ç”¨ Redux-Saga æ•ˆæœå’Œ APIã€‚è¿™ä¸ª repo è¿˜åŒ…å«æ¯ä¸ªä»»åŠ¡çš„â€œæ—  sagasâ€å®ç°(ä½¿ç”¨ Redux-External æ¨¡å¼),ä»¥ä¾¿æ‚¨å¯ä»¥æ¯”è¾ƒè¿™ç§æ–¹æ³•å°†å¦‚ä½•æ”¹å˜æ‚¨çš„ä»£ç çš„å¤–è§‚å’Œç»„ç»‡æ–¹å¼ã€‚**

**[](https://github.com/jlmart88/introduction-to-redux-saga) [## JL mart 88/redux-saga ç®€ä»‹

### é€šè¿‡åŠ¨æ‰‹å®æ–½ä»»åŠ¡ä»‹ç» Redux-Sagaâ€”JL mart 88/Redux-Saga ç®€ä»‹

github.com](https://github.com/jlmart88/introduction-to-redux-saga) 

> ***æ³¨:*** *ä»¥ä¸Šèµ„æºåº“ä½¿ç”¨çš„æ˜¯*[***TypeScript***](https://www.typescriptlang.org/index.html)***ï¼Œ*** *ä½†æ˜¯å³ä½¿ä½ ä¸è®¤è¯† TypeScript ä¹Ÿè¿˜æ˜¯å¯ä»¥ç”¨ï¼æŒ‰ç…§* `*README.md*` *ä¸­çš„è¯´æ˜è¿è¡Œé¡¹ç›®ï¼Œä¸è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥ç¼–å†™æ™®é€šçš„ ES6 JavaScriptï¼Œè€Œä¸ä¼šå—åˆ° transpiler çš„å½±å“ã€‚æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä»¥æ­¤ä¸ºå¥‘æœºï¼Œ* [*è·³ä¸Šæ‰“å­—åˆ—è½¦*](https://medium.com/@jtomaszewski/why-typescript-is-the-best-way-to-write-front-end-in-2019-feb855f9b164) *ğŸ˜‰ã€‚*** 

****å…¶ä»–èµ„æº:****

*   **[Redux-Saga æ–‡æ¡£](https://redux-saga.js.org/)**
*   **[redux åº”ç”¨ä¸­ 3 ç§å¸¸è§çš„å‰¯ä½œç”¨å¤„ç†æ–¹æ³•](https://goshakkk.name/redux-side-effect-approaches/) â€” Gosha Arinich**
*   **ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ä¼ å¥‡ï¼Ÿ â€”è²åˆ©å…‹æ–¯Â·å…‹æ‹‰å…‹**

**æƒ³å±•ç¤ºä½ æ–°ç£¨ç»ƒå‡ºæ¥çš„è¿˜åŸä¼ å¥‡æŠ€èƒ½å—ï¼Ÿ [**å¹¿é˜”å¤©åœ°æ­£åœ¨æ‹›äºº**](https://www.expanse.co/join-us/) ï¼æˆ‘ä»¬é€šè¿‡ä¸ºä¸–ç•Œä¸Šæœ€å¤§çš„ç»„ç»‡æä¾›å®æ—¶ã€å…¨é¢çš„å…¨çƒäº’è”ç½‘ä¼˜åŠ¿è§†å›¾ï¼Œæ¥å¸®åŠ©ä¿æŠ¤è¿™äº›ç»„ç»‡ã€‚å¦‚æœä½ æœ‰å­¦ä¹ å’Œæˆé•¿çš„æ¬²æœ›ï¼Œå–œæ¬¢è§£å†³æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ï¼Œç»™æˆ‘ä»¬å†™å°çŸ­ä¿¡å§ï¼**

***åŸè½½äº 2019 å¹´ 4 æœˆ 13 æ—¥ https://www.expanse.co**çš„* [*ã€‚*](https://www.expanse.co/managing-application-side-effects-an-introduction-to-redux-saga/)**