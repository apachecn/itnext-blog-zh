<html>
<head>
<title>Installing Otomi on Minikube</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨Minikubeä¸Šå®‰è£…Otomi</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/installing-otomi-on-minikube-2f83dfc421d2?source=collection_archive---------0-----------------------#2022-04-12">https://itnext.io/installing-otomi-on-minikube-2f83dfc421d2?source=collection_archive---------0-----------------------#2022-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a0c74325801c2cd149533bfef74652b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rSPh5sj-LM-kWZTW3TXBTA.png"/></div></div></figure><p id="6762" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/redkubes/otomi-core" rel="noopener ugc nofollow" target="_blank"> Otomi </a>æ˜¯ä¸€ä¸ªé¢å‘Kubernetesçš„è‡ªæ‰˜ç®¡å¹³å°å³æœåŠ¡(PaaS ),æä¾›ä¸€æ•´å¥—é›†æˆçš„ã€é¢„é…ç½®çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ç»“åˆè‡ªåŠ¨åŒ–ã€‚Otomié’ˆå¯¹åœ¨æ‰˜ç®¡çš„KubernetesæœåŠ¡(å¦‚AKSã€EKSå’ŒGCP)ä¸Šè¿è¡Œè¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†ç°åœ¨å¯ä»¥å®‰è£…åœ¨ä»»ä½•K8sé›†ç¾¤ä¸Šï¼Œç”šè‡³æ˜¯Minikubeä¸Šã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³å°è¯•Otomiï¼Œä½†ä¸æƒ³åœ¨äº‘ä¸­æ—‹è½¬é›†ç¾¤ï¼Œç°åœ¨ä½ å¯ä»¥äº†ï¼</p><p id="7da9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–°ç‰ˆæœ¬çš„Otomiç°åœ¨å®‰è£…äº†ä¸€ä¸ªæœ€å°çš„åº”ç”¨ç¨‹åºé›†ï¼Œç§°ä¸ºæ ¸å¿ƒã€‚è¯¥å†…æ ¸æä¾›äº†åŸºäºIstioã€Nginxå…¥å£æ§åˆ¶å™¨ã€Keycloakã€Oauth2ä»£ç†å’Œcert-managerçš„é«˜çº§å…¥å£æ¶æ„ã€‚é€šè¿‡web UI (Otomiæ§åˆ¶å°),æ‚¨å¯ä»¥å°†æœåŠ¡æ·»åŠ åˆ°ç½‘æ ¼ä¸­ï¼Œå¹¶ä¸”åªéœ€ä¸€æ¬¡ç‚¹å‡»å°±å¯ä»¥å®‰å…¨åœ°å…¬å¼€å®ƒä»¬ã€‚æ‰€æœ‰å…¶ä»–é›†æˆçš„åº”ç”¨ç¨‹åºç°åœ¨éƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥é€šè¿‡å°†å®ƒä»¬æ‹–åˆ°å·²å¯ç”¨çš„åº”ç”¨ç¨‹åºéƒ¨åˆ†æ¥æ¿€æ´»ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•åœ¨Minikube(åœ¨Macä¸Š)ä¸Šå®‰è£…Otomiï¼Œä»¥ä¾¿æ‚¨å¯ä»¥åœ¨cloud K8sé›†ç¾¤ä¸Šè¿è¡Œå®ƒå¹¶å¯ç”¨æ›´å¤šåº”ç”¨ç¨‹åºå’ŒåŠŸèƒ½ä¹‹å‰ä½¿ç”¨å®ƒã€‚</p><p id="a721" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœä½ æ›¾ç»è¿è¡Œè¿‡Minikubeï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨Dockeré©±åŠ¨ç¨‹åºã€‚é—æ†¾çš„æ˜¯ï¼Œä½¿ç”¨Dockeré©±åŠ¨æ—¶ï¼Œæ— æ³•ä»Macè®¿é—®Minikube IPã€‚åªèƒ½ç”¨127.0.0.1ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹è¿™ä¸æ˜¯é—®é¢˜ï¼Œä½†æ˜¯Otomiéœ€è¦ä¸€ä¸ªå¯ä»¥ä»ä½ çš„æœºå™¨æµè§ˆå™¨å’Œé›†ç¾¤å†…éƒ¨è§£æçš„IPã€‚</p><p id="bd43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å› æ­¤ï¼Œä¸ºäº†èƒ½å¤Ÿåœ¨Minikubeä¸Šå®‰è£…Otomiï¼Œæˆ‘å°†ä½¿ç”¨hyperkité©±åŠ¨ç¨‹åº(å‚è§:<a class="ae kw" href="https://minikube.sigs.k8s.io/docs/drivers/hyperkit/" rel="noopener ugc nofollow" target="_blank">https://minikube.sigs.k8s.io/docs/drivers/hyperkit/</a>)å’Œmetallb(å‚è§:<a class="ae kw" href="https://metallb.universe.tf/" rel="noopener ugc nofollow" target="_blank">https://metallb.universe.tf/</a>)</p><p id="cbb2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è®©æˆ‘ä»¬å¼€å§‹å§:</p><p id="1b0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç¡®ä¿æ‚¨å®‰è£…äº†ä»¥ä¸‹è½¯ä»¶:</p><ul class=""><li id="cb6e" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">åº“è´ç‰¹å°”</li><li id="4757" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">èˆµ</li><li id="7fd3" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">ç å¤´å·¥äºº</li><li id="035b" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">Minikubeç‰ˆæœ¬1.25.2(å·²æµ‹è¯•)</li></ul><p id="157d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é¦–å…ˆï¼Œé…ç½®minikube:</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="4952" class="lu lv iq lq b gy lw lx l ly lz">minikube config set memory 8g</span><span id="d373" class="lu lv iq lq b gy ma lx l ly lz">minikube config set cpus 8</span></pre><p id="3e20" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä½†æ˜¯å¦‚æœä½ æœ‰å¤šä½™çš„ï¼Œè¯·ä½¿ç”¨å®ƒä»¬ï¼›-)</p><p id="342b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœä½ æƒ³ç©Otomiä¸­çš„ç½‘ç»œç­–ç•¥åŠŸèƒ½ï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦ä½¿ç”¨Calico CLIã€‚</p><p id="6e65" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨å¯åŠ¨Minikube:</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="8338" class="lu lv iq lq b gy lw lx l ly lz">&gt; minikube start --driver=hyperkit --kubernetes-version=v1.22.4 --cni calico</span><span id="6d0e" class="lu lv iq lq b gy ma lx l ly lz">ğŸ˜„  minikube v1.25.2 on Darwin 11.1</span><span id="0e4a" class="lu lv iq lq b gy ma lx l ly lz">âœ¨  Using the hyperkit driver based on user configuration</span><span id="ca81" class="lu lv iq lq b gy ma lx l ly lz">ğŸ‘  Starting control plane node minikube in cluster minikube</span><span id="03c2" class="lu lv iq lq b gy ma lx l ly lz">ğŸ’¾  Downloading Kubernetes v1.21.9 preload ...</span><span id="745c" class="lu lv iq lq b gy ma lx l ly lz">&gt; preloaded-images-k8s-v17-v1...: 478.87 MiB / 478.87 MiB  100.00% 10.77 Mi</span><span id="dcac" class="lu lv iq lq b gy ma lx l ly lz">ğŸ”¥  Creating hyperkit VM (CPUs=8, Memory=8192MB, Disk=20000MB) ...</span><span id="da1d" class="lu lv iq lq b gy ma lx l ly lz">ğŸ³  Preparing Kubernetes v1.21.9 on Docker 20.10.12 ...</span><span id="294a" class="lu lv iq lq b gy ma lx l ly lz">â–ª kubelet.housekeeping-interval=5m</span><span id="b365" class="lu lv iq lq b gy ma lx l ly lz">â–ª Generating certificates and keys ...</span><span id="03c6" class="lu lv iq lq b gy ma lx l ly lz">â–ª Booting up control plane ...</span><span id="c7e6" class="lu lv iq lq b gy ma lx l ly lz">â–ª Configuring RBAC rules ...</span><span id="8483" class="lu lv iq lq b gy ma lx l ly lz">ğŸ”  Verifying Kubernetes components...</span><span id="c61a" class="lu lv iq lq b gy ma lx l ly lz">â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5</span><span id="dc21" class="lu lv iq lq b gy ma lx l ly lz">ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass</span><span id="72f8" class="lu lv iq lq b gy ma lx l ly lz">ğŸ„  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default</span></pre><p id="582e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨å¯ç”¨metallb:</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="04a6" class="lu lv iq lq b gy lw lx l ly lz">&gt; minikube addons enable metallb</span><span id="4d5b" class="lu lv iq lq b gy ma lx l ly lz">â–ª Using image metallb/speaker:v0.9.6</span><span id="079e" class="lu lv iq lq b gy ma lx l ly lz">â–ª Using image metallb/controller:v0.9.6</span><span id="8f03" class="lu lv iq lq b gy ma lx l ly lz">ğŸŒŸ  The 'metallb' addon is enabled</span></pre><p id="595f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦ç”¨Minikube IPé…ç½®metallbã€‚æ‰€ä»¥é¦–å…ˆè¦é—®IPåœ°å€</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="4858" class="lu lv iq lq b gy lw lx l ly lz">&gt; minikube ip</span><span id="6e9a" class="lu lv iq lq b gy ma lx l ly lz">192.168.64.16</span></pre><p id="de13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¹¶ä½¿ç”¨IPé…ç½®metallb</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="6064" class="lu lv iq lq b gy lw lx l ly lz">&gt; minikube addons configure metallb</span><span id="5526" class="lu lv iq lq b gy ma lx l ly lz">-- Enter Load Balancer Start IP: 192.168.64.16</span><span id="fc6b" class="lu lv iq lq b gy ma lx l ly lz">-- Enter Load Balancer End IP: 192.168.64.16</span><span id="968b" class="lu lv iq lq b gy ma lx l ly lz">â–ª Using image metallb/controller:v0.9.6</span><span id="410b" class="lu lv iq lq b gy ma lx l ly lz">â–ª Using image metallb/speaker:v0.9.6</span><span id="2f09" class="lu lv iq lq b gy ma lx l ly lz">âœ…  metallb was successfully configured</span><span id="b17f" class="lu lv iq lq b gy ma lx l ly lz">kubectl is now configured to use "minikube" cluster and "default" namespace by default</span></pre><p id="4600" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥å®‰è£…å¤§å‹äº†ã€‚é¦–å…ˆæ·»åŠ å­˜å‚¨åº“</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="0b31" class="lu lv iq lq b gy lw lx l ly lz">helm repo add otomi https://otomi.io/otomi-core \</span><span id="6610" class="lu lv iq lq b gy ma lx l ly lz">helm repo update</span></pre><p id="efcd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç„¶åå®‰è£…å›¾è¡¨</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="d7ca" class="lu lv iq lq b gy lw lx l ly lz">helm install otomi otomi/otomi \<br/>--set cluster.k8sVersion="1.22" \<br/>--set cluster.name=minikube \<br/>--set cluster.provider=custom \<br/>--set apps.host-mods.enabled=false</span></pre><p id="96d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‚¨å¯ä»¥ç›‘æ§å›¾è¡¨å®‰è£…</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="2796" class="lu lv iq lq b gy lw lx l ly lz">kubectl get job otomi -w</span><span id="e2d1" class="lu lv iq lq b gy ma lx l ly lz"># or watch the helm chart install status (optional)</span><span id="3ea0" class="lu lv iq lq b gy ma lx l ly lz">watch helm list -Aa</span></pre><p id="51b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å®‰è£…ç¨‹åºä½œä¸šå®Œæˆåï¼Œè½¬åˆ°å®‰è£…ç¨‹åºä½œä¸šæ—¥å¿—çš„æœ«å°¾</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="fce4" class="lu lv iq lq b gy lw lx l ly lz">kubectl logs jobs/otomi -n default -f</span></pre><p id="eb1f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨é‚£é‡Œï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹å†…å®¹:</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="7d83" class="lu lv iq lq b gy lw lx l ly lz">####################################################################<br/>#  To start using Otomi, go to https://192.168.64.16.nip.io and sign in to the web console<br/>#  with username "otomi-admin" and password "password".<br/>#  Then activate Drone. For more information see: <a class="ae kw" href="https://otomi.io/docs/installation//activation" rel="noopener ugc nofollow" target="_blank">https://otomi.io/docs/installation//activation</a><br/>####################################################################</span></pre><p id="2b25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æ‰“å¼€web UIï¼Œä½¿ç”¨ç”¨æˆ·<code class="fe mb mc md lq b">otomi-admin</code>å’Œæä¾›çš„å¯†ç ç™»å½•ã€‚</p><p id="b713" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç”±äºæˆ‘ä»¬å®‰è£…Otomiæ—¶æ²¡æœ‰æä¾›è‡ªå®šä¹‰CAæˆ–ä½¿ç”¨LetsEncryptï¼Œå®‰è£…ç¨‹åºç”Ÿæˆäº†ä¸€ä¸ªCAã€‚è¿™ä¸ªCAåœ¨æ‚¨çš„æœ¬åœ°æœºå™¨ä¸Šå½“ç„¶æ˜¯ä¸å¯ä¿¡çš„ã€‚ä¸ºäº†é˜²æ­¢æ‚¨ç‚¹å¼€æµè§ˆå™¨ä¸­çš„å¤§é‡å®‰å…¨è­¦å‘Šï¼Œæ‚¨å¯ä»¥å°†ç”Ÿæˆçš„CAæ·»åŠ åˆ°æ‚¨çš„é’¥åŒ™ä¸²ä¸­ã€‚åœ¨æ§åˆ¶å°çš„å·¦ä¾§èœå•ä¸­ï¼Œå•å‡»â€œä¸‹è½½CAâ€ã€‚</p><p id="7373" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬åªéœ€è¦æ¿€æ´»æ— äººæœº:</p><ul class=""><li id="3a34" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">åœ¨Otomiæ§åˆ¶å°çš„ä¾§èœå•å¹³å°ä¸‹ç‚¹å‡»æ— äººæœºåº”ç”¨ç¨‹åº</li><li id="82fc" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">ç‚¹å‡»å³ä¸Šè§’çš„æ’­æ”¾æŒ‰é’®ã€‚å°†ä¸ºæ— äººæœºæ‰“å¼€ä¸€ä¸ªæ–°æ ‡ç­¾</li><li id="390d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">ä½¿ç”¨otomi-adminå’Œå®‰è£…ç¨‹åºä½œä¸šæ—¥å¿—ä¸­æä¾›çš„å¯†ç åœ¨æœ¬åœ°ç™»å½•</li><li id="210d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">ç‚¹å‡»<em class="me">æˆæƒç”³è¯·</em></li><li id="a136" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">ç‚¹å‡»å®Œæˆæ— äººæœºæ³¨å†Œé¡µé¢ä¸Šçš„<em class="me">æäº¤</em>ã€‚å¦‚æœä½ ä¸æ„¿æ„ï¼Œä½ å¯ä»¥ä¸å¡«å†™ä½ çš„ç”µå­é‚®ä»¶ã€å…¨åæˆ–å…¬å¸åç§°</li><li id="46d6" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">ç‚¹å‡»<em class="me"> otomi/values </em>å‚¨å­˜åº“</li><li id="8364" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">ç‚¹å‡»<em class="me"> +æ¿€æ´»å­˜å‚¨åº“</em></li></ul><p id="6f12" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æå®šäº†ã€‚ç°åœ¨ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿï¼Œæ·»åŠ æœåŠ¡ï¼Œå…¬å¼€å®ƒä»¬ï¼Œé…ç½®ç½‘ç»œç­–ç•¥å’Œæ¢ç´¢Otomiã€‚</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/fe4407196298a3f557234c639adf7e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IEwLmn94VD3igz4z7s7Qfg.png"/></div></div></figure><p id="91f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å–œæ¬¢ä½ çœ‹åˆ°çš„å—ï¼Ÿè¯·åŠ å…¥è§‚æ˜Ÿè€…æ¥æ”¯æŒæˆ‘ä»¬:<a class="ae kw" href="https://github.com/redkubes/otomi-core" rel="noopener ugc nofollow" target="_blank">https://github.com/redkubes/otomi-core</a></p></div></div>    
</body>
</html>