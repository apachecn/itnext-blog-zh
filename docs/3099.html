<html>
<head>
<title>Tutorial: How to work with JSON data in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ•™ç¨‹:å¦‚ä½•åœ¨Goä¸­ä½¿ç”¨JSONæ•°æ®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/welcome-to-just-enough-go-7dbef7e30188?source=collection_archive---------2-----------------------#2019-10-03">https://itnext.io/welcome-to-just-enough-go-7dbef7e30188?source=collection_archive---------2-----------------------#2019-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ffa8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¬¢è¿æ¥åˆ°<strong class="jp ir">åˆšå¤Ÿèµ°</strong>ï¼è¿™æ˜¯å…³äº<a class="ae kl" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"> Goç¼–ç¨‹è¯­è¨€</a>çš„ç³»åˆ—æ–‡ç« ä¸­çš„ç¬¬ä¸€ç¯‡ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä¸€äº›æœ€å¸¸ç”¨(ä¹Ÿæ˜¯æœ€å¸¸ç”¨)çš„<a class="ae kl" href="https://golang.org/pkg" rel="noopener ugc nofollow" target="_blank"> Goæ ‡å‡†åº“åŒ…</a>ï¼Œä¾‹å¦‚<code class="fe km kn ko kp b">encoding/json</code>ã€<code class="fe km kn ko kp b">io</code>ã€<code class="fe km kn ko kp b">net/http</code>ã€<code class="fe km kn ko kp b">sync</code>ç­‰ã€‚æˆ‘è®¡åˆ’ä¿æŒè¿™äº›ç›¸å¯¹ç®€çŸ­çš„ä¾‹å­é©±åŠ¨ã€‚</p><p id="e574" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">çš„ä»£ç å¯åœ¨<a class="ae kl" href="https://github.com/abhirockzz/just-enough-go" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ªGitHub repo </a>ä¸­æ‰¾åˆ°</p><blockquote class="kq"><p id="f51e" class="kr ks iq bd kt ku kv kw kx ky kz kk dk translated">å¦‚æœæ‚¨æƒ³è®©æˆ‘ä»‹ç»ä¸€äº›å…·ä½“çš„å›´æ£‹è¯é¢˜ï¼Œæˆ‘å°†éå¸¸ä¹æ„æ¥å—æ‚¨çš„å»ºè®®ï¼è¯·éšæ„å‘è¡¨ <a class="ae kl" href="https://twitter.com/abhi_tweeter" rel="noopener ugc nofollow" target="_blank"> <em class="la">æ¨æ–‡</em> </a> <em class="la">æˆ–å‘è¡¨è¯„è®ºğŸ˜ƒ</em></p></blockquote><p id="fe09" class="pw-post-body-paragraph jn jo iq jp b jq lb js jt ju lc jw jx jy ld ka kb kc le ke kf kg lf ki kj kk ij bi translated">æœ¬æ–‡æ¶µç›–äº†å¤„ç†JSONå’ŒGoç±»å‹ä¹‹é—´è½¬æ¢çš„<code class="fe km kn ko kp b"><a class="ae kl" href="https://golang.org/pkg/encoding/json/" rel="noopener ugc nofollow" target="_blank">encoding/json</a></code>åŒ…(æ ¹æ®<a class="ae kl" href="https://tools.ietf.org/html/rfc7159" rel="noopener ugc nofollow" target="_blank"> RFC 7159 </a>)ã€‚è®©æˆ‘ä»¬ç›´æ¥è·³è¿›æ¥å§ï¼</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/59963877ca40a954e47868ca1c8d50c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/0*8p9ai9vmZ8_FPPyL.gif"/></div></figure><h1 id="ae7d" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">å°†Goç±»å‹è½¬æ¢æˆJSON</h1><h2 id="0ca3" class="mm lp iq bd lq mn mo dn lu mp mq dp ly jy mr ms mc kc mt mu mg kg mv mw mk mx bi translated">æ•´ç†</h2><p id="20a0" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">ä¸€ä¸ªå¸¸è§çš„é€‰é¡¹æ˜¯ä½¿ç”¨<code class="fe km kn ko kp b">Marshal</code>å‡½æ•°ï¼Œå…¶ç­¾åä¸º:</p><pre class="lh li lj lk gt nd kp ne nf aw ng bi"><span id="4a2e" class="mm lp iq kp b gy nh ni l nj nk">func Marshal(v interface{}) ([]byte, error)</span></pre><p id="f1c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:</p><pre class="lh li lj lk gt nd kp ne nf aw ng bi"><span id="5840" class="mm lp iq kp b gy nh ni l nj nk">func main() {<br/>    profile := Profile{Email: "abhirockzz@gmail.com", Username: "abhirockzz", Blogs: []Blog{<br/>        Blog{BlogName: "devto", URL: "https://dev.to/abhirockzz/"},<br/>        Blog{BlogName: "medium", URL: "https://medium.com/@abhishek1987/"},<br/>    }}<br/><strong class="kp ir">    jsonData, err := json.Marshal(&amp;myprofile)<br/></strong>    //jsonData, err := json.MarshalIndent(&amp;profile, "", " ")<br/>    if err != nil {<br/>        panic(err)<br/>    }<br/>    fmt.Println(string(jsonData))<br/>}</span></pre><blockquote class="nl nm nn"><p id="fd24" class="jn jo no jp b jq jr js jt ju jv jw jx np jz ka kb nq kd ke kf nr kh ki kj kk ij bi translated"><em class="iq">æ‚¨å¯ä»¥ä½¿ç”¨</em> <code class="fe km kn ko kp b"><em class="iq">MarshalIndent</em></code> <em class="iq">(å·²æ³¨é‡Š)æ¥ç¼©è¿›JSONè¾“å‡º</em></p></blockquote><h2 id="6ce2" class="mm lp iq bd lq mn mo dn lu mp mq dp ly jy mr ms mc kc mt mu mg kg mv mw mk mx bi translated">ç¼–ç å™¨</h2><p id="cb3c" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">å½“<code class="fe km kn ko kp b">Marshal</code>å¤„ç†å­—èŠ‚æ•°ç»„(<code class="fe km kn ko kp b">[]byte</code>)æ—¶ï¼Œ<code class="fe km kn ko kp b">Encoder</code>æ˜¯é€šç”¨çš„ï¼Œå…è®¸æ‚¨ä½¿ç”¨<code class="fe km kn ko kp b">io.Writer</code>ï¼Œæ‚¨å¯ä»¥å°†å®ƒå®šä¹‰ä¸ºJSONæ•°æ®çš„æ¥æ”¶å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨å¯ä»¥æŒ‡å®šå®ç°<code class="fe km kn ko kp b">io.Writer</code>æ¥å£çš„ä»»ä½•ç±»å‹ï¼Œä¾‹å¦‚ï¼Œè¿™å¯ä»¥æ˜¯æ ‡å‡†è¾“å‡º(<code class="fe km kn ko kp b">os.Stdout</code>)ï¼Œæˆ–è€…HTTPå“åº”(<code class="fe km kn ko kp b">http.ResponseWriter</code>)ï¼Œç­‰ç­‰ã€‚</p><pre class="lh li lj lk gt nd kp ne nf aw ng bi"><span id="680c" class="mm lp iq kp b gy nh ni l nj nk">func main() {<br/>    profile := Profile{Email: "abhirockzz@gmail.com", Username: "abhirockzz", Blogs: []Blog{<br/>        Blog{BlogName: "devto", URL: "https://dev.to/abhirockzz/"},<br/>        Blog{BlogName: "medium", URL: "https://medium.com/@abhishek1987/"},<br/>    }}</span><span id="1e3c" class="mm lp iq kp b gy ns ni l nj nk">    encoder := json.NewEncoder(os.Stdout)<br/><strong class="kp ir">    err := encoder.Encode(&amp;profile)<br/></strong>    if err != nil {<br/>        panic(err)<br/>    }<br/>}</span></pre><p id="86f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½¿ç”¨<code class="fe km kn ko kp b">NewEncoder</code>æŒ‡å®š<code class="fe km kn ko kp b">io.Writer</code>ã€‚å½“æ‚¨è°ƒç”¨<code class="fe km kn ko kp b">Encode</code>æ—¶ï¼Œè½¬æ¢å‘ç”Ÿï¼ŒJSONè¢«å†™å…¥åˆ°æ‚¨æŒ‡å®šçš„<code class="fe km kn ko kp b">io.Writer</code>ä¸­ã€‚</p><p id="0e8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸‹é¢æ˜¯å®ƒå¦‚ä½•å¤„ç†HTTPå“åº”çš„ç¤ºä¾‹:</p><pre class="lh li lj lk gt nd kp ne nf aw ng bi"><span id="ac1b" class="mm lp iq kp b gy nh ni l nj nk">func main() {<br/>    profile := Profile{Email: "abhirockzz@gmail.com", Username: "abhirockzz", Blogs: []Blog{<br/>        Blog{BlogName: "devto", URL: "https://dev.to/abhirockzz/"},<br/>        Blog{BlogName: "medium", URL: "https://medium.com/@abhishek1987/"},<br/>    }}</span><span id="ecdd" class="mm lp iq kp b gy ns ni l nj nk">    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {<br/>        encoder := json.NewEncoder(w)<br/><strong class="kp ir">        err := encoder.Encode(&amp;profile)<br/></strong>        if err != nil {<br/>            panic(err)<br/>        }<br/>    })</span><span id="c78b" class="mm lp iq kp b gy ns ni l nj nk">    http.ListenAndServe(":8080", nil)<br/>}</span></pre><h1 id="c434" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">å°†JSONæ•°æ®è½¬æ¢ä¸ºGoç±»å‹</h1><h2 id="51cd" class="mm lp iq bd lq mn mo dn lu mp mq dp ly jy mr ms mc kc mt mu mg kg mv mw mk mx bi translated">è§£ç»„</h2><p id="cfd0" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">ç»™å®šå­—èŠ‚æ•°ç»„å½¢å¼çš„JSONï¼Œ<code class="fe km kn ko kp b">Unmarshal</code>å°†JSONè§£æç»“æœå­˜å‚¨åˆ°æ‚¨æŒ‡å®šçš„Goæ•°æ®ç±»å‹çš„æŒ‡é’ˆä¸­(é€šå¸¸æ˜¯ä¸€ä¸ª<code class="fe km kn ko kp b">struct</code></p><pre class="lh li lj lk gt nd kp ne nf aw ng bi"><span id="eef2" class="mm lp iq kp b gy nh ni l nj nk">func Unmarshal(data []byte, v interface{}) error</span></pre><p id="d878" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­:</p><pre class="lh li lj lk gt nd kp ne nf aw ng bi"><span id="186f" class="mm lp iq kp b gy nh ni l nj nk">func main() {<br/>    jsonData := `{"email":"abhirockzz@gmail.com","username":"abhirockzz","blogs":[{"name":"devto","url":"https://dev.to/abhirockzz/"},{"name":"medium","url":"https://medium.com/@abhishek1987/"}]}`<br/>    <br/>    var profile Profile<br/><strong class="kp ir">    err := json.Unmarshal([]byte(jsonData), &amp;profile)<br/></strong>    if err != nil {<br/>        panic(err)<br/>    }<br/>    ...<br/>}</span></pre><h2 id="78b1" class="mm lp iq bd lq mn mo dn lu mp mq dp ly jy mr ms mc kc mt mu mg kg mv mw mk mx bi translated">è§£ç å™¨</h2><p id="04e5" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated"><code class="fe km kn ko kp b">Decoder</code>æä¾›äº†ä¸€ç§è§£ç»„JSONæ•°æ®çš„é€šç”¨æ–¹æ³•ï¼Œå…è®¸æ‚¨ä»¥<code class="fe km kn ko kp b">io.Reader</code>çš„å½¢å¼æŒ‡å®šJSONè¾“å…¥æºï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°ç»„ã€‚</p><pre class="lh li lj lk gt nd kp ne nf aw ng bi"><span id="def3" class="mm lp iq kp b gy nh ni l nj nk">func main() {<br/>    jsonData := `{"email":"abhirockzz@gmail.com","username":"abhirockzz","blogs":[{"name":"devto","url":"https://dev.to/abhirockzz/"},{"name":"medium","url":"https://medium.com/@abhishek1987/"}]}`<br/>    <br/>    jsonDataReader := strings.NewReader(jsonData)<br/>    decoder := json.NewDecoder(jsonDataReader)</span><span id="760e" class="mm lp iq kp b gy ns ni l nj nk">    var profile Profile<br/><strong class="kp ir">    err := decoder.Decode(&amp;profile)<br/></strong>    if err != nil {<br/>        panic(err)<br/>    }<br/>    ...<br/>}</span></pre><p id="551f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬ä»ä½¿ç”¨å¿«æ·æ–¹å¼<code class="fe km kn ko kp b">strings.NewReader</code>ä»JSON <code class="fe km kn ko kp b">string</code>æ•°æ®åˆ›å»ºä¸€ä¸ª<code class="fe km kn ko kp b">io.Reader</code>å¼€å§‹ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe km kn ko kp b">NewDecoder</code>å®ä¾‹åŒ–è§£ç å™¨ï¼Œå¹¶ç®€å•åœ°ä½¿ç”¨<code class="fe km kn ko kp b">decode</code>å’Œä¸€ä¸ªæŒ‡å‘å­˜å‚¨ç»“æœçš„<code class="fe km kn ko kp b">Profile</code>ç»“æ„çš„æŒ‡é’ˆ</p><p id="4abd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™ä¸ªåšå®¢åˆ°æ­¤ä¸ºæ­¢ï¼æ•¬è¯·å…³æ³¨æ›´å¤šå†…å®¹ï¼Œä¸è¦å¿˜è®°å–œæ¬¢å’Œå…³æ³¨ğŸ˜ƒğŸ˜ƒ</p></div></div>    
</body>
</html>