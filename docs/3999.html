<html>
<head>
<title>How we do GitOps @ Mettle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æˆ‘ä»¬å¦‚ä½•å°½æœ€å¤§åŠªåŠ›</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/how-we-do-gitops-mettle-4cc771a6c029?source=collection_archive---------0-----------------------#2020-04-08">https://itnext.io/how-we-do-gitops-mettle-4cc771a6c029?source=collection_archive---------0-----------------------#2020-04-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/934c80ca0fce79e19def3c028a18e30b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*upVhMxd5c97RfMAoPNs8nQ.png"/></div></div></figure><blockquote class="jy jz ka"><p id="6349" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">å¹³å°å›¢é˜Ÿçš„æœ€å¤§åŸåˆ™ä¹‹ä¸€æ˜¯è®©æˆ‘ä»¬çš„å¹³å°ä¸ºå·¥ç¨‹å¸ˆæä¾›è‡ªåŠ©æœåŠ¡ã€‚GitOpsè®©æˆ‘ä»¬æœ‰å¯èƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚</p></blockquote><p id="ca21" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">åœ¨Mettleï¼Œæˆ‘ä»¬å……åˆ†åˆ©ç”¨GitOpså°†ä¸€åˆ‡éƒ¨ç½²åˆ°æˆ‘ä»¬çš„é›†ç¾¤ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Flux CD(ã€https://github.com/fluxcd/fluxã€‘)ä½œä¸ºæˆ‘ä»¬çš„GitOpsæ§åˆ¶å™¨ã€‚</p><p id="3088" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">Fluxæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨ç¡®ä¿é›†ç¾¤çš„çŠ¶æ€ä¸gitä¸­çš„é…ç½®ç›¸åŒ¹é…ã€‚å®ƒä½¿ç”¨é›†ç¾¤ä¸­çš„ä¸€ä¸ªæ“ä½œç¬¦æ¥è§¦å‘Kuberneteså†…éƒ¨çš„éƒ¨ç½²ï¼Œè¿™æ„å‘³ç€æ‚¨ä¸éœ€è¦å•ç‹¬çš„CDå·¥å…·ã€‚Fluxç›‘æ§æ‰€æœ‰ç›¸å…³çš„æ˜ åƒå­˜å‚¨åº“ï¼Œæ£€æµ‹æ–°çš„æ˜ åƒï¼Œè§¦å‘éƒ¨ç½²ï¼Œå¹¶åŸºäºæ­¤æ›´æ–°æ‰€éœ€çš„è¿è¡Œé…ç½®(ä»¥åŠå¯é…ç½®çš„ç­–ç•¥)ã€‚</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/e15f59df210276bfc55eb892483b94ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bk5AyCKIUDNhisg-hKrgeA.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">ç„Šå‰‚å·¥ä½œåŸç†æ¦‚è¿°(å‚è€ƒ<a class="ae ld" href="https://github.com/fluxcd/helm-operator-get-started" rel="noopener ugc nofollow" target="_blank">https://github.com/fluxcd/helm-operator-get-started</a></figcaption></figure><h1 id="4146" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨Flux @ Mettle</h1><p id="a0a5" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">æˆ‘ä»¬çš„é›†ç¾¤ä¸­è¿è¡Œç€è®¸å¤šfluxå®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ä¸GitHubä¸­çš„ä¸€ä¸ªç‰¹å®šå­˜å‚¨åº“ç›¸åè°ƒã€‚å…·ä½“æ¥è¯´ï¼Œå…³äºå·¥ä½œè´Ÿè½½ï¼Œæ•´ä¸ªè¿‡ç¨‹ä½¿ç”¨ä¸‰ä¸ªä¸»è¦çš„å­˜å‚¨åº“ï¼Œæˆ‘å°†åœ¨ä¸‹é¢è¯¦ç»†è§£é‡Šã€‚</p><h2 id="44c3" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">k8s-èˆµ-å›¾è¡¨</h2><p id="59ff" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">è¿™æ˜¯æˆ‘ä»¬æ‰€æœ‰çš„è‡ªå®šä¹‰èˆµå›¾è¡¨æ‰€åœ¨çš„åœ°æ–¹ï¼Œåœ¨åˆå¹¶åˆ°<code class="fe nc nd ne nf b">master</code>åˆ†æ”¯æ—¶ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾åƒæ ‡ç­¾å®¹å™¨ï¼ŒåŒ…å«ç°æœ‰çš„å›¾è¡¨ä»¥åŠä½œä¸ºæ‹‰è¯·æ±‚çš„ä¸€éƒ¨åˆ†è€Œåˆ›å»ºçš„ä»»ä½•æ–°ç‰ˆæœ¬ã€‚</p><p id="12f8" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æˆ‘ä»¬ä»è¿è¡Œåœ¨é›†ç¾¤å†…éƒ¨çš„Helmæ³¨å†Œè¡¨ä¸­æä¾›è¿™äº›å›¾è¡¨ï¼Œè¯¥æ³¨å†Œè¡¨å¯é€šè¿‡<code class="fe nc nd ne nf b"><a class="ae ld" href="http://k8s-helm-charts.flux.svc.cluster.local" rel="noopener ugc nofollow" target="_blank">http://k8s-helm-charts.flux.svc.cluster.local</a>.</code>è®¿é—®</p><p id="e8c0" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æˆ‘ä»¬çš„helm registryçš„éƒ¨ç½²è§„èŒƒæœ‰ä»¥ä¸‹æ³¨é‡Šï¼Œä»¥ä¾¿Fluxè‡ªåŠ¨éƒ¨ç½²æ–°åˆ›å»ºçš„imagesæ ‡ç­¾ã€‚</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="ea25" class="mq lo iq nf b gy nk nl l nm nn">annotations:    <br/>  flux.weave.works/automated: "true"    <br/>  flux.weave.works/tag.k8s-helm-charts: semver:~1.1</span></pre><p id="4d91" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">ç°åœ¨æˆ‘ä»¬åœ¨é›†ç¾¤ä¸­æœ‰äº†helmæ³¨å†Œè¡¨ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚ä½•éƒ¨ç½²å‘¢ï¼Ÿ</p><h2 id="0048" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">kubernetes-èµ„æº</h2><p id="05c2" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">è¿™ä¸ªå­˜å‚¨åº“æ··åˆäº†åŸå§‹çš„Kubernetesæ¸…å•(<code class="fe nc nd ne nf b">yaml</code>æ–‡ä»¶)å’Œ<code class="fe nc nd ne nf b">HelmReleases</code>ã€‚èµ„æºåŒ…æ‹¬RBACç­–ç•¥å’ŒPodSecurityPolicyæ¸…å•ï¼Œä»¥åŠNGINXå…¥å£æ§åˆ¶å™¨å’ŒIstioç­‰å®ç”¨ç¨‹åºçš„HelmReleasesã€‚</p><p id="8b93" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æˆ‘æƒ³èŠ±ä¸€ç‚¹æ—¶é—´æ¥æ·±å…¥äº†è§£åˆ©ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰å›¾è¡¨ä¹‹ä¸€çš„HelmReleaseçš„æ„æˆ(å‚è§ä¸‹é¢çš„Prometheus):</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="2eee" class="mq lo iq nf b gy nk nl l nm nn">spec:<br/>  chart:<br/>    name: prometheus<br/>    repository: http://k8s-helm-charts.flux.svc.cluster.local<br/>    version: 2.6.43<br/>  releaseName: prometheus</span></pre><p id="3822" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æ‚¨å¯ä»¥ä»ä¸Šé¢çœ‹åˆ°æŒ‡å®šçš„helmå›¾è¡¨ç‰ˆæœ¬ï¼Œä½ç½®æ˜¯åœ¨é›†ç¾¤å†…éƒ¨æœ¬åœ°è¿è¡Œçš„helmæ³¨å†Œè¡¨ã€‚æ˜¾ç„¶æœ‰ä¸€ä¸ªç«äº‰æ¡ä»¶ï¼Œæˆ‘å°†åœ¨è¿™ç¯‡æ–‡ç« çš„åé¢ä»‹ç»ã€‚</p><p id="cce1" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æˆ‘ä»¬å°†ä¸ºæ¯ä¸ªç¯å¢ƒåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå…¶ä¸­åŒ…å«è¯¥ç¯å¢ƒéƒ¨ç½²æˆ‘ä»¬å®šä¹‰çš„â€œæ™®é€šé›†ç¾¤â€æ‰€éœ€çš„æ‰€æœ‰èµ„æºã€‚è¿‡å»çš„ç›®å½•ç»“æ„çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="8b13" class="mq lo iq nf b gy nk nl l nm nn">.<br/>â”œâ”€â”€ environments<br/>â”‚   â”œâ”€â”€ sbx<br/>â”‚   â”œâ”€â”€ dev<br/>â”‚   â””â”€â”€ stg<br/>â”‚   â”œâ”€â”€ prd</span></pre><p id="07bd" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æˆ‘ä»¬ä½¿ç”¨bootkube(<a class="ae ld" href="https://github.com/kubernetes-sigs/bootkube" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes-sigs/bootkube</a>)å¼•å¯¼æˆ‘ä»¬çš„é›†ç¾¤ï¼Œå¹¶ä¸”ä½œä¸ºæˆ‘ä»¬boot kubeèµ„äº§çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬éƒ¨ç½²äº†ä¸€ä¸ªFluxå®ä¾‹ï¼Œåœ¨ç‰¹å®šçš„ç¯å¢ƒè·¯å¾„ä¸­æŸ¥çœ‹è¿™ä¸ªå­˜å‚¨åº“(è§ä¸‹æ–‡)ã€‚</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="4ca6" class="mq lo iq nf b gy nk nl l nm nn">- --<a class="ae ld" href="mailto:git-url=git@github.com" rel="noopener ugc nofollow" target="_blank">git-url=git@github.com</a>:example/kubernetes-resources<br/>- --git-branch=master<br/>- --git-path=environment/prd<br/>- --git-sync-tag=flux-sync-prd</span></pre><p id="1dfc" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">ä¸€æ—¦ä¸€ä¸ªå®Œæ•´çš„åè°ƒå¾ªç¯å®Œæˆ,â€œæ™®é€šé›†ç¾¤â€å°±å¯ä»¥æ¥æ”¶å®šåˆ¶å·¥ä½œè´Ÿè½½äº†ã€‚</p><h2 id="30fa" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">k8s-å‘å¸ƒ-å‹‡æ°”</h2><p id="835b" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">å­˜å‚¨åº“åªåŒ…å«æ„æˆMettleçš„æ¯ä¸ªå¾®æœåŠ¡çš„<code class="fe nc nd ne nf b">HelmRelease</code>å®šä¹‰ï¼Œæ¯ä¸ªç¯å¢ƒä¸€ä¸ªã€‚ç›®å‰ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªç¯å¢ƒä¸­éƒ¨ç½²äº†å¤§çº¦100ä¸ªå¾®æœåŠ¡ã€‚ä¸‹é¢å¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸€ä¸ªHelmReleasesçš„ç‰‡æ®µ:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="6e3d" class="mq lo iq nf b gy nk nl l nm nn">apiVersion: helm.fluxcd.io/v1<br/>kind: HelmRelease<br/>metadata:  <br/>  annotations:    <br/>    flux.weave.works/automated: "true"  <br/>  name: account-balance  <br/>  namespace: eevee<br/>spec:  <br/>  chart:    <br/>    name: backend    <br/>    repository: http://k8s-helm-charts.flux.svc.cluster.local <br/>    version: 2.0.43 <br/>  releaseName: account-balance</span></pre><p id="d0eb" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„åç«¯å¾®æœåŠ¡éƒ½æ˜¯ä»ä¸¤ä¸ª<code class="fe nc nd ne nf b">backend</code>ç‰¹å®šå¯¼èˆªå›¾ä¸­çš„ä¸€ä¸ªæ´¾ç”Ÿå‡ºæ¥çš„ï¼Œä»¥ç¡®ä¿æ ‡ç­¾åˆ†ç±»ç­‰æ–¹é¢çš„ä¸€è‡´æ€§ã€‚åŒæ ·ï¼Œä¸<code class="fe nc nd ne nf b">kubernetes-resources</code>ä¸€æ ·ï¼Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸ªç¯å¢ƒåˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰<code class="fe nc nd ne nf b">HelmRelease</code>å®šä¹‰çš„ç›®å½•ã€‚</p><h1 id="3b82" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">åŠ å…¥Kustomize</h1><p id="a4a5" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">åœ¨æ—©æœŸï¼Œæˆ‘ä»¬åœ¨<code class="fe nc nd ne nf b">kubernetes-resources</code>å’Œ<code class="fe nc nd ne nf b">k8s-releases-mettle</code>çš„ç¯å¢ƒä¸­æœ‰å¾ˆå¤šé‡å¤ï¼Œè¿™æ˜¯æˆ‘ä»¬å¼€å§‹å¯†åˆ‡å…³æ³¨Kustomize(<a class="ae ld" href="https://github.com/kubernetes-sigs/kustomize" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes-sigs/kustomize</a>)çš„æ—¶å€™ã€‚</p><p id="6095" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">å¹³å°å›¢é˜Ÿä»<code class="fe nc nd ne nf b">kubernetes-resources</code>å¼€å§‹ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³åœ¨è¿™é‡Œè¯æ˜Kustomizeæˆ‘ä»¬è‡ªå·±ï¼Œå¹¶ä¸”ä¸å½±å“å·¥ç¨‹è‡ªåŠ©æœåŠ¡å·¥ä½œæµã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°å¯¹åŸºç¡€èµ„æºçš„å¾ˆå¤šæ›´æ”¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è§‰å¾—ä½¿ç”¨è¿™ä¸ªå­˜å‚¨åº“ä½œä¸ºæµ‹è¯•å¹³å°å¾ˆèˆ’æœã€‚</p><p id="03cf" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æˆ‘ä»¬ä»åˆ›å»ºä»¥ä¸‹ç›®å½•å¼€å§‹</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="b0f3" class="mq lo iq nf b gy nk nl l nm nn">.<br/>â””â”€â”€ kustomize<br/>    â”œâ”€â”€ base<br/>    â”œâ”€â”€ dev<br/>    â”œâ”€â”€ prd<br/>    â”œâ”€â”€ sbx<br/>    â”œâ”€â”€ stg</span></pre><h2 id="a2eb" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">åŸºæœ¬ç›®å½•</h2><p id="1249" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated"><code class="fe nc nd ne nf b">kustomize/base</code>ä¸­åŒ…å«çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯éç‰¹å®šäºç¯å¢ƒçš„é…ç½®ï¼Œå¹¶å›´ç»•é›†ç¾¤çš„å„ä¸ªåŒºåŸŸè¿›è¡Œè°ƒæ•´(ä¾‹å¦‚å…¥å£æˆ–å•ç‚¹ç™»å½•)ã€‚è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å­å¦‚ä¸‹:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="8033" class="mq lo iq nf b gy nk nl l nm nn">cluster<br/>â”œâ”€â”€ helmreleases<br/>â”œâ”€â”€ namespaces<br/>â”œâ”€â”€ priorityclasses<br/>â”œâ”€â”€ psps<br/>â”œâ”€â”€ rbac<br/>â””â”€â”€ storageclasses</span></pre><p id="66b8" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><code class="fe nc nd ne nf b">kustomize/base</code>ä¸­çš„ç¤ºä¾‹<code class="fe nc nd ne nf b">HelmRelease</code>å¦‚ä¸‹æ‰€ç¤º:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="cbf6" class="mq lo iq nf b gy nk nl l nm nn">---<br/>apiVersion: helm.fluxcd.io/v1<br/>kind: HelmRelease<br/>metadata:<br/>  annotations:<br/>    flux.weave.works/automated: "false"<br/>    flux.weave.works/tag.chart-image: semver:~1.17<br/>  name: cluster-autoscaler<br/>  namespace: kube-system<br/>spec:<br/>  chart:<br/>    name: cluster-autoscaler<br/>    repository: https://kubernetes-charts.storage.googleapis.com/<br/>    version: 6.3.0<br/>  releaseName: cluster-autoscaler<br/>  values:<br/>    autoDiscovery:<br/>      tags:<br/>        - k8s.io/cluster-autoscaler/enabled<br/>    awsRegion: eu-west-2<br/>    image:<br/>      repository: k8s.gcr.io/cluster-autoscaler<br/>      tag: "v1.17.0"<br/>    nodeSelector:<br/>      node.kubernetes.io/role: critical<br/>    podAnnotations:<br/>      iam.amazonaws.com/role: cluster-autoscaler<br/>    priorityClassName: system-cluster-critical<br/>    tolerations:<br/>      - key: node.kubernetes.io/role<br/>        value: critical<br/>        operator: Equal<br/>        effect: NoSchedule</span></pre><p id="a610" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æ³¨æ„è¿™é‡Œæ²¡æœ‰åº”ç”¨ç‰¹å®šäºç¯å¢ƒçš„å…¥å£æ³¨é‡Šã€‚</p><h2 id="2fde" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">â€œç‰¹å®šäºç¯å¢ƒâ€çš„ç›®å½•</h2><p id="d3a2" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">ç‰¹å®šäºç¯å¢ƒçš„ç›®å½•ç»“æ„ä¸<code class="fe nc nd ne nf b">base</code>ç›®å½•ä¸­çš„ç›®å½•ç»“æ„ä¸€è‡´ã€‚ä½†æ˜¯ï¼Œå®ƒåªåŒ…å«å…¶ç¯å¢ƒæ‰€éœ€çš„ç›®å½•ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªç¯å¢ƒéƒ½ç»§æ‰¿<code class="fe nc nd ne nf b">base/cluster</code>ç›®å½•ï¼Œä½†ä¸ä¸€å®šç»§æ‰¿<code class="fe nc nd ne nf b">tools</code>ç›®å½•ã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹ç¯å¢ƒç›®å½•çš„æ„æˆâ€¦</p><p id="481c" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">åœ¨é¡¶å±‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå•ç‹¬çš„<code class="fe nc nd ne nf b">kustomization.yaml</code>æ–‡ä»¶ï¼Œå®ƒå¼•ç”¨å…¶ä¸­çš„å­ç›®å½•(è§ä¸‹æ–‡)</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="1d65" class="mq lo iq nf b gy nk nl l nm nn">apiVersion: kustomize.config.k8s.io/v1beta1<br/>kind: Kustomization<br/>bases:<br/>  - cert-manager<br/>  - cluster</span></pre><p id="cc83" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">è¿™äº›å­ç›®å½•ä¸­åŒ…å«ä»¥ä¸‹ç›®å½•å’Œæ–‡ä»¶:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="1fc6" class="mq lo iq nf b gy nk nl l nm nn">cluster<br/>â”œâ”€â”€ helmreleases<br/>â””â”€â”€ kustomization.yaml</span></pre><p id="a823" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">è¿™ä¸ª<code class="fe nc nd ne nf b">kustomization.yaml</code>ç•¥æœ‰ä¸åŒï¼Œå®ƒç»§æ‰¿è‡ª<code class="fe nc nd ne nf b">base</code>ä¸­çš„ç›¸åº”ç›®å½•ï¼Œä½†è¿™é‡Œæ˜¯æˆ‘ä»¬ä¿®è¡¥ç‰¹å®šäºç¯å¢ƒçš„é…ç½®çš„åœ°æ–¹ã€‚</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="9c31" class="mq lo iq nf b gy nk nl l nm nn">apiVersion: kustomize.config.k8s.io/v1beta1<br/>kind: Kustomization<br/>bases:<br/>  - ../../base/cluster<br/>patches:<br/>  - helmreleases/cluster-autoscaler.yaml<br/>  - helmreleases/kiam.yaml</span></pre><p id="b077" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><code class="fe nc nd ne nf b">cluster-autoscaler</code>çš„è¡¥ä¸å¦‚ä¸‹æ‰€ç¤º:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="7256" class="mq lo iq nf b gy nk nl l nm nn">apiVersion: helm.fluxcd.io/v1<br/>kind: HelmRelease<br/>metadata:<br/>  name: cluster-autoscaler<br/>  namespace: kube-system<br/>spec:<br/>  values:<br/>    autoDiscovery:<br/>      clusterName: dev</span></pre><h2 id="1f72" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">â€œkustomize buildâ€çš„ä½¿ç”¨</h2><p id="0a63" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">è¦æŸ¥çœ‹å“ªä¸ªFluxå°†è¿›è¡Œåè°ƒï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="013e" class="mq lo iq nf b gy nk nl l nm nn">kustomize build kustomize/dev &gt; dev.yaml</span></pre><p id="6970" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">ä¸Šè¿°æ“ä½œå°†åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«è¦éƒ¨ç½²åˆ°é›†ç¾¤çš„æ‰€æœ‰èµ„æºï¼Œå¹¶ä¸”è¿˜åº”ç”¨äº†ç‰¹å®šäºç¯å¢ƒçš„è¡¥ä¸ã€‚</p><h2 id="8a8f" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">è¿™ç»™äº†æˆ‘ä»¬ä»€ä¹ˆï¼Ÿ</h2><p id="89b1" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">è¿™ä¸ºæˆ‘ä»¬æä¾›äº†<code class="fe nc nd ne nf b">kustomize/base</code>ä¸­95%çš„èµ„æºå®šä¹‰ï¼Œå¹¶å…è®¸æˆ‘ä»¬è½»æ¾åœ°çœ‹åˆ°ç¯å¢ƒä¹‹é—´çš„å·®å¼‚ã€‚</p><p id="2da5" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æ­¤å¤–ï¼Œè¿™æ„å‘³ç€ç›´æ¥å¯¹<code class="fe nc nd ne nf b">base</code>è¿›è¡Œçš„æ›´æ”¹ä¼šåœ¨æ‰€æœ‰ç¯å¢ƒä¸­ä¼ æ’­(ä¾‹å¦‚ï¼Œåœ¨<code class="fe nc nd ne nf b">HelmRelease)</code>ä¸­å‡çº§åˆ°æ–°çš„å›¾è¡¨ç‰ˆæœ¬)ã€‚</p><p id="cf1e" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å¯¹å•ä¸ªç¯å¢ƒè¿›è¡Œæ›´æ”¹ä»¥è¿›è¡Œæµ‹è¯•ï¼Œä¾‹å¦‚å‡çº§æ‰€ç”¨å›¾è¡¨çš„ç‰ˆæœ¬ã€‚</p><p id="f16f" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">é‡è¦çš„æ˜¯ï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡CIåœ¨åº”ç”¨åˆ°é›†ç¾¤çš„èµ„æºåˆ°è¾¾é›†ç¾¤ä¹‹å‰æ‰§è¡ŒéªŒè¯ï¼Œä»¥ç¡®ä¿è¿™äº›èµ„æºç¬¦åˆè§„èŒƒã€‚æˆ‘ä»¬åˆ©ç”¨äº†regoç­–ç•¥å’Œä½¿ç”¨Kubevalçš„ä¸¥æ ¼æ¨¡å¼æ—æŒºã€‚</p><p id="78a1" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æœ‰å…³è¿™æ–¹é¢çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ä¸‹é¢çš„é“¾æ¥</p><ul class=""><li id="b6c3" class="no np iq ke b kf kg kj kk la nq lb nr lc ns kz nt nu nv nw bi translated">å‚è§<a class="ae ld" href="https://github.com/swade1987/deprek8ion" rel="noopener ugc nofollow" target="_blank">https://github.com/swade1987/deprek8ion</a></li><li id="9663" class="no np iq ke b kf nx kj ny la nz lb oa lc ob kz nt nu nv nw bi translated"><a class="ae ld" href="https://bit.ly/2RjyvCU" rel="noopener ugc nofollow" target="_blank">https://bit.ly/2RjyvCU</a></li></ul><h2 id="56aa" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">k8s-å‘å¸ƒ-å‹‡æ°”</h2><p id="d285" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">å¹³å°å›¢é˜Ÿéšåä¸å·¥ç¨‹å›¢é˜Ÿåˆä½œï¼Œå°†<code class="fe nc nd ne nf b">k8s-releases-mettle</code>ç§»åˆ°<code class="fe nc nd ne nf b">Kustomize</code>ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»å¸å–äº†æ•™è®­ã€‚ä»–ä»¬ä¸æˆ‘ä»¬çš„é¡¶çº§ç›®å½•ç»“æ„ä¿æŒä¸€è‡´:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="d8db" class="mq lo iq nf b gy nk nl l nm nn">.<br/>â””â”€â”€ kustomize<br/>    â”œâ”€â”€ base<br/>    â”œâ”€â”€ dev<br/>    â”œâ”€â”€ prd<br/>    â”œâ”€â”€ sbx<br/>    â”œâ”€â”€ stg</span></pre><p id="66aa" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">ä»–ä»¬çš„å­ç›®å½•ç»“æ„ç±»ä¼¼äº<code class="fe nc nd ne nf b">kubernetes-resources</code>ï¼Œä½†æ˜¯èŒƒå›´åœ¨<code class="fe nc nd ne nf b">namespace</code>çº§åˆ«ã€‚å·¥ç¨‹å¸ˆå®šä¹‰äº†è¿™ç§ç»“æ„ï¼Œå› ä¸ºä»–ä»¬æ˜¯è´Ÿè´£å­˜å‚¨åº“çš„äººï¼Œæ‰€ä»¥å®ƒéœ€è¦å¯¹ä»–ä»¬æœ‰æ„ä¹‰ã€‚</p><h1 id="da0a" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">åº”ç”¨æ¨å¹¿</h1><p id="de9e" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">æˆ‘è§‰å¾—å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯è¦è®²ä¸€ä¸‹å¾®æœç‰ˆæœ¬æ˜¯å¦‚ä½•é€šè¿‡æˆ‘ä»¬çš„ç¯å¢ƒæ¥æ¨å¹¿çš„ã€‚</p><p id="4df5" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">è®©æˆ‘ä»¬ä»æŸ¥çœ‹<code class="fe nc nd ne nf b">k8s-releases-mettle:</code>çš„<code class="fe nc nd ne nf b">base</code>ç›®å½•ä¸­çš„ä¸€ä¸ª<code class="fe nc nd ne nf b">HelmRelease</code>å¼€å§‹</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="d8dc" class="mq lo iq nf b gy nk nl l nm nn">apiVersion: helm.fluxcd.io/v1<br/>kind: HelmRelease<br/>metadata:<br/>  annotations:<br/>    flux.weave.works/automated: "true"<br/>  name: account-balance<br/>  namespace: eevee<br/>spec:<br/>  chart:<br/>    name: backend<br/>    repository: http://k8s-helm-charts.flux.svc.cluster.local<br/>  releaseName: account-balance<br/>  values:<br/>    application:<br/>      replicaCount: 3<br/>      image:<br/>        repository: quay.io/example/account-balance</span></pre><p id="ff74" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">ä¸Šé¢è¦æ³¨æ„çš„å…³é”®ç‚¹æ˜¯å›¾è¡¨ç‰ˆæœ¬å’Œå›¾åƒæ ‡ç­¾æ²¡æœ‰æŒ‡å®šï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç‰¹å®šäºç¯å¢ƒçš„é…ç½®ã€‚</p><p id="48b8" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹<code class="fe nc nd ne nf b">dev</code>ç›®å½•ä¸­å¯¹åº”çš„<code class="fe nc nd ne nf b">HelmRelease</code>:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="39ea" class="mq lo iq nf b gy nk nl l nm nn">apiVersion: helm.fluxcd.io/v1<br/>kind: HelmRelease<br/>metadata:<br/>  annotations:<br/>    flux.weave.works/tag.application: 'glob:dev-*'<br/>  name: account-balance<br/>  namespace: eevee<br/>spec:<br/>  values:<br/>    dependsOn:<br/>      schemaRegistry:<br/>        enabled: true<br/>    application:<br/>      image:<br/>        tag: dev-305a3cf56ef6d9505838bdf779e4173f0bad25jg<br/>  chart:<br/>    version: 2.0.34</span></pre><p id="b173" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">è¿™é‡Œé‡è¦çš„éƒ¨åˆ†æ˜¯ä»<code class="fe nc nd ne nf b">dev-</code>å¼€å§‹ä¸“é—¨å¯»æ‰¾å›¾åƒæ ‡ç­¾çš„<code class="fe nc nd ne nf b">flux.weave.works/tag.application</code>æ³¨é‡Šã€‚è¿™æ˜¯æˆ‘ä»¬å‘ç¯å¢ƒæ¨å¹¿æ–°å½¢è±¡çš„æ–¹å¼ã€‚åœ¨æäº¤SHAä¹‹å‰ï¼Œæˆ‘ä»¬ç”¨ç¯å¢ƒå‰ç¼€é‡æ–°æ ‡è®°å›¾åƒã€‚</p><p id="c6f9" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">å·¥ç¨‹å¸ˆä»¬åœ¨Concourseä¸­æœ‰ä¸€ä¸ªè„šæœ¬ï¼Œå®ƒä½¿ç”¨<code class="fe nc nd ne nf b">kubectl</code>æ¥ç­‰å¾…å‘å¸ƒæˆåŠŸï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="lf lg lh li gt ng nf nh ni aw nj bi"><span id="b6ef" class="mq lo iq nf b gy nk nl l nm nn">echo "Testing kubeconfig works against environment";<br/>echo "Checking for replica set creation"</span><span id="7404" class="mq lo iq nf b gy oc nl l nm nn">attempt_counter=1;<br/>max_attempts=60;<br/><br/>until [[ $(kubectl get replicaset -n "${NAMESPACE}" -l app_name="${SERVICE}",app_version="${APP_VERSION}" | wc -l) -gt 1 ]]; do</span><span id="fde5" class="mq lo iq nf b gy oc nl l nm nn">if [ ${attempt_counter} -eq ${max_attempts} ]; then<br/>  echo "Max attempts reached";<br/>  exit 1;<br/>fi<br/>  attempt_counter=$(($attempt_counter+1));<br/>  sleep 10;<br/>done;</span><span id="3ba0" class="mq lo iq nf b gy oc nl l nm nn">echo 'Replica OK';<br/><br/>echo 'Waiting for deployment to rollout';<br/>kubectl rollout status -n "$NAMESPACE" deployment/"$SERVICE" --watch=true --timeout=10m;</span></pre><h1 id="3ab3" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">æ‘˜è¦</h1><p id="c851" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">æ€»ä¹‹ï¼Œåˆ©ç”¨GitOpsï¼Œæˆ‘ä»¬ä¸ºå·¥ç¨‹å¸ˆåˆ›å»ºäº†ä¸€ä¸ªè‡ªåŠ©æœåŠ¡å¹³å°ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿä¸“æ³¨äºäº¤ä»˜ä¸šåŠ¡ä»·å€¼ï¼Œè€Œä¸å®Œå…¨éœ€è¦å¹³å°å›¢é˜Ÿçš„å¸®åŠ©ã€‚ä»–ä»¬ä¸“æ³¨äºæ„å»ºå®¹å™¨æ˜ åƒå’Œç®¡ç†å…¶å¾®æœåŠ¡çš„æµ‹è¯•ï¼ŒFluxå¤„ç†éƒ¨ç½²ã€‚</p><h1 id="8691" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">è¿˜èƒ½åšä»€ä¹ˆï¼Ÿ</h1><p id="e650" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">è¿™ä¸€æ—…ç¨‹å°šæœªç»“æŸï¼Œæˆ‘ä»¬éœ€è¦åšå‡ºä¸€äº›æ”¹å˜:</p><h2 id="2e46" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">é›†ç¾¤helmæ³¨å†Œè¡¨å¤–</h2><p id="233e" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">ç›®å‰ï¼Œå½“å¯¹æˆ‘ä»¬çš„è‡ªå®šä¹‰helmå›¾è¡¨è¿›è¡Œæ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ç­‰å¾…æ–°çš„æ³¨å†Œè¡¨æ˜ åƒåœ¨æˆ‘ä»¬çš„é›†ç¾¤ä¸­éƒ¨ç½²ï¼Œè¿™éœ€è¦æ—¶é—´ï¼Œå¹¶æœ€ç»ˆå¯¼è‡´HelmReleaseså¤±è´¥ï¼Œå› ä¸ºæŒ‡å®šçš„å›¾è¡¨ç‰ˆæœ¬æ²¡æœ‰å‡ºç°åœ¨æ³¨å†Œè¡¨å®¹å™¨æ˜ åƒä¸­ã€‚</p><p id="d321" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">å› æ­¤ï¼Œæˆ‘ä»¬å°†æŠŠæˆ‘ä»¬çš„helmæ³¨å†Œè¡¨å­˜å‚¨åœ¨ä¸€ä¸ªGoogleäº‘å¹³å°æ¡¶ä¸­ã€‚è¿™å¯¹æˆ‘ä»¬æœ‰ä¸¤ä¸ªå¥½å¤„:</p><ul class=""><li id="e7ac" class="no np iq ke b kf kg kj kk la nq lb nr lc ns kz nt nu nv nw bi translated">ä»¥ç›¸å¯¹ä½å»‰çš„æˆæœ¬å®ç°æ— é™å­˜å‚¨</li><li id="2974" class="no np iq ke b kf nx kj ny la nz lb oa lc ob kz nt nu nv nw bi translated">åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ç«‹å³æä¾›æ–°çš„èˆµå›¾ç‰ˆæœ¬ã€‚</li></ul><p id="fd9a" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æœ€åï¼Œåœ¨é›†ç¾¤é‡å»ºæ—¶ï¼Œè¿™æ„å‘³ç€HelmReleasesä¸ä¼šå› ä¸ºå°šæœªéƒ¨ç½²helmæ³¨å†Œè¡¨æ˜ åƒè€Œè¿›å…¥æŒ‚èµ·æˆ–å¤±è´¥çŠ¶æ€ã€‚</p><h2 id="7436" class="mq lo iq bd lp mr ms dn lt mt mu dp lx la mv mw mb lb mx my mf lc mz na mj nb bi translated">å¤´ç›”v3</h2><p id="5ba0" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">æˆ‘ä»¬ä»ç„¶éœ€è¦å‡çº§åˆ°å¤´ç›”3ï¼Œæˆ‘ä»¬å°†åœ¨æœªæ¥ä¸€ä¸¤å‘¨å†…å®Œæˆã€‚å¹¸è¿çš„æ˜¯<code class="fe nc nd ne nf b">HelmRelease</code>è®©è¿™å˜å¾—å¾®ä¸è¶³é“ï¼Œæˆ‘ä¼šç¡®ä¿å†å†™ä¸€ç¯‡å…³äºæˆ‘ä»¬å¦‚ä½•ç®¡ç†å®ƒçš„åšæ–‡ã€‚</p><h1 id="673a" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated"><strong class="ak">å¯¿å¸ˆçˆ·</strong></h1><p id="a9e7" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">é¦–å…ˆï¼Œæˆ‘ä¸ªäººè¦æ„Ÿè°¢æ–¯è’‚èŠ¬Â·æ™®ç½—ä¸¹(<a class="ae ld" href="https://twitter.com/stefanprodan" rel="noopener ugc nofollow" target="_blank">https://twitter.com/stefanprodan</a>)è¿‡å»å’Œå°†æ¥çš„å¸®åŠ©ï¼Œä»–æ€»æ˜¯æ„¿æ„å¬å–æˆ‘çš„æƒ³æ³•å’Œå»ºè®®ï¼Œè¿™æ˜¯æˆ‘çš„è£å¹¸ï¼</p><p id="4248" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">æ›´å¹¿æ³›åœ°è¯´ï¼Œæˆ‘è¦æ„Ÿè°¢Fluxç¤¾åŒºåœ¨æ•´ä¸ªæ—…ç¨‹ä¸­çš„æŒç»­å¸®åŠ©ï¼Œæˆ‘å¸Œæœ›æˆ‘ä»¬åœ¨Mettleï¼Œç‰¹åˆ«æ˜¯æˆ‘è‡ªå·±ï¼Œèƒ½å¤Ÿç»§ç»­å›é¦ˆç¤¾åŒºæˆ‘ä»¬å·²ç»å­¦åˆ°çš„æ•™è®­ï¼Œå¹¶åœ¨æœªæ¥ç»§ç»­å­¦ä¹ ã€‚</p><h1 id="9388" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">ç°åœ¨æ˜¯ä½ è‡ªå·±å°è¯•çš„æ—¶å€™äº†ğŸ˜Š</h1><p id="db9c" class="pw-post-body-paragraph kb kc iq ke b kf ml kh ki kj mm kl km la mn kp kq lb mo kt ku lc mp kx ky kz ij bi translated">åœ¨é—®äº†å¾ˆå¤šå…³äºå¦‚ä½•æ„å»ºGitOpsåº“çš„é—®é¢˜åï¼Œæˆ‘å®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªä¾‹å­ï¼Œå¯ä»¥åœ¨<a class="ae ld" href="https://github.com/swade1987/gitops-with-kustomize" rel="noopener ugc nofollow" target="_blank">https://github.com/swade1987/gitops-with-kustomize</a>æ‰¾åˆ°ã€‚</p><p id="64fc" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">å¦å¤–ï¼Œæˆ‘å¼ºçƒˆæ¨èå»https://github.com/fluxcd/multi-tenancyçš„<a class="ae ld" href="https://github.com/fluxcd/multi-tenancy" rel="noopener ugc nofollow" target="_blank">çœ‹çœ‹ã€‚</a></p></div></div>    
</body>
</html>