<html>
<head>
<title>TypeScript with Promises, Async/Await, and Generator Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¸¦æœ‰æ‰¿è¯ºã€å¼‚æ­¥/ç­‰å¾…å’Œç”Ÿæˆå™¨å‡½æ•°çš„ç±»å‹è„šæœ¬</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/typescript-with-promises-and-async-await-63623b8e5e2a?source=collection_archive---------3-----------------------#2020-07-20">https://itnext.io/typescript-with-promises-and-async-await-63623b8e5e2a?source=collection_archive---------3-----------------------#2020-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="b97d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¯»æ‰¾ä¸€ä¸ªä¼Ÿå¤§çš„(ä»…è¿œç¨‹)ååº”å¼€å‘ï¼Ÿæˆ–è€…åªæ˜¯æƒ³èŠèŠå¤©ï¼Ÿè®¿é—®LinkedInä¸Šçš„<a class="ae ko" href="https://www.linkedin.com/in/bengrunfeld/" rel="noopener ugc nofollow" target="_blank">æˆ‘çš„ä¸ªäººèµ„æ–™</a>å¹¶é—®å¥½ï¼ğŸ˜ƒ</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/51780f5445cf7005f4f1bfc4ac151c2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eN1f7qWSFg5AH0EmfyezIw.png"/></div></div></figure><p id="00dd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å‡ºäºæŸç§å¥‡æ€ªçš„åŸå› ï¼ŒTypeScript <a class="ae ko" href="https://www.typescriptlang.org/docs/handbook" rel="noopener ugc nofollow" target="_blank">æ–‡æ¡£</a>æ²¡æœ‰è§£é‡Šå¦‚ä½•å®ç°æ‰¿è¯ºã€å¼‚æ­¥/ç­‰å¾…æˆ–ç”Ÿæˆå™¨å‡½æ•°çš„ç±»å‹æ£€æŸ¥ã€‚</p><h1 id="e50b" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æ‰¿è¯º</h1><p id="02ca" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">è§£å†³æ–¹æ¡ˆéå¸¸ç®€å•ã€‚åŸºæœ¬ä¸Šï¼Œæ‰¿è¯ºçš„è¿”å›ç±»å‹æ˜¯ç´§æ¥åœ¨å…³é”®å­—<code class="fe me mf mg mh b">Promise</code>ä¹‹åå®šä¹‰çš„ã€‚ä¾‹å¦‚</p><pre class="kq kr ks kt gt mi mh mj mk aw ml bi"><span id="3202" class="mm lc it mh b gy mn mo l mp mq">const p = new Promise&lt;boolean | string&gt;((resolve, reject) =&gt; {<br/>    const random = Math.random() * 10;</span><span id="2eae" class="mm lc it mh b gy mr mo l mp mq">if (random &gt; 5) {<br/>      resolve(true);<br/>      return;<br/>    }</span><span id="414d" class="mm lc it mh b gy mr mo l mp mq">reject("It was lower than 5");<br/>  });</span><span id="2f62" class="mm lc it mh b gy mr mo l mp mq">p.catch(err =&gt; console.log("ERROR - ", err));</span></pre><p id="762a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ³¨æ„<code class="fe me mf mg mh b">reject</code>æ˜¯å¦‚ä½•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„ï¼Ÿå—¯ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨æ‰¿è¯ºçš„ç±»å‹å£°æ˜ä¸­æ·»åŠ äº†ä¸€ä¸ªè”åˆç±»å‹ï¼Œè¿™æ ·,<code class="fe me mf mg mh b">resolve</code>å’Œ<code class="fe me mf mg mh b">reject</code>çš„è¿”å›ç±»å‹éƒ½æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><h1 id="aa11" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">å¼‚æ­¥/ç­‰å¾…</h1><p id="c73e" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">ç”¨<code class="fe me mf mg mh b">async/await</code>å®ç°TypeScriptéå¸¸ç±»ä¼¼äºä¸€ä¸ªæ‰¿è¯ºã€‚</p><pre class="kq kr ks kt gt mi mh mj mk aw ml bi"><span id="9107" class="mm lc it mh b gy mn mo l mp mq">const randomAboveFive = () =&gt;<br/>    new Promise&lt;boolean | string&gt;((resolve, reject) =&gt; {<br/>      const random = Math.floor(Math.random() * 15);</span><span id="31da" class="mm lc it mh b gy mr mo l mp mq">    if (random &gt; 5) {<br/>      resolve(true);<br/>      return;<br/>    }</span><span id="d639" class="mm lc it mh b gy mr mo l mp mq">    reject("It was lower than 5");<br/>});</span><span id="4102" class="mm lc it mh b gy mr mo l mp mq">const checkRandomNumber = async (): Promise&lt;boolean | string&gt; =&gt; {<br/>    let result;</span><span id="c537" class="mm lc it mh b gy mr mo l mp mq">    try {<br/>      result = await randomAboveFive();<br/>    } catch (err) {<br/>      console.log("ERROR -- ", err);<br/>      result = err;<br/>    }</span><span id="c3fe" class="mm lc it mh b gy mr mo l mp mq">    console.log("-----&gt;&gt;&gt;", result);</span><span id="4b05" class="mm lc it mh b gy mr mo l mp mq">    return result;<br/>};</span><span id="80ea" class="mm lc it mh b gy mr mo l mp mq">checkRandomNumber();</span></pre><p id="1101" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæ‰¿è¯ºï¼Œå®ƒå¯èƒ½ä»¥ä»»ä½•ä¸€ç§æ–¹å¼å‡ºç°â€”å¦‚æœç”Ÿæˆçš„éšæœºå€¼å¤§äº<code class="fe me mf mg mh b">5</code>ï¼Œæˆ‘ä»¬è§£æ<code class="fe me mf mg mh b">true</code>ï¼Œå¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªè§£é‡Šé”™è¯¯çš„å­—ç¬¦ä¸²<code class="fe me mf mg mh b">reject</code>ã€‚</p><p id="dc0a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨<strong class="js iu"> Async/Await </strong>è®¾ç½®ä¸€ä¸ªç­‰å¾…<strong class="js iu">æ‰¿è¯º</strong>çš„å‡½æ•°ï¼Œå¹¶å¤„ç†å®ƒçš„æˆåŠŸæˆ–å¤±è´¥ã€‚</p><p id="f3f6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æˆ‘ä»¬ç”¨<code class="fe me mf mg mh b">Promise&lt;boolean | string&gt;</code>è®¾ç½®å¼‚æ­¥/ç­‰å¾…æ“ä½œçš„è¿”å›ç±»å‹ã€‚</p><h1 id="15cc" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">å‘ç”µæœºåŠŸèƒ½</h1><p id="d920" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">ä¸‹é¢æ˜¯æˆ‘ä»¬å¦‚ä½•ç”¨<code class="fe me mf mg mh b">function*</code>å®ç°TypeScriptï¼Œä¹Ÿç§°ä¸ºç”Ÿæˆå™¨å‡½æ•°:</p><pre class="kq kr ks kt gt mi mh mj mk aw ml bi"><span id="3f50" class="mm lc it mh b gy mn mo l mp mq">function* genCounter(i: number): IterableIterator&lt;number&gt; {<br/>  while (true) {<br/>    yield i--;</span><span id="50aa" class="mm lc it mh b gy mr mo l mp mq">    if (i === 0) return;<br/>  }<br/>}</span><span id="5346" class="mm lc it mh b gy mr mo l mp mq">const count = genCounter(4);</span><span id="d4a3" class="mm lc it mh b gy mr mo l mp mq">let keepGoing = true;</span><span id="231b" class="mm lc it mh b gy mr mo l mp mq">while (keepGoing) {<br/>  const { value, done } = count.next();<br/>  console.log("=&gt;", value, done);</span><span id="21ab" class="mm lc it mh b gy mr mo l mp mq">  if (done) {<br/>    keepGoing = false;<br/>  }<br/>}</span></pre><p id="2239" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä¸»è¦çš„è¦ç‚¹æ˜¯ï¼Œè¦ä½¿<strong class="js iu">ç”Ÿæˆå™¨å‡½æ•°</strong>ä¸<strong class="js iu">ç±»å‹è„šæœ¬</strong>é…åˆè‰¯å¥½ï¼Œæ‚¨å¿…é¡»è®¾ç½®ä¸€ä¸ªè¿”å›å€¼<code class="fe me mf mg mh b">IterableIterator&lt;number&gt;</code>ï¼Œå…¶ä¸­<code class="fe me mf mg mh b">number</code>æ˜¯å®ƒè¿”å›çš„ä»»ä½•åŸºæœ¬ç±»å‹è„šæœ¬ç±»å‹ã€‚</p><h2 id="41fa" class="mm lc it bd ld ms mt dn lh mu mv dp ll kb mw mx lp kf my mz lt kj na nb lx nc bi translated">ä¸Šé¢çš„ä»£ç æ˜¯æ€ä¹ˆå›äº‹:</h2><p id="8f4b" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">æˆ‘ä»¬å£°æ˜ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª<code class="fe me mf mg mh b">number</code>ï¼Œç„¶ååœ¨æ¯æ¬¡è°ƒç”¨<code class="fe me mf mg mh b">count.next()</code>æ—¶é€’å‡å®ƒã€‚å¦‚æœæ•°å­—è¾¾åˆ°é›¶ï¼Œæˆ‘ä»¬è¿”å›å¹¶åœæ­¢å¾ªç¯ï¼Œé€€å‡ºç”Ÿæˆå™¨å‡½æ•°ã€‚</p><p id="0fa7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç„¶åæˆ‘ä»¬å£°æ˜å¦ä¸€ä¸ªå¾ªç¯ï¼Œè¯¥å¾ªç¯ä¸€ç›´è°ƒç”¨<code class="fe me mf mg mh b">count.next()</code>å¹¶è®°å½•è¾“å‡ºï¼Œç›´åˆ°<code class="fe me mf mg mh b">count.next().done</code>ä¸º<code class="fe me mf mg mh b">true</code>ã€‚</p><p id="05ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ç°åœ¨ä½ çŸ¥é“äº†ï¼</p></div></div>    
</body>
</html>