<html>
<head>
<title>Unit Testing React components with Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å•å…ƒæµ‹è¯•ç”¨Cypressååº”ç»„ä»¶</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/unit-testing-react-components-with-cypress-4d4cf8cd59a0?source=collection_archive---------3-----------------------#2020-05-19">https://itnext.io/unit-testing-react-components-with-cypress-4d4cf8cd59a0?source=collection_archive---------3-----------------------#2020-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1cdb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Cypress 4.5.0æ¨å‡ºäº†æœŸå¾…å·²ä¹…çš„ç‰¹æ€§:å¯¹æ¡†æ¶ç»„ä»¶æ¸²æŸ“çš„ä¸€æµæ”¯æŒã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/9f25fb1b9f8ad87fb43cc70ece8196c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lHwfgEIpgU3lYoeETzhg4g.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">æ„Ÿè°¢<a class="ae lb" href="https://itnext.io/@daedaliusx" rel="noopener ugc nofollow" target="_blank"> Dmitriy Tishin </a>å¯¹è‹±é›„å½¢è±¡çš„åˆ›æ„ã€‚</figcaption></figure><p id="379a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘æ­£åœ¨GitHubä¸Šåšä¸€ä¸ªå¤§çš„<a class="ae lb" href="https://github.com/NoriSte/ui-testing-best-practices?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> UIæµ‹è¯•æœ€ä½³å®è·µ</a>é¡¹ç›®ï¼Œæˆ‘åˆ†äº«è¿™ä¸ªå¸–å­æ¥ä¼ æ’­å®ƒå¹¶æœ‰ç›´æ¥çš„åé¦ˆã€‚</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="e3ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="lj">æ›´æ–°</em></strong><em class="lj">:</em><a class="ae lb" href="https://www.cypress.io/blog/2022/06/01/cypress-10-release/" rel="noopener ugc nofollow" target="_blank"><em class="lj">Cypress 10ä¸å«ç»„ä»¶æµ‹è¯•é›†æˆE2Eæµ‹è¯•</em> </a> <em class="lj">ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹ï¼Œå¿½ç•¥ä¸‹é¢æŠ¥é“çš„æ‰€æœ‰é…ç½®æ­¥éª¤ï¼Œå› ä¸ºå®ƒä»¬å·²ç»è¿‡æ—¶äº†ï¼</em></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="5cb9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="lj">æ›´æ–°</em> </strong> <em class="lj"> : </em> <a class="ae lb" href="https://docs.cypress.io/guides/component-testing/introduction#What-is-Component-Testing" rel="noopener ugc nofollow" target="_blank"> <em class="lj">æŸ7å‡ºå¸¦å…¨æ–°ç»„ä»¶æµ‹è¯•æ”¯æŒ</em> </a> <em class="lj">ï¼Œå¿«æ¥çœ‹çœ‹å§ï¼å…¶ä»–æ¿€åŠ¨äººå¿ƒçš„æ¶ˆæ¯æ­£åœ¨è·¯ä¸Šæ„Ÿè°¢</em> <a class="ae lb" href="https://twitter.com/NoriSte/status/1378204109841571840" rel="noopener ugc nofollow" target="_blank"> <em class="lj">æ•…äº‹ä¹¦6.2å‘å¸ƒ</em> </a> <em class="lj">ï¼</em></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="17d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸¤ä¸ªæœˆå‰ï¼Œæˆ‘å†™äº†â€œ<a class="ae lb" href="https://medium.com/@NoriSte/testing-a-virtual-list-component-with-cypress-and-storybook-494dc2d1d26b" rel="noopener">ç”¨Cypresså’ŒStorybook </a>æµ‹è¯•è™šæ‹Ÿåˆ—è¡¨ç»„ä»¶â€çš„æ–‡ç« ã€‚è¿™æ˜¯ä¸€ç¯‡æ‰©å±•æ–‡ç« ï¼Œå› ä¸ºç”¨Cypresså¯ä»¥å¯¹Reactç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</p><p id="561b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å‰ä¸€ç¯‡æ–‡ç« çš„ç›®æ ‡æ˜¯åœ¨<strong class="jp ir"> Reactç»„ä»¶æµ‹è¯•ä¸–ç•Œ</strong>ä¸­è¿è¡Œä¸€äº›å®éªŒï¼Œè¿™æ˜¯å½“ä»ŠçœŸæ­£é‡è¦çš„è¯é¢˜ã€‚</p><p id="801c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åŠ¨æœºå¾ˆç®€å•:</p><ul class=""><li id="f0de" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">ä½ çš„å›¢é˜Ÿä¸­å¯èƒ½å·²ç»æœ‰äº†<a class="ae lb" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">æ•…äº‹ä¹¦</a>(å¦‚æœæ²¡æœ‰ï¼Œè€ƒè™‘æ·»åŠ å®ƒï¼)</li><li id="7cc7" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">æ‚¨å¯èƒ½ä¸ç†Ÿæ‚‰ä½¿ç”¨<a class="ae lb" href="https://testing-library.com/" rel="noopener ugc nofollow" target="_blank">æµ‹è¯•åº“</a>æµ‹è¯•ç»„ä»¶ï¼Œæˆ–è€…æ‚¨å¯èƒ½å¯¹JSDomæœ‰åè§ï¼Œæˆ–è€…æ‚¨å¯èƒ½æƒ³è¦åœ¨çœŸå®çš„æµè§ˆå™¨ä¸­æµ‹è¯•æ‚¨çš„UIç»„ä»¶ï¼Œè€Œä¸æ˜¯åœ¨æ¨¡æ‹Ÿçš„Domç¯å¢ƒä¸­</li><li id="906d" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">æ‚¨å¯èƒ½ç†Ÿæ‚‰<a class="ae lb" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank"> Cypress </a>æˆ–<a class="ae lb" href="https://devexpress.github.io/testcafe/" rel="noopener ugc nofollow" target="_blank"> TestCafÃ© </a>(å¦‚æœä¸ç†Ÿæ‚‰ï¼Œè€ƒè™‘å°†å®ƒä»¬ç”¨äºæ‚¨çš„UIæµ‹è¯•)ï¼Œå¹¶ä¸”æ‚¨å¯èƒ½å¸Œæœ›åªä½¿ç”¨ä¸€ä¸ªå·¥å…·è¿›è¡Œæµ‹è¯•</li></ul><p id="8226" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ–¹æ³•ä¹Ÿå¾ˆç®€å•:</p><ul class=""><li id="45b3" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">å°†æ•…äº‹çš„é“å…·æš´éœ²ç»™æµ‹è¯•å·¥å…·ï¼Œç”¨äºæ§åˆ¶å‘ˆç°çš„ç»„ä»¶</li><li id="24ae" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">ä»Cypress/TestCafÃ©ä¸­è·å–å®ƒä»¬ï¼Œè‡ªåŠ¨æ‰§è¡Œç”¨æˆ·åŠ¨ä½œå¹¶æ–­è¨€é“å…·çš„å†…å®¹</li></ul><p id="bbcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›è­¦å‘Š</p><ul class=""><li id="e5de" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">æ€§èƒ½:åœ¨<a class="ae lb" href="https://medium.com/@NoriSte/testing-a-virtual-list-component-with-cypress-and-storybook-494dc2d1d26b" rel="noopener">çš„æ–‡ç« </a>ä¸­ï¼Œæˆ‘åšäº†ä¸€äº›é¢å¤–çš„åŠªåŠ›æ¥æœ€å°åŒ–æ•…äº‹åˆ‡æ¢ç¼“æ…¢çš„å½±å“</li><li id="1dff" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated"><strong class="jp ir">æµ‹è¯•å’Œæ•…äº‹è€¦åˆ</strong>:å› ä¸ºStorybookç”šè‡³è¢«Cypressæ¶ˆè´¹æ‰äº†ï¼Œæ•…äº‹ä¸ä»…è¦è´Ÿè´£åœ¨å›¢é˜Ÿä¸­å…±äº«è®¾è®¡ç³»ç»Ÿï¼Œè¿˜è¦è´Ÿè´£ç»„ä»¶æµ‹è¯•</li><li id="504c" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated"><strong class="jp ir">å›è°ƒæµ‹è¯•å˜å¾—å›°éš¾</strong>:æ£€æŸ¥å›è°ƒå±æ€§çš„å‚æ•°å’Œè°ƒç”¨å¾ˆå›°éš¾</li></ul><p id="f9e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å®éªŒä¸­çš„ä¸€äº›é—®é¢˜å¯ä»¥é€šè¿‡<a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/cypress-storybook-keeping-test-scenario-data-and-component-rendering-in-one-place-c57b23cc1640"> Dmitriy Tishinæ–¹æ³•</a>æ¥ç¼“è§£ï¼Œä½†æ˜¯è§£å†³æ–¹æ¡ˆè¿˜ä¸æ˜¯æœ€ä½³çš„ï¼Œä½†æ˜¯â€¦</p><h1 id="3bec" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">Cypress 4.5.0å·²ç»å‘å¸ƒ</h1><p id="95bc" class="pw-post-body-paragraph jn jo iq jp b jq mw js jt ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk ij bi translated">4æœˆ28æ—¥ï¼ŒCypress 4.5.0å·²ç»å‘å¸ƒï¼Œå”¯ä¸€å‘å¸ƒçš„ç‰¹æ€§å¦‚ä¸‹</p><blockquote class="nb nc nd"><p id="c614" class="jn jo lj jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated">å½“å°†experimentalComponentTestingé…ç½®é€‰é¡¹è®¾ç½®ä¸ºtrueæ—¶ï¼ŒCypressç°åœ¨æ”¯æŒä½¿ç”¨ç‰¹å®šäºæ¡†æ¶çš„é€‚é…å™¨æ‰§è¡Œç»„ä»¶æµ‹è¯•ã€‚æ›´å¤šç»†èŠ‚è§<a class="ae lb" href="https://github.com/bahmutov/cypress-react-unit-test" rel="noopener ugc nofollow" target="_blank">cypress-react-unit-test</a>å’Œ<a class="ae lb" href="https://github.com/bahmutov/cypress-vue-unit-test" rel="noopener ugc nofollow" target="_blank"> cypress-vue-unit-test </a>æŠ¥å‘Šã€‚</p></blockquote><p id="7cff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿé‚£ä¸ªCypressç°åœ¨å¯ä»¥ç›´æ¥æŒ‚è½½ä¸€ä¸ªReactç»„ä»¶ï¼Œç»™äº†è¿™ä¸ª<a class="ae lb" href="https://github.com/bahmutov/cypress-react-unit-test" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">Cypress-React-unit-test</strong></a>ä¸€ä¸ªæ–°ç”Ÿï¼åœ¨Cypress 4.5.0å‘å¸ƒä¹‹å‰ï¼Œè¿™ä¸ªæ’ä»¶éå¸¸æœ‰é™ï¼Œä½†æ˜¯ç°åœ¨å®ƒæœ‰ä¸€æµçš„æ”¯æŒï¼äº‹å®ä¸Šï¼Œcypress-react-unit-testç°åœ¨å·²ç»åšå¦‚ç£çŸ³ï¼Œæ˜¯ä¸€ä¸ªæœ‰æ„ä¹‰çš„æ’ä»¶ã€‚</p><h1 id="040c" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">æµ‹è¯•è™šæ‹Ÿåˆ—è¡¨ç»„ä»¶:ç¬¬äºŒé›†</h1><p id="fb9c" class="pw-post-body-paragraph jn jo iq jp b jq mw js jt ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk ij bi translated">ç»„ä»¶æ€»æ˜¯ç›¸åŒçš„ï¼Œè™šæ‹Ÿåˆ—è¡¨ï¼Œåœ¨<a class="ae lb" href="https://medium.com/@NoriSte/testing-a-virtual-list-component-with-cypress-and-storybook-494dc2d1d26b#0e10" rel="noopener">çš„å‰ä¸€ç¯‡æ–‡ç« </a>ä¸­äº†è§£æ›´å¤šã€‚æˆ‘ä»¬éœ€è¦è®¾ç½®<a class="ae lb" href="https://github.com/bahmutov/cypress-react-unit-test" rel="noopener ugc nofollow" target="_blank"> cypress-react-unit-test </a>å’ŒTypeScriptè½¬æ¢(è¯¥ç»„ä»¶æ˜¯ç”¨TypeScriptç¼–å†™çš„ï¼Œå®ƒæ˜¯<a class="ae lb" href="https://github.com/lerna/lerna" rel="noopener ugc nofollow" target="_blank"> Lerna </a> monorepoçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”æ˜¯ç”¨Webpackç¼–è¯‘çš„)ã€‚è¿™ä¸¤ä¸ªæ­¥éª¤éƒ½å¾ˆç®€å•ï¼Œä½†æ˜¯å¦‚æœæ’ä»¶åœ¨å®ƒçš„æ–‡æ¡£ä¸­æœ‰ä¸€ä¸ª<a class="ae lb" href="https://github.com/bahmutov/cypress-react-unit-test#install" rel="noopener ugc nofollow" target="_blank">å®‰è£…ä¸“ç”¨çš„éƒ¨åˆ†ï¼Œé‚£ä¹ˆTypeScriptç¼–è¯‘å¯èƒ½ä¸æ˜æ˜¾ï¼Œå› ä¸ºæœ‰å¾ˆå¤šä¸åŒçš„æ–¹æ³•å’Œèµ„æºï¼Œè¿™äº›æ–¹æ³•å’Œèµ„æºæ˜¯è¿‡æ—¶çš„æˆ–è€…éƒ¨åˆ†çš„ã€‚<br/>æœ€ç®€æ´æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯</a><a class="ae lb" href="https://stackoverflow.com/a/60017105/700707" rel="noopener ugc nofollow" target="_blank"> AndrÃ© Penaçš„ä¸€ä¸ª</a>ï¼Œæ‰€ä»¥æˆ‘æ‰€è¦åšçš„å°±æ˜¯:</p><ul class=""><li id="1ece" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">æ·»åŠ ä¸€ä¸ª<em class="lj">cypress/web pack . config . js</em>æ–‡ä»¶</li></ul><pre class="km kn ko kp gt nh ni nj nk aw nl bi"><span id="f4dc" class="nm lz iq ni b gy nn no l np nq">module.exports = {<br/>  mode: 'development',<br/>  devtool: false,<br/>  resolve: {<br/>    extensions: ['.ts', '.tsx', '.js'],<br/>  },<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.tsx?$/,<br/>        exclude: [/node_modules/],<br/>        use: [<br/>          {<br/>            loader: 'ts-loader',<br/>            options: {<br/>              // skip typechecking for speed<br/>              transpileOnly: true,<br/>            },<br/>          },<br/>        ],<br/>      },<br/>    ],<br/>  },<br/>}</span></pre><ul class=""><li id="3cae" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">æ·»åŠ ä¸€ä¸ª<em class="lj"> cypress/tsconfig.json </em>æ–‡ä»¶</li></ul><pre class="km kn ko kp gt nh ni nj nk aw nl bi"><span id="42df" class="nm lz iq ni b gy nn no l np nq">{<br/>  "extends": "../tsconfig.json",<br/>  "compilerOptions": {<br/>    "types": ["cypress", "cypress-wait-until"]<br/>  }<br/>}</span></pre><p id="6ff5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¯·æ³¨æ„:</p><ul class=""><li id="9773" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated"><code class="fe nr ns nt ni b">../tsconfig.json</code>æ–‡ä»¶ä¸Reactåº”ç”¨ç¨‹åºä½¿ç”¨çš„æ–‡ä»¶ç›¸åŒ</li><li id="f04c" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">cypress-wait-untilä¸æ˜¯å¼ºåˆ¶çš„ï¼Œä½†æ˜¯æˆ‘ç»å¸¸ä½¿ç”¨å®ƒï¼Œå®ƒæ˜¯cypresså®‰è£…æœ€å¤šçš„æ’ä»¶ä¹‹ä¸€</li></ul><p id="0fa6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸Šé¢çš„transpilingç›¸å…³æ–‡ä»¶ï¼Œä»¥åŠä¸‹é¢çš„cypress.jsonæ–‡ä»¶</p><pre class="km kn ko kp gt nh ni nj nk aw nl bi"><span id="fb6c" class="nm lz iq ni b gy nn no l np nq">{<br/>  "experimentalComponentTesting": true,<br/>  "componentFolder": "cypress/component"<br/>}</span></pre><p id="f0e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">éƒ½è¶³å¤Ÿå¼€å§‹ç©ä¸€ä¸ª<em class="lj">cypress/component/virtual list . spec . tsx</em>æµ‹è¯•äº†ï¼åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œç¬¬ä¸€ä¸ªæµ‹è¯•æ˜¯æ ‡å‡†å‘ˆç°ï¼Œå³<em class="lj">â€œå½“ç»„ä»¶æ¥æ”¶10000ä¸ªé¡¹ç›®æ—¶ï¼Œåªå‘ˆç°æœ€å°æ•°é‡çš„é¡¹ç›®â€</em>æµ‹è¯•ï¼Œç§:</p><pre class="km kn ko kp gt nh ni nj nk aw nl bi"><span id="7a10" class="nm lz iq ni b gy nn no l np nq">/// &lt;reference types="Cypress" /&gt;<br/>/// &lt;reference types="cypress-wait-until" /&gt;</span><span id="a1f8" class="nm lz iq ni b gy nu no l np nq">import React from 'react'<br/>import { mount } from 'cypress-react-unit-test'</span><span id="5c76" class="nm lz iq ni b gy nu no l np nq">import { VirtualList } from '../../src/atoms/VirtualList'<br/>import { getStoryItems } from '../../stories/atoms/VirtualList/utils'</span><span id="907b" class="nm lz iq ni b gy nu no l np nq">describe('VirtualList', () =&gt; {<br/>  it('When the list receives 10000 items, then only the minimum number of them are rendered', () =&gt; {<br/>    // Arrange<br/>    const itemsAmount = 10000<br/>    const itemHeight = 30<br/>    const listHeight = 300<br/>    const items = getStoryItems({ amount: itemsAmount })<br/>    const visibleItemsAmount = listHeight / itemHeight</span><span id="0c38" class="nm lz iq ni b gy nu no l np nq">    // Act<br/>    <strong class="ni ir">mount</strong>(<br/>      &lt;VirtualList<br/>        items={items}<br/>        getItemHeights={() =&gt; itemHeight}<br/>        RenderItem={createRenderItem({ height: itemHeight })}<br/>        listHeight={listHeight}<br/>      /&gt;,<br/>    )</span><span id="6483" class="nm lz iq ni b gy nu no l np nq">    // Assert<br/>    const visibleItems = items.slice(0, visibleItemsAmount - 1)<br/>    itemsShouldBeVisible(visibleItems)</span><span id="4f9f" class="nm lz iq ni b gy nu no l np nq">    // first not-rendered item check<br/>    cy.findByText(getItemText(items[visibleItemsAmount]))<br/>      .should('not.exist')<br/>  })<br/>})</span></pre><p id="74ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸æ•…äº‹ä¹¦ç›¸å…³çš„æ–‡ç« ç›¸æ¯”:</p><ul class=""><li id="c088" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">è¿™</li></ul><pre class="km kn ko kp gt nh ni nj nk aw nl bi"><span id="b640" class="nm lz iq ni b gy nn no l np nq">/// &lt;reference types="Cypress" /&gt;<br/>/// &lt;reference types="cypress-wait-until" /&gt;</span></pre><p id="7da8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¼€å§‹æ—¶éœ€è¦è®©VSCodeæ­£ç¡®åœ°åˆ©ç”¨ç±»å‹è„šæœ¬å»ºè®®å’Œé”™è¯¯æŠ¥å‘Š(å®ƒä¹Ÿé€‚ç”¨äºæ™®é€šçš„JavaScriptæ–‡ä»¶)</p><ul class=""><li id="b899" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">æˆ‘ä»¬ä½¿ç”¨cypress-react-unit-test '<code class="fe nr ns nt ni b">mount</code>APIæ¥å®‰è£…ç»„ä»¶ï¼Œå¦‚æœä½ å·²ç»ä¹ æƒ¯äº†<a class="ae lb" href="https://testing-library.com/docs/react-testing-library/api" rel="noopener ugc nofollow" target="_blank">æµ‹è¯•åº“API</a>çš„è¯ï¼Œè¿™æ²¡ä»€ä¹ˆç‰¹åˆ«æ–°çš„</li></ul><p id="d05f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é™¤æ­¤ä¹‹å¤–ï¼ŒCypressæµ‹è¯•å’Œæ•…äº‹ä¹¦ç›¸å…³çš„æµ‹è¯•ä¸€æ ·ç»§ç»­è¿›è¡ŒğŸ˜Š</p><h2 id="90b7" class="nm lz iq bd ma nv nw dn me nx ny dp mi jy nz oa mm kc ob oc mq kg od oe mu of bi translated">å›æ‹¨æµ‹è¯•</h2><p id="6f9f" class="pw-post-body-paragraph jn jo iq jp b jq mw js jt ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk ij bi translated">ä»<a class="ae lb" href="https://medium.com/@NoriSte/testing-a-virtual-list-component-with-cypress-and-storybook-494dc2d1d26b#0e10" rel="noopener">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ç§»æ¤æ‰€æœ‰çš„æµ‹è¯•éå¸¸å®¹æ˜“ï¼Œæ‰€ç¼ºå°‘çš„æ˜¯â€œé€‰æ‹©æµ‹è¯•â€çš„å›è°ƒæµ‹è¯•éƒ¨åˆ†ã€‚</p><p id="b08e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›å»ºä¸€ä¸ª<em class="lj"> WithSelectionManagement </em>åŒ…è£…ç»„ä»¶æ¥å‘ˆç°<em class="lj">è™šæ‹Ÿåˆ—è¡¨</em>å¹¶ç®¡ç†é¡¹ç›®é€‰æ‹©æ˜¯éå¸¸å®¹æ˜“çš„ï¼Œæˆ‘ä»¬å¯ä»¥å‘å®ƒä¼ é€’æˆ‘ä»¬çš„å­˜æ ¹å¹¶æ–­è¨€å®ƒ</p><pre class="km kn ko kp gt nh ni nj nk aw nl bi"><span id="adc0" class="nm lz iq ni b gy nn no l np nq">it('When the items are clicked, then they are selected', () =&gt; {<br/>  const itemHeight = 30<br/>  const listHeight = 300<br/>  let testItems</span><span id="db10" class="nm lz iq ni b gy nu no l np nq">  const WithSelectionManagement: React.FC&lt;{<br/>    testHandleSelect: (newSelectedIds: ItemId[]) =&gt; {}<br/>  }&gt; = props =&gt; {<br/>    const { testHandleSelect } = props<br/>    const items = getStoryItems({ amount: 10000 })</span><span id="8130" class="nm lz iq ni b gy nu no l np nq">    const [selectedItems, setSelectedItems] = React.useState&lt;(string | number)[]&gt;([])</span><span id="1194" class="nm lz iq ni b gy nu no l np nq">    const handleSelect = React.useCallback&lt;(params: OnSelectCallbackParams&lt;StoryItem&gt;) =&gt; void&gt;(<br/>      ({ newSelectedIds }) =&gt; {<br/>        setSelectedItems(newSelectedIds)<br/>        testHandleSelect(newSelectedIds)<br/>      },<br/>      [setSelectedItems, testHandleSelect],<br/>    )</span><span id="01d8" class="nm lz iq ni b gy nu no l np nq">    React.useEffect(() =&gt; {<br/>      testItems = items<br/>    }, [items])</span><span id="5b08" class="nm lz iq ni b gy nu no l np nq">    return (<br/>      &lt;VirtualList<br/>        items={items}<br/>        getItemHeights={() =&gt; itemHeight}<br/>        listHeight={listHeight}<br/>        RenderItem={createSelectableRenderItem({ height: itemHeight })}<br/>        selectedItemIds={selectedItems}<br/>        onSelect={handleSelect}<br/>      /&gt;<br/>    )<br/>  }<br/>  WithSelectionManagement.displayName = 'WithSelectionManagement'</span><span id="4c8d" class="nm lz iq ni b gy nu no l np nq">  mount(&lt;WithSelectionManagement testHandleSelect={<strong class="ni ir">cy.stub().as('handleSelect')</strong>} /&gt;)</span><span id="8e60" class="nm lz iq ni b gy nu no l np nq">  cy.then(() =&gt; expect(testItems).to.have.length.greaterThan(0))<br/>  cy.wrap(testItems).then(() =&gt; {<br/>    cy.findByText(getItemText(testItems[0])).click()<br/>    <strong class="ni ir">cy.get('</strong><a class="ae lb" href="http://twitter.com/handleSelect" rel="noopener ugc nofollow" target="_blank"><strong class="ni ir">@handleSelect</strong></a><strong class="ni ir">').should(stub =&gt; {<br/>      expect(stub).to.have.been.calledOnce<br/>      expect(stub).to.have.been.calledWith([testItems[0].id])<br/>    })</strong><br/>  })<br/>})</span></pre><p id="6053" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¯·å‚è€ƒå®Œæ•´çš„SinonJS(ç”±èµ›æ™®æ‹‰æ–¯åŒ…è£…å’Œä½¿ç”¨)<a class="ae lb" href="https://sinonjs.org/releases/v9.0.2/stubs/" rel="noopener ugc nofollow" target="_blank">å­˜æ ¹</a> / <a class="ae lb" href="https://sinonjs.org/releases/v9.0.2/spies/" rel="noopener ugc nofollow" target="_blank"> Spy </a>æ–‡æ¡£ä»¥è·å–å®Œæ•´çš„APIã€‚</p><h1 id="f9af" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">ç»“è®º</h1><p id="01b8" class="pw-post-body-paragraph jn jo iq jp b jq mw js jt ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk ij bi translated">è¿™é‡Œæ˜¯æœ€åä¸€æ¬¡æµ‹è¯•çš„æˆªå›¾ï¼Œæœ€å®Œæ•´çš„ä¸€æ¬¡</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi og"><img src="../Images/32dc5567832547a3a108dd1c0a4ef8c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-cB8tsCJtmJ5hXGTCeCqXA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">æœ€åä¸€æ¬¡æµ‹è¯•ç”¨çš„æ˜¯å­˜æ ¹æ”¯ç¥¨ã€‚</figcaption></figure><p id="3604" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯æ‰€æœ‰æµ‹è¯•çš„è®°å½•</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">ç»„ä»¶å•å…ƒæµ‹è¯•ç›´æ¥åœ¨Cypressä¸­è¿è¡Œã€‚</figcaption></figure><p id="ae04" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æµ‹è¯•æŒç»­ä¸åˆ°7ç§’ï¼Œä¸ä¾èµ–ä¹Ÿä¸åŠ è½½æ•…äº‹ä¹¦ï¼Œåˆ©ç”¨ä¸€æµçš„Cypressæ”¯æŒã€‚</p><p id="5c95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿcypress-react-unit-test æ’ä»¶ç°åœ¨éå¸¸ç¨³å®šå’Œæœ‰ç”¨ï¼Œä¸€ä¸ªå…¨æ–°çš„å®éªŒä¸–ç•Œå·²ç»å¼€æ”¾ï¼Œè®¸å¤šä¸­å°å‹é¡¹ç›®å¯ä»¥é€‰æ‹©åˆ©ç”¨cypressä½œä¸ºå•ä¸€æµ‹è¯•å·¥å…·ã€‚æˆ‘ç­‰ç€ä½ çš„è¯„è®ºå’Œç»éªŒğŸ˜Š</p><h2 id="b232" class="nm lz iq bd ma nv nw dn me nx ny dp mi jy nz oa mm kc ob oc mq kg od oe mu of bi translated">ä½ å¯èƒ½ä¼šå¯¹æˆ‘çš„å…¶ä»–æ–‡ç« æ„Ÿå…´è¶£</h2><ul class=""><li id="8379" class="lk ll iq jp b jq mw ju mx jy oj kc ok kg ol kk lp lq lr ls bi translated">ä½¿ç”¨Cypresså’ŒStorybookçš„åŸå§‹ç»„ä»¶æµ‹è¯•å®éªŒ:<a class="ae lb" href="https://medium.com/@NoriSte/testing-a-virtual-list-component-with-cypress-and-storybook-494dc2d1d26b" rel="noopener">ä½¿ç”¨Cypresså’ŒStorybookæµ‹è¯•è™šæ‹Ÿåˆ—è¡¨ç»„ä»¶</a></li><li id="4446" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">UIæµ‹è¯•åˆ†ç±»:<a class="ae lb" href="https://medium.com/@NoriSte/component-vs-ui-integration-vs-e2e-tests-f02b575339dc" rel="noopener">ç»„ä»¶vs (UI)é›†æˆvs E2Eæµ‹è¯•</a></li><li id="e6c0" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">é¿å…ç”¨ä¸å¿…è¦çš„å’Œä¸å¯é¢„æµ‹çš„ç­‰å¾…æ¥å‡æ…¢ä½ çš„æµ‹è¯•:<a class="ae lb" href="https://medium.com/@NoriSte/await-do-not-sleep-your-e2e-tests-df67e051b409" rel="noopener">ç­‰å¾…ï¼Œä¸è¦è®©ä½ çš„E2Eæµ‹è¯•ä¼‘çœ </a></li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="98b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ å¥½ğŸ‘‹æˆ‘æ˜¯Stefano Magniï¼Œæˆ‘æ˜¯ä¸€åçƒ­æƒ…çš„<strong class="jp ir">ååº”å’Œæ‰“å­—å¼€å‘è€…</strong>ï¼Œä¸€å<strong class="jp ir">æŸæ ‘å¤§ä½¿</strong>å’Œä¸€å<strong class="jp ir">è®²å¸ˆ</strong>ã€‚æˆ‘ä½œä¸ºä¸€åé«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆä¸ºWorkWave åšè¿œç¨‹å·¥ä½œã€‚æˆ‘å–œæ¬¢åˆ›é€ é«˜è´¨é‡çš„äº§å“ï¼Œæµ‹è¯•å’Œè‡ªåŠ¨åŒ–ä¸€åˆ‡ï¼Œå­¦ä¹ å’Œåˆ†äº«æˆ‘çš„çŸ¥è¯†ï¼Œå¸®åŠ©ä»–äººï¼Œåœ¨ä¼šè®®ä¸Šå‘è¨€ï¼Œä»¥åŠé¢å¯¹æ–°çš„æŒ‘æˆ˜ã€‚<br/>ä½ å¯ä»¥åœ¨<a class="ae lb" href="https://twitter.com/NoriSte?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> Twitter </a>ã€<a class="ae lb" href="https://github.com/NoriSte?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> GitHub </a>ã€<a class="ae lb" href="https://www.linkedin.com/in/noriste/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>ä¸Šæ‰¾åˆ°æˆ‘ã€‚ä½ å¯ä»¥æ‰¾åˆ°æˆ‘æœ€è¿‘æ‰€æœ‰çš„æŠ•ç¨¿/æ¼”è®²ç­‰ã€‚å…³äº<a class="ae lb" href="https://github.com/NoriSte/all-my-contributions" rel="noopener ugc nofollow" target="_blank">æˆ‘çš„GitHubæ€»ç»“</a>ã€‚</p></div></div>    
</body>
</html>