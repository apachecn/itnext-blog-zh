<html>
<head>
<title>Feature flags â€” an explainer and interactive demo using React and Mavo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç‰¹æ€§æ ‡å¿—â€”â€”ä½¿ç”¨Reactå’ŒMavoçš„è§£é‡Šå™¨å’Œäº¤äº’å¼æ¼”ç¤º</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/feature-flags-an-explainer-and-interactive-demo-using-react-and-mavo-5f84eed3d111?source=collection_archive---------1-----------------------#2020-04-23">https://itnext.io/feature-flags-an-explainer-and-interactive-demo-using-react-and-mavo-5f84eed3d111?source=collection_archive---------1-----------------------#2020-04-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/04de80bbab2b3d097c1c6980c0e8cfe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sHoN4VeJjdoQo_041gVpZw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">æ¼”ç¤ºä»ªè¡¨æ¿çš„å±å¹•æˆªå›¾</figcaption></figure><p id="5b3e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘å°†è®¨è®ºç‰¹æ€§æ ‡å¿—çš„ä½¿ç”¨å’Œä¸€äº›ç›¸å…³çš„è®¾è®¡æ¨¡å¼ã€‚æ­¤å¤–ï¼Œæˆ‘è¿˜æè¿°äº†ä¸€ä¸ªæ¼”ç¤ºå®ç°ï¼Œå…¶ä¸­ä¸€ä¸ªåŸå‹åº”ç”¨ç¨‹åºä½¿ç”¨æ ‡å¿—(React)å’Œä¸€ä¸ªåŠŸèƒ½æ ‡å¿—ä»ªè¡¨æ¿(Mavo)æ¥ç®¡ç†æ ‡å¿—ã€‚æˆ‘è¿˜å±•ç¤ºäº†é”™è¯¯å¤„ç†/æŠ¥å‘Šå’Œåˆ†ææ˜¯å¦‚ä½•ä¸ç‰¹æ€§æ ‡è®°ä¸€èµ·å®ç°çš„ï¼Œä½¿ç”¨äº†æˆ‘ç§°ä¹‹ä¸ºç‰¹æ€§è¾¹ç•Œ<em class="ld">çš„ä¸œè¥¿ã€‚</em></p><p id="60f8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">é©¬ä¸Â·ç¦å‹’å°†ç‰¹å¾æ ‡å¿—<a class="ae le" href="https://martinfowler.com/articles/feature-toggles.html" rel="noopener ugc nofollow" target="_blank">æè¿°ä¸ºâ€œä¸€å¥—æ¨¡å¼ï¼Œå¯ä»¥å¸®åŠ©å›¢é˜Ÿå¿«é€Ÿè€Œå®‰å…¨åœ°å‘ç”¨æˆ·äº¤ä»˜æ–°åŠŸèƒ½â€ã€‚å…¶æ€æƒ³æ˜¯å°†æ–°åŠŸèƒ½æˆ–æ›´æ–°çš„åŠŸèƒ½éšè—åœ¨åŠŸèƒ½æ ‡å¿—ä¹‹åï¼Œè¿™äº›åŠŸèƒ½æ ‡å¿—å¯ä»¥æ ¹æ®æƒ…å†µæ‰“å¼€æˆ–å…³é—­ã€‚åŠŸèƒ½æ ‡å¿—è¢«é›†æˆåˆ°è½¯ä»¶ä¸­ï¼Œå¹¶é€šè¿‡ä½¿ç”¨æ ‡å¿—ä½œä¸ºå¼€å…³ä¸´æ—¶è¦†ç›–ä¸»è¦è®¾è®¡çš„æ§åˆ¶æµæ¥å·¥ä½œã€‚</a></p><p id="aac5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å½“æ²¿ç€è¿ç»­çš„ä¸œè¥¿è½´ç§»åŠ¨æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚å®ƒå¯ä»¥è®©æ‚¨:</p><ol class=""><li id="1d5a" class="lf lg it kh b ki kj km kn kq lh ku li ky lj lc lk ll lm ln bi translated">ç»å¸¸åœ¨flagsåé¢éƒ¨ç½²ï¼Œè€Œä¸ç”¨åŠç”Ÿä¸ç†Ÿçš„ä¸œè¥¿æ‰“æ‰°æœ€ç»ˆç”¨æˆ·(å°†éƒ¨ç½²ä¸å‘å¸ƒåˆ†å¼€)ï¼Œ</li><li id="e1ba" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lk ll lm ln bi translated">å¦‚æœåœ¨å‘å¸ƒ/éƒ¨ç½²åå‡ºç°äº†ä¸€äº›é—®é¢˜(ç±»ä¼¼äºkill switch/æ–­è·¯å™¨ï¼Œè‡ªåŠ¨æˆ–æ‰‹åŠ¨å…³é—­æ ‡å¿—â€”â€”ä½†ç¨åå½“æˆ‘è®¨è®º<em class="ld">åŠŸèƒ½è¾¹ç•Œ</em>æ—¶ä¼šæœ‰æ›´å¤šå…³äºè¿™ä¸€ç‚¹çš„å†…å®¹),</li><li id="8b2d" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lk ll lm ln bi translated">å°è¯•æ–°çš„ç‰¹æ€§(ä¾‹å¦‚ï¼Œé€šè¿‡ä½¿ç”¨å®ƒæ¥è¿›è¡ŒA/Bæµ‹è¯•ï¼Œæˆ–è€…é€šè¿‡ä¸ºä¸€ä¸ªé€‰æ‹©çš„æµ‹è¯•ç»„å‘å¸ƒä¸€ä¸ªæ–°çš„ç‰¹æ€§æ¥æä¾›æœ‰ç”¨çš„åé¦ˆ)ã€‚</li></ol><p id="8146" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç‰¹æ€§æ ‡è®°çš„çµæ´»æ€§å’Œå®ç”¨æ€§æ¥è‡ªäºå°†å®ƒä»¬ä½œä¸ºè½¯ä»¶çš„ä¸€éƒ¨åˆ†æ¥å®ç°ã€‚ä½†è¿™æ˜¾ç„¶ä¹Ÿæ˜¯åå¯¹çš„ä¸»è¦ç†ç”±ï¼Œå› ä¸ºå®ƒå¢åŠ äº†åº”ç”¨ç¨‹åºå’ŒæœåŠ¡çš„å¤æ‚æ€§å’Œä¸ç¨³å®šæ€§é£é™©ã€‚æ‰€ä»¥éœ€è¦å°å¿ƒå¤„ç†ã€‚ä½ é€šå¸¸éœ€è¦æŸç§æŠ½è±¡ï¼Œè®©ä½ åœ¨ä½ çš„è½¯ä»¶ä¸­æ·»åŠ ã€ç»´æŠ¤å’Œåˆ é™¤æ ‡å¿—ï¼Œå¹¶å…·æœ‰å¯é¢„æµ‹æ€§ã€‚å½“ç„¶ï¼Œåœ¨Reactä¸­ï¼Œè¿™æ„å‘³ç€åˆ›å»ºä¸€äº›åˆé€‚çš„ç»„ä»¶ï¼Œä»¥å£°æ˜çš„æ–¹å¼å¤„ç†è¿™äº›æ ‡å¿—ã€‚è¿™æ˜¯åœ¨æ¼”ç¤ºä¸­å®Œæˆçš„ï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•å®ç°ã€‚</p><ul class=""><li id="fd11" class="lf lg it kh b ki kj km kn kq lh ku li ky lj lc lt ll lm ln bi translated">å¸¦æœ‰åŠŸèƒ½æ ‡å¿—çš„åº”ç”¨ç¨‹åºæ¼”ç¤º:<a class="ae le" href="https://easy-peasy-features.now.sh/" rel="noopener ugc nofollow" target="_blank">https://easy-peasy-features.now.sh/</a></li><li id="34de" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lt ll lm ln bi translated">åŠŸèƒ½æ ‡å¿—ä»ªè¡¨æ¿æ¼”ç¤º:<a class="ae le" href="https://easy-peasy-features.now.sh/features" rel="noopener ugc nofollow" target="_blank">https://easy-peasy-features.now.sh/features</a></li><li id="b73a" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lt ll lm ln bi translated">Githubå›è´­:<a class="ae le" href="https://github.com/kjartanm/easy-peasy-features" rel="noopener ugc nofollow" target="_blank">https://github.com/kjartanm/easy-peasy-features</a></li></ul><p id="ac8d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åŠŸèƒ½æ ‡å¿—å’ŒåŸºäºç®¡é“çš„ç­–ç•¥ä¹‹é—´ä¹Ÿæœ‰ä¸€äº›é‡å ï¼Œä½†æˆ‘è®¤ä¸ºè¿™çœŸçš„æ˜¯ä¸€ä»¶éå¸¸é‡è¦çš„äº‹æƒ…ï¼ŒåŸºäºè½¯ä»¶å’ŒåŸºäºç®¡é“çš„æ¨¡å¼åº”è¯¥è¢«è§†ä¸ºäº’è¡¥çš„ç­–ç•¥ï¼Œä½¿æ‚¨èƒ½å¤Ÿä»¥å°½å¯èƒ½å°çš„é£é™©éƒ¨ç½²å’Œå‘å¸ƒã€‚</p><h1 id="287e" class="lu lv it bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">ä»€ä¹ˆæ˜¯æ——å¸œï¼Ÿ</h1><p id="acbf" class="pw-post-body-paragraph kf kg it kh b ki ms kk kl km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc im bi translated">åŸºæœ¬çš„ç‰¹å¾æ ‡å¿—åŠŸèƒ½ç±»ä¼¼äº:</p><p id="6c32" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><code class="fe mx my mz na b">if check('flag-x') then enable someFunctionality</code></p><p id="9532" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¯¥æ£€æŸ¥é€šå¸¸æ˜¯æ£€æŸ¥æ ‡å¿—æ˜¯å¦å·²å¯ç”¨ï¼Œå¹¶ç»“åˆç”¨æˆ·å¯¹è±¡ä¸Šçš„å±æ€§ä¸æ ‡å¿—ä¸Šçš„ä¸€äº›é¢„è®¾å±æ€§çš„åŒ¹é…ï¼Œä»¥æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦åœ¨æ ‡å¿—çš„èŒƒå›´å†…ã€‚åœ¨æ¼”ç¤ºä¸­ï¼Œä¸€ä¸ªç”¨æˆ·å¯¹è±¡çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="7cc8" class="nj lv it na b gy nk nl l nm nn">{<br/>    "userid": "user3",<br/>    "name": "Cilla Customer, DK",<br/>    "country": "dk",<br/>    "role": "customer"<br/>}</span></pre><p id="9e36" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ——å¸œçœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="0c20" class="nj lv it na b gy nk nl l nm nn">{<br/>    "label": "Add customer profile-page",<br/>    "flag": "profile-page-v1",<br/>    "description": "A customer profile-page to improve metrics by ...",<br/>    "threshold": 100,<br/>    "self-select": false,<br/>    "enabled": true,<br/>    "deprecated": false,<br/>    "expires": "2020-12-01",<br/>    "selectors": {<br/>        "country": [<br/>            "all"<br/>        ],<br/>        "role": [<br/>            "customer"<br/>        ],<br/>        "userid": [<br/>            "all"<br/>        ]<br/>    }<br/>}</span></pre><p id="f81e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¿™é‡Œçš„æ ‡å¿—å°†æ˜¯ä¸Šçš„<em class="ld">ï¼Œå› ä¸ºå®ƒå·²å¯ç”¨ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªå¯æ¥å—çš„è§’è‰²ã€‚è¿™é‡Œçš„å…¶ä»–é€‰æ‹©å™¨æ›´åƒé€šé…ç¬¦ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ç¼©å°æ ‡å¿—çš„èŒƒå›´ï¼Œå°†å…¶é™åˆ¶åœ¨æŸä¸ªå›½å®¶æˆ–æœ‰é™çš„ä¸€ç»„ç”¨æˆ·idã€‚æ ‡å¿—çš„ç²’åº¦å–å†³äºç”¨æˆ·å¯¹è±¡çš„ç²’åº¦ã€‚å¦‚æœæ‚¨æœ‰å®Œæ•´çš„åœ°å€ï¼Œæ‚¨å¯ä»¥å°†è¯¥åŠŸèƒ½é™åˆ¶åˆ°ç‰¹å®šçš„é‚®æ”¿ç¼–ç ï¼Œæˆ–è€…å¦‚æœæ‚¨æœ‰æ‚¨è€æ¿çš„ç”¨æˆ·idï¼Œæ‚¨æœ€ç»ˆå¯ä»¥ç»™ä»–æƒ³è¦çš„é—ªäº®çš„è€æ¿æŒ‰é’®ï¼Œè€Œä¸ä¼šæ‰“æ‰°å…¶ä»–äººï¼ğŸ˜‰</em></p><h2 id="4b48" class="nj lv it bd lw no np dn ma nq nr dp me kq ns nt mi ku nu nv mm ky nw nx mq ny bi translated">éšæœºå­é›†</h2><p id="cfba" class="pw-post-body-paragraph kf kg it kh b ki ms kk kl km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc im bi translated">é™¤äº†å±æ€§é€‰æ‹©å™¨ï¼Œè¯¥æ ‡å¿—è¿˜æœ‰ä¸€ä¸ªé˜ˆå€¼å±æ€§ï¼Œå¯ç”¨äºé€‰æ‹©åŸå§‹é€‰æ‹©å™¨èŒƒå›´çš„éšæœºå­é›†ï¼Œå¦‚20%çš„æŒªå¨å®¢æˆ·ã€‚åœ¨æ¼”ç¤ºä¸­ï¼Œæˆ‘åªä½¿ç”¨äº†ä¸€ä¸ªå­˜å‚¨åœ¨localStorageä¸­çš„éšæœºæ•°ï¼Œä½†æ˜¯å¦‚æœå¯ä»¥å°†userIdè§†ä¸ºä¸€ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨æ¨¡æ“ä½œç¬¦æ¥è·å–è¿™ä¸ªæ•°å­—(userid % 100)ã€‚â€œé‡Šæ”¾â€ä½¿ç”¨äº†è¿™ç§æŠ€æœ¯ã€‚</p><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ca"><img src="../Images/c61e91c2a6bb1767cc80167598ebb74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*csJteRVRZQPRdixe4ugKNw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">ä»æ——å¸œä»ªè¡¨æ¿æ¼”ç¤ºã€‚</figcaption></figure><h2 id="c131" class="nj lv it bd lw no np dn ma nq nr dp me kq ns nt mi ku nu nv mm ky nw nx mq ny bi translated">æ ‡å¿—å­˜å‚¨å’Œç¼–è¾‘</h2><p id="9eb8" class="pw-post-body-paragraph kf kg it kh b ki ms kk kl km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc im bi translated">å˜å¾—æ›´å¤æ‚çš„æ˜¯å¦‚ä½•ç¼–è¾‘å’Œåœ¨å“ªé‡Œå­˜å‚¨ä½ çš„æ ‡å¿—çš„é—®é¢˜ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†è¿™äº›æ ‡å¿—ä½œä¸ºJSONæ†ç»‘åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¹¶ä»é‚£é‡Œè·å–ã€‚å¦ä¸€æ–¹é¢ï¼Œä½ æœ‰ä¸€äº›æ‰˜ç®¡æœåŠ¡ï¼Œæ¯”å¦‚Launch Darklyã€Configcatã€Unleash (Unleashä¹Ÿæœ‰å¼€æºç‰ˆæœ¬)ç­‰ç­‰ã€‚æ‰˜ç®¡æœåŠ¡çš„å¥½å¤„åœ¨äºï¼Œå®ƒä»¬é€šå¸¸å¸¦æœ‰ä¸€ä¸ªä»ªè¡¨æ¿UIï¼Œå…è®¸æ‚¨ä»¥ä¸€ç§ç”¨æˆ·å‹å¥½çš„æ–¹å¼åˆ›å»ºå’Œç®¡ç†æ ‡å¿—ã€‚ä½†æ˜¯å®ƒä»¬å¯èƒ½å¾ˆè´µï¼</p><p id="6e5b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¿™ä¸ªæ¼”ç¤º/åŸå‹å¼€å§‹æ˜¯å¸Œæœ›æ¢ç´¢ä¸€äº›ä¸­é—´åœ°å¸¦ï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ä»ªè¡¨æ¿ï¼Œä½†ä»ç„¶æœ‰å®ƒé›†æˆåˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä½¿ç”¨<a class="ae le" href="https://mavo.io/" rel="noopener ugc nofollow" target="_blank"> Mavo </a>ã€‚Mavoæ˜¯åˆ›å»ºå¯ç¼–è¾‘å‰ç«¯çš„ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå®ƒæä¾›äº†ä½¿ç”¨ä¸åŒå­˜å‚¨æœºåˆ¶çš„å¯èƒ½æ€§ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯GitHubï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨Mavoä¸ºå­˜å‚¨åº“ä¸­çš„JSONæ–‡ä»¶åˆ›å»ºæ¼‚äº®çš„UIã€‚åœ¨æ¼”ç¤ºä¸­ï¼Œæˆ‘ä½¿ç”¨Mavoä¸ºæ ‡å¿—åˆ›å»ºä¸€ä¸ªä»ªè¡¨æ¿ã€‚ç„¶åå¯ä»¥å°†ç”Ÿæˆçš„JSONæ†ç»‘åˆ°æ„å»ºä¸­ï¼Œæˆ–è€…ä½œä¸ºç®€å•çš„ç‹¬ç«‹APIè¿›è¡Œéƒ¨ç½²ï¼Œç”šè‡³å¯ä»¥ä½œä¸ºæ›´é«˜çº§APIçš„ä¸€éƒ¨åˆ†ã€‚ç”±äºæ ‡å¿—å¯èƒ½æ˜¯æ½œåœ¨çš„éšç§æ³„æ¼ï¼Œå› æ­¤æœ‰å¿…è¦å°†æ ‡å¿—æ£€æŸ¥è½¬ç§»åˆ°å—ä¿æŠ¤çš„APIä¸­ï¼Œè€Œä¸æ˜¯ä»ç«¯ç‚¹æä¾›æ•´ä¸ªflag-JSONã€‚</p><p id="7c9d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ä¸‹é¢æ˜¯ç¼–è¾‘ç‰¹æ€§ã€åˆ›å»ºä¸Šé¢çš„uiä»¥åŠä¹‹å‰çš„JSON-exampleçš„æ ‡è®°ã€‚ä½¿ç”¨Mavoï¼Œæ‚¨å¯ä»¥ä½¿ç”¨property-attributeåŠ ä¸Šä¸€äº›å‘½åç©ºé—´è¾…åŠ©å±æ€§æ¥å®šä¹‰å¯ç¼–è¾‘çš„å±æ€§ã€‚ç„¶ååœ¨ä¿å­˜æ—¶åºåˆ—åŒ–ä¸ºJSON(ä¹Ÿå¯èƒ½æ˜¯å…¶ä»–æ ¼å¼)ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ ‡è®°çš„ä¾‹å­ã€‚wired-prefixæ¥è‡ª<a class="ae le" href="https://wiredjs.com/" rel="noopener ugc nofollow" target="_blank"> <em class="ld"> wiredjs </em> </a>ï¼Œä¸€ç»„åˆ›å»ºç²—ç•¥æ„Ÿè§‰å’Œå¤–è§‚çš„uiç»„ä»¶:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="154e" class="nj lv it na b gy nk nl l nm nn">&lt;wired-card class="card--main"&gt;<br/>    &lt;div class="card feature-details"&gt;<br/>        &lt;div class="feature-summary"&gt;<br/>            &lt;div&gt;Show/edit [flag]&lt;/div&gt;<br/>            &lt;h3&gt;Flag&lt;/h3&gt;<br/>            &lt;div property="flag" class="card-property-editor"&gt;&lt;/div&gt;<br/>            &lt;h3&gt;Label&lt;/h3&gt;<br/>            &lt;div property="label" class="card-property-editor"&gt;&lt;/div&gt;<br/>            &lt;h3&gt;Description&lt;/h3&gt;<br/>            &lt;div property="description"&gt;&lt;/div&gt;<br/>        &lt;/div&gt;<br/>        &lt;div class="feature-editor"&gt;<br/>            &lt;div&gt;<br/>                &lt;label&gt;Self select:&lt;/label&gt;<br/>                &lt;wired-toggle onchange="this.setAttribute('aria-checked', this.checked)" mv-mode="edit"<br/>                    property="self-select" class="mv-editor" mv-attribute="aria-checked"&gt;&lt;/wired-toggle&gt;<br/>            &lt;/div&gt;<br/>            &lt;div&gt;<br/>                &lt;label&gt;Deprecated:&lt;/label&gt;<br/>                &lt;wired-toggle onchange="this.setAttribute('aria-checked', this.checked)" mv-mode="edit"<br/>                    property="deprecated" class="mv-editor" mv-attribute="aria-checked"&gt;&lt;/wired-toggle&gt;<br/>            &lt;/div&gt;<br/>            &lt;div&gt;<br/>                &lt;label&gt;AB-threshold:&lt;/label&gt;<br/>                &lt;wired-slider class="feature-threshold" onclick="this.wiredRender(true)"<br/>                    onchange="this.render();this.setAttribute('aria-valuenow', this.value)"<br/>                    knobradius="12" mv-attribute="aria-valuenow" property="threshold"<br/>                    aria-valuenow="100"&gt;&lt;/wired-slider&gt;<br/>            &lt;/div&gt;<br/>            &lt;h3&gt;Selectors&lt;/h3&gt;<br/>            &lt;ul property="selectors"&gt;<br/>                &lt;li&gt;<br/>                    &lt;label class="card-label"&gt;Countries:&lt;/label&gt;&lt;br&gt;<br/>                    &lt;span class="selector" property="country" mv-multiple mv-edit="#countries"&gt;&lt;/span&gt;<br/>                &lt;/li&gt;<br/>                &lt;li&gt;<br/>                    &lt;label class="card-label"&gt;Roles:&lt;/label&gt;&lt;br&gt;<br/>                    &lt;span class="selector" property="role" mv-multiple mv-edit="#roles"&gt;&lt;/span&gt;<br/>                &lt;/li&gt;<br/>                &lt;li&gt;<br/>                    &lt;label class="card-label"&gt;Users:&lt;/label&gt;&lt;br&gt;<br/>                    &lt;span class="selector" property="userid" mv-multiple&gt;&lt;/span&gt;<br/>                &lt;/li&gt;<br/>            &lt;/ul&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/wired-card&gt;</span></pre><blockquote class="nz oa ob"><p id="384e" class="kf kg ld kh b ki kj kk kl km kn ko kp oc kr ks kt od kv kw kx oe kz la lb lc im bi translated"><strong class="kh iu"> NBï¼</strong>åœ¨æ¼”ç¤ºä¸­ï¼Œæˆ‘ä½¿ç”¨localStorageä½œä¸ºå­˜å‚¨æœºåˆ¶ï¼Œè€Œä¸æ˜¯GitHubï¼Œå› ä¸ºå®ƒè®©æˆ‘åˆ›å»ºäº†ä¸€ç§æ²™ç®±ï¼Œæ‚¨å¯ä»¥åœ¨æµè§ˆå™¨çš„éšç§ä¸­æµ‹è¯•ä»ªè¡¨æ¿å’Œæ¼”ç¤ºåº”ç”¨ç¨‹åºã€‚å½“æ‚¨åœ¨ä»ªè¡¨æ¿ä¸­ä¿®æ”¹æ ‡è®°æ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šç«‹å³æ›´æ–°(å¦‚æœå®ƒåœ¨å¦ä¸€ä¸ªé€‰é¡¹å¡ä¸­æ‰“å¼€)ï¼Œå› ä¸ºå®ƒæ­£åœ¨ä¾¦å¬localStorage-updatesã€‚è¿™æ˜¯ç”±æ ‡å¿—ä¸Šä¸‹æ–‡å¤„ç†çš„ï¼Œå› æ­¤æ›´æ”¹å®ƒä¸ä¼šå½±å“å…¶ä½™çš„ç»„ä»¶ã€‚</p></blockquote><h1 id="93cf" class="lu lv it bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">æ ‡å¿—é˜²æŠ¤ã€æ ‡å¿—å¼€å…³å’Œè‡ªæˆ‘é€‰æ‹©</h1><p id="f43e" class="pw-post-body-paragraph kf kg it kh b ki ms kk kl km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc im bi translated">åœ¨æ¼”ç¤º/åŸå‹ä¸­ï¼Œæˆ‘å®ç°äº†ä¸‰ç§ä¸æ——å¸œç›¸å…³çš„è®¾è®¡æ¨¡å¼:</p><ul class=""><li id="0760" class="lf lg it kh b ki kj km kn kq lh ku li ky lj lc lt ll lm ln bi translated">å›½æ——æŠ¤å«é˜Ÿ</li><li id="d456" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lt ll lm ln bi translated">æ ‡å¿—å¼€å…³</li><li id="68d8" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lt ll lm ln bi translated">æ ‡å¿—è‡ªé€‰</li></ul><p id="4a4d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><em class="ld">æ ‡å¿—å®ˆå«</em>æ˜¯ç®€å•çš„æ„é€ ï¼Œåªæ˜¯éšè—äº†åŠŸèƒ½ã€‚åœ¨æ¼”ç¤ºå®ç°ä¸­ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼åœ¨Reactä¸­è¡¨ç¤ºæ ‡å¿—ä¿æŠ¤:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="de03" class="nj lv it na b gy nk nl l nm nn">&lt;FlagGuard flag="support-chat-v1"&gt;<br/>    &lt;ChatButton /&gt;<br/>&lt;/FlagGuard&gt;</span></pre><p id="614d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç”¨æˆ·ä¸åœ¨<strong class="kh iu"> support-chat-v1 </strong>æ ‡å¿—çš„èŒƒå›´å†…ï¼Œæ ‡å¿—ä¿æŠ¤ä¼šéšè—èŠå¤©æŒ‰é’®ã€‚æ¼”ç¤ºçš„ä¿æŠ¤å®ç°éå¸¸ç®€å•:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="eda5" class="nj lv it na b gy nk nl l nm nn">export const FlagGuard = ({ flag, children }) =&gt; {<br/>    const { checkFlag, user, timeStamp } = useContext(FlagContext);<br/>    const [hasError, setHasError] = useState(false);<br/>    const checkedFlag = useMemo(() =&gt; checkFlag(flag, user, timeStamp), [flag, user, timeStamp, checkFlag]);<br/>    if (checkedFlag &amp;&amp; checkedFlag.value &amp;&amp; !hasError) {<br/>        return &lt;FeatureBoundary setHasError={setHasError} flag={flag}&gt;{children}&lt;/FeatureBoundary&gt;;<br/>    } else {<br/>        return &lt;NoAccess flag={flag} status={checkedFlag.status}/&gt;<br/>    }<br/>}</span></pre><p id="1772" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">é€šç”¨æ ‡å¿—åŠŸèƒ½å¯ä»<em class="ld"> FlagContext </em>ä¸­è·å¾—ã€‚å¦‚æœç”¨æˆ·åœ¨èŒƒå›´å†…ï¼Œå®ƒå°±å‘ˆç°å‡º<em class="ld"> FeatureBoundary </em>å†…çš„å­©å­ï¼Œå¦‚æœä¸åœ¨ï¼Œå®ƒå°±å‘ˆç°ä¸€äº›éšè—çš„æ³¨é‡Šã€‚</p><p id="62c5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><em class="ld">æ ‡å¿—å¼€å…³</em>æ˜¯if-else-constructionï¼Œå¯åœ¨æ›¿æ¢ç°æœ‰åŠŸèƒ½ã€A/B-experimentsæˆ–å…¶ä»–ç”¨æˆ·ä¸åœ¨æ ‡å¿—èŒƒå›´å†…æ—¶éœ€è¦æ˜¾ç¤ºå…¶ä»–å†…å®¹çš„ç”¨ä¾‹ä¸­ä½¿ç”¨ã€‚åœ¨æ¼”ç¤ºå®ç°ä¸­ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="0c4c" class="nj lv it na b gy nk nl l nm nn">&lt;FlagSwitch flag="profile-page-v1"&gt;<br/>    &lt;FlagSwitch.On&gt;<br/>        &lt;Link to="/profile"&gt;&lt;UserIcon /&gt;&lt;b&gt;Profile&lt;/b&gt;&lt;/Link&gt;<br/>    &lt;/FlagSwitch.On&gt;<br/>    &lt;FlagSwitch.Off&gt;<br/>        &lt;UserIcon /&gt;<br/>    &lt;/FlagSwitch.Off&gt;<br/>&lt;/FlagSwitch&gt;</span></pre><p id="76c3" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç”¨æˆ·åœ¨<strong class="kh iu"> profile-page-v1 </strong>æ ‡å¿—çš„èŒƒå›´å†…ï¼Œåˆ™æ ‡å¿—ä¼šåˆ›å»ºä¸€ä¸ªåˆ°ä¸ªäººèµ„æ–™é¡µé¢çš„é“¾æ¥ã€‚ç„¶åï¼Œå¯ä»¥åœ¨Reactè·¯ç”±å™¨è®¾ç½®ä¸­ä½¿ç”¨ç±»ä¼¼çš„æ ‡å¿—å¼€å…³è¿›è¡Œè¡¥å……:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="d3fb" class="nj lv it na b gy nk nl l nm nn">&lt;FlagSwitch.On&gt;<br/>    &lt;Switch&gt;<br/>        &lt;Route path="/" exact &gt;<br/>            &lt;PseudoPage pageTitle="Landing" /&gt;<br/>        &lt;/Route&gt;<br/>        &lt;Route path="/about" &gt;<br/>            &lt;PseudoPage pageTitle="About" /&gt;<br/>        &lt;/Route&gt;<br/>        &lt;Route path="/shop" &gt;<br/>            &lt;PseudoPage pageTitle="Shopping" /&gt;<br/>        &lt;/Route&gt;<br/>        &lt;Route path="/profile" &gt;<br/>            &lt;PseudoPage pageTitle="Profile" /&gt;<br/>        &lt;/Route&gt;<br/>        &lt;Route&gt;<br/>            &lt;PseudoPage pageTitle="404!!" /&gt;<br/>        &lt;/Route&gt;<br/>    &lt;/Switch&gt;<br/>&lt;/FlagSwitch.On&gt;<br/>&lt;FlagSwitch.Off&gt;<br/>    &lt;Switch&gt;<br/>        &lt;Route path="/" exact &gt;<br/>            &lt;PseudoPage pageTitle="Landing" /&gt;<br/>        &lt;/Route&gt;<br/>        &lt;Route path="/about" &gt;<br/>            &lt;PseudoPage pageTitle="About" /&gt;<br/>        &lt;/Route&gt;<br/>        &lt;Route path="/shop" &gt;<br/>            &lt;PseudoPage pageTitle="Shopping" /&gt;<br/>        &lt;/Route&gt;<br/>        &lt;Route&gt;<br/>            &lt;PseudoPage pageTitle="404!!" /&gt;<br/>        &lt;/Route&gt;<br/>    &lt;/Switch&gt;<br/>&lt;/FlagSwitch.Off&gt;</span></pre><p id="3565" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ•ˆæœæ˜¯ï¼Œå¦‚æœæ‚¨åœ¨é…ç½®æ–‡ä»¶èŒƒå›´å†…çš„ç”¨æˆ·(æœ€åˆæ˜¯Cillaå®¢æˆ·)å’Œé…ç½®æ–‡ä»¶èŒƒå›´å¤–çš„ç”¨æˆ·(æœ€åˆæ˜¯æ‰€æœ‰å…¶ä»–ç”¨æˆ·)ä¹‹é—´åˆ‡æ¢ï¼Œæ‚¨å°†çœ‹åˆ°â€œ/profileâ€ä¸Šçš„é¡µé¢åœ¨é…ç½®æ–‡ä»¶é¡µé¢å’Œ404é¡µé¢ä¹‹é—´åˆ‡æ¢ã€‚</p><p id="2df4" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ¼”ç¤ºå®ç°åŸºäºå¤åˆç»„ä»¶æ¨¡å¼ï¼Œå³ä¸Šä¸‹æ–‡APIç‰ˆæœ¬(<a class="ae le" href="https://kentcdodds.com/blog/compound-components-with-react-hooks" rel="noopener ugc nofollow" target="_blank">https://kentcdodds . com/blog/compound-components-with-react-hooks</a>)ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒéå¸¸ç±»ä¼¼äºFlagGuardå®ç°:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="4575" class="nj lv it na b gy nk nl l nm nn">const FlagSwitchContext = createContext();</span><span id="847f" class="nj lv it na b gy of nl l nm nn">const FlagSwitch = ({ flag, children }) =&gt; {<br/>    const [hasError, setHasError] = useState(false);<br/>    const { checkFlag, user, timeStamp } = useContext(FlagContext);<br/>    const checkedFlag = useMemo(() =&gt; checkFlag(flag, user, timeStamp), [flag, user, timeStamp, checkFlag]);<br/>    return (&lt;FlagSwitchContext.Provider value={{ flag, status: checkedFlag.status, on: checkedFlag.value, hasError, setHasError }}&gt;{children}&lt;/FlagSwitchContext.Provider&gt;);<br/>}</span><span id="a5cc" class="nj lv it na b gy of nl l nm nn">function On({ children }) {<br/>    const { on, flag, status, hasError, setHasError } = useContext(FlagSwitchContext);<br/>    return (on &amp;&amp; !hasError) ? &lt;FeatureBoundary flag={flag} setHasError={setHasError} switchState="On"&gt;{children}&lt;/FeatureBoundary&gt; : &lt;NoAccess flag={flag} status={status} switchState="On" /&gt;;<br/>}</span><span id="abb8" class="nj lv it na b gy of nl l nm nn">function Off({ children }) {<br/>    const { on, flag, status, hasError, setHasError } = useContext(FlagSwitchContext)<br/>    return (on &amp;&amp; !hasError) ? &lt;NoAccess flag={flag} status={status} switchState="Off" /&gt; : &lt;FeatureBoundary setHasError={setHasError} flag={flag} switchState="Off"&gt;{children}&lt;/FeatureBoundary&gt;;<br/>}</span><span id="bd9d" class="nj lv it na b gy of nl l nm nn">FlagSwitch.On = On;<br/>FlagSwitch.Off = Off;</span><span id="63fa" class="nj lv it na b gy of nl l nm nn">export { FlagSwitch };</span></pre><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div class="gh gi og"><img src="../Images/5323669f4f4ae1df1e195e29a186bc1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*lhXt5mgLPYVJqL0RaP51vw.png"/></div></figure><p id="2b6b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><em class="ld">æ ‡å¿—è‡ªé€‰</em>æ˜¯ä½ å¯ä»¥è‡ªé€‰æµ‹è¯•æ–°åŠŸèƒ½çš„ç”¨ä¾‹ã€‚æˆ‘è¿˜æ²¡æœ‰åœ¨å…¶ä»–åœ°æ–¹çš„åŠŸèƒ½æ ‡å¿—ä¸Šä¸‹æ–‡ä¸­çœ‹åˆ°è¿‡è¿™ç§æƒ…å†µã€‚è¿™é€šå¸¸æ˜¯åŸºäºç®¡é“çš„ç­–ç•¥ï¼Œè€Œä¸æ˜¯åŸºäºæ ‡å¿—çš„ç­–ç•¥ã€‚ä½†æˆ‘è®¤ä¸ºå®ƒä¹Ÿåº”è¯¥æ˜¯ç‰¹æ€§æ ‡å¿—å·¥å…·ç®±çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºåœ¨å¯¹åº”ç”¨ç¨‹åºçš„æ¨¡å—å’Œéƒ¨åˆ†è¿›è¡Œå®éªŒæ—¶ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨è¿™ç§æ¨¡å¼â€”â€”è€Œä¸ä»…ä»…æ˜¯åœ¨é‡å†™æ•´ä¸ªç¨‹åºæ—¶ã€‚</p><p id="651b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è‡ªæˆ‘é€‰æ‹©ç»™å‡ºäº†ä¸€ä¸ªæœ‰åå·®çš„ç”¨æˆ·æ ·æœ¬ï¼Œä½†æœ‰æ—¶è¿™å®é™…ä¸Šéå¸¸æœ‰ç”¨ã€‚è‡ªæˆ‘é€‰æ‹©çš„ç¾¤ä½“å¯èƒ½ä¸»è¦æ˜¯<a class="ae le" href="https://en.wikipedia.org/wiki/Early_adopter" rel="noopener ugc nofollow" target="_blank">åˆ›æ–°è€…/æ—©æœŸé‡‡ç”¨è€…</a>â€”â€”å’Œ/æˆ–å¯¹å½“å‰åŠŸèƒ½ä¸æ»¡æ„çš„ç”¨æˆ·ã€‚å¦‚æœè¿™ä¸ªå›¢é˜Ÿç»™å‡ºäº†è´Ÿé¢çš„åé¦ˆï¼Œä½ å¯èƒ½å°±åº”è¯¥ç»ˆæ­¢è¿™ä¸ªç‰¹æ€§â€”â€”è‡³å°‘åœ¨å®ƒå½“å‰çš„å®ç°ä¸­ï¼Œç„¶åé‡æ–°å¼€å§‹ã€‚</p><p id="bc88" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å¦‚æœç”¨æˆ·åœ¨è¯¥æ ‡å¿—çš„èŒƒå›´å†…å¹¶ä¸”è¯¥æ ‡å¿—è¢«æ ‡è®°ä¸ºself-self-self-selectï¼Œåˆ™é€šè¿‡æ˜¾ç¤ºåˆ‡æ¢æ¥å·¥ä½œ:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="dd22" class="nj lv it na b gy nk nl l nm nn">&lt;FlagToggle flag="shiny-frontend-v1" label="Try my shiny new look and feel!" /&gt;</span></pre><p id="6174" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å®ç°æ–¹å¼å¦‚ä¸‹:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="1eb5" class="nj lv it na b gy nk nl l nm nn">export const FlagToggle = ({ flag, label }) =&gt; {<br/>    const { checkFlag, userSettings, setUserSettings, user, timeStamp } = useContext(FlagContext);<br/>    const checkedFlag = useMemo(() =&gt; checkFlag(flag, user, timeStamp), [flag, user, timeStamp, checkFlag]);<br/>    const [isSelected] = useState(userSettings[flag] &amp;&amp; userSettings[flag].isSelected)<br/>    const handleChange = useCallback(() =&gt; {<br/>        const isSelected = !(userSettings[flag] &amp;&amp; userSettings[flag].isSelected)<br/>        const currentFlagSetting = userSettings[flag] ? userSettings[flag] : {};<br/>        const newFlagSetting = { ...currentFlagSetting, isSelected };<br/>        setUserSettings({ ...userSettings, [flag]: newFlagSetting });<br/>    }, [flag, userSettings, setUserSettings])</span><span id="6e26" class="nj lv it na b gy of nl l nm nn">if (checkedFlag.isSelfSelect) {<br/>        return (<br/>            &lt;div className="toggle-container"&gt;<br/>                &lt;input className="toggle-check" id="toggle" type="checkbox" onChange={handleChange} checked={isSelected}&gt;&lt;/input&gt;<br/>                &lt;label className="toggle-label" htmlFor="toggle"&gt;{label}&lt;/label&gt;<br/>            &lt;/div&gt;<br/>        );<br/>    } else {<br/>        return (<br/>            &lt;NoAccess flag={flag} status={checkedFlag.status}&gt;&lt;/NoAccess&gt;<br/>        )<br/>    }<br/>}</span></pre><p id="c210" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å³ä½¿ç”¨æˆ·åœ¨æ ‡å¿—èŒƒå›´å†…ï¼Œåœ¨ç”¨æˆ·è‡ªè¡Œé€‰æ‹©æ ‡å¿—ä¹‹å‰ï¼Œæ ‡å¿—ä¿æŠ¤æˆ–æ ‡å¿—å¼€å…³ä¸­çš„æ ‡å¿—æ£€æŸ¥ä¹Ÿä¸ä¼šè¿”å›true:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="84b4" class="nj lv it na b gy nk nl l nm nn">ReactDOM.render(<br/>    &lt;FlagProvider&gt;<br/>        &lt;BrowserRouter&gt;<br/>            &lt;FlagSwitch flag="shiny-frontend-v1"&gt;<br/>                &lt;FlagSwitch.On&gt;<br/>                    &lt;App version="shiny"/&gt;<br/>                &lt;/FlagSwitch.On&gt;<br/>                &lt;FlagSwitch.Off&gt;<br/>                    &lt;App version="tired"/&gt;<br/>                &lt;/FlagSwitch.Off&gt;<br/>            &lt;/FlagSwitch&gt;<br/>        &lt;/BrowserRouter&gt;<br/>    &lt;/FlagProvider&gt;, <br/>    document.getElementById('root'));</span></pre><p id="5e95" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åœ¨æ¼”ç¤ºä¸­ï¼Œæ•ˆæœæ˜¯æ¨¡æ‹Ÿä¸¤ä¸ªç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºã€‚æ‚¨å¯ä»¥é€šè¿‡é€‰æ‹©shiny-frontendèŒƒå›´å†…çš„ç”¨æˆ·(æœ€åˆæ˜¯Ada Adminå’ŒCilla Customer)æ¥æµ‹è¯•è¿™ä¸€ç‚¹ã€‚é¦–å…ˆåˆ‡æ¢æ˜¾ç¤ºï¼Œç„¶åæ‚¨å¯ä»¥é€šè¿‡åˆ‡æ¢self-selectæ¥è‡ªå¯ç”¨<strong class="kh iu"> shiny-frontend-v1 </strong>ã€‚self-select toggleä¹Ÿå¯ä»¥ç”¨äºä»ç”¨æˆ·é‚£é‡Œè·å¾—å†æ¬¡å…³é—­å®ƒçš„åé¦ˆï¼Œä½†è¿™åœ¨æ¼”ç¤º/åŸå‹ä¸­æ²¡æœ‰å®ç°ã€‚</p><h1 id="39c4" class="lu lv it bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">ç´¯ç§¯èŒƒå›´</h1><p id="fe12" class="pw-post-body-paragraph kf kg it kh b ki ms kk kl km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc im bi translated">åœ¨æ¼”ç¤º/åŸå‹ä¸­ï¼Œæ ‡å¿—æ£€æŸ¥:</p><ol class=""><li id="6649" class="lf lg it kh b ki kj km kn kq lh ku li ky lj lc lk ll lm ln bi translated">é¦–å…ˆæ£€æŸ¥æ ‡å¿—æ˜¯å¦å¯ç”¨ï¼Œ</li><li id="b767" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lk ll lm ln bi translated">ç„¶åå°†å±æ€§ä¸ç”¨æˆ·å¯¹è±¡è¿›è¡ŒåŒ¹é…ï¼Œ</li><li id="1e97" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lk ll lm ln bi translated">ç„¶åå¯¹ç…§éšæœºåŒ–çš„ç”¨æˆ·å±æ€§æ£€æŸ¥é˜ˆå€¼ï¼Œ</li><li id="f83a" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lk ll lm ln bi translated">æœ€åï¼Œå®ƒæ£€æŸ¥è¯¥æ ‡å¿—æ˜¯å¦è¢«æ ‡è®°ä¸ºè‡ªé€‰æ‹©ï¼Œå¦‚æœæ˜¯è¿™æ ·é€‰æ‹©çš„ã€‚</li></ol><p id="4f3f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¿™äº§ç”Ÿäº†ä¸€ç§ç´¯ç§¯æ•ˆåº”ï¼Œä½¿æ‚¨èƒ½å¤Ÿä¸ºé‚£äº›åœ¨æ‚¨çš„ç³»ç»Ÿä¸­æŸä¸ªç»„çš„éšæœºx%ä¸­è¿›è¡Œè‡ªæˆ‘é€‰æ‹©çš„äººå¼€æ”¾è¯¥ç‰¹æ€§ã€‚è¿™æ„å‘³ç€ä½ æ—¢å¯ä»¥åšå¾ˆå°çš„å®éªŒï¼Œä¹Ÿå¯ä»¥åšå¾ˆå¤§çš„å®éªŒï¼Œå°¤å…¶æ˜¯ä¸åŒç±»å‹çš„å®éªŒï¼Œè€Œä¸”é£é™©å°½å¯èƒ½å°ã€‚æ·»åŠ ä¸€ä¸ª<em class="ld">ç‰¹å¾è¾¹ç•Œ</em>å°†è¿›ä¸€æ­¥é™ä½é£é™©å¹¶æœ‰åŠ©äºå®éªŒã€‚</p><h1 id="ebbe" class="lu lv it bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">åŠŸèƒ½è¾¹ç•Œ:é”™è¯¯å¤„ç†ï¼Œå¸¦æ ‡å¿—çš„æŠ¥å‘Šå’Œåˆ†æ</h1><p id="243c" class="pw-post-body-paragraph kf kg it kh b ki ms kk kl km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc im bi translated">å¦‚æœæ–°ç‰¹æ€§ä¸­æœ‰ä¸€ä¸ªbugï¼Œæ¯”å¦‚è¯´å¯¼è‡´è„šæœ¬æ‰§è¡Œå´©æºƒçš„é‚£ç§é”™è¯¯ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ï¼ŸReactæœ‰ä¸€ä¸ªå«åš<a class="ae le" href="https://reactjs.org/docs/error-boundaries.html" rel="noopener ugc nofollow" target="_blank">é”™è¯¯è¾¹ç•Œ</a>çš„ä¸œè¥¿ã€‚é”™è¯¯è¾¹ç•Œæ˜¯ä¸€ä¸ªReactç»„ä»¶(å®ƒéœ€è¦ä¸€ä¸ªç±»ç»„ä»¶),ç”¨äºå®ç°æŸäº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚å®ƒåˆ›å»ºäº†ä¸€ç§å£°æ˜æ€§çš„try/catchï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥å°è£…Reactæ¨¡å—ï¼Œå¹¶é˜»æ­¢è¯¥æ¨¡å—ä¸­çš„é”™è¯¯ç ´åæ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ‰§è¡Œã€‚åœ¨æ¼”ç¤ºä¸­ï¼Œæˆ‘å°†å®ƒå®ç°ä¸ºä¸€ä¸ª<em class="ld">ç‰¹å¾è¾¹ç•Œ</em>ï¼Œæˆ‘ç”¨å®ƒæ¥åŒ…è£…ä¸€ä¸ªæœ‰æ•ˆæ ‡å¿—çš„å­æ ‡å¿—ã€‚</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="a72d" class="nj lv it na b gy nk nl l nm nn">export class FeatureBoundary extends React.Component {</span><span id="7bba" class="nj lv it na b gy of nl l nm nn">    constructor(props) {<br/>        super(props);<br/>        this.state = { hasError: false };<br/>    }</span><span id="376c" class="nj lv it na b gy of nl l nm nn">    static getDerivedStateFromError(error) {<br/>        return { hasError: true };<br/>    }</span><span id="fd21" class="nj lv it na b gy of nl l nm nn">    componentDidCatch(error, errorInfo) {<br/>        if (this.props.setHasError) {<br/>            this.props.setHasError.call(null, true);<br/>        }</span><span id="3078" class="nj lv it na b gy of nl l nm nn">        console.log(`This is error reporting for '${this.props.flag}': ${error}`);<br/>    }</span><span id="db6b" class="nj lv it na b gy of nl l nm nn">    doAnalytics = (msg) =&gt; {<br/>        console.log(`This is analytics for '${this.props.flag}': ${msg}`);<br/>    }</span><span id="7464" class="nj lv it na b gy of nl l nm nn">    render() {<br/>        if (this.state.hasError) {<br/>            return (&lt;NoAccess flag={this.props.flag} status="error-caught-by-boundary" /&gt;);<br/>        }<br/>        return (&lt;AnalyticsContext.Provider value={{ doAnalytics: this.doAnalytics }}&gt;{this.props.children}&lt;/AnalyticsContext.Provider&gt;);<br/>    }<br/>}</span></pre><p id="c644" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">é‡å¤ä¸€éï¼Œè¿™æ˜¯å®ƒåœ¨æ——æ†ä¸Šçš„ç”¨æ³•ã€‚å¦‚æœè¯¥æ ‡å¿—æ‰“å¼€ï¼Œåˆ™åœ¨è¦ç´ è¾¹ç•Œå†…æ¸²æŸ“å­è¦ç´ :</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="e72e" class="nj lv it na b gy nk nl l nm nn">export const FlagGuard = ({ flag, children }) =&gt; {<br/>    const { checkFlag, user, timeStamp } = useContext(FlagContext);<br/>    const [hasError, setHasError] = useState(false);<br/>    const checkedFlag = useMemo(() =&gt; checkFlag(flag, user, timeStamp), [flag, user, timeStamp, checkFlag]);<br/>    if (checkedFlag &amp;&amp; checkedFlag.value &amp;&amp; !hasError) {<br/>        return &lt;FeatureBoundary setHasError={setHasError} flag={flag}&gt;{children}&lt;/FeatureBoundary&gt;;<br/>    } else {<br/>        return &lt;NoAccess flag={flag} status={checkedFlag.status}/&gt;<br/>    }<br/>}</span></pre><p id="6454" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç‰¹å¾è¾¹ç•Œæœ‰ä¸‰ä¸ªç”¨é€”:</p><ol class=""><li id="793d" class="lf lg it kh b ki kj km kn kq lh ku li ky lj lc lk ll lm ln bi translated">å®ƒå……å½“ä¸€ç§<a class="ae le" href="https://martinfowler.com/bliki/CircuitBreaker.html" rel="noopener ugc nofollow" target="_blank">æ–­è·¯å™¨</a>ã€‚å¦‚æœç‰¹æ€§ä¸­çš„æŸä¸ªåœ°æ–¹æœ‰è§¦å‘é”™è¯¯ï¼Œå®ƒå°±å…³é—­å®ƒã€‚<em class="ld">å› æ­¤ï¼Œå¯¹æœ€ç»ˆç”¨æˆ·çš„å½±å“å°†ä¸ç¦ç”¨æ ‡è®°çš„å½±å“ç›¸åŒ</em>ã€‚</li><li id="add8" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lk ll lm ln bi translated">ä½†æ˜¯æ‚¨ä»ç„¶å¯ä»¥å°†é”™è¯¯æŠ¥å‘Šç»™æœåŠ¡ï¼Œæ¯”å¦‚sentry.ioï¼Œå°†flag-idé™„åŠ åˆ°æŠ¥å‘Š/ä¸Šä¸‹æ–‡ä¸­ã€‚å› æ­¤ï¼Œå¦‚æœé€šçŸ¥åœ¨éƒ¨ç½²åçªç„¶å‡ºç°ï¼Œæ‚¨å°†ç«‹å³çœ‹åˆ°è¿™æ˜¯å¦æ˜¯å› ä¸ºæ–°åŠŸèƒ½â€”â€”å¸Œæœ›åœ¨ä»»ä½•æœ€ç»ˆç”¨æˆ·æ³¨æ„åˆ°ä»»ä½•äº‹æƒ…ä¹‹å‰ï¼Œæ‚¨çš„æ”¯æŒç³»ç»Ÿä¸ä¼šå—åˆ°å½±å“ğŸ˜¬ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥åœ¨ä¿®å¤æ—¶ç¦ç”¨è¯¥åŠŸèƒ½(åœ¨ä»æŠ¥å‘Šä¸­è·å¾—è¶³å¤Ÿæœ‰ç”¨çš„æ•°æ®ä¹‹å)ã€‚ç„¶åä»¥å‰æ»šçš„æ–¹å¼é‡æ–°éƒ¨ç½²ä¿®å¤ï¼Œå°å¿ƒåœ°å†æ¬¡å¯ç”¨è¯¥æ ‡å¿—ã€‚</li><li id="e48c" class="lf lg it kh b ki lo km lp kq lq ku lr ky ls lc lk ll lm ln bi translated">ç‰¹å¾è¾¹ç•Œä¹Ÿå¯ä»¥ä½œä¸ºåˆ†æçš„å®šä½ç‚¹ã€‚åœ¨æ¼”ç¤ºä¸­ï¼Œå®ƒè®¾ç½®äº†ä¸€ä¸ªå¸¦æœ‰å¿…è¦æ ‡å¿—ä¿¡æ¯çš„<em class="ld">åˆ†ææä¾›è€…</em>ï¼ŒåŠŸèƒ½æ¨¡å—ä¸­çš„å­ç»„ä»¶å¯ä»¥ä½¿ç”¨è¿™äº›æ ‡å¿—ä¿¡æ¯æ¥å‘é€ç›¸å…³æ•°æ®ã€‚è¿™åœ¨A/Båœºæ™¯æˆ–ç±»ä¼¼çš„å®éªŒä¸­åº”è¯¥å¾ˆæœ‰ç”¨:</li></ol><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="b1c0" class="nj lv it na b gy nk nl l nm nn">export const ShinyButton = () =&gt; {<br/>    const { doAnalytics } = useContext(AnalyticsContext);<br/>    const pressMyButton = () =&gt; {<br/>        doAnalytics("add 1 for 'press my shiny button'")<br/>    }<br/>    return (&lt;button className="btn--shiny-very" onClick={pressMyButton}&gt;PRESS MY SHINY BUTTON&lt;/button&gt;);<br/>}</span></pre><h1 id="6b67" class="lu lv it bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">å…¶ä»–é—®é¢˜</h1><p id="f7ed" class="pw-post-body-paragraph kf kg it kh b ki ms kk kl km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc im bi translated">æ¼”ç¤º/åŸå‹ä¸­æœ‰ä¸€äº›ç»†èŠ‚ã€‚åŠŸèƒ½æ ‡å¿—çš„ä¸€ä¸ªé—®é¢˜æ˜¯å®ƒä»¬æ˜¯æœ‰æ—¶é—´é™åˆ¶çš„ã€‚å½“ç„¶ï¼ŒFowleræåˆ°äº†â€œæƒé™åˆ‡æ¢â€ï¼Œä½¿ç”¨æ ‡å¿—(æˆ–è€…ä»–ç§°ä¹‹ä¸ºåˆ‡æ¢)æ¥å®ç°ä¸€ä¸ªæ›´æŒä¹…çš„æƒé™ç³»ç»Ÿã€‚æˆ‘éå¸¸ç†è§£ä¸ºä»€ä¹ˆã€‚ä»¥è¿™ç§æ–¹å¼å°†è®¸å¯ç³»ç»Ÿç§»åŠ¨åˆ°å®ƒè‡ªå·±çš„å±‚ï¼Œå½“ç„¶æœ‰ä¸€äº›å¥½å¤„ã€‚å¹¶ä¸”ä½¿ç”¨Reactå°†æƒé™è½¬ç§»åˆ°å£°æ˜æ€§ç»„ä»¶ä¸­ç»™å‡ºäº†ä¸€ä¸ªéå¸¸å¥½çš„å…³æ³¨ç‚¹åˆ†ç¦»ã€‚ä½†æˆ‘ä»ç„¶è®¤ä¸ºï¼Œå®ƒä¸åº”è¯¥æ˜¯ä½ ç”¨äºè¯•éªŒï¼Œéƒ¨åˆ†æ¨å‡ºç­‰ç›¸åŒçš„ç³»ç»Ÿã€‚åœ¨åŠŸèƒ½ã€è®¾è®¡æ¨¡å¼ã€å±æ€§æ–¹é¢æœ‰æ˜æ˜¾çš„é‡å ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›æ˜¾è‘—çš„å·®å¼‚ã€‚å› æ­¤ï¼Œè™½ç„¶æœ‰ä¸€äº›é‡å ï¼Œæˆ‘å°†æŒæœ‰åŠŸèƒ½æ ‡è®°èŒƒå›´ä¹‹å¤–çš„æƒé™åˆ‡æ¢ã€‚</p><p id="3d67" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ‰€ä»¥ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œæ——å¸œæ˜¯ä¸ä¼šé•¿ä¹…çš„ã€‚å®ƒä»¬è¿‡æœŸäº†ï¼Œéœ€è¦ä»ä»£ç ä¸­é‡æ„å‡ºæ¥ã€‚è¿™å°±æ˜¯æˆ‘åœ¨æ ‡å¿—ä¸Šæ·»åŠ â€œè¿‡æœŸæ—¥æœŸâ€å’Œâ€œä¸æ¨èä½¿ç”¨â€å±æ€§çš„åŸå› ã€‚â€œè¿‡æœŸæ—¥æœŸâ€èƒŒåçš„æƒ³æ³•æ˜¯ï¼Œæ——å¸œå¯ä»¥åœ¨ç‰¹å®šæ—¶é—´è‡ªåŠ¨å…³é—­ï¼Œè€Œæ— éœ€æœ‰äººåœ¨åœºæ¥å…³é—­å®ƒã€‚æˆ–è®¸è¿˜åº”è¯¥æœ‰ä¸€ä¸ªè¡¥å……çš„â€œå¼€å§‹æ—¥æœŸâ€ã€‚æ€»ä¹‹ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨æ ‡å¿—å«å£«æ¥ä¸ºä½ çš„åº”ç”¨ç¨‹åºæ·»åŠ é™æ—¶åŠŸèƒ½ã€‚å¯ä»¥ç‹¬ç«‹äºå‘å¸ƒæ—¥æœŸ/å‘¨æœŸå®‰æ’çš„ç‰¹æ€§ã€‚åœ¨è¿™ç§æ—¶å€™ï¼Œè¿™æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œå† çŠ¶ç—…æ¯’å’Œä¸€åˆ‡ã€‚</p><p id="4fc6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ ‡å¿—ä¸­çš„deprecated-å±æ€§å¯èƒ½æ˜¯ä¸€ç§æ–¹å¼ï¼Œè¡¨ç¤ºæ˜¯æ—¶å€™ä»ä»£ç ä¸­ç§»é™¤è¯¥æ ‡å¿—äº†ã€‚ç»“åˆç¯å¢ƒå˜é‡ï¼Œæ‚¨å¯ä»¥è®©å®ƒåœ¨å¼€å‘ä¸­æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶åœ¨ç”Ÿäº§ä¸­æŠ¥å‘Šä¸€ä¸ªè­¦å‘Šã€‚è¿™ç»™äº†ä½ ä¸€ä¸ªä¸»åŠ¨æ·˜æ±°æ ‡å¿—çš„æ–¹æ³•ã€‚é¦–å…ˆä½ å¯ä»¥è®©å®ƒè¿‡æœŸï¼Œç„¶åä½ å¼ƒç”¨å®ƒï¼Œç„¶åä½ åˆ é™¤å®ƒã€‚é€šè¿‡é€‚å½“çš„æ—¥å¿—è®°å½•/æŠ¥å‘Šï¼Œåº”è¯¥æœ‰è¶³å¤Ÿçš„æ—¶é—´å’Œæœºä¼šä»ä»£ç ä¸­ç§»é™¤æ ‡å¿—ã€‚</p></div></div>    
</body>
</html>