# ç”¨ ResizeObserver åˆ¶ä½œå“åº”å¼ Vue ç»„ä»¶

> åŸæ–‡ï¼š<https://itnext.io/making-adaptive-vue-components-with-resizeobserver-123b5ebb20ae?source=collection_archive---------1----------------------->

![](img/27e0859a79c2875543e34991367e7842.png)

å¤§å®¶å¥½ã€‚ä»Šå¤©æˆ‘æƒ³åˆ†äº«ä¸€ä¸ªå°ä½†å¾ˆæœ‰ç”¨çš„ä¸œè¥¿ã€‚

åœ¨æˆ‘ç›®å‰çš„é¡¹ç›®ä¸­ï¼Œæˆ‘æœ‰è®¸å¤šå¯é‡ç”¨çš„ç»„ä»¶(æˆ‘å°†å…¶å‘½åä¸ºâ€œå°éƒ¨ä»¶â€)ï¼Œå¯ä»¥æ”¾åœ¨ä»»ä½•åœ°æ–¹ã€‚æˆ‘é‡åˆ°äº†å“åº”å¼è®¾è®¡çš„é—®é¢˜ã€‚

æœ€åï¼Œæˆ‘æ˜ç™½ css `@media`æŸ¥è¯¢åœ¨æˆ‘çš„æƒ…å†µä¸‹æ˜¯ç»å¯¹ä¸å¯ç”¨çš„ã€‚

# é‚£ä¹ˆï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ

å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›`PostsItem`ç»„ä»¶ã€‚æˆ‘ä»¬æœ‰`PostsPage`çš„å¸–å­åˆ—è¡¨:

![](img/1b272fa3a64219a4080c21de59bdfc51.png)

æœ‰å¸–å­çš„æ–°é—»é¡µé¢

å°±å‡ è¡Œ CSS å§ï¼Ÿ

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›ä¿æŒç§»åŠ¨è§†å›¾è‰¯å¥½ã€‚å®ƒå¯èƒ½çœ‹èµ·æ¥åƒ:

![](img/05dd332820dd24c07bc546984e249f91.png)

ä½ å¯ä»¥è¯´â€œå®¹æ˜“â€ï¼Œ`@media`è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯¹å§ï¼Ÿ

å¥½çš„ï¼Œå®ƒèµ·ä½œç”¨äº†ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬å°†åœ¨å¦ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨æˆ‘ä»¬çš„`PostsItem`ç»„ä»¶å‘¢ï¼Ÿ

![](img/bce4994129273abae60c33cf31cc1ea6.png)

å“¦ï¼Œå¯æ€œçš„çœ¼ç›ã€‚æˆ‘ä»¬çš„å±å¹•å¾ˆå¤§ï¼Œä½†æˆ‘ä»¬æ²¡æƒ³åˆ°ä¼šè¿ç»­çœ‹åˆ° 3 ç¯‡å¸–å­ã€‚

æ‰€ä»¥ï¼Œ`@media`æŸ¥è¯¢çš„æœ€å¤§é—®é¢˜æ˜¯:

> æ‚¨çš„ç»„ä»¶å“åº”åŸºäºå±å¹•å¤§å°ï¼Œä½†åº”è¯¥åŸºäºå®ƒè‡ªå·±çš„å¤§å°

ä½†æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç»„ä»¶å¸ƒå±€åªå–å†³äºå®ƒä»¬ã€‚è¿™äº›ç»„ä»¶åº”è¯¥æ˜¯åŸå­çš„ï¼Œç‹¬ç«‹åœ°ç¡®å®šå®ƒä»¬è‡ªå·±çš„å¤§å°ï¼Œå¹¶ä½¿å¸ƒå±€é€‚åº”å®ƒã€‚

æˆ‘ä»¬éœ€è¦å½“åœ°çš„å›åº”é£æ ¼ã€‚åˆæ¥äº† **ResizeObserver** ï¼

# resize è§‚å¯Ÿè€…

[**resize observer**](https://developers.google.com/web/updates/2016/10/resizeobserver)æ˜¯ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå½“ä¸€ä¸ªå…ƒç´ çš„å†…å®¹çŸ©å½¢æ”¹å˜äº†å®ƒçš„å¤§å°æ—¶ï¼Œå®ƒä¼šé€šçŸ¥ä½ ï¼Œå¹¶åšå‡ºç›¸åº”çš„ååº”ã€‚

ç”¨æ³•éå¸¸ç®€å•:

ä½ å¯ä»¥è¯´æµè§ˆå™¨æ”¯æŒä¸å¥½:

![](img/e6519f732d4e23b85cedbf8ea3cece9d.png)

ä¸è¿‡ï¼Œå¹¸è¿çš„æ˜¯ï¼Œ **ResizeObserver** æœ‰ [**polyfill**](https://github.com/que-etc/resize-observer-polyfill) è¿™æ˜¯åŸºäº**å˜å¼‚ Observer** :

![](img/35037a90cc1d924db669267f403e5273.png)

# ä¸ Vue ä¸€èµ·ä½¿ç”¨

æˆ‘ä¸º Vue.js

ç°åœ¨å®ƒçœ‹èµ·æ¥å¾ˆå¥½ï¼Œå³ä½¿æˆ‘ä»¬æŠŠä¸‰ä¸ªèŒä½åœ¨ä¸€æ’:

![](img/c9aeb08d13b20257a3c3da07d97b4f55.png)

ç°åœ¨ï¼Œæˆ‘ä»¬çš„ç»„ä»¶çœŸæ­£ç‹¬ç«‹äº†ï¼

å®ƒä¹Ÿç»™ä½ æœºä¼šå®šä¹‰ä¸åŒçš„ html æ ‡è®°ï¼Œè€Œä¸ä»…ä»…æ˜¯ cssã€‚ä¾‹å¦‚ï¼Œæˆ‘ä¸ºå°å‹åŒºå—æ·»åŠ äº†é€‰é¡¹å¡å’Œâ€œè¶…å°å‹â€å¸–å­è§†å›¾:

![](img/3954a49f03a890d8496772f0543df8ce.png)

æ­¤å¤–ï¼Œæˆ‘æƒ³æŒ‡å‡ºçš„æ˜¯ï¼Œä¸ºäº†æ”¯æŒ ResizeObserverï¼Œæˆ‘å®Œå…¨åˆ é™¤äº†å½“å‰é¡¹ç›®ä¸­çš„æ‰€æœ‰`@media`æŸ¥è¯¢ğŸ˜‰

# UPD:å¥–é‡‘:`v-responsive`æŒ‡ä»¤

å¹¸äº [**è¿™å®¶ä¼™**](https://www.reddit.com/r/vuejs/comments/8eap88/making_responsive_vue_components_with/dxtx0bu/) å‡ºäº†ä¸ªä¸»æ„ã€‚æˆ‘æ·»åŠ äº†`v-responsive`æŒ‡ä»¤æ¥å»æ‰åŒ…è£…ç»„ä»¶:

# å†æ¬¡æ‰€æœ‰é“¾æ¥

*   [ResizeObserver:å°±åƒ document . on resize for Elements](https://developers.google.com/web/updates/2016/10/resizeobserver)
*   [ResizeObserver polyfill](https://github.com/que-etc/resize-observer-polyfill)
*   [vue . js çš„åŒ…è£…å™¨](https://github.com/Kelin2025/vue-responsive-components)
*   [æˆ‘çš„æ¨ç‰¹:)](http://twitter.com/kelin2025)