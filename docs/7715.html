<html>
<head>
<title>TypeScript: isNullish, nonNullish and assertNonNullish</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript: isNullishã€nonNullishå’ŒassertNonNullish</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/typescript-isnullish-nonnullish-and-assertnonnullish-557deb6e8b17?source=collection_archive---------2-----------------------#2022-12-30">https://itnext.io/typescript-isnullish-nonnullish-and-assertnonnullish-557deb6e8b17?source=collection_archive---------2-----------------------#2022-12-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/e55d750af4e000a3b783f0b0d65dd5ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WuofP-xnSvOh6tab"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/fr/@shoots_of_bapt_" rel="noopener ugc nofollow" target="_blank">å·´è’‚æ–¯ç‰¹Â·æ¯”æ¾</a></figcaption></figure><p id="22cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘ä»¬åœ¨<a class="ae kf" href="https://nns.ic0.app/" rel="noopener ugc nofollow" target="_blank"> NNS-dapp </a>ä¸­å®ç°äº†ä¸€äº›å®çŸ³ï¼Œè®©æˆ‘ä»¬çš„å¼€å‘äººå‘˜çš„æ—¥å¸¸ç”Ÿæ´»æ›´åŠ è½»æ¾ã€‚å…¶ä¸­ï¼Œä¸‹é¢ä¸‰ä¸ªå°çš„<a class="ae kf" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>å‡½æ•°è¢«è¯æ˜æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="75ee" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">isNullish</h1><p id="630c" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">ä½ å¤šä¹…ç¼–å†™ä¸€æ¬¡<code class="fe mo mp mq mr b">ifâ€¦else</code>è¯­å¥æ¥æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯<code class="fe mo mp mq mr b">undefined</code>è¿˜æ˜¯<code class="fe mo mp mq mr b">null</code>ï¼Ÿ</p><pre class="ms mt mu mv gt mw mr mx bn my mz bi"><span id="3ce9" class="na lm it mr b be nb nc l nd ne">// Pseudo code (assuming optional chaining does not exist ğŸ˜‰)<br/>const test = (obj: MyObject | undefined | null) =&gt; {<br/>    if (obj === undefined || obj === null) {<br/>        return;<br/>    }<br/><br/>    obj.fn();<br/>}</span></pre><p id="7c3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">å¤šäºäº†<a class="ae kf" href="https://www.typescriptlang.org/docs/handbook/2/generics.html" rel="noopener ugc nofollow" target="_blank">æ³›å‹</a>å’Œ<a class="ae kf" href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates" rel="noopener ugc nofollow" target="_blank">ç±»å‹è°“è¯</a>ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªåŠ©æ‰‹ï¼Œè®©æˆ‘ä»¬åœ¨ä¿æŒç±»å‹å®‰å…¨çš„åŒæ—¶é¿å…ä»£ç é‡å¤ã€‚</p><pre class="ms mt mu mv gt mw mr mx bn my mz bi"><span id="3b03" class="na lm it mr b be nb nc l nd ne">export const isNullish = &lt;T&gt;(argument: T | undefined | null): argument is undefined | null =&gt;<br/>   argument === null || argument === undefined;</span></pre><p id="559d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ³›å‹<code class="fe mo mp mq mr b">T</code>çš„ä½¿ç”¨å°†æŠŠå‡½æ•°çš„ä½¿ç”¨èŒƒå›´æ‰©å¤§åˆ°æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å£°æ˜çš„ç±»å‹ã€‚</p><p id="4f05" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è‡³äºç±»å‹ä¿æŠ¤ï¼Œå®ƒç¼©å°äº†TypeScriptçš„èŒƒå›´ï¼Œä»¥ç†è§£å˜é‡ç¡®å®æ¥è‡ªç‰¹å®šçš„é¢„æœŸç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªå‡½æ•°ä½¿TypeScriptç†è§£è¿™ä¸ªå‚æ•°â€”â€”å¦‚æœå®ƒåŒ¹é…å‡½æ•°çš„æ£€æŸ¥â€”â€”ç¡®å®æ˜¯<code class="fe mo mp mq mr b">undefined</code>æˆ–<code class="fe mo mp mq mr b">null</code>ã€‚</p><p id="bec6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æˆ‘ä»¬å¯ä»¥å¦‚ä¸‹ä½¿ç”¨åŠ©æ‰‹:</p><pre class="ms mt mu mv gt mw mr mx bn my mz bi"><span id="0d20" class="na lm it mr b be nb nc l nd ne">const test = (obj: MyObject | undefined | null) =&gt; {<br/>    // 1. Avoid code duplication<br/>    if (isNullish(obj)) {<br/>        return;<br/>    }<br/><br/>    // 2. TypeScript checks it is defined<br/>    obj.fn();<br/>}</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="fe7b" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">éåŠªåˆ©è¯­</h1><p id="9eb7" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç›¸åçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æŸä¸ªä¸œè¥¿æ˜¯å¦è¢«å®šä¹‰ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥å¦å®šå‰é¢çš„é€Ÿè®°å‡½æ•°ï¼Œä»¥äº†è§£æƒ…å†µæ˜¯å¦å¦‚æ­¤ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¸Œæœ›ä¿æŒç±»å‹å®‰å…¨ã€‚</p><p id="21c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨å®ç”¨ç¨‹åº<a class="ae kf" href="https://www.typescriptlang.org/docs/handbook/utility-types.html#nonnullabletype" rel="noopener ugc nofollow" target="_blank">ä¸å¯ç©º</a>é€šè¿‡æ’é™¤<code class="fe mo mp mq mr b">undefined</code>å’Œ<code class="fe mo mp mq mr b">null</code>æ¥æ„é€ ç±»å‹æ¥å®ç°ã€‚</p><pre class="ms mt mu mv gt mw mr mx bn my mz bi"><span id="bf0c" class="na lm it mr b be nb nc l nd ne">export const nonNullish = &lt;T&gt;(argument: T | undefined | null): argument is NonNullable&lt;T&gt; =&gt;<br/>   !isNullish(argument);</span></pre><p id="9939" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">è¿™æ ·ï¼ŒTypeScriptå°†ç†è§£ç¡®å®å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ã€‚</p><pre class="ms mt mu mv gt mw mr mx bn my mz bi"><span id="0c05" class="na lm it mr b be nb nc l nd ne">const test = (obj: MyObject | undefined | null) =&gt; {<br/>    //1. Avoid code duplication<br/>    if (nonNullish(obj)) {<br/>        // 2. TypeScript checks it is defined<br/>        obj.fn();<br/>    }<br/>}</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="7393" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">assertNonNullish</h1><p id="6727" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">é™¤äº†æ£€æŸ¥æŒ‡å®šçš„æ¡ä»¶æ˜¯å¦æ­£ç¡®ä¹‹å¤–ï¼Œå¦‚æœä¸æ­£ç¡®ï¼ŒæŠ›å‡ºé”™è¯¯ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ç‰¹åˆ«æ˜¯å¼€å‘å¸¦æœ‰æ–­è¨€æ¨¡å¼çš„é˜²æŠ¤ã€‚</p><p id="6717" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨TypeScript 3.7ä¸­å¼•å…¥çš„<a class="ae kf" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html" rel="noopener ugc nofollow" target="_blank">æ–­è¨€ç­¾å</a>æ¦‚å¿µæ¥å¢å¼ºæˆ‘ä»¬ä¹‹å‰å¼€å‘çš„åŠŸèƒ½ã€‚</p><p id="9b29" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">ä½¿ç”¨<code class="fe mo mp mq mr b">asserts</code>å…³é”®å­—å’Œä¸€ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è®©TypeScriptçŸ¥é“ä¸€ä¸ªåŠ©æ‰‹å°†æ‰§è¡Œä¸€ä¸ªæ£€æŸ¥ï¼Œå¦‚æœæ¡ä»¶ä¸æ»¡è¶³å°±æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><pre class="ms mt mu mv gt mw mr mx bn my mz bi"><span id="023b" class="na lm it mr b be nb nc l nd ne">export class NullishError extends Error {}<br/><br/>export const assertNonNullish: &lt;T&gt;(<br/>   value: T,<br/>   message?: string<br/>) =&gt; asserts value is NonNullable&lt;T&gt; = &lt;T&gt;(value: T, message?: string): void =&gt; {<br/>   if (isNullish(value)) {<br/>      throw new NullishError(message);<br/>   }<br/>};</span></pre><p id="d1df" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">åº”ç”¨åˆ°æˆ‘ä»¬å‰é¢çš„ä»£ç ç‰‡æ®µï¼Œæˆ‘ä»¬å¯ä»¥è½¬æ¢å‡½æ•°æ¥æ‰§è¡Œä»£ç ï¼Œåªæœ‰å½“è­¦å«æ˜¯åŒ¹é…çš„ã€‚</p><pre class="ms mt mu mv gt mw mr mx bn my mz bi"><span id="601f" class="na lm it mr b be nb nc l nd ne">const test = (obj: MyObject | undefined | null) =&gt; {<br/>    // 1. Avoid code duplication<br/>    // 2. TypeScript understands it might throw an error<br/>    assertNonNullish(obj);<br/>        <br/>    // 3. TypeScript checks it is defined<br/>    obj.fn();<br/>}</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="b77e" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">ç»“è®º</h1><p id="980e" class="pw-post-body-paragraph kg kh it ki b kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">æˆ‘å‘ç°è¿™äº›åŠ©æ‰‹éå¸¸æœ‰ç”¨ï¼Œä»¥è‡³äºæˆ‘ç°åœ¨åœ¨æˆ‘æœ€è¿‘çš„ä½œå“ä¸­ä½¿ç”¨å®ƒä»¬â€”â€”åŒ…æ‹¬æˆ‘æ–°çš„â€œç§˜å¯†ç–¯ç‹‚â€å‰¯ä¸šâ€”â€”æˆ‘æ‰“èµŒä½ ä¹Ÿä¼šè¿™æ ·åšğŸ˜ã€‚</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="75c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">æ›´å¤šå†’é™©ï¼Œè¯·åœ¨ğŸ––çš„æ¨ç‰¹ä¸Šå…³æ³¨æˆ‘</p></div></div>    
</body>
</html>