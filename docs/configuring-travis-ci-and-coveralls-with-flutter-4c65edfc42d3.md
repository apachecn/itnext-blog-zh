# ä½¿ç”¨ Flutter é…ç½® Travis CI å’Œå·¥ä½œæœ

> åŸæ–‡ï¼š<https://itnext.io/configuring-travis-ci-and-coveralls-with-flutter-4c65edfc42d3?source=collection_archive---------4----------------------->

![](img/63a929ee88a9dc0e9224a65e9c6555b5.png)

é¢¤æŒ¯å’Œç‰¹æ‹‰ç»´æ–¯ CI

åœ¨æˆ‘ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘è°ˆåˆ°äº†ä½¿ç”¨ Flutter çš„æµ‹è¯•é©±åŠ¨å¼€å‘(TDD)ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»[ã€‚è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°†å°è¯•ä¸º](https://medium.com/@sammytech/test-driven-development-in-flutter-e7fe7921ea92) [Travis-CI](https://travis-ci.com/) è¿›è¡Œè®¾ç½®ï¼Œå¹¶å°† Flutter åº”ç”¨ç¨‹åºä¸[å¥—è£…](https://coveralls.io/)é›†æˆåœ¨ä¸€èµ·ï¼Œè¿™å°†ä¸ºæˆ‘ä»¬æä¾›å…³äºæ‚¨çš„åº”ç”¨ç¨‹åºä¸­çš„æµ‹è¯•è¦†ç›–ç‡çš„åé¦ˆã€‚

**æˆ‘å¸Œæœ›è¿™ä¸ªæŒ‡å—èƒ½å¸®åˆ°ä½ **ğŸ˜€**ã€‚**

# **è¦æ±‚**

*   Flutter app åº”è¯¥æ‰˜ç®¡åœ¨ GitHubã€GitLab æˆ–è€… Bitbucket ä¸Šã€‚
*   Travis CI å¸æˆ·
*   é¢¤æŒ¯ SDK

# åˆ›å»º Github/BitBucket/GitLab é¡¹ç›®

åˆ›å»ºæ‚¨çš„ flutter åº”ç”¨ç¨‹åºï¼Œå¹¶å°†å…¶æ¨é€åˆ° GitHub/BitBucket/GitLabã€‚å‡ºäºæœ¬æ•™ç¨‹çš„ç›®çš„ï¼Œæˆ‘å°†ä½¿ç”¨ PiggyX åº”ç”¨ç¨‹åºæ¥æ¼”ç¤ºåœ¨ Flutter ä¸­æµ‹è¯•é©±åŠ¨å¼€å‘çš„æ¦‚å¿µã€‚è¿™äº›ä»£ç å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ°ã€‚ç‚¹å‡»[æ­¤å¤„](https://github.com/Mastersam07/PiggyX)è¿›å…¥ä»£ç ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»ä¹‹å‰å…³äºæµ‹è¯•é©±åŠ¨å¼€å‘[çš„æ–‡ç« ã€‚](https://medium.com/@sammytech/test-driven-development-in-flutter-e7fe7921ea92)

# ä¸ Travis CI é›†æˆ

æ‚¨éœ€è¦é¦–å…ˆåœ¨ Travis-CI dashboard ä¸Šæ³¨å†Œæ‚¨çš„ GitHub é¡¹ç›®/èµ„æºåº“ã€‚è¿™æ ·ï¼Œtravis å°±å¯ä»¥æ£€æµ‹åˆ°å­˜å‚¨åº“ä¸­çš„å˜åŒ–ã€‚å¦‚æœæ‚¨çš„å­˜å‚¨åº“æ˜¯å…¬å…±çš„ï¼Œè¯·å‰å¾€[https://travis-ci.org/](https://travis-ci.org/)ï¼Œå¦‚æœæ˜¯ç§æœ‰çš„ï¼Œè¯·å‰å¾€[https://travis-ci.com/](https://travis-ci.com/)ã€‚

åœ¨ Travis ä¸­ï¼Œæ‚¨åœ¨åä¸º`.travis.yml`çš„æ–‡ä»¶ä¸­å®šä¹‰çš„ *YAML* æ¨¡å¼ä¸‹å®ç°ç®¡é“ã€‚ä¸ºäº†è®©äº‹æƒ…ç»§ç»­è¿›è¡Œä¸‹å»ï¼ŒTravis ä½ éœ€è¦åšçš„å°±æ˜¯å°†æ­£ç¡®çš„`.travis.yml`æ·»åŠ åˆ°ä½ çš„åº“çš„æ ¹ä¸­ï¼Œå¹¶å‘Šè¯‰ Travis æŒ‰ç…§ä»–ä»¬çš„æŒ‡ç¤º[å¼€å§‹ä½ çš„åº“çš„è¿ç»­æ„å»ºã€‚è¿™é‡Œæˆ‘åªè§£é‡Šä¸€ä¸‹`.travis.yml`æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚ä¸‹é¢æ˜¯æˆ‘é€‰å®šçš„é…ç½®:](https://docs.travis-ci.com/user/getting-started)

```
language: dart
dist: xenial
addons:
  apt:
    packages:
      - lib32stdc++6
install:
  - git clone https://github.com/flutter/flutter.git -b stable
  - ./flutter/bin/flutter doctor
script:
  - ./flutter/bin/flutter test
cache:
  directories:
    - $HOME/.pub-cache
```

**è¯­è¨€** è¿™ä¸ºç‰¹å®šè¯­è¨€å®šåˆ¶ CI ç¯å¢ƒã€‚çœç•¥è¿™ä¸€éƒ¨åˆ†å‘Šè¯‰ travis ä½¿ç”¨é»˜è®¤è¯­è¨€ **Ruby** ã€‚
**Dist** æŒ‡å®šä½¿ç”¨çš„ Ubuntu åŸºç¡€ç‰ˆæœ¬ã€‚æˆ‘æŒ‡å®š Xenial Xerus æ”¯æŒåˆ° 2021 å¹´ã€‚
**æ’ä»¶** è¿™å¯ä»¥è®©ä½ åœ¨æ“ä½œç³»ç»Ÿä¸Šå®‰è£…é¢å¤–çš„è½¯ä»¶åŒ…ã€‚åœ¨æˆ‘çš„å®éªŒä¸­ï¼Œæ²¡æœ‰`lib32stdc++6`çš„æµ‹è¯•ä»ç„¶é€šè¿‡ï¼Œä½†æ˜¯`flutter doctor`æŠ±æ€¨äº†ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒåŒ…æ‹¬è¿›æ¥ã€‚
**å®‰è£…** è¿™åº”è¯¥è°ƒç”¨ Dart çš„`pub get`ï¼Œä½†æ˜¯ Flutter æŠ¥é”™äº†ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å¿½ç•¥å®ƒï¼Œå®‰è£… Flutterã€‚ **è„šæœ¬** è¿™æ˜¯æˆ‘ä»¬è¿è¡Œæµ‹è¯•çš„åœ°æ–¹ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œæä¾›äº†è¿è¡Œæµ‹è¯•çš„æ–¹æ³•ã€‚
**ç¼“å­˜** è¿™é‡Œæ˜¯æœ€åçš„éƒ¨åˆ†ã€‚è¿™å‘Šè¯‰ Travis ç¼“å­˜é»˜è®¤ Dart åŒ…ç¼“å­˜çš„å†…å®¹ã€‚è¿™åº”è¯¥ä¼šè®© Flutter æ›´å¿«åœ°å®‰è£…åº”ç”¨ç¨‹åºçš„ä¾èµ–é¡¹ã€‚

æ­¤é…ç½®è¿è¡Œè‰¯å¥½ï¼Œå®Œæˆæ—¶é—´ä¸åˆ° 2 åˆ† 30 ç§’ã€‚

# å°† Github é¡¹ç›®æ·»åŠ åˆ°å·¥ä½œæœ

è¦å°†é¡¹ç›®æ·»åŠ åˆ°å·¥è£…æœï¼Œè¯·ç™»å½•åˆ°[https://coveralls.io/](https://coveralls.io/)å¹¶ä½¿ç”¨æ‚¨çš„ GitHub/GitLab/BitBucket å¸æˆ·ç™»å½•ï¼Œè½¬åˆ°*æ·»åŠ ä»“åº“*å¹¶é€‰æ‹©æ‚¨æƒ³è¦é›†æˆçš„å­˜å‚¨åº“ã€‚ç„¶åï¼Œå½“ä½ å» *Repos* çš„æ—¶å€™ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°ä½ çš„é¡¹ç›®ã€‚

![](img/9e3e64f106b26cbfb5ccdff4a00b5f4e.png)

[å·¥ä½œæœ](https://coveralls.io/)

# æ›´æ–°. travis.yml

è¦è°ƒç”¨ Travis build ä¸Šçš„å·¥ä½œæœï¼Œæ‚¨éœ€è¦æ›´æ”¹`.travis.yml`æ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦åšçš„åªæ˜¯ç¨å¾®è°ƒæ•´ä¸€ä¸‹ï¼Œå°±å¯ä»¥ç”Ÿæˆå¹¶å‘é€è¦†ç›–æŠ¥å‘Šã€‚

```
language: dart
dist: xenial
addons:
  apt:
    packages:
      - lib32stdc++6
install:
  - git clone https://github.com/flutter/flutter.git -b stable
  - ./flutter/bin/flutter doctor
  - gem install coveralls-lcov
script:
  - ./flutter/bin/flutter test --coverage
after_success:
  - coveralls-lcov coverage/lcov.info
cache:
  directories:
    - $HOME/.pub-cache
```

æˆ‘ä»¬åˆæ·»åŠ äº†ä¸¤è¡Œå¹¶ç¼–è¾‘äº†è„šæœ¬:
**å®‰è£…**:æˆ‘ä»¬æ·»åŠ äº†*å®çŸ³å®‰è£…å¥—è£…-lcov å®‰è£…å¥—è£…* ***è„šæœ¬*** *:æˆ‘ä»¬å°†è„šæœ¬æ”¹ä¸ºã€‚/flutter/bin/flutter testâ€”â€”ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šçš„è¦†ç›–ç‡ã€‚* ***ã€after _ successã€‘****:æˆ‘ä»¬åœ¨è¿™é‡Œæ·»åŠ äº†å·¥ä½œåŒ…-lcov coverage/lcov.info* æ¥å‘é€è¦†ç›–æŠ¥å‘Šã€‚

è‡³æ­¤ï¼Œæ‚¨å·²ç»ä¸º travis-ci å’Œå·¥ä½œæœé…ç½®äº† flutterï¼Œå¹¶ä¸”åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°æ‚¨çš„æµ‹è¯•è¦†ç›–ç‡äº†ğŸ˜„ ğŸ˜„ ğŸ˜„ã€‚

**åŠ åˆ†** ä½ å¯ä»¥åœ¨é¡¹ç›®è‡ªè¿°ä¸­æ·»åŠ ä¸€ä¸ªå¾½ç« ï¼Œè®©äººä»¬çŸ¥é“é¡¹ç›®æ˜¯å¦‚ä½•æµ‹è¯•çš„ã€‚è¦æ·»åŠ æœåŠ¡èŒƒå›´/å·¥ä½œæœå·¥å¡ï¼Œç™»å½•å¹¶æ‰“å¼€å·¥ä½œæœé¡¹ç›®ï¼Œç‚¹å‡»è®¾ç½®ã€‚

![](img/376952738aae4e9d3678afd1f6f89d40.png)

é¡¹ç›®å§”å‘˜ä¼šå·¥ä½œæœ

åœ¨å›è´­è®¾ç½®ä¸­ï¼Œæ‚¨ä¼šçœ‹åˆ° readme å¾½ç« æ—è¾¹æœ‰ä¸€ä¸ª**åµŒå…¥**ä¸‹æ‹‰æŒ‰é’®ã€‚ç‚¹å‡»æ­¤æŒ‰é’®å°†ä¸ºæ‚¨æä¾›å„ç§å¾½ç« é€‰é¡¹ã€‚å¯¹äºè¿™ä¸ª[é¡¹ç›®](https://github.com/Mastersam07/PiggyX)ï¼Œæˆ‘ä½¿ç”¨äº† Markdown å˜ç§å¹¶æ·»åŠ åˆ°é¡¹ç›® README.md ä¸­

![](img/1085058a9680b0f29e3e582515538197.png)

å›è´­è®¾ç½®å·¥ä½œæœ. io

è¦æ·»åŠ  travis build çŠ¶æ€å¾½ç« ï¼Œè¯·ç™»å½•å¹¶æ‰“å¼€ travis ä¸Šçš„é¡¹ç›®ã€‚æ‚¨åº”è¯¥åœ¨é¡¹ç›®ä»ªè¡¨æ¿ä¸Šçœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰æ„å»ºçŠ¶æ€çš„æ ‡è®°ã€‚æ„å»ºçŠ¶æ€å„ä¸ç›¸åŒï¼Œå¯èƒ½æ˜¯æœªçŸ¥ã€å¤±è´¥ã€é€šè¿‡ã€é”™è¯¯ï¼Œè§†å…·ä½“æƒ…å†µè€Œå®šã€‚å•å‡»æ­¤æ„å»ºçŠ¶æ€å¾½ç« ã€‚

![](img/dfefcb95497d04e119fd87c610babf4c.png)

é¡¹ç›®ä»ªè¡¨æ¿ travis-ci

ä½ çš„å±å¹•ä¸Šåº”è¯¥ä¼šå‡ºç°ä¸€ä¸ªå¼¹å‡ºçª—å£ï¼Œä¸ºä½ æä¾›çŠ¶æ€å›¾åƒçš„é€‰é¡¹ã€‚å¯¹äºè¿™ä¸ª[é¡¹ç›®](https://github.com/Mastersam07/PiggyX)ï¼Œæˆ‘æ•´åˆäº†ä¸»åˆ†æ”¯å¹¶ä½¿ç”¨äº†é™ä»·çŠ¶æ€å›¾åƒã€‚

![](img/cfda48402597bd86689879bd9109c802.png)

çŠ¶æ€å›¾åƒ travis-ci

å°±æ˜¯è¿™æ ·ï¼ç°åœ¨ï¼Œåœ¨ Travis ä¸Šæ­£ç¡®æ„å»ºä¹‹åï¼Œæ‚¨å°†èƒ½å¤Ÿåœ¨æ‚¨çš„é¡¹ç›®ä¸­çœ‹åˆ°æ‚¨çš„æµ‹è¯•è¦†ç›–ç‡å’Œä¸€äº›é—ªäº®çš„å¾½ç« ğŸ’ƒ ğŸ’ƒ ğŸ’ƒã€‚å®Œæ•´ç¤ºä¾‹å¯åœ¨[æ­¤å¤„](https://github.com/Mastersam07/PiggyX)è·å¾—ã€‚

![](img/bd59e83c29c91ce0ef8adf07c1af072a.png)

[https://github.com/Mastersam07/PiggyX/blob/master/README.md](https://github.com/Mastersam07/PiggyX/blob/master/README.md)

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶å‘è¡¨è¯„è®ºğŸ™‚ã€‚