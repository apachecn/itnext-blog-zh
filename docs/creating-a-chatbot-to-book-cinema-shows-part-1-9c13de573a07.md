# åˆ›å»ºä¸€ä¸ªå¯ä»¥é¢„è®¢ç”µå½±ç¥¨çš„èŠå¤©æœºå™¨äººâ€”ç¬¬ 1 éƒ¨åˆ†

> åŸæ–‡ï¼š<https://itnext.io/creating-a-chatbot-to-book-cinema-shows-part-1-9c13de573a07?source=collection_archive---------1----------------------->

![](img/20e5d67ca108f30b6a3a6ac097b94e78.png)

ä¹”å°”Â·ç©†å°¼æ–¯åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

æˆ‘æƒ³å¼€å‘è¿™ä¸ªå·¥å…·å¹¶å‘å¸ƒå®ƒå·²ç»å¾ˆä¹…äº†ã€‚

æˆ‘å°†å¼€å§‹è¿™ä¸ªè¿‡ç¨‹çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œè¿™å®é™…ä¸Šæ˜¯æˆ‘åˆ°ç›®å‰ä¸ºæ­¢æ‰€åšçš„ã€‚ä¸‹ä¸€éƒ¨åˆ†å°†æ˜¯å…³äºæœªæ¥çš„æ”¹è¿›ï¼Œä»¥åŠè¿™ç§æ–¹æ³•çš„ç¼ºç‚¹ã€‚

# TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

æˆ‘æœ‰ä¸€ä¸ª CLI(å‘½ä»¤è¡Œç•Œé¢)ï¼Œå…è®¸æˆ‘é€šè¿‡ **CINEPASS DUO** (æŒ‰æœˆä»˜è´¹è®¢é˜…)é¢„è®¢æ³•å›½ä»»ä½• PathÃ©ç”µå½±é™¢çš„æ¼”å‡ºã€‚

æˆ‘çš„ä»£ç å¯ä»¥åœ¨æˆ‘çš„ github repo ä¸Šè·å¾—ã€‚

è¿™æ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œçš„æ–‡ä»¶(å‡è®¾æ‚¨å·²ç»å®‰è£…äº†æ‰€éœ€çš„ä¾èµ–é¡¹)ã€‚

ä½ åº”è¯¥æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„å¡å·/å§“æ°å¯¹æ¥ä½¿å®ƒå·¥ä½œåˆ°æœ€åã€‚æ­¤å¤–ï¼Œè¿™ä¸ªå·¥å…·ä¸ä¼šç»•è¿‡éªŒè¯ç ï¼Œæ‰€ä»¥å¦‚æœä½ è¯•å›¾åœ¨ä¸€ä¸ªå°æ—¶å†…é¢„è®¢ 50 åœºæ¼”å‡ºï¼Œä¸è¦è´£æ€ªå®ƒã€‚

# ç¤ºèŒƒ

![](img/d151cf3f8bc167dfcb1216fd6cb47a32.png)

ç¬¬ä¸€æ­¥

![](img/cba7b555b8f50358cfedc6e8f09ddedd.png)

ç¬¬äºŒæ­¥

![](img/bf5f4bb1abc03f1f4219ab609cf27573.png)

ç¬¬ä¸‰æ­¥

![](img/4e3164a79f82ddb621dd3dcc184d6e0f.png)

ç¬¬å››æ­¥

![](img/f95accb0bad93911691cd703d8774c84.png)

ç¬¬äº”æ­¥

![](img/37d750d353baf77d6b828c0cc721e738.png)

ç¬¬å…­æ­¥â€”â€”æˆ‘æœ‰ä¸€å¼ é«˜çº§å¡å¾ˆæ­£å¸¸

å°±åœ¨å®ƒè¦æ±‚ä¸€ä¸ªé‚®ä»¶åœ°å€æ¥å‘é€ç¥¨ä¹‹åğŸ˜

ä½ å¯èƒ½æƒ³çŸ¥é“â€œèŠå¤©æœºå™¨äººçš„****éƒ¨åˆ†åœ¨å“ªé‡Œï¼Ÿâ€ï¼Œ**ä¿æŒ** **è¯»æ•°**ã€‚

## æ•…äº‹æ—¶é—´

è‡ªä»æˆ‘åœ¨è¿‡å»çš„å‡ å¹´é‡Œå‘ç°äº†å¤æ³¢ç‰¹é…’åï¼Œ**æˆ‘å°±æƒ³è‡ªå·±åŠ¨æ‰‹åˆ¶ä½œã€‚**

æˆ‘é¦–å…ˆå°è¯•äº† WYSIWYG ç¼–è¾‘å™¨ï¼Œæ¯”å¦‚éå¸¸é…·ä¸”æ˜“äºä½¿ç”¨çš„ Chatfuelã€‚ç„¶è€Œï¼Œä¸€æ—¦ä½ ä½¿ç”¨å®Œè¿™äº›å·¥å…·ï¼Œä½ å°±ä¼šæ˜ç™½ä½ å¯ä»¥é€šè¿‡è‡ªå·±ç¼–ç æ¥åˆ›é€ æ›´å¼ºå¤§çš„ä¸œè¥¿ã€‚

æˆ‘å°è¯•äº† Node.js æ•™ç¨‹å’Œ Python æ•™ç¨‹ï¼Œè®¾æ³•è®©éå¸¸å¥½çš„åº“å¤„ç†æ‰€æœ‰çš„ NLP(è‡ªç„¶è¯­è¨€å¤„ç†)ã€‚

å¥½å§ï¼Œåˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä¸€ç›´åœ¨æƒ³â€œæˆ‘æ€ä¹ˆèƒ½é€šè¿‡ Allocine é¢„è®¢ä¸€åœºæ¼”å‡ºå‘¢ï¼Ÿâ€(è¿™æ˜¯ä¸€ä¸ªæ³•å›½å¹³å°ï¼Œæä¾›æ‰€æœ‰ç”µå½±å†…å®¹ï¼Œå¹¶æ‹¥æœ‰ç”± Gaumont PathÃ©æŒæœ‰çš„åœ¨çº¿é¢„è®¢ç³»ç»Ÿ)ã€‚

å—¯ï¼Œ**â€œé‚£ä¸ªè¯¥æ­»çš„ REST API åœ¨å“ªé‡Œï¼Ÿï¼Ÿ?"ã€‚**REST API è‚¯å®šä¼šè½»æ¾å–èƒœã€‚ä¸€ä¸ª HTTP è¯·æ±‚åœ¨è¿™é‡Œï¼Œå¦ä¸€ä¸ªåœ¨è¿™é‡Œï¼Œç„¶åæˆ‘å°±å»ç”µå½±é™¢äº†ã€‚

æ‰¾äº†å‡ ä¸ªå°æ—¶**ï¼Œæˆ‘å”¯ä¸€å¾—åˆ°çš„æ˜¯ä¸€ä»½é€†å‘å·¥ç¨‹æ–‡æ¡£** [**è¿™é‡Œ**](https://wiki.gromez.fr/dev/api/allocine_v3) **ã€‚ä¸å¤Ÿç”¨ğŸ˜¢**

> ä¸å¤Ÿä¸ä»£è¡¨åšçš„å·¥ä½œä¸å¥½ã€‚ç›¸åï¼Œå®ƒéå¸¸å¥½ï¼Œä½†å®ƒä¸å…è®¸ä¸€ä¸ªäººç‚¹ä»»ä½•ä¸œè¥¿

æˆ‘æŠŠè¿™ä¸ªé¡¹ç›®æç½®åœ¨åŠå…¬æ¡Œä¸Šå°†è¿‘ä¸€å¹´äº†ã€‚åœ¨æˆ‘ä¸Šä¸€æ¬¡åœ¨ Node.js ä¸Šçš„è¯¾ç¨‹ä¸­ï¼Œå­¦å‘˜(ä¸€ä¸ªå¥½å­¦å‘˜)å‘Šè¯‰æˆ‘å…³äºæ— å¤´æµè§ˆå™¨çš„äº‹æƒ…ã€‚

æˆ‘å·²ç»çŸ¥é“äº† Selenium(Python)å’Œ PhantomJSï¼Œä½†æ˜¯å¯¹è¿™äº›æŠ€æœ¯ä¸€ç‚¹ä¹Ÿä¸é€‚åº”ã€‚

> å’Œ Chrome å‘å¸ƒçš„æœ¨å¶å¸ˆ

æœ€æ£’çš„æ˜¯ï¼Œå—è®­è€…å‘Šè¯‰æˆ‘ä¸€ä¸ªæˆ‘ç”šè‡³ä¸çŸ¥é“çš„ç”±è°·æ­Œåˆ¶ä½œçš„å·¥å…·(æˆ‘æ„Ÿåˆ°ç¾è€»ï¼Œæ¯å¤©æ·±å¤œä¿æŒé˜…è¯»åª’ä»‹å’Œå…¶ä»–é¦ˆé€æ˜¯ä¸å¤Ÿçš„)ã€‚

> å¯¹è¯æµè¿›å…¥äº†æ¸¸æˆ

è®©æˆ‘ä»¬æ¦‚è¿°ä¸€ä¸‹åˆ›å»ºè¿™ä¸ªç®€å•è€Œå¼ºå¤§çš„åº”ç”¨ç¨‹åºéœ€è¦ä»€ä¹ˆã€‚ä¹Ÿè®¸å®ƒèƒ½å”¤èµ·å¼€å‘è€…ç¤¾åŒºçš„æƒ³æ³•å’Œæ”¯æŒï¼Ÿ

# æ–¹æ¡ˆ

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ— å¤´æµè§ˆå™¨æ˜¯ä½ çœ‹ä¸åˆ°çš„æµè§ˆå™¨ã€‚

**ä½ é—®è¿™ä¸ªæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ**

äº‹å®ä¸Šï¼Œäººä»¬å¯ä»¥é€šè¿‡ä¸€ç§è¯­è¨€æ¥æ§åˆ¶è¿™ç§æ— å¤´æµè§ˆå™¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸€åˆ‡éƒ½ä¸ Javascript (Node.js ç¯å¢ƒ)æœ‰å…³ã€‚

å®ƒçœŸçš„éå¸¸å¼ºå¤§å’Œæœ‰è¶£ï¼Œå› ä¸ºå®ƒå…è®¸äººä»¬æ‰§è¡Œè‡ªåŠ¨å•å…ƒæµ‹è¯•ã€è‡ªåŠ¨åœ¨çº¿å¡«è¡¨ç­‰ç­‰(ä»¥ bruteforcing ä¸ºä¾‹)ã€‚

æ­£å¦‚ä½ æ‰€çŒœæµ‹çš„ï¼Œ**æœ¨å¶å¸ˆ**å°±åƒå…¶ä»–æ— å¤´æµè§ˆå™¨ä¸€æ ·ï¼Œå…è®¸ä½ è¾“å…¥ã€ç‚¹å‡»å’Œæˆªå±é¡µé¢ã€‚

ä¸‹é¢æ˜¯å®ƒçœ‹èµ·æ¥æœ‰å¤šé…·çš„ä¸€ä¸ªç‰‡æ®µ(ä¸ä»…ä»…æ˜¯çœ‹èµ·æ¥ï¼Œç¡®å®æ˜¯)ã€‚

è¿™ä¸»è¦æ˜¯å¤§å¤šæ•°ç”¨æˆ·åœ¨ç½‘ç«™ä¸Šåšçš„äº‹æƒ…ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ— å¤´æµè§ˆå™¨é€‚åˆè¿™é¡¹ä»»åŠ¡ï¼Œå¹¶å…è®¸æˆ‘åœ¨çº¿é¢„è®¢æˆ‘çš„ä½ç½®ã€‚

åŸºæœ¬ä¸Šï¼Œå®ƒæ˜¯å…³äºæ‰§è¡Œå®Œå…¨ç›¸åŒçš„ç”¨æˆ·åœºæ™¯ï¼Œä½†æ˜¯ä½¿ç”¨ç”±ç¨‹åºæ§åˆ¶çš„æ— å¤´æµè§ˆå™¨ã€‚

> è‡ªåŠ¨åŒ–çš„

ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘çš„ç›®æ ‡å°†æ˜¯æŒ‰ç…§æˆ‘åœ¨ Allocine ä¸Šéšä¾¿åšçš„äº‹æƒ…ï¼Œä¸€æ­¥ä¸€æ­¥åœ°æ— è„‘å¤åˆ¶æ¥é¢„è®¢æˆ‘çš„ä½ç½®ã€‚

# ç¼–ç 

> åä¸‹æ¥ï¼Œç³»å¥½å®‰å…¨å¸¦ã€‚

å¼€ç©ç¬‘ï¼Œåœ¨ä¸€ä¸ªæ— å¤´æµè§ˆå™¨ä¸­å®ç°ä¸€ä¸ªç”¨æˆ·åœºæ™¯æ˜¯éå¸¸å®¹æ˜“çš„ã€‚

**è¿™æ˜¯æˆ‘éµå¾ªçš„æµç¨‹**(ç›¸ä¿¡å¤§å®¶éƒ½æ˜¯è¿™ä¹ˆåšçš„ï¼Œæˆ‘é”™äº†å—ï¼Ÿ) :

![](img/62741af4b46888ae4c76defd5d7e58c9.png)

æ„Ÿè°¢ draw.io çš„å¼€å‘äººå‘˜è®©è¿™ä¸ªä»¤äººæƒŠå¹çš„å›¾è¡¨æˆä¸ºå¯èƒ½

æ‰€ä»¥ï¼Œè¿™åªæ˜¯ä¸€ç³»åˆ—ä»£ç å¸®åŠ©ä¸‹çš„å¤åˆ¶ã€‚ç›´ç™½ã€‚

ä»£ç å¹¶ä¸å¤æ‚ã€‚æˆ‘åªèƒ½è¯´ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ï¼Œå› ä¸ºæˆ‘ä¸æœ¨å¶å¸ˆçš„ä¸€äº›è¯¯è§£å’Œä¸€äº›ç¼“æ…¢çš„åŠ è½½æ—¶é—´(æˆ‘å¸Œæœ›å¯ä»¥è§„é¿)ã€‚

é€šè¿‡æŸ¥çœ‹ä»£ç ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨:

*   document . query selector()& document . query selector all()ï¼›
*   ç±»å‹()
*   å•å‡»()

æˆ‘è¿˜å¯ç”¨äº†è¯·æ±‚æ‹¦æˆªï¼Œä»¥é˜²æ­¢æµè§ˆå™¨ä¸‹è½½å½±å“æ€§èƒ½çš„èµ„æºï¼Œå¦‚å›¾åƒã€å¹¿å‘Šç­‰ã€‚

# æœªæ¥è®¡åˆ’

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸ŠèŠ±çš„æ—¶é—´æ²¡æœ‰è¶…è¿‡ä¸¤ä¸ªå·¥ä½œæ—¥ï¼Œå› ä¸ºä½œä¸ºä¸€åè‡ªç”±èŒä¸šåŸ¹è®­å¸ˆå’Œå¼€å‘äººå‘˜ï¼Œæˆ‘å¾ˆéš¾å¤„ç†æˆ‘çš„å·¥ä½œã€‚

ç„¶è€Œï¼Œå½“æˆ‘æœ‰è¶³å¤Ÿçš„ç©ºé—²æ—¶é—´æ—¶ï¼Œæˆ‘å¸Œæœ›æˆ‘èƒ½:

*   æ”¹è¿›ä»£ç (æ•´ä½“å¯è¯»æ€§å’Œé”™è¯¯å¤„ç†ï¼Œä»¥åŠé‡æ„é‡å¤ä»£ç )ï¼›
*   å°†å…¶ç»‘å®šåˆ°ä¸€ä¸ªç”¨ DialogFlow åˆ¶ä½œçš„èŠå¤©æœºå™¨äººä¸Š(æœ¬ç³»åˆ—ç¬¬äºŒéƒ¨åˆ†)ï¼›
*   è®©å®ƒå¤„ç†æ›´å¤šçš„æ¡ˆä»¶ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªç”µå½±é€šè¡Œè¯äºŒäººç»„ï¼›
*   è®©å®ƒèƒ½å¤Ÿé€‰æ‹©ç”µå½±é™¢æˆ¿é—´çš„ä½ç½®ï¼Œè€Œä¸æ˜¯è·³è¿‡è¿™ä¸€éƒ¨åˆ†ã€‚
*   ä½¿å®ƒèƒ½å¤Ÿè¦æ±‚ç”¨æˆ·åœ¨å¿…è¦æ—¶å®ŒæˆéªŒè¯ç ã€‚
*   **ä¸ Allocine & Gaumont PathÃ©å–å¾—è”ç³»ï¼Œå®ç°è¿™ä¸ªæ¢¦æƒ³ï¼Ÿ**

å¸Œæœ›æˆ‘ä¼šç»§ç»­åŠªåŠ›ï¼Œå°½æˆ‘æ‰€èƒ½å†™å¥½è¿™ä¸ªç³»åˆ—çš„ç¬¬äºŒéƒ¨åˆ†ã€‚

æ— è®ºå¦‚ä½•ï¼Œè¯·éšæ—¶è”ç³»æˆ‘å¹¶æå‡ºå»ºè®®ã€‚

å¦‚æœä½ çœŸçš„æå‡ºå®Œæˆå’Œæ”¹è¿›è¿™ä¸ªå·¥å…·çš„è¯·æ±‚ï¼Œæˆ‘ä¼šéå¸¸æ„Ÿæ¿€ã€‚

# æ— å¤´æµè§ˆå™¨æ–¹æ³•çš„ç¼ºç‚¹

åœ¨æˆ‘çœ‹æ¥ï¼Œç”¨æ— å¤´æµè§ˆå™¨è§£å†³è¿™ä¸ªé—®é¢˜æ˜¯å¯ä»¥æ‰¿å—çš„ã€‚ç„¶è€Œï¼Œå®ƒä¸æ˜¯ä¸ºå®ƒè€Œç”Ÿçš„(IMHO)ã€‚

è¿™äº›éƒ½æ˜¯è¿™ç§æ–¹æ³•çš„ç¼ºé™·:

*   **å¦‚æœç½‘é¡µå˜äº†ï¼Œä»£ç å°±åäº†**ã€‚
*   éªŒè¯ç ä¸èƒ½è¢«ç»•è¿‡(ç„¶è€Œæ²¡æœ‰æœºå™¨å­¦ä¹ å’Œç¥ç»ç½‘ç»œçš„ä¸œè¥¿)ã€‚
*   ä¸ºäº†é˜²æ­¢æŠ“å–ï¼Œç½‘ç«™å¯ä»¥**ç”Ÿæˆéšæœº id å’Œç±»**ã€‚è¿™ä½¿å¾—**æ–¹æ³•ç”šè‡³æ— æ³•å®ç°ã€‚**
*   **è¡¨æ¼”æ²¡é‚£ä¹ˆå¿«ã€‚**å†ç°æ™®é€šç”¨æˆ·çš„è¡Œä¸ºå¾ˆå¿«ï¼Œä½†ä¸å¦‚ä½¿ç”¨ä¼ è¾“ JSON æ•°æ®çš„ HTTP è¯·æ±‚æ‰§è¡Œå¸¸è§çš„ REST åœºæ™¯å¿«ã€‚è¿™æ˜¯å› ä¸ºæ— å¤´æµè§ˆå™¨å°±åƒæ™®é€šæµè§ˆå™¨ä¸€æ ·ï¼Œä¸‹è½½ç½‘é¡µåŠå…¶èµ„æº(HTML & JS é€šå¸¸ä¸ä¼šè¢«é˜»æ­¢ï¼Œå› ä¸ºç½‘é¡µéœ€è¦å®ƒä»¬æ‰èƒ½æŒ‰é¢„æœŸå·¥ä½œ)ã€‚

> æ—¶é—´ä¸€é•¿è‚¯å®šä¸é è°±

**æœ€åï¼Œæˆ‘å°†ç»§ç»­å…³æ³¨ web æœåŠ¡å’Œ APIï¼Œå› ä¸ºè¿™å°†æ˜¯çœŸæ­£çš„æ¸¸æˆè§„åˆ™æ”¹å˜è€…ã€‚è‚¯å®šè¿˜åœ¨åšè¿™ä¸ªé¡¹ç›®ï¼Œè‡³å°‘æ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ª POC(æ¦‚å¿µéªŒè¯)ã€‚**

è€å®è¯´ï¼Œè¿™ä¸ª CLI å¤±è´¥çš„æ¬¡æ•°æ¯”æˆåŠŸé¢„å®šä½ç½®çš„æ¬¡æ•°è¿˜å¤šï¼Œå› ä¸º captchasã€å³ä½¿ puppeteer è®¤ä¸ºé¡µé¢æ²¡æœ‰å®Œå…¨å‘ˆç°ï¼Œç­‰ç­‰ã€‚è¿™åªæ˜¯åˆ›å»ºæ¦‚å¿µè¯æ˜çš„ä¸€ç§å°è¯•ã€‚

# æ„Ÿè°¢æ‚¨çš„é˜…è¯»

æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ã€‚

éšä¾¿çœ‹çœ‹æˆ‘å†™çš„ä¸Šä¸€ç¯‡:[https://it next . io/programming-tips-2-6-tips-to-make-your-code-clean-and-elegant-again-c6c 47458724 a](/programming-tips-2-6-tips-to-make-your-code-clean-and-elegant-again-c6c47458724a)

å¦‚æœ‰ä»»ä½•é—®é¢˜å’Œå»ºè®®ï¼Œè¯·è”ç³»æˆ‘ğŸ˜º

**ä¸æ˜¯æ¯æ¬¡éƒ½æï¼Œä½†æˆ‘æ€»æ˜¯å¾ˆæ„Ÿæ¿€è¢«å®ƒåˆ†äº«ä¸‹ï¼Œè°¢è°¢ï¼**

![](img/8d152a41e4e16d3dc26c682c5b9fcc52.png)

[å´æ€¡](https://unsplash.com/@takeshi2?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šçš„â€œç™½è‰²é©¬å…‹æ¯é‡Œçš„å¡å¸ƒå¥‡è¯ºï¼Œç™½è‰²æ³¡æ²«è‰ºæœ¯åœ¨æœ¨æ¡Œä¸Šâ€