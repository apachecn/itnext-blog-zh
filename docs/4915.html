<html>
<head>
<title>Getting Started with Chaos Mesh and Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ··æ²Œç½‘æ ¼å’ŒKuberneteså…¥é—¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/getting-started-with-chaos-mesh-and-kubernetes-bfd98d25d481?source=collection_archive---------0-----------------------#2020-10-23">https://itnext.io/getting-started-with-chaos-mesh-and-kubernetes-bfd98d25d481?source=collection_archive---------0-----------------------#2020-10-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2c94b9abc63837540fce17c1f81f27b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W_0hjvwqxUuWvosc"/></div></div></figure><h1 id="79b6" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">ä»€ä¹ˆæ˜¯æ··æ²Œå·¥ç¨‹ï¼Ÿ</h1><p id="9d0f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">æ··æ²Œå·¥ç¨‹æ˜¯ä¸€é—¨åœ¨ç”Ÿäº§ä¸­å¯¹è½¯ä»¶ç³»ç»Ÿè¿›è¡Œå®éªŒçš„å­¦ç§‘ï¼Œç›®çš„æ˜¯å»ºç«‹å¯¹ç³»ç»Ÿæ‰¿å—åŠ¨è¡å’Œæ„å¤–æƒ…å†µèƒ½åŠ›çš„ä¿¡å¿ƒã€‚æ›´å¤šç»†èŠ‚è¯·å‚è€ƒ<a class="ae lu" href="https://en.wikipedia.org/wiki/Chaos_engineering" rel="noopener ugc nofollow" target="_blank">æ··æ²Œå·¥ç¨‹</a>ã€‚</p><p id="d191" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æ··æ²Œå®éªŒåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰§è¡Œï¼Œè¿™ä¸ºé¢å‘å®¢æˆ·çš„åœæœºç•™å‡ºäº†ç©ºé—´ã€‚è™½ç„¶å¿…é¡»è€ƒè™‘åˆ°çŸ­æœŸçš„è´Ÿé¢å½±å“ï¼Œä½†çˆ†ç‚¸åŠå¾„æˆ–å®éªŒäº§ç”Ÿçš„è¾å°„å¿…é¡»æœ€å°åŒ–å¹¶å¾—åˆ°æ§åˆ¶ã€‚</p><h1 id="538d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">ä»€ä¹ˆæ˜¯æ··æ²Œç½‘ï¼Ÿ</strong></h1><p id="8fe9" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">æ··æ²Œç½‘æ ¼æ˜¯<a class="ae lu" href="https://landscape.cncf.io/selected=chaos-mesh" rel="noopener ugc nofollow" target="_blank">äº‘æœ¬åœ°è®¡ç®—åŸºé‡‘ä¼š(CNCF) </a>ä¸»æŒçš„é¡¹ç›®ã€‚</p><blockquote class="ma"><p id="f4ee" class="mb mc iq bd md me mf mg mh mi mj lt dk translated">æ··æ²Œç½‘æ ¼æ˜¯ä¸€ä¸ªäº‘åŸç”Ÿçš„æ··æ²Œå·¥ç¨‹å¹³å°ï¼Œåœ¨Kubernetesç¯å¢ƒä¸­ç¼–æ’æ··æ²Œã€‚</p></blockquote><p id="b039" class="pw-post-body-paragraph kw kx iq ky b kz mk lb lc ld ml lf lg lh mm lj lk ll mn ln lo lp mo lr ls lt ij bi translated">Chaos Meshæ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½çš„æ··æ²Œå·¥ç¨‹è§£å†³æ–¹æ¡ˆï¼Œå…¶ç‰¹ç‚¹æ˜¯é’ˆå¯¹Kubernetesä¸Šçš„å¤æ‚ç³»ç»Ÿæä¾›å…¨æ–¹ä½çš„æ•…éšœæ³¨å…¥æ–¹æ³•ï¼Œæ¶µç›–Podã€ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿç”šè‡³å†…æ ¸ä¸­çš„æ•…éšœã€‚</p><p id="01df" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹æ··æ²Œç½‘æ ¼çš„ç»„æˆéƒ¨åˆ†:</p><ul class=""><li id="e587" class="mp mq iq ky b kz lv ld lw lh mr ll ms lp mt lt mu mv mw mx bi translated"><strong class="ky ir">æ··æ²Œç®—å­</strong>:æ··æ²Œç¼–æ’çš„æ ¸å¿ƒéƒ¨ä»¶ã€‚å®Œå…¨å¼€æºã€‚</li><li id="b4a4" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir"> Chaos Dashboard </strong>:ç”¨äºç®¡ç†ã€è®¾è®¡ã€ç›‘æ§æ··æ²Œå®éªŒçš„Web UIæ­£åœ¨å¼€å‘ä¸­ã€‚</li></ul><h1 id="b80c" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">æ··æ²Œç½‘æ ¼çš„æ¶æ„</strong></h1><p id="3c78" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">åœ¨å¹•åï¼Œæ··æ²Œç½‘æ ¼ä½¿ç”¨<a class="ae lu" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" rel="noopener ugc nofollow" target="_blank">è‡ªå®šä¹‰èµ„æºå®šä¹‰</a> (CRD)æ¥å®šä¹‰æ··æ²Œå¯¹è±¡ã€‚</p><p id="6e70" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æ··æ²Œç½‘æ ¼çš„æ•´ä½“æ¶æ„éå¸¸ç®€å•ï¼Œç»„ä»¶ä½äºKubernetesä¹‹ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨YAMLæ–‡ä»¶æˆ–æ··æ²Œç½‘æ ¼ä»ªè¡¨æ¿ä¸Šçš„è¡¨å•æ¥æŒ‡å®šåœºæ™¯ã€‚</p><p id="747c" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æœ‰ä¸€ä¸ªæ··æ²Œå®ˆæŠ¤è¿›ç¨‹ï¼Œåœ¨ç½‘ç»œã€Cgroupç­‰ä¸Šä½œä¸ºæ‹¥æœ‰ç‰¹æƒç³»ç»Ÿæƒé™çš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œã€‚å¯¹äºç‰¹å®šçš„èŠ‚ç‚¹ã€‚</p><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/319122185e1fd83d94e8d9cc1c0c8f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v44fKaxmb7n_BZOdwBxxQQ.png"/></div></div></figure><h1 id="3af3" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">æ··æ²Œç½‘æ ¼ä¸­çš„æ•…éšœæ³¨å…¥åœºæ™¯</strong></h1><p id="9d66" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">æ··æ²Œè¿ç®—ç¬¦ä½¿ç”¨<a class="ae lu" href="https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/" rel="noopener ugc nofollow" target="_blank">è‡ªå®šä¹‰èµ„æºå®šä¹‰(CRD) </a>æ¥å®šä¹‰æ··æ²Œå¯¹è±¡ã€‚å½“å‰çš„å®ç°æ”¯æŒå…­ç§ç±»å‹çš„ç”¨äºæ•…éšœæ³¨å…¥çš„CRDå¯¹è±¡ï¼Œå³PodChaosã€NetworkChaosã€IOChaosã€TimeChaosã€StressChaoså’ŒKernelChaosï¼Œå®ƒä»¬å¯¹åº”äºä»¥ä¸‹ä¸»è¦åŠ¨ä½œ(å®éªŒ):</p><ul class=""><li id="c413" class="mp mq iq ky b kz lv ld lw lh mr ll ms lp mt lt mu mv mw mx bi translated"><strong class="ky ir"> pod-kill </strong>:é€‰å®šçš„Podè¢«æ€æ­»(å¯èƒ½éœ€è¦ReplicaSetæˆ–ç±»ä¼¼çš„ä¸œè¥¿æ¥ç¡®ä¿Podå°†è¢«é‡å¯)ã€‚</li><li id="0860" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir"> Pod-failure </strong>:æ‰€é€‰æ‹©çš„Podåœ¨æŒ‡å®šçš„æ—¶é—´å†…ä¸å¯ç”¨ã€‚</li><li id="fe57" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir">é›†è£…ç®±-æ€æ­»</strong>:åœ¨é€‰å®šçš„ç®±ä¸­æ€æ­»é€‰å®šçš„é›†è£…ç®±ã€‚</li><li id="ae04" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir">ç½‘ç»œæ··ä¹±</strong>:å»¶è¿Ÿã€å¤åˆ¶ç­‰ç½‘ç»œæ··ä¹±ã€‚</li><li id="65ac" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir">ç½‘ç»œåˆ†åŒº</strong>:æ¨¡æ‹Ÿç½‘ç»œåˆ†åŒºã€‚</li><li id="0ed6" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir"> IOæ··ä¹±</strong>:æ¨¡æ‹ŸI/Oå»¶è¿Ÿã€è¯»å†™é”™è¯¯ç­‰æ–‡ä»¶ç³»ç»Ÿæ•…éšœã€‚</li><li id="7701" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir">æ—¶é—´æ··ä¹±</strong>:é€‰ä¸­çš„podä¼šè¢«æ³¨å…¥æ—¶é’Ÿåç§»ã€‚</li><li id="decf" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir"> CPU-burn </strong>:æ¨¡æ‹Ÿæ‰€é€‰podåº”åŠ›çš„CPUã€‚</li><li id="c315" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir">è®°å¿†çƒ§å½•</strong>:æ¨¡æ‹Ÿæ‰€é€‰podåº”åŠ›çš„è®°å¿†ã€‚</li><li id="2778" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><strong class="ky ir">å†…æ ¸æ··ä¹±</strong>:é€‰ä¸­çš„podä¼šè¢«æ³¨å…¥(slabï¼Œbioç­‰)é”™è¯¯ã€‚</li></ul><h1 id="55c8" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">åœ¨Kubernetesä¸Šå®‰è£…</strong></h1><p id="58ba" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">è¿™ä¸ªåšå®¢å°†ä½¿ç”¨æœ¬åœ°Kubernetesé›†ç¾¤ï¼Œåœ¨æ‚¨çš„å·¥ä½œç«™ä¸Šä½¿ç”¨Kindï¼Œæ‰€ä»¥æ‚¨å¯ä»¥ä½¿ç”¨Kindæˆ–Minikubeæ¥å®‰è£…æ··æ²Œç½‘æ ¼ã€‚</p><h2 id="8f69" class="ni jz iq bd ka nj nk dn ke nl nm dp ki lh nn no km ll np nq kq lp nr ns ku nt bi translated">å…ˆå†³æ¡ä»¶</h2><p id="e035" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">åœ¨éƒ¨ç½²ä¹‹å‰ï¼Œç¡®ä¿<a class="ae lu" href="https://docs.docker.com/install/" rel="noopener ugc nofollow" target="_blank"> Docker </a>å·²ç»å®‰è£…å¹¶è¿è¡Œåœ¨æ‚¨çš„æœ¬åœ°æœºå™¨ä¸Šã€‚</p><h2 id="7f9c" class="ni jz iq bd ka nj nk dn ke nl nm dp ki lh nn no km ll np nq kq lp nr ns ku nt bi translated">å®‰è£…æ··æ²Œç½‘æ ¼</h2><p id="fc22" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">æˆ‘ä»¬å°†ç›´æ¥ä½¿ç”¨Chaos Mesh repoæä¾›çš„å®‰è£…è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†å¼•å¯¼Kindé›†ç¾¤å¹¶åœ¨å…¶ä¸Šå®‰è£…Chaos Meshã€‚</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="d8ca" class="ni jz iq nv b gy nz oa l ob oc">$ curl -sSL <a class="ae lu" href="https://mirrors.chaos-mesh.org/v1.0.1/install.sh" rel="noopener ugc nofollow" target="_blank">https://mirrors.chaos-mesh.org/v1.0.1/install.sh</a> | bash -s â€”-local kind</span></pre><p id="5f07" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">å¦‚æœæ‚¨å·²ç»å®‰è£…äº†å¤§äº0.7ç‰ˆæœ¬çš„Kindï¼Œé‚£ä¹ˆè„šæœ¬å°†ç»§ç»­è¿è¡Œï¼Œå¦åˆ™å®ƒå°†å®‰è£…ä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚</p><p id="8162" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">è„šæœ¬è¿è¡Œè¾“å‡ºå°†å¦‚ä¸‹å›¾æ‰€ç¤º</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="7059" class="ni jz iq nv b gy nz oa l ob oc">Install kubectl client<br/>kubectl Version 1.18.8 has been installed<br/>Install Kind tool<br/>Kind Version 0.8.1 has been installed<br/>Install local Kubernetes kind<br/>No kind clusters found.<br/>Clean data dir: /Users/rbanka/kind/kind/data<br/>start to create kubernetes cluster kindCreating cluster "kind" ...<br/>DEBUG: docker/images.go:58] Image: kindest/node:v1.17.2 present locally<br/> âœ“ Ensuring node image (kindest/node:v1.17.2) ğŸ–¼<br/> âœ“ Preparing nodes ğŸ“¦ ğŸ“¦ ğŸ“¦ ğŸ“¦<br/> âœ“ Writing configuration ğŸ“œ<br/> âœ“ Starting control-plane ğŸ•¹ï¸<br/> âœ“ Installing CNI ğŸ”Œ<br/> âœ“ Installing StorageClass ğŸ’¾<br/> âœ“ Joining worker nodes ğŸšœ<br/>Set kubectl context to "kind-kind"<br/>You can now use your cluster with:</span><span id="6afe" class="ni jz iq nv b gy od oa l ob oc">kubectl cluster-info --context kind-kind</span><span id="1079" class="ni jz iq nv b gy od oa l ob oc">Thanks for using kind! ğŸ˜Š<br/>Install Chaos Mesh chaos-mesh<br/>customresourcedefinition.apiextensions.k8s.io/iochaos.chaos-mesh.org created<br/>customresourcedefinition.apiextensions.k8s.io/kernelchaos.chaos-mesh.org created<br/>customresourcedefinition.apiextensions.k8s.io/networkchaos.chaos-mesh.org created<br/>customresourcedefinition.apiextensions.k8s.io/podchaos.chaos-mesh.org created<br/>customresourcedefinition.apiextensions.k8s.io/podiochaos.chaos-mesh.org created<br/>customresourcedefinition.apiextensions.k8s.io/podnetworkchaos.chaos-mesh.org created<br/>customresourcedefinition.apiextensions.k8s.io/stresschaos.chaos-mesh.org created<br/>customresourcedefinition.apiextensions.k8s.io/timechaos.chaos-mesh.org created<br/>namespace/chaos-testing created<br/>serviceaccount/chaos-controller-manager created<br/>secret/chaos-mesh-webhook-certs created<br/>clusterrole.rbac.authorization.k8s.io/chaos-mesh:chaos-controller-manager-target-namespace created<br/>clusterrole.rbac.authorization.k8s.io/chaos-mesh:chaos-controller-manager-cluster-level created<br/>clusterrolebinding.rbac.authorization.k8s.io/chaos-mesh:chaos-controller-manager-cluster-level created<br/>clusterrolebinding.rbac.authorization.k8s.io/chaos-mesh:chaos-controller-manager-target-namespace created<br/>role.rbac.authorization.k8s.io/chaos-mesh:chaos-controller-manager-control-plane created<br/>rolebinding.rbac.authorization.k8s.io/chaos-mesh:chaos-controller-manager-control-plane created<br/>service/chaos-dashboard created<br/>service/chaos-mesh-controller-manager created<br/>daemonset.apps/chaos-daemon created<br/>deployment.apps/chaos-dashboard created<br/>deployment.apps/chaos-controller-manager created<br/>mutatingwebhookconfiguration.admissionregistration.k8s.io/chaos-mesh-mutation created<br/>validatingwebhookconfiguration.admissionregistration.k8s.io/chaos-mesh-validation created<br/>Waiting for pod running<br/>chaos-controller-manager-754d4f7585-h9p4c   0/1   ContainerCreating   0     10s<br/>Waiting for pod running<br/>chaos-controller-manager-754d4f7585-h9p4c   0/1   ContainerCreating   0     21s<br/>Waiting for pod running<br/>chaos-controller-manager-754d4f7585-h9p4c   0/1   ContainerCreating   0     31s<br/>Waiting for pod running<br/>Chaos Mesh chaos-mesh is installed successfully</span></pre><p id="c15c" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><strong class="ky ir">ä¸ºäº†éªŒè¯</strong>æˆ‘ä»¬çš„ç»„ä»¶æ˜¯å¦è¿è¡Œåœ¨Kubernetesé›†ç¾¤ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨:</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="af7e" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl get pod -n chaos-testing</span></pre><p id="70a4" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">è¾“å‡ºï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œçœ‹èµ·æ¥ä¼šåƒ</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="2482" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl get pods -n chaos-testing<br/>NAME                                        READY   STATUS    RESTARTS   AGE<br/>chaos-controller-manager-754d4f7585-h9p4c   1/1     Running   0          7h9m<br/>chaos-daemon-94687                          1/1     Running   0          7h9m<br/>chaos-daemon-k7pnj                          1/1     Running   0          7h9m<br/>chaos-daemon-tfgp6                          1/1     Running   0          7h9m<br/>chaos-dashboard-6fdb79c549-vmvtp            1/1     Running   0          7h9m</span></pre><p id="5eab" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æˆ‘ä»¬å¯ä»¥çœ‹åˆ°3ä¸ªç»„ä»¶å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œæ§åˆ¶å™¨ã€ä»ªè¡¨æ¿å’Œæ··æ²Œå®ˆæŠ¤è¿›ç¨‹ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹é›†ã€‚</p><p id="e123" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">è®©æˆ‘ä»¬æ²¿ç€å®ƒæ£€æŸ¥ä¸åŒçš„CRDï¼Œå“ªä¸€ä¸ªæ··æ²Œç½‘æ ¼åœ¨é›†ç¾¤ä¸Šäº§ç”Ÿ</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="e7b9" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl get crds<br/>NAME                             CREATED AT<br/>iochaos.chaos-mesh.org           2020-10-22T09:15:05Z<br/>kernelchaos.chaos-mesh.org       2020-10-22T09:15:05Z<br/>networkchaos.chaos-mesh.org      2020-10-22T09:15:05Z<br/>podchaos.chaos-mesh.org          2020-10-22T09:15:05Z<br/>podiochaos.chaos-mesh.org        2020-10-22T09:15:05Z<br/>podnetworkchaos.chaos-mesh.org   2020-10-22T09:15:05Z<br/>stresschaos.chaos-mesh.org       2020-10-22T09:15:05Z<br/>timechaos.chaos-mesh.org         2020-10-22T09:15:05Z</span></pre><p id="d093" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">è¿™äº›CRDä»£è¡¨äº†ä¸Šé¢è¯¦ç»†æåˆ°çš„å„ç§æ•…éšœæ³¨å…¥åœºæ™¯ã€‚</p><h2 id="2aaa" class="ni jz iq bd ka nj nk dn ke nl nm dp ki lh nn no km ll np nq kq lp nr ns ku nt bi translated">è®¿é—®æ··æ²Œç½‘æ ¼ä»ªè¡¨æ¿</h2><p id="b634" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">ä¸ºäº†è®¿é—®ä»ªè¡¨æ¿ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Kubeä»£ç†ï¼Œæˆ–è€…æ‚¨ç”šè‡³å¯ä»¥åœ¨Loadbalancerä¸Šå…¬å¼€å®ƒã€‚</p><p id="8063" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">è®©æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨æ··æ²Œç½‘æ ¼ä»ªè¡¨æ¿ä¸Šæ ‡è¯†å®¹å™¨ç«¯å£:</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="006c" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl get deploy chaos-dashboard -n chaos-testing -o=jsonpath="{.spec.template.spec.containers[0].ports[0].containerPort}{'\n'}"</span></pre><p id="2c71" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">è¾“å‡ºæ˜¾ç¤ºä»ªè¡¨æ¿æ­£åœ¨ä¾¦å¬çš„ç«¯å£</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="d1e3" class="ni jz iq nv b gy nz oa l ob oc">2333</span></pre><p id="bc72" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">è®©æˆ‘ä»¬å°†ä¸€ä¸ªæœ¬åœ°ç«¯å£è½¬å‘åˆ°podä¸Šçš„ç«¯å£ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸Šé¢çš„<code class="fe oe of og nv b">get pods</code>è¾“å‡ºä¸­è·å¾—Podåç§°ã€‚</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="f7d0" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl port-forward -n chaos-testing <!-- -->chaos-dashboard-6fdb79c549-vmvtp<!-- --> 8888:2333</span></pre><p id="a3f2" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æ‚¨å¯ä»¥è®¿é—®<a class="ae lu" href="http://localhost:8888" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">ä¸Šçš„ä»ªè¡¨æ¿http://localhost:8888 </strong> </a></p><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/1d5d48ddbee1b6551375a38116f9e6fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhA9iw9nGgAHeZjlg7d3pw.png"/></div></div></figure><p id="62b5" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æˆ‘ä»¬å¯ä»¥ä»ä»ªè¡¨æ¿ä¸Šçœ‹åˆ°ï¼Œè¿˜æ²¡æœ‰åˆ›å»ºå®éªŒã€‚</p><h2 id="4f83" class="ni jz iq bd ka nj nk dn ke nl nm dp ki lh nn no km ll np nq kq lp nr ns ku nt bi translated">åˆ›é€ ç¬¬ä¸€ä¸ªæ··æ²Œå®éªŒ</h2><p id="f4a9" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">å¯¹äºä¸€ä¸ªæµ‹è¯•åœºæ™¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åç§°ç©ºé—´é€‰æ‹©å™¨æ¥å®šä¹‰åˆ›å»ºæ··ä¹±çš„èŒƒå›´ã€‚</p><p id="902e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨ä¸€ä¸ªåç§°ç©ºé—´ä¸­ä¸ºä¸€ä¸ªpodé…ç½®Chaosï¼Œå®ƒå°†è¢«è°ƒåº¦ä¸ºæ¯éš”<code class="fe oe of og nv b">1 minute</code>ä¸€æ¬¡æ€æ­»ä¸€ä¸ªPodã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåº”ç”¨ç¨‹åºæ²¡æœ‰æ ‡ç­¾é€‰æ‹©å™¨ï¼Œå› æ­¤å®ƒå¯ä»¥åœ¨å¤šæ¬¡éƒ¨ç½²çš„æƒ…å†µä¸‹æ€æ­»ä»»ä½•Podã€‚</p><p id="831e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">åœ¨æˆ‘ä»¬çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰<a class="ae lu" href="https://chaos-mesh.org/docs/user_guides/experiment_scope" rel="noopener ugc nofollow" target="_blank">ä¸ªä¸åŒçš„èŒƒå›´</a>ã€‚</p><p id="b5cf" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">è®©æˆ‘ä»¬å…‹éš†æˆ‘ä»¬çš„ç¤ºä¾‹å­˜å‚¨åº“æ¥è·å¾—YAMLæ–‡ä»¶</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="b8b8" class="ni jz iq nv b gy nz oa l ob oc">$ git clone <a class="ae lu" href="https://github.com/ronakbanka/chaos-mesh-examples.git" rel="noopener ugc nofollow" target="_blank">https://github.com/ronakbanka/chaos-mesh-examples.git</a></span><span id="3b38" class="ni jz iq nv b gy od oa l ob oc">$ cd pod-chaos</span></pre><p id="ac8b" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">ä½¿ç”¨Kubectl <code class="fe oe of og nv b">namespace-selector</code>å®šä¹‰æ–‡ä»¶åº”ç”¨ï¼Œè¿™å°†åˆ›å»º3ä¸ªèµ„æº</p><ul class=""><li id="bca9" class="mp mq iq ky b kz lv ld lw lh mr ll ms lp mt lt mu mv mw mx bi translated">æŒ‰åç§°å‘½åç©ºé—´<code class="fe oe of og nv b">appns</code></li><li id="e732" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated">ä½¿ç”¨<code class="fe oe of og nv b">nginx</code>æ˜ åƒéƒ¨ç½²3ä¸ªå‰¯æœ¬ã€‚</li><li id="0594" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated">ä½¿ç”¨podchaos.chaos-mesh.org CRDçš„æ··æ²Œå¯¹è±¡</li></ul><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="5917" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl apply -f pod-namespace-selector.yml</span><span id="4d61" class="ni jz iq nv b gy od oa l ob oc">namespace/appns created<br/>deployment.apps/nginx created<br/>podchaos.chaos-mesh.org/pod-kill-example created</span></pre><p id="edf5" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">ç°åœ¨è®©æˆ‘ä»¬åœ¨Chaos Meshä»ªè¡¨æ¿ä¸ŠéªŒè¯è¿™ä¸ªå®éªŒï¼Œä½¿ç”¨ä¸Šé¢çš„<a class="ae lu" href="#2aaa" rel="noopener ugc nofollow">æ­¥éª¤è®¿é—®ä»ªè¡¨æ¿ã€‚</a></p><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/73e62124380473973001ff32a84ecc27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vcdMgEiqMeOF_-ohcVRcdw.png"/></div></div></figure><p id="3626" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æ‚¨å¯ä»¥çœ‹åˆ°æ‚¨çš„å®éªŒå·²ç»åˆ›å»ºå¹¶æ˜¾ç¤ºåœ¨ä»ªè¡¨æ¿ä¸Šã€‚</p><p id="b673" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">ç‚¹å‡»<code class="fe oe of og nv b">pod-kill-example</code>æ—è¾¹çš„<code class="fe oe of og nv b">DETAIL</code>æŒ‰é’®ï¼Œè·å–æˆ‘ä»¬å®éªŒçš„è¯¦ç»†ä¿¡æ¯ã€‚</p><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/a94443c252c5de44509362ceab8d375f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*72UqDoD9OWFFfPZcxH2QfQ.png"/></div></div></figure><p id="8388" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">ç»†èŠ‚åŸºæœ¬ä¸Šæ˜¯ç›¸åŒçš„ï¼Œåœ¨æˆ‘ä»¬çš„YAMLæ–‡ä»¶ä¸­æœ‰å…³äºPodChaoså¯¹è±¡çš„ï¼Œå¦‚æœä½ çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="8740" class="ni jz iq nv b gy nz oa l ob oc">apiVersion: chaos-mesh.org/v1alpha1<br/>kind: PodChaos<br/>metadata:<br/>  name: pod-kill-example<br/>  namespace: chaos-testing<br/>spec:<br/>  action: pod-kill<br/>  mode: one<br/>  selector:<br/>    namespaces:<br/>      - appns<br/>  scheduler:<br/>    cron: "<a class="ae lu" href="http://twitter.com/every" rel="noopener ugc nofollow" target="_blank">@every</a> 1m"</span></pre><h2 id="c414" class="ni jz iq bd ka nj nk dn ke nl nm dp ki lh nn no km ll np nq kq lp nr ns ku nt bi translated">éªŒè¯åˆ†ç¦»èˆ±æ•…éšœå®éªŒ</h2><p id="78f4" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">ç°åœ¨è®©æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸Šä½¿ç”¨<code class="fe oe of og nv b">kubectl</code> CLIæ¥éªŒè¯podæ•…éšœ</p><ul class=""><li id="151d" class="mp mq iq ky b kz lv ld lw lh mr ll ms lp mt lt mu mv mw mx bi translated">åˆæ€</li></ul><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="2ca2" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl get pods -n appns -w<br/>NAME                     READY   STATUS    RESTARTS   AGE<br/>nginx-86c57db685-57l8j   1/1     Running   0          7s<br/>nginx-86c57db685-mf2m9   1/1     Running   0          5m7s<br/>nginx-86c57db685-szvqx   1/1     Running   0          3m7s</span></pre><ul class=""><li id="d4f8" class="mp mq iq ky b kz lv ld lw lh mr ll ms lp mt lt mu mv mw mx bi translated">ä¸­é—´çŠ¶æ€</li></ul><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="4e17" class="ni jz iq nv b gy nz oa l ob oc">nginx-86c57db685-mf2m9   1/1     Terminating   0          6m<br/>nginx-86c57db685-26cs9   0/1     Pending       0          0s<br/>nginx-86c57db685-26cs9   0/1     Pending       0          0s<br/>nginx-86c57db685-mf2m9   1/1     Terminating   0          6m<br/>nginx-86c57db685-26cs9   0/1     ContainerCreating   0          0s<br/>nginx-86c57db685-26cs9   1/1     Running             0          4s</span></pre><p id="03fd" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°nginx-86c57db685-mf2m9æ­£åœ¨å¾—åˆ°<code class="fe oe of og nv b">terminated</code>ï¼Œnginx-86 c 57 db 685â€“26cs 9æ­£åœ¨å¾—åˆ°<code class="fe oe of og nv b">created</code>ã€‚</p><ul class=""><li id="26dd" class="mp mq iq ky b kz lv ld lw lh mr ll ms lp mt lt mu mv mw mx bi translated">æœ«æ€</li></ul><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="7ad6" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl get pods -n appns<br/>NAME                     READY   STATUS    RESTARTS   AGE<br/>nginx-86c57db685-skcfv   1/1     Running   0          118s<br/>nginx-86c57db685-szvqx   1/1     Running   0          9m58s<br/>nginx-86c57db685-znk4r   1/1     Running   0          58s</span></pre><p id="2c43" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ­¤æ—¶æœ‰ä¸¤ä¸ªé‡æ–°åˆ›å»ºçš„è±†èšã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®éªŒç»†èŠ‚ä¸‹æŸ¥çœ‹æ··æ²Œç½‘æ ¼ä»ªè¡¨æ¿ä¸Šçš„äº‹ä»¶ã€‚</p><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ok"><img src="../Images/431429e6d1c866bb86cda3858cad429e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ckodb-KPVdcYbStLtPDiuQ.png"/></div></div></figure><h2 id="781a" class="ni jz iq bd ka nj nk dn ke nl nm dp ki lh nn no km ll np nq kq lp nr ns ku nt bi translated">æ¸…ç†è®¾ç½®</h2><p id="9463" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ¥æ¸…ç†è®¾ç½®å’Œå¸è½½ç»„ä»¶ï¼Œä»¥åŠç±»é›†ç¾¤ã€‚</p><pre class="ne nf ng nh gt nu nv nw nx aw ny bi"><span id="708e" class="ni jz iq nv b gy nz oa l ob oc">$ kubectl delete ns chaos-testing</span><span id="9152" class="ni jz iq nv b gy od oa l ob oc">$ kind delete cluster --name=kind</span></pre><p id="0bf8" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ··æ²Œç½‘æ ¼åˆ›å»ºå„ç§å¤±è´¥åœºæ™¯ï¼Œæˆ‘å°†åœ¨æ¥ä¸‹æ¥çš„å‡ ç¯‡åšå®¢ä¸­åˆ†äº«ã€‚</p><p id="308f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">æ›´å¤šæ–‡æ¡£å’Œå‚è€ƒ</p><ul class=""><li id="8137" class="mp mq iq ky b kz lv ld lw lh mr ll ms lp mt lt mu mv mw mx bi translated"><a class="ae lu" href="https://chaos-mesh.org/docs/" rel="noopener ugc nofollow" target="_blank">æ··æ²Œç½‘æ–‡æ¡£</a></li><li id="de61" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><a class="ae lu" href="https://chaos-mesh.org/interactiveTutorial" rel="noopener ugc nofollow" target="_blank">äº’åŠ¨æ•™ç¨‹å°è¯•æ··æ²Œç½‘æ ¼</a></li><li id="a44f" class="mp mq iq ky b kz my ld mz lh na ll nb lp nc lt mu mv mw mx bi translated"><a class="ae lu" href="https://chaos-mesh.org/docs/use_cases/multi_data_centers" rel="noopener ugc nofollow" target="_blank">å¤šæ•°æ®ç½‘ç»œå»¶è¿Ÿåœºæ™¯</a></li></ul></div></div>    
</body>
</html>