<html>
<head>
<title>Perfect Guide of Code First GraphQL Server with GraphQL.js and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨GraphQL.jså’ŒTypeScriptçš„ä»£ç ä¼˜å…ˆGraphQLæœåŠ¡å™¨çš„å®Œç¾æŒ‡å—</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/perfect-guide-of-code-first-graphql-server-with-graphql-js-and-typescript-8cfe09df97ef?source=collection_archive---------3-----------------------#2021-11-06">https://itnext.io/perfect-guide-of-code-first-graphql-server-with-graphql-js-and-typescript-8cfe09df97ef?source=collection_archive---------3-----------------------#2021-11-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ac743280d9b62530183173cf84dba770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H70K1-T8M5oMOMNtvnbFeQ.png"/></div></div></figure><p id="f95c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://github.com/graphql/graphql-js" rel="noopener ugc nofollow" target="_blank"> GraphQL.js </a>æ˜¯GraphQLçš„JavaScriptå‚è€ƒå®ç°ã€‚è¿™æ˜¯æœ€å¥½çš„GraphQLåº“ä¹‹ä¸€ï¼Œç”±<a class="ae kz" href="https://nexusjs.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL Nexus </a>å’Œ<a class="ae kz" href="https://typegraphql.com/" rel="noopener ugc nofollow" target="_blank"> TypeGraphQL </a>ä½¿ç”¨ã€‚</p><p id="ad4f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è™½ç„¶GraphQL.jsæœ‰å¾ˆå¥½çš„æ–‡æ¡£ï¼Œä½†æ˜¯å…³äºä»£ç ä¼˜å…ˆå®ç°å’ŒTypeScriptçš„ä¿¡æ¯å¹¶ä¸å¤šã€‚æ‰€ä»¥æœ¬æ–‡è§£é‡Šäº†å¦‚ä½•ç”¨GraphQL.jså’ŒTypeScriptå®ç°code first GraphQL serverã€‚</p><p id="61ea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æœ¬æ–‡ç”±ä»¥ä¸‹3ä¸ªä¸»é¢˜ç»„æˆã€‚</p><ol class=""><li id="809d" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky lf lg lh li bi translated">å¦‚ä½•ç”¨ä»£ç ä¼˜å…ˆçš„æ–¹æ³•å®ç°GraphQLæ¨¡å¼</li><li id="087c" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">ä¸­ç»§æ ·å¼åˆ†é¡µ</li><li id="05d2" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">å¦‚ä½•ç”¨GraphQLä»£ç ç”Ÿæˆå™¨é«˜æ•ˆæ‰“å­—</li></ol><h1 id="f9d7" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">æ•…äº‹</h1><p id="b797" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">å‡è®¾æ‚¨åˆ›å»ºäº†ä¸€ä¸ªåšå®¢åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸ºå…¶å®ç°äº†GraphQLåç«¯ã€‚ç®€å•çš„æ•°æ®æ¨¡å‹å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/633c5e9554f7ed5230aee8a714a994b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UYBs8B4lmuaLhbicn_F0cw.png"/></div></div></figure><ul class=""><li id="d564" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky mw lg lh li bi translated">ç”¨æˆ·æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶</li><li id="4e71" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky mw lg lh li bi translated">ç”¨æˆ·æœ‰è®¸å¤šå¸–å­</li></ul><p id="2cba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¹¶ä¸”æ‚¨å¸Œæœ›åˆ›å»ºåŒ…å«é…ç½®æ–‡ä»¶å’Œå¸–å­çš„ç”¨æˆ·æŸ¥è¯¢ã€‚</p><h1 id="0872" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">è®¾ç½®GraphQLæœåŠ¡å™¨</h1><p id="155d" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">æœ€å°GraphQLæœåŠ¡å™¨æ˜¯ç”¨GraphQL.jsã€expresså’Œexpress-graphqlåœ¨<a class="ae kz" href="https://github.com/egurinko/code-first-graphql-example" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ªåº“</a>ä¸­å®ç°çš„ã€‚å¦‚æœä½ æƒ³æ£€æŸ¥å®Œæˆçš„ä»£ç ï¼Œè¯·æ£€æŸ¥<code class="fe mx my mz na b">done</code>åˆ†æ”¯ã€‚</p><p id="bd9a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å­˜å‚¨åº“çš„ç»“æ„å¦‚ä¸‹ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="0db1" class="nf lp it na b gy ng nh l ni nj">- repo_root<br/> - package.json<br/> - seed.ts    // user data is here<br/> - src/<br/>  - index.ts  // server implementation is here<br/>  - graphql/  // GraphQL implementation comes here<br/>   - schema.ts</span></pre><p id="0f00" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">GraphQLå®ç°å°†å‡ºç°åœ¨<code class="fe mx my mz na b">src/graphql</code>ç›®å½•ä¸­ã€‚éšç€åº”ç”¨ç¨‹åºçš„å¢é•¿ï¼Œå®ƒä¼šå˜å¾—å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="ff87" class="nf lp it na b gy ng nh l ni nj">- src/<br/>  - schema.ts<br/>  - context.ts<br/>  - query.ts          // import implementations<br/>  - mutation.ts<br/>  - subscription.ts<br/>  - queries/          // query implementations<br/>  - mutations/        // mutation implementations<br/>  - subscriptions/    // subscription implementations<br/>  - types/</span></pre><h1 id="286c" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">ä»£ç ä¼˜å…ˆæŸ¥è¯¢å®ç°</h1><p id="1aec" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">è®©æˆ‘ä»¬æŒ‰ç…§ä»£ç ä¼˜å…ˆæ–¹æ³•çš„<a class="ae kz" href="https://graphql.org/graphql-js/constructing-types/" rel="noopener ugc nofollow" target="_blank"> GraphQL.jsæ–‡æ¡£</a>åˆ›å»ºä¸€ä¸ªç”¨æˆ·æŸ¥è¯¢ï¼é¦–å…ˆå®ç°GraphQLç±»å‹çš„ç”¨æˆ·ï¼Œé…ç½®æ–‡ä»¶å’Œå¸–å­ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="1d9d" class="nf lp it na b gy ng nh l ni nj">// src/graphql/types/postType.ts<br/>import { <br/>  GraphQLObjectType, <br/>  GraphQLInt, <br/>  GraphQLString,<br/>  GraphQLNonNull<br/>} from "graphql";</span><span id="c02f" class="nf lp it na b gy nk nh l ni nj">export const postType = new GraphQLObjectType({<br/>  name: "Post",<br/>  fields: {<br/>    id: { type: new GraphQLNonNull(GraphQLInt) },<br/>    title: { type: new GraphQLNonNull(GraphQLString) },<br/>    detail: { type: new GraphQLNonNull(GraphQLString) },<br/>  }<br/>});</span><span id="54fe" class="nf lp it na b gy nk nh l ni nj">// src/graphql/types/profileType.ts<br/>export const profileType = new GraphQLObjectType({<br/>  name: "Profile",<br/>  fields: {<br/>    id: { type: new GraphQLNonNull(GraphQLInt) },<br/>    name: {<br/>      type: new GraphQLNonNull(GraphQLString),<br/>      resolve: (source, _args, _ctx) =&gt; {<br/>        return source.firstName + source.lastName;<br/>      }<br/>    },<br/>  }<br/>});</span><span id="352e" class="nf lp it na b gy nk nh l ni nj">// src/graphql/types/userType.ts<br/>import { profileType } from "./profileType";<br/>import { postType } from "./postType";</span><span id="7212" class="nf lp it na b gy nk nh l ni nj">export const userType = new GraphQLObjectType({<br/>  name: "User",<br/>  fields: {<br/>    id: { type: new GraphQLNonNull(GraphQLInt) },<br/>    email: { type: new GraphQLNonNull(GraphQLString) },<br/>    profile: { type: new GraphQLNonNull(profileType) },<br/>    posts: {<br/>      type: new GraphQLNonNull(new GraphQLList(postType))<br/>    },<br/>  }<br/>});</span><span id="9ef7" class="nf lp it na b gy nk nh l ni nj">// src/graphql/types/index.ts<br/>export * from "./postType";<br/>export * from "./profileType";<br/>export * from "./userType";</span></pre><p id="f719" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å‡ ä¹æ‰€æœ‰ä»£ç éƒ½å¾ˆç®€å•ï¼Œé™¤äº†profileTypeã€‚åœ¨ç§å­æ•°æ®ä¸­ï¼Œprofileæ•°æ®æœ‰ä¸‰ä¸ªå±æ€§<code class="fe mx my mz na b">id</code>ã€<code class="fe mx my mz na b">firstName</code>ã€<code class="fe mx my mz na b">lastName</code>ã€‚ä½†æ˜¯åœ¨profileType.tsä¸­ï¼Œ<code class="fe mx my mz na b">firstName</code>å’Œ<code class="fe mx my mz na b">lastName</code>ä½¿ç”¨è§£æå™¨è¿æ¥åˆ°<code class="fe mx my mz na b">name</code>ã€‚è¿™ç§æ•°æ®è½¬æ¢é€šå¸¸æ˜¯å› ä¸ºå„ç§åŸå› å‘ç”Ÿï¼Œå¦‚å‰ç«¯DXï¼Œéšè—ä¸€äº›æ•°æ®ã€‚</p><p id="d511" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨å‡†å¤‡ç”¨ç±»å‹å®ç°æŸ¥è¯¢æœ¬èº«ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="24dc" class="nf lp it na b gy ng nh l ni nj">// src/graphql/queries/users.ts<br/>import { GraphQLNonNull, GraphQLList } from "graphql";<br/>import { userType } from "../types";<br/>import { usersSeed } from "../../../seed";</span><span id="e3c9" class="nf lp it na b gy nk nh l ni nj">export const users = {<br/>  type: new GraphQLNonNull(<br/>    new GraphQLList(new GraphQLNonNull(userType))<br/>  ),<br/>  resolve: (_source: any, _args: any, _ctx: any) =&gt; {<br/>    return usersSeed;<br/>  },<br/>};</span><span id="2ff0" class="nf lp it na b gy nk nh l ni nj">// src/graphql/queries/index.ts<br/>export * from "./users";</span></pre><p id="d364" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è‡³æ­¤ï¼Œgraphqlç±»å‹å’ŒæŸ¥è¯¢å®ç°å·²ç»å®Œæˆã€‚æ‚¨å”¯ä¸€è¦åšçš„å°±æ˜¯å°†æŸ¥è¯¢é›†æˆåˆ°æ¨¡å¼ä¸­ï¼</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="5051" class="nf lp it na b gy ng nh l ni nj">// src/graphql/query.ts<br/>import { GraphQLObjectType } from "graphql";<br/>import * as queries from "./queries";</span><span id="5ff0" class="nf lp it na b gy nk nh l ni nj">export const queryType = new GraphQLObjectType({<br/>  name: "Query",<br/>  fields: queries,<br/>});</span><span id="3734" class="nf lp it na b gy nk nh l ni nj">// src/graphql/schema.ts<br/>import { GraphQLSchema } from 'graphql';<br/>import { queryType } from "./query";</span><span id="9141" class="nf lp it na b gy nk nh l ni nj">export const schema = new GraphQLSchema({<br/>  query: queryType, // add this line !<br/>});</span></pre><p id="3971" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬æ£€æŸ¥å®ç°æ˜¯å¦æ­£ç¡®ï¼åªéœ€å¯åŠ¨æœåŠ¡å™¨å¹¶æ£€æŸ¥å›¾å½¢ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="10dc" class="nf lp it na b gy ng nh l ni nj">$ yarn dev // and go to <a class="ae kz" href="http://localhost:4000/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/graphql</a> in browser</span></pre><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/5cf0f5329a53b8bbd27c7cb044a787a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fuuFZIY3WNQoV1QhKySNDw.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">ç”¨æˆ·æŸ¥è¯¢</figcaption></figure><p id="fff6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç¬¬ä¸€æ¬¡æŸ¥è¯¢ğŸ‰<br/>æ€»ä¹‹ï¼Œæ‚¨éœ€è¦åšä¸‰ä»¶äº‹æ¥åˆ›å»ºæŸ¥è¯¢ã€‚</p><ol class=""><li id="37ed" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky lf lg lh li bi translated">å®šä¹‰è¿”å›ç±»å‹</li><li id="ecf3" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">åˆ›å»ºæŸ¥è¯¢è§£æå™¨(å®é™…ä¸Šä¸ç±»å‹å®ç°ç›¸åŒ)</li><li id="59cb" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">å‘æ¨¡å¼æ·»åŠ æŸ¥è¯¢</li></ol><p id="3b5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä¹Ÿè®¸ä½ æ³¨æ„åˆ°è¿˜æ²¡æœ‰TypeScriptç±»å‹æ³¨é‡Šã€‚ä½†æ˜¯ä¸ç”¨æ‹…å¿ƒã€‚åœ¨å¤„ç†TypeScriptä¹‹å‰ï¼Œè®©æˆ‘è§£é‡Šä¸€ä¸‹å¦‚ä½•å®ç°ä¸­ç»§æ ·å¼åˆ†é¡µã€‚</p><h1 id="def1" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">ä¸­ç»§æ ·å¼åˆ†é¡µ</h1><p id="9cdf" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">éšç€æ•°æ®çš„å¢é•¿ï¼Œåº”ç”¨ç¨‹åºéœ€è¦åˆ†é¡µä»¥è·å¾—UXå’ŒæœåŠ¡å™¨æ€§èƒ½ã€‚åœ¨GraphQLä¸–ç•Œä¸­ï¼Œæœ€è‘—åçš„åˆ†é¡µç‰¹å®šæ˜¯<a class="ae kz" href="https://relay.dev/" rel="noopener ugc nofollow" target="_blank">ä¸­ç»§</a>æ ·å¼åˆ†é¡µã€‚</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/8bb16c854b713e7d5bc80929fa7d7f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ha2M9eXtLbABsKcJaHFd3g.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">ä¸­ç»§æ ·å¼åˆ†é¡µ</figcaption></figure><p id="fc46" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ­£å¦‚æ‚¨åœ¨ä¸Šé¢çœ‹åˆ°çš„ï¼Œå®ƒæ˜¯åŸºäºå…‰æ ‡çš„åˆ†é¡µã€‚<code class="fe mx my mz na b">users</code>æŸ¥è¯¢æ¥å—ä¸¤ä¸ªè¾“å…¥<code class="fe mx my mz na b">first</code>å’Œ<code class="fe mx my mz na b">after</code>ã€‚æ„æ€æ˜¯â€œè¯·ä»ç”¨æˆ·YXJyâ€¦ä¹‹åæŠ½å–10ä¸ªç”¨æˆ·â€ã€‚</p><p id="1e53" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿”å›å€¼æœ‰<code class="fe mx my mz na b">pageInfo</code>å’Œ<code class="fe mx my mz na b">edges</code>ã€‚<code class="fe mx my mz na b">node</code>è¡¨ç¤ºæ•°æ®æœ¬èº«ï¼Œå¤„ç†æ¯ä¸ªèŠ‚ç‚¹çš„å…³ç³»<code class="fe mx my mz na b">edge</code>ã€‚å¦‚æœä½ æƒ³çŸ¥é“ç»†èŠ‚ï¼Œè¯·é˜…è¯»é˜¿æ³¢ç½—åšå®¢å…³äºè¿æ¥ã€‚</p><p id="8267" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://www.apollographql.com/blog/graphql/explaining-graphql-connections/" rel="noopener ugc nofollow" target="_blank">https://www . apollographql . com/blog/graph QL/explaining-graph QL-connections/</a></p><p id="70c2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¥½åƒè¶…çº§éš¾ï¼ŸğŸ˜«å¹¸è¿çš„æ˜¯ï¼ŒGraphQL.jså›¢é˜Ÿå¼€å‘äº†<a class="ae kz" href="https://github.com/graphql/graphql-relay-js" rel="noopener ugc nofollow" target="_blank"> graphql-relay </a>ä½¿æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾å®ç°åˆ†é¡µã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="7c37" class="nf lp it na b gy ng nh l ni nj">$ yarn add graphql-relay</span></pre><p id="b6d7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ‰€ä»¥è®©æˆ‘ä»¬ä½¿ç”¨graphql-relayå¯¹ç”¨æˆ·å’Œå¸–å­è¿›è¡Œåˆ†é¡µã€‚æ˜¯çš„ï¼Œå½“ç„¶ä½ å¯ä»¥åœ¨å¤šä¸ªå­—æ®µä¸­ä½¿ç”¨åˆ†é¡µã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="3834" class="nf lp it na b gy ng nh l ni nj">// src/graphql/queries/users.ts<br/>import { GraphQLNonNull } from "graphql";<br/>import { <br/>  connectionDefinitions,<br/>  connectionArgs,<br/>  connectionFromArray<br/>} from "graphql-relay";<br/>import { userType } from "../types";<br/>import { usersSeed } from "../../../seed";</span><span id="6421" class="nf lp it na b gy nk nh l ni nj">export const users = {<br/>  type: new GraphQLNonNull(<br/>    connectionDefinitions({ nodeType: userType }).connectionType,<br/>  ),<br/>  args: connectionArgs,<br/>  resolve: (_source: any, args: any, _ctx: any) =&gt; {<br/>    return connectionFromArray(usersSeed, args);<br/>  },<br/>};</span></pre><p id="f5f0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é¦–å…ˆï¼Œ<code class="fe mx my mz na b">type</code>åº”è¯¥è¢«æ›´æ”¹ï¼Œä»¥å‘æ¨¡å¼æ·»åŠ <code class="fe mx my mz na b">edges</code>å’Œ<code class="fe mx my mz na b">pageInfo</code>å±‚ã€‚ä½†æ˜¯ä½ åªéœ€è¦ç”¨<code class="fe mx my mz na b">connectionDefinitions</code>æ”¹å˜<code class="fe mx my mz na b">type</code>å°±å¯ä»¥äº†ã€‚</p><p id="1c35" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç¬¬äºŒï¼Œåº”è¯¥æ·»åŠ <code class="fe mx my mz na b">args</code>æ¥æ¥å—ç±»ä¼¼<code class="fe mx my mz na b">after</code>ã€<code class="fe mx my mz na b">first</code>çš„è¾“å…¥ã€‚</p><p id="55ea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç¬¬ä¸‰ï¼Œä½¿ç”¨<code class="fe mx my mz na b">connectionFromArray</code>ä½œä¸ºè§£æå™¨ã€‚å¦‚æœå‘å®ƒä¼ é€’æ•°ç»„å’Œå‚æ•°ï¼Œå®ƒä¼šè®¡ç®—å¹¶æ ¼å¼åŒ–æ•°æ®ã€‚</p><p id="c094" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å‰å®³ï¼è¿™å¾ˆç®€å•ï¼æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åƒæˆ‘ä¸Šé¢åšçš„é‚£æ ·ç»™æ–‡ç« åˆ†é¡µã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="09de" class="nf lp it na b gy ng nh l ni nj">// src/graphql/types/userType.ts<br/>import { <br/>  GraphQLObjectType,<br/>  GraphQLInt,<br/>  GraphQLString,<br/>  GraphQLNonNull<br/>} from "graphql";<br/>import {<br/>  connectionDefinitions,<br/>  connectionArgs,<br/>  connectionFromArray<br/>} from "graphql-relay";<br/>import { profileType } from "./profileType";<br/>import { postType } from "./postType";</span><span id="fb09" class="nf lp it na b gy nk nh l ni nj">export const userType = new GraphQLObjectType({<br/>  name: "User",<br/>  fields: {<br/>    id: { type: new GraphQLNonNull(GraphQLInt) },<br/>    email: { type: new GraphQLNonNull(GraphQLString) },<br/>    profile: { type: new GraphQLNonNull(profileType) },<br/>    posts: {<br/>      // CHANGE HERE<br/>      type: new GraphQLNonNull(<br/>        connectionDefinitions({ <br/>          nodeType: postType <br/>        }).connectionType,<br/>      ),<br/>      args: connectionArgs,<br/>      resolve: (source, args, _ctx) =&gt; {<br/>        return connectionFromArray(source.posts, args)<br/>      }<br/>    },<br/>  }<br/>});</span></pre><p id="f88c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ‰€ä»¥è¿è¡ŒæœåŠ¡å™¨ï¼Œåœ¨graphiqlä¸Šæ£€æŸ¥ä¸€ä¸‹ï¼</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/af69c3685d287dbd618731da26d9530d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGyk4087Cqj2m9xn9L4zuA.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">å¯¹ç”¨æˆ·å’Œå¸–å­è¿›è¡Œåˆ†é¡µ</figcaption></figure><p id="f4f6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">GraphQLå’ŒRESTçš„ä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«æ˜¯ï¼Œæ‚¨å¯ä»¥ç”¨GraphQLä¸ºæ¯ä¸ªå­—æ®µè®¾ç½®å‚æ•°ã€‚å½“åˆ›å»ºè§£æå™¨æ—¶ï¼Œæ¯ä¸ªè§£æå™¨å¯ä»¥å…³æ³¨ä¼ é€’ç»™å®ƒçš„å‚æ•°ã€‚</p><h1 id="2b98" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">å¸¦æœ‰GraphQLä»£ç ç”Ÿæˆå™¨çš„TypeScriptç±»å‹</h1><p id="cc21" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒGraphQLæŸ¥è¯¢æ˜¯é€šè¿‡ä»£ç ä¼˜å…ˆçš„æ–¹æ³•æ„å»ºçš„ã€‚å¦‚æœæ‚¨è‡ªå·±ç¼–å†™ä»£ç ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°å³ä½¿æ˜¯ç”¨TypeScriptç¼–å†™çš„ï¼Œä¹Ÿæ²¡æœ‰TypeScriptçš„ä¼˜ç‚¹ã€‚</p><p id="0666" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä¾‹å¦‚ï¼Œå³ä½¿æ‚¨çš„ä¸€ä¸ªå­—æ®µæœ‰å‚æ•°ï¼Œæ‚¨çš„ç¼–è¾‘å™¨ä¹Ÿä¸ä¼šåƒä¸‹é¢è¿™æ ·æ˜¾ç¤ºç±»å‹æ–­è¨€ã€‚</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/d8a04d7f6b57ca11ecc9c7e3382e5259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qLHjxI0yjSmwfjhAfXSTOA.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">æ²¡æœ‰å¸¦å‚æ•°çš„æ–­è¨€</figcaption></figure><p id="3da4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä½¿ç”¨<a class="ae kz" href="https://nexusjs.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL Nexus </a>ï¼Œæ‚¨å¯ä»¥åœ¨å®šä¹‰<code class="fe mx my mz na b">args</code>ä¹‹åè·å¾—ç±»å‹æ–­è¨€ï¼Œå› ä¸ºå®ƒä¼šè§‚å¯Ÿæ–‡ä»¶å˜åŒ–å¹¶åŠ¨æ€åˆ›å»ºç±»å‹è„šæœ¬ç±»å‹ã€‚ä½†ç”±äºGraphQL Nexusè¿˜ä¸æˆç†Ÿï¼Œå­˜åœ¨ä¸€äº›bugï¼Œè¿˜å¾ˆéš¾ç”¨äºç”Ÿäº§ã€‚</p><p id="c4c3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦ä¸€æ–¹é¢ï¼ŒGraphQL.jsæœ¬èº«ä¸ä¼šè‡ªåŠ¨ç”ŸæˆTypeScriptç±»å‹ã€‚ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯åˆ†åˆ«å®šä¹‰TypeScriptç±»å‹å’Œå®ç°GrahphQLæ¨¡å¼ã€‚ä½†æ˜¯è¿™ä¸æ˜¯ä¸€ä¸ªèªæ˜çš„æ–¹æ³•ï¼Œå› ä¸ºGraphQLå®ç°æœ¬èº«ä¹ŸåŒ…å«ç±»å‹å®šä¹‰ã€‚ä½ çš„ä»£ç ä¸æ˜¯å¹²çš„ã€‚</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/b6ac2529621eb402a1de1d47f6f59528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oae4RAhI7BK5b7O3BDD36w.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">åˆ†åˆ«å®šä¹‰schemaå’ŒTypeScriptç±»å‹ã€‚</figcaption></figure><p id="e245" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<a class="ae kz" href="https://www.graphql-code-generator.com/" rel="noopener ugc nofollow" target="_blank"> GraphQLä»£ç ç”Ÿæˆå™¨</a>è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä»GraphQLå®ç°ä¸­è‡ªåŠ¨ç”ŸæˆTypeScriptç±»å‹ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="6fe4" class="nf lp it na b gy ng nh l ni nj">$ yarn add -D <a class="ae kz" href="http://twitter.com/graphql" rel="noopener ugc nofollow" target="_blank">@graphql</a>-codegen/cli  <a class="ae kz" href="http://twitter.com/graphql" rel="noopener ugc nofollow" target="_blank">@graphql</a>-codegen/typescript <a class="ae kz" href="http://twitter.com/graphql" rel="noopener ugc nofollow" target="_blank">@graphql</a>-codegen/typescript-resolvers</span></pre><p id="e420" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é¦–å…ˆï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªcodegençš„é…ç½®æ–‡ä»¶ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="9448" class="nf lp it na b gy ng nh l ni nj">// codegen.yml<br/>schema: <a class="ae kz" href="http://localhost:4000/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/graphql</a><br/>generates:<br/>  ./src/graphql/generatedTypes.ts:<br/>    plugins:<br/>      - typescript<br/>      - typescript-resolvers</span></pre><p id="dd6a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ‚¨åº”è¯¥å°†GraphQLæ¨¡å¼æŒ‡å®šç»™<code class="fe mx my mz na b">schema</code>é€‰é¡¹ã€‚<code class="fe mx my mz na b">schema</code>é€‰é¡¹ä¹Ÿåƒ<code class="fe mx my mz na b">.graphql</code>ä¸€æ ·æ¥å—GraphQLæ¨¡å¼æ–‡ä»¶ã€‚å’Œ<code class="fe mx my mz na b">typescript</code>æ’ä»¶ä»ä½ çš„æ¨¡å¼ç”ŸæˆTypeScriptç±»å‹ã€‚<code class="fe mx my mz na b">typescript-resolvers</code>ç”ŸæˆGraphQLæœåŠ¡å™¨ç±»å‹ï¼Œå¦‚resoversç±»å‹ï¼Œå®ƒåŸºäº<code class="fe mx my mz na b">typescript</code>æ’ä»¶ç”Ÿæˆçš„ç±»å‹ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="b572" class="nf lp it na b gy ng nh l ni nj">// package.json<br/>{<br/>  "scripts":{<br/>    "generate": "graphql-codegen"<br/>  }<br/>}</span><span id="8045" class="nf lp it na b gy nk nh l ni nj">$ yarn generate</span></pre><p id="4f3e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿è¡ŒGraphQLä»£ç ç”Ÿæˆå™¨åï¼Œåœ¨<code class="fe mx my mz na b">src/graphql/generatedTypes.ts</code>ä¸­å‘ç°äº†ä¸€ä¸ªæ–°æ–‡ä»¶ã€‚è¿™æœ‰ç‚¹å¤æ‚ï¼Œä½†ä½ åº”è¯¥çŸ¥é“æœ‰ä¸€äº›ç±»å‹çš„ç±»å‹ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="e2d1" class="nf lp it na b gy ng nh l ni nj">// src/graphql/generatedTypes.ts</span><span id="4ad7" class="nf lp it na b gy nk nh l ni nj">// Response type purely based on GraphQL schema<br/>export type User = {<br/>  __typename?: 'User';<br/>  email: Scalars['String'];<br/>  id: Scalars['ID'];<br/>  posts: PostConnection;<br/>  profile: Profile;<br/>};</span><span id="94a4" class="nf lp it na b gy nk nh l ni nj">// Query Arguments type<br/>export type QueryUsersArgs = {<br/>  after?: Maybe&lt;Scalars['String']&gt;;<br/>  before?: Maybe&lt;Scalars['String']&gt;;<br/>  first?: Maybe&lt;Scalars['Int']&gt;;<br/>  last?: Maybe&lt;Scalars['Int']&gt;;<br/>};</span><span id="4e4c" class="nf lp it na b gy nk nh l ni nj">// Resolver type<br/>export type ResolversTypes = {<br/>  Boolean: ResolverTypeWrapper&lt;Scalars['Boolean']&gt;;<br/>  ID: ResolverTypeWrapper&lt;Scalars['ID']&gt;;<br/>  Int: ResolverTypeWrapper&lt;Scalars['Int']&gt;;<br/>  PageInfo: ResolverTypeWrapper&lt;PageInfo&gt;;<br/>  Post: ResolverTypeWrapper&lt;Post&gt;;<br/>  PostConnection: ResolverTypeWrapper&lt;PostConnection&gt;;<br/>  PostEdge: ResolverTypeWrapper&lt;PostEdge&gt;;<br/>  Profile: ResolverTypeWrapper&lt;Profile&gt;;<br/>  Query: ResolverTypeWrapper&lt;{}&gt;;<br/>  String: ResolverTypeWrapper&lt;Scalars['String']&gt;;<br/>  User: ResolverTypeWrapper&lt;User&gt;;<br/>  UserConnection: ResolverTypeWrapper&lt;UserConnection&gt;;<br/>  UserEdge: ResolverTypeWrapper&lt;UserEdge&gt;;<br/>};</span><span id="a451" class="nf lp it na b gy nk nh l ni nj">// Resolver parent type<br/>export type ResolversParentTypes = {<br/>  Boolean: Scalars['Boolean'];<br/>  ID: Scalars['ID'];<br/>  Int: Scalars['Int'];<br/>  PageInfo: PageInfo;<br/>  Post: Post;<br/>  PostConnection: PostConnection;<br/>  PostEdge: PostEdge;<br/>  Profile: Profile;<br/>  Query: {};<br/>  String: Scalars['String'];<br/>  User: User;<br/>  UserConnection: UserConnection;<br/>  UserEdge: UserEdge;<br/>};</span></pre><p id="c38b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹è¿›è¡Œæ³¨é‡Šã€‚è®©æˆ‘ä»¬ä»graphqlç±»å‹å¼€å§‹æ³¨é‡Šã€‚åœ¨æ„å»ºgraphqlç±»å‹æ—¶ï¼Œä¸»è¦ä½¿ç”¨<code class="fe mx my mz na b">GraphQLObjectType</code>ã€‚å¦‚æœä½ æ£€æŸ¥ä¸€ä¸‹<code class="fe mx my mz na b">GraphQLObjectType</code>çš„ç±»å‹å®šä¹‰ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£å¦‚ä½•æ³¨é‡Šgraphqlç±»å‹ã€‚</p><div class="nu nv gp gr nw nx"><a href="https://github.com/graphql/graphql-js/blob/8261922bafb8c2b5c5041093ce271bdfcdf133c3/src/type/definition.ts#L754" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">graph QL-js/definition . ts at 8261922 ba FB 8 C2 b5 c 5041093 ce 271 BDF CDF 133 c 3 graph QL/graph QL-js</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">JavaScript-GraphQL-js/definition . tsçš„graph QLå‚è€ƒå®ç°ä½äºâ€¦</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">github.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol jz nx"/></div></div></a></div><p id="9419" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä»<code class="fe mx my mz na b">GraphqlQLLObjectType</code>å®šä¹‰æ¥çœ‹ï¼Œå®ƒæ¥å—ä¸¤ä¸ªæ³›å‹<code class="fe mx my mz na b">TSource</code>å’Œ<code class="fe mx my mz na b">TContext</code>ã€‚<code class="fe mx my mz na b">TSource</code>æ˜¯ç‰¹å®šå­—æ®µçˆ¶çº§è§£æå™¨çš„è¿”å›å€¼ç±»å‹ã€‚å·²ç»å¯ä»¥æ‰¹æ³¨äº†ï¼æ‰€ä»¥ä»ç®€å•çš„å¼€å§‹ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="d52d" class="nf lp it na b gy ng nh l ni nj">// src/graphql/types/postTypes.ts<br/>import { <br/>  GraphQLObjectType,<br/>  GraphQLInt,<br/>  GraphQLString,<br/>  GraphQLNonNull<br/>} from "graphql";<br/>import { ResolversParentTypes } from "../generatedTypes";<br/>import { Context } from "../context";</span><span id="df4b" class="nf lp it na b gy nk nh l ni nj">export const postType: GraphQLObjectType&lt;ResolversParentTypes["Post"], Context&gt; = <br/>new GraphQLObjectType({<br/>  name: "Post",<br/>  fields: {<br/>    id: { type: new GraphQLNonNull(GraphQLInt) },<br/>    title: { type: new GraphQLNonNull(GraphQLString) },<br/>    detail: { type: new GraphQLNonNull(GraphQLString) },<br/>  }<br/>});</span></pre><p id="8cef" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¯¹äºæ¯ä¸ªæºå¯¹è±¡ï¼ŒGraphQLä»£ç ç”Ÿæˆå™¨ç”Ÿæˆ<code class="fe mx my mz na b">ResolverParentTypes</code>ã€‚å› ä¸ºå®ƒå…·æœ‰æ‰€æœ‰æºå¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥æ‚¨å¯ä»¥å°†å…¶ç”¨äºæ‰€æœ‰æºç±»å‹ã€‚</p><p id="17fd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è™½ç„¶å¯¹äºæ²¡æœ‰è‡ªå®šä¹‰è§£æå™¨çš„graphqlç±»å‹æ¥è¯´ï¼ŒTypeScriptç±»å‹æ³¨é‡Šä¼¼ä¹æ²¡æœ‰æ„ä¹‰ï¼Œä½†è¿˜æ˜¯ä¸ºä»¥åçš„è‡ªå®šä¹‰è§£æå™¨è¿›è¡Œæ³¨é‡Šæ¯”è¾ƒå¥½ã€‚å’Œä¸‹é¢çš„å…¶ä»–graphqlç±»å‹ã€‚æ¥ä¸‹æ¥ï¼Œ<code class="fe mx my mz na b">profileType</code>ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="99ef" class="nf lp it na b gy ng nh l ni nj">// src/graphql/types/profileType.ts<br/>import { <br/>  ResolversParentTypes, <br/>  ResolversTypes<br/>} from "../generatedTypes";<br/>import { Context } from "../context";</span><span id="f994" class="nf lp it na b gy nk nh l ni nj">export const profileType: GraphQLObjectType&lt;ResolversParentTypes["Profile"], Context&gt; = new GraphQLObjectType({<br/>  name: "Profile",<br/>  fields: {<br/>    id: { type: new GraphQLNonNull(GraphQLInt) },<br/>    name: {<br/>      type: new GraphQLNonNull(GraphQLString),<br/>      resolve: (source, _args): ResolversTypes["String"] =&gt; {<br/>        return source.firstName + source.lastName;<br/>      }<br/>    },<br/>  }<br/>});</span></pre><p id="9f13" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœæ‚¨çš„ä¸€ä¸ªå­—æ®µæœ‰ä¸€ä¸ªè‡ªå®šä¹‰è§£æå™¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="fe mx my mz na b">ResolversTypes</code>ä½œä¸ºè¿”å›ç±»å‹æ³¨é‡Šã€‚ä½†æ˜¯å¦‚æœä½ å°è¯•ä¸€ä¸‹ï¼Œå¯èƒ½ä¼šå‘ç°å¦‚ä¸‹çš„ç±»å‹é”™è¯¯ã€‚</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/e92ef1314b0297981d20459c62f35876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iXyVus7ZDILvz11nRIU88g.png"/></div></div></figure><p id="3e2f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä»€ä¹ˆï¼Ÿï¼Ÿ<code class="fe mx my mz na b">source</code>æ²¡æœ‰<code class="fe mx my mz na b">firstName</code>å’Œ<code class="fe mx my mz na b">lastName</code>ï¼Ÿä½†æ˜¯sourceç¡®å®æ‹¥æœ‰è¿™ä¸¤è€…ï¼Œå› ä¸ºå®ƒæ¥è‡ªç§å­æ•°æ®ã€‚å¦‚æœæ‚¨æ£€æŸ¥GraphQLä»£ç ç”Ÿæˆå™¨ç”Ÿæˆçš„<code class="fe mx my mz na b">Profile</code>ç±»å‹å’Œç§å­æ•°æ®ï¼Œæ‚¨å°±èƒ½ç†è§£å®ƒã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="5b3d" class="nf lp it na b gy ng nh l ni nj">// generated Profile type in generatedTypes.ts<br/>export type Profile = {<br/>  __typename?: 'Profile';<br/>  id: Scalars['Int'];<br/>  name: Scalars['String'];<br/>};</span><span id="0ce9" class="nf lp it na b gy nk nh l ni nj">// seed data ProfileModel type<br/>export type ProfileModel = {<br/>  id: number;<br/>  firstName: string;<br/>  lastName: string;<br/>}</span></pre><p id="97f0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">GraphQLä»£ç ç”Ÿæˆå™¨ä»æ¶æ„ç”ŸæˆTypeScriptç±»å‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç”Ÿæˆçš„æ¦‚è¦æ–‡ä»¶ç±»å‹åªæœ‰<code class="fe mx my mz na b">name</code>å±æ€§ã€‚å¦å¤–ï¼Œç”Ÿæˆçš„è½®å»“ç±»å‹ç”¨äº<code class="fe mx my mz na b">ResolversParentType</code>ã€<code class="fe mx my mz na b">ResolversTypes</code>ç­‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¸¦æ³¨é‡Šçš„æºä»£ç ä¼¼ä¹æ²¡æœ‰<code class="fe mx my mz na b">firstName</code>å’Œ<code class="fe mx my mz na b">lastName</code>å±æ€§ã€‚</p><p id="27cb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿™ç§æ¨¡å¼å’Œåº”ç”¨ç¨‹åºç±»å‹ä¹‹é—´çš„ä¸åŒ¹é…é€šå¸¸å‘ç”Ÿåœ¨åˆ›å»ºè‡ªå®šä¹‰è§£æå™¨æ—¶ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæ‚¨å¯ä»¥ä½¿ç”¨GraphQLä»£ç ç”Ÿæˆå™¨çš„mapper configã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="686d" class="nf lp it na b gy ng nh l ni nj">// codegen.yml<br/>schema: <a class="ae kz" href="http://localhost:4000/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/graphql</a><br/>generates:<br/>  ./src/graphql/generatedTypes.ts:<br/>    plugins:<br/>      - typescript<br/>      - typescript-resolvers<br/>    config:<br/>      mappers:<br/>        Profile: ../../seed#ProfileModel<br/>        User: ../../seed#UserModel</span></pre><p id="badd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å› ä¸ºé…ç½®æ–‡ä»¶å’Œpostè¿æ¥ä¸åŒï¼Œæ‰€ä»¥å®ƒä»¬éƒ½æ˜ å°„åˆ°åº”ç”¨ç¨‹åºç±»å‹ã€‚å¦‚æœä½ æƒ³çŸ¥é“æ›´å¤šå…³äºmappersé…ç½®çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒGraphQLä»£ç ç”Ÿæˆå™¨æ–‡æ¡£ã€‚</p><div class="nu nv gp gr nw nx"><a href="https://www.graphql-code-generator.com/docs/plugins/typescript-resolvers" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">ç±»å‹è„šæœ¬è§£æå™¨| GraphQLä»£ç ç”Ÿæˆå™¨</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">è¿™ä¸ªæ’ä»¶ä¸ºGraphQL APIçš„è§£æå‡½æ•°ç”Ÿæˆç±»å‹è„šæœ¬ç­¾åã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶æ¥â€¦</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">www.graphql-code-generator.com</p></div></div></div></a></div><p id="e2e0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœæ‚¨å†æ¬¡è¿è¡Œ<code class="fe mx my mz na b">yarn generate</code>ï¼Œæ‚¨å°†çœ‹ä¸åˆ°ä»»ä½•é”™è¯¯ï¼æ‰€ä»¥æˆ‘ä»¬å»çœ‹ä¸€ä¸‹<code class="fe mx my mz na b">userType</code>ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="540d" class="nf lp it na b gy ng nh l ni nj">// src/graphql/types/userTypes.ts<br/>import { <br/>  ResolversParentTypes,<br/>  ResolversTypes,<br/>  UserPostsArgs<br/>} from "../generatedTypes";<br/>import { Context } from "../context";</span><span id="e044" class="nf lp it na b gy nk nh l ni nj">export const userType: GraphQLObjectType&lt;ResolversParentTypes["User"], Context&gt; = new GraphQLObjectType({<br/>  name: "User",<br/>  fields: {<br/>    id: { type: new GraphQLNonNull(GraphQLInt) },<br/>    email: { type: new GraphQLNonNull(GraphQLString) },<br/>    profile: { type: new GraphQLNonNull(profileType) },<br/>    posts: {<br/>      type: new GraphQLNonNull(<br/>        connectionDefinitions({ <br/>          nodeType: postType <br/>        }).connectionType,<br/>      ),<br/>      args: connectionArgs,<br/>      resolve: (source, args: UserPostsArgs, _ctx): ResolversTypes["PostConnection"] =&gt; {<br/>        return connectionFromArray(source.posts, args)<br/>      }<br/>    },<br/>  }<br/>});</span></pre><p id="23d7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å› ä¸ºpostså­—æ®µæœ‰è‡ªå®šä¹‰è§£æå™¨ï¼Œå¹¶ä¸”å®šä¹‰äº†argsï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨<code class="fe mx my mz na b">ResolverTypes</code>å’Œ<code class="fe mx my mz na b">UserPostsArgs</code>è¿›è¡Œæ³¨é‡Šã€‚æ¯ä¸ªå‚æ•°ç±»å‹éƒ½æ˜¯å®Œç¾ç”Ÿæˆçš„ã€‚è¿™æ ·æ‰“å­—å°±å®Œæˆäº†ï¼</p><p id="be8d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æœ€åä¸€ä¸ªæ˜¯ç”¨æˆ·æŸ¥è¯¢ã€‚å½“ä½ æ£€æŸ¥<code class="fe mx my mz na b">src/graphql/query.ts</code>æ—¶ï¼Œä½ å¯ä»¥çŸ¥é“<code class="fe mx my mz na b">users</code>æŸ¥è¯¢åªæ˜¯GraphQLçš„ä¸€ä¸ªå­—æ®µé…ç½®ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å…ˆæ£€æŸ¥GraphQL.jsçš„å­—æ®µé…ç½®å®šä¹‰ã€‚</p><p id="ab9d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://github.com/graphql/graphql-js/blob/c589c3d285cb1ec44b09bf0b50ec041ec083760c/src/type/definition.ts#L992" rel="noopener ugc nofollow" target="_blank">https://github . com/graph QL/graph QL-js/blob/c 589 C3 d 285 CB 1 EC 44 b 09 BF 0 b 50 EC 041 EC 083760 c/src/type/definition . ts # L992</a></p><p id="c4dd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ­£å¦‚æ‚¨æ‰€æ£€æŸ¥çš„ï¼Œ<code class="fe mx my mz na b">GraphQLFieldConfig</code>æ¥å—3ä¸ªæ³›å‹<code class="fe mx my mz na b">TSource</code>ã€<code class="fe mx my mz na b">TContext</code>ã€<code class="fe mx my mz na b">TArgs</code>ã€‚æˆ‘å¸Œæœ›ä½ å·²ç»äº†è§£äº†æ¯ä¸€ç§ç±»å‹ã€‚</p><pre class="ms mt mu mv gt nb na nc nd aw ne bi"><span id="d367" class="nf lp it na b gy ng nh l ni nj">// src/graphql/queries/users.ts<br/>import { GraphQLNonNull, GraphQLFieldConfig } from "graphql";<br/>import { <br/>  connectionDefinitions,<br/>  connectionArgs,<br/>  connectionFromArray<br/>} from "graphql-relay";<br/>import { userType } from "../types";<br/>import { <br/>  QueryUsersArgs,<br/>  ResolversParentTypes,<br/>  ResolversTypes }<br/>from "../generatedTypes";<br/>import { Context } from "../context";<br/>import { usersSeed } from "../../../seed";</span><span id="9e5c" class="nf lp it na b gy nk nh l ni nj">export const users: GraphQLFieldConfig&lt;ResolversParentTypes["Query"], Context, QueryUsersArgs&gt; = {<br/>  type: new GraphQLNonNull(<br/>    connectionDefinitions({ nodeType: userType }).connectionType,<br/>  ),<br/>  args: connectionArgs,<br/>  resolve: (_source, args, _ctx): ResolversTypes["UserConnection"] =&gt; {<br/>    return connectionFromArray(usersSeed, args);<br/>  },<br/>};</span></pre><p id="fbc9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å˜£ï¼å®Œç¾ï¼</p><p id="6314" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æœ¬æ–‡ä¸­ï¼ŒGraphQLå®ç°å’Œä»£ç ç”Ÿæˆæ­¥éª¤æ˜¯å®Œå…¨åˆ†å¼€çš„ã€‚ä½†æ˜¯ï¼Œå› ä¸ºGraphQLä»£ç ç”Ÿæˆå™¨å¯ä»¥åœ¨ç›‘è§†æ¨¡å¼ä¸‹è¿è¡Œï¼Œæ‰€ä»¥å¯ä»¥ç”¨TypeScriptç±»å‹å®ç°GraphQLæœåŠ¡å™¨ã€‚</p></div><div class="ab cl on oo hx op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="im in io ip iq"><p id="36ee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æœ¬æ–‡è§£é‡Šäº†å¦‚ä½•ç”¨GraphQL.jså’ŒTypeScriptå®ç°code first GraphQL serverã€‚è€Œä¸”é¢˜ç›®åˆ†çš„åƒä¸‹é¢è¿™æ ·ã€‚</p><ol class=""><li id="b5f2" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky lf lg lh li bi translated">å¦‚ä½•ç”¨ä»£ç ä¼˜å…ˆçš„æ–¹æ³•å®ç°GraphQLæ¨¡å¼</li><li id="189c" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">ä¸­ç»§æ ·å¼åˆ†é¡µ</li><li id="140e" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">å¦‚ä½•ç”¨GraphQLä»£ç ç”Ÿæˆå™¨é«˜æ•ˆæ‰“å­—</li></ol><p id="84c5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å®Œæˆçš„ä»£ç åœ¨è¿™ä¸ªåº“çš„<code class="fe mx my mz na b"><a class="ae kz" href="https://github.com/egurinko/code-first-graphql-example/tree/done" rel="noopener ugc nofollow" target="_blank">done</a></code>åˆ†æ”¯<a class="ae kz" href="https://github.com/egurinko/code-first-graphql-example/tree/done" rel="noopener ugc nofollow" target="_blank">ä¸Šã€‚å¦‚æœä½ æœ‰é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘ã€‚è°¢è°¢å¤§å®¶ï¼</a></p><h1 id="5c64" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">å‚è€ƒ</h1><ul class=""><li id="10eb" class="la lb it kd b ke mm ki mn km ou kq ov ku ow ky mw lg lh li bi translated"><a class="ae kz" href="https://graphql.org/graphql-js/" rel="noopener ugc nofollow" target="_blank"> GraphQL.js </a></li><li id="3057" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky mw lg lh li bi translated"><a class="ae kz" href="https://nexusjs.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL Nexus </a></li><li id="6124" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky mw lg lh li bi translated"><a class="ae kz" href="https://typegraphql.com/" rel="noopener ugc nofollow" target="_blank">ç±»å‹å›¾QL </a></li><li id="aa53" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky mw lg lh li bi translated"><a class="ae kz" href="https://www.graphql-code-generator.com/" rel="noopener ugc nofollow" target="_blank"> GraphQLä»£ç ç”Ÿæˆå™¨</a></li><li id="1907" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky mw lg lh li bi translated"><a class="ae kz" href="https://github.com/egurinko/code-first-graphql-example" rel="noopener ugc nofollow" target="_blank">èŒƒä¾‹çŸ¥è¯†åº“</a></li></ul></div></div>    
</body>
</html>