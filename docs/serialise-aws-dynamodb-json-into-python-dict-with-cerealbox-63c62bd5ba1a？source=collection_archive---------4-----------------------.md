# ç”¨ CerealBox å°† AWS DynamoDB JSON åºåˆ—åŒ–ä¸º Python dict

> åŸæ–‡ï¼š<https://itnext.io/serialise-aws-dynamodb-json-into-python-dict-with-cerealbox-63c62bd5ba1a?source=collection_archive---------4----------------------->

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è®¨è®ºä¸€ä¸ªå¿«é€Ÿæ¼”ç»ƒå’Œå‚è€ƒä»£ç ï¼Œä¸ºæ‚¨çš„ä¸‹ä¸€ä¸ª AWS åº”ç”¨ç¨‹åºç®€åŒ– DynamoDB JSON åºåˆ—åŒ–è¿‡ç¨‹ã€‚

![](img/33256d0c181775970df8ecbdde79ea49.png)

# ç»’æ¯›åœ¨å“ªé‡Œï¼Ÿ

å½“æˆ‘å¼€å§‹ä½¿ç”¨ DynamoDB æ—¶ï¼Œæˆ‘å¾ˆå–œæ¬¢å®ƒçš„è®¾ç½®å’Œä½¿ç”¨éå¸¸ç®€å•ï¼Œä¸ç”¨æ‹…å¿ƒå¯ä¼¸ç¼©æ€§ã€å¯æ‰©å±•æ€§æˆ–å¯ç”¨æ€§ã€‚ä¸€åˆ‡ä¼¼ä¹éƒ½å¾ˆæœ‰åºï¼Œç›´åˆ°æˆ‘åœ¨å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸Šåˆ›å»ºæ•°æ®æ¨¡å‹æ—¶é‡åˆ°äº†è¿™ä¸ª JSON åºåˆ—åŒ–çš„éº»çƒ¦ã€‚

â€œå¦‚æœä½ åšæŒä½¿ç”¨ commonsï¼Œäº‹æƒ…ä¼šå˜å¾—å¾ˆç®€å•ï¼Œä¸æ˜¯å—ï¼Ÿâ€

å½“è°ˆåˆ°æˆ‘ä»¬æœ€å–œæ¬¢çš„ AWS è§£å†³æ–¹æ¡ˆä¹‹ä¸€ DynamoDB æ•°æ®åº“æ—¶ï¼Œæƒ…å†µå°±ä¸ä¸€æ ·äº†ï¼Œè¿™å°±æ˜¯å®ƒæ¨¡ç³Šçš„åœ°æ–¹ã€‚

## æ•°æ®ç±»å‹

DynamoDB å›ºæœ‰åœ°æ”¯æŒ 3 ç§æ•°æ®ç±»å‹â€”â€”å­—ç¬¦ä¸²ã€æ•°å­—å’ŒäºŒè¿›åˆ¶â€”â€”å…¶ä½™çš„é€šç”¨æ•°æ®ç±»å‹æ˜¯è¿™äº›åŸºæœ¬ç±»å‹çš„ç®€å•æ´¾ç”Ÿã€‚å¦‚æœæˆ‘ä»¬å°è¯•å°†å®ƒä»¬ä¸é€šç”¨çš„ Java æ•°æ®ç±»å‹è¿›è¡Œæ˜ å°„ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å¦‚ä¸‹çš„æ˜ å°„

> **Java ç±»å‹** vs **DynamoDB ç±»å‹**
> *æ‰€æœ‰æ•°å­—ç±»å‹- >* `*N*` *(æ•°å­—ç±»å‹)
> å­—ç¬¦ä¸²- >* `*S*` *(å­—ç¬¦ä¸²ç±»å‹)
> å¸ƒå°”- >* `*BOOL*` *(å¸ƒå°”ç±»å‹)ï¼Œ0 æˆ– 1
> byte buffer->*`*B*`*(äºŒè¿›åˆ¶ç±»å‹)
> æ—¥æœŸ-ã€æ—¥æœŸ*

Java mapper å‚è€ƒ:[äºšé©¬é€Š DynamoDB å¼€å‘è€…æŒ‡å—](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBMapper.DataTypes.html)

# æˆ‘ä»¬çš„è®¾ç½®

ä¸ºäº†ç†è§£è¿™ä¸ªé—®é¢˜å¹¶æ¼”ç¤ºè§£å†³æ–¹æ¡ˆï¼Œè®©æˆ‘ä»¬ç”¨ä¸€äº›å…³äºåŠ¨ç”»ç”µå½±çš„éšæœºæ•°æ®å»ºç«‹ä¸€ä¸ª DynamoDB è¡¨(åªæ˜¯å› ä¸ºæˆ‘å–œæ¬¢å®ƒä»¬)ã€‚

**æ­¥éª¤ 1** :åˆ›å»º dynamodb è¡¨æ ¼â€œç”µå½±â€

![](img/33fa93c281b3f31f1dc233ab29329d84.png)

åˆ›å»º dynamodb è¡¨' **movies** 'ï¼Œä»¥' **title** 'ä¸ºåˆ†åŒºé”®ï¼Œä»¥' **genre** 'ä¸ºæ’åºé”®

**ç¬¬äºŒæ­¥**:æ·»åŠ ä¸åŒæ•°æ®ç±»å‹çš„æ ·æœ¬è®°å½•

> è¿™å¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•ä¸­çš„ä»»ä½•ä¸€ç§æ¥å®Œæˆâ€”â€”ä½¿ç”¨ Form è§†å›¾æˆ– DynamoDB è¡¨çš„ Create item é€‰é¡¹ä¸‹æä¾›çš„ JSON è§†å›¾

ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬åœ¨æŸäº›å‡è®¾ä¸‹ä¸ºç”µå½±â€œæµ·å…½â€æ·»åŠ ä¸€ä¸ªè®°å½•-

![](img/4a1ac7f1c91a90d55c42ef0f01f0f06f.png)

ç”µå½±è¡¨é¡¹ç›®æˆåˆ†çš„æ•°æ®ç±»å‹

![](img/621db7f43f547d7922f1a6b5e37324a7.png)

æ·»åŠ äº†å¤šç§æ•°æ®ç±»å‹çš„ç¤ºä¾‹ç”µå½±è®°å½•

**ç¬¬ä¸‰æ­¥**:å®¢æˆ·ç«¯ä»£ç è®¾ç½®

ç°åœ¨æ˜¯ Python å®¢æˆ·ç«¯â€”â€”è®©æˆ‘ä»¬æŠŠå®ƒè®¾ç½®æˆä¸€ä¸ªç”± 3 ä¸ªç±»ç»„æˆçš„ç»“æ„ï¼Œè¿™ä¸ªç»“æ„å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ï¼Œä»¥ä¾¿åœ¨å°†æ¥æä¾›é¢å¤–çš„åŠŸèƒ½

*   database helperâ€”â€”dynamo db æŸ¥è¯¢çš„å¤„ç†ç¨‹åº

*   MovieModel â€”æ•°æ®åº“è°ƒç”¨å’Œå“åº”æ ¼å¼ç®¡ç†å™¨

*   Main â€”è¿™æ˜¯ç®¡ç†æ‰§è¡Œæµçš„åœ°æ–¹ï¼Œå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆè¯·æ±‚ç”µå½±ç»†èŠ‚çš„ç”¨æˆ·ç•Œé¢

# é—®é¢˜æ˜¯

ä¸€èˆ¬æ¥è¯´ï¼Œè¦å°†ä»»ä½•å“åº”å¯¹è±¡è½¬æ¢ä¸º Python ä¸­å¯ç®¡ç†çš„ json æ ¼å¼çš„æµï¼Œæˆ‘ä»¬ä½¿ç”¨ json.dumps()ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åœ¨ MovieModel ç±»å†…æ³¨é‡Šçš„*å¸¸è§„æ–¹æ³•*ä¸­å¯¹ DynamoDB å“åº”æ‰€åšçš„å°è¯•ã€‚

## å»å†›äº‹åŒ–ä¼å›¾

è¦ç†è§£ DynamoDB json çš„ç±»å‹è½¬æ¢é—®é¢˜ï¼Œè¯·å–æ¶ˆæ³¨é‡Š MovieModel ç±»ä¸­çš„*å¸¸è§„æ–¹æ³•*ï¼Œå¹¶æ³¨é‡Š *CerealBox æ–¹æ³•*ã€‚ç°åœ¨è¿è¡Œä¸»æ–‡ä»¶â€”

$ python 3 main _ movie _ dynamo db _ example _ runner . py

## è§‚å¯Ÿå’Œä¾‹å¤–

è¿™å¯¼è‡´åœ¨*è¯­è¨€*å­—æ®µå‡ºç°é”™è¯¯â€”

TypeError:ç±»å‹é›†çš„å¯¹è±¡ä¸æ˜¯ JSON å¯åºåˆ—åŒ–çš„

å‡ºç°æ­¤é—®é¢˜æ˜¯å› ä¸º StringSet çš„è¾“å…¥æ•°æ®ç±»å‹æ— æ³•è¯†åˆ«ä¸ºå¸¸è§„ Java æ•°æ®ç±»å‹ï¼Œä»è€Œå¯¼è‡´åºåˆ—åŒ–å¤±è´¥ã€‚

# è§£å†³æ–¹æ¡ˆ

è¿™ä¸ªåºåˆ—åŒ–é—®é¢˜ç”± CerealBox åº“ç®¡ç†ï¼Œå®ƒæä¾›äº†å¯¹ DynamoDB JSON çš„ç°æˆæ”¯æŒã€‚ğŸ˜

æ ¹æ®ä»–ä»¬çš„å®˜æ–¹ç®€æŠ¥â€”

> CerealBox æ˜¯ä¸€ä¸ªç”¨äº python å­—å…¸çš„é€Ÿåº¦æå¿«çš„é›¶ä¾èµ–é€šç”¨åºåˆ—åŒ–å™¨/ååºåˆ—åŒ–å™¨ã€‚å®ƒæœ‰ä¸€ä¸ªå¯æ‰©å±•çš„ä½“ç³»ç»“æ„ï¼Œå…è®¸é€šè¿‡é…ç½®æ„å»ºè‡ªå®šä¹‰åºåˆ—åŒ–ç¨‹åºã€‚è¯¥æ¨¡å—è¿˜åŒ…æ‹¬å°†é€šç”¨æ•°æ®ç±»å‹åºåˆ—åŒ–ä¸º JSON å…¼å®¹å­—å…¸æˆ– DynamoDB JSON çš„å†…ç½®å®ç°ã€‚

å‚è€ƒå›¾ä¹¦é¦†:[https://github.com/a2d24/cerealbox](https://github.com/a2d24/cerealbox)

## ä½¿ç”¨ CerealBox åº“çš„ç”µå­ç›‘ç®¡

ç°åœ¨ï¼Œåœ¨ä¸Šé¢çš„åŒä¸€ä¸ªä¾‹å­ä¸­ï¼Œå½“ *CerealBox æ–¹æ³•*æœªè¢«æ³¨é‡Šå¹¶ä¸”*å¸¸è§„æ–¹æ³•*åœ¨ MovieModel ç±»ä¸­è¢«æ³¨é‡Šæ—¶ï¼Œå°è¯•è¿è¡Œä¸»ç¨‹åºã€‚è¿™å°†ä¼šä»¥æ­£ç¡®çš„æ ¼å¼åºåˆ—åŒ–å“åº”ï¼Œå¹¶åœ¨æ§åˆ¶å°ä¸Šæ‰“å°ç”µå½±çš„è¯¦ç»†ä¿¡æ¯â€”â€”

> > {'languages': ['è¥¿ç­ç‰™è¯­'ï¼Œ'æ³•è¯­'ï¼Œ'è‹±è¯­']ï¼Œ' userRating': '4.8 'ï¼Œ' is release ':Trueï¼Œ' releaseYear': '2022 'ï¼Œ' genre': 'Adventure 'ï¼Œ' title ':' The Sea Beast ' }
>>åœ¨æ•°æ®åº“ä¸­æ‰¾ä¸åˆ°ç”µå½±ã€‚

æˆ‘ä»¬ç°åœ¨å¯ä»¥ä»è¿™äº›åºåˆ—åŒ–çš„å“åº”æ•°æ®ä¸­æ„å»ºæ•°æ®æ¨¡å‹ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­åƒä½¿ç”¨å¸¸è§„ JSON ä¸€æ ·ä½¿ç”¨å®ƒã€‚

CerealBox ä½¿ç”¨ä¸‹é¢çš„æ˜ å°„å°† DynamoDB json åºåˆ—åŒ–ä¸º Python dictâ€”â€”

![](img/f5341d290b9912f1c480a916be437a5d.png)

CerealBox å®Œæˆ DynamoDB JSON åˆ° Python Dict çš„æ˜ å°„

# ç»“è®º

å› æ­¤ï¼Œè™½ç„¶ä½¿ç”¨ AWS DynamoDB æœ‰å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œä½†åœ¨è¿ç§»/é‡‡ç”¨äº‘çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ CerealBox å¯ä»¥éå¸¸å®¹æ˜“åœ°å¤„ç†å¤æ‚çš„åº”ç”¨ç¨‹åºæ•°æ®ã€‚â¤ï¸

# åŒ…è£…å®ƒ

è¯·åœ¨è¯„è®ºä¸­åˆ†äº«ğŸ’¬ä½ é‡åˆ°å¦‚æ­¤ä½çº§çš„è®¾è®¡é—®é¢˜ï¼Œå½“å¤§è±¡é€šè¿‡çš„æ—¶å€™ï¼Œä½ è¢«å¡ä½äº†ï¼Œä½ çš„å¤´ç—’ç€å»æ¨åŠ¨å®ƒçš„å°¾éƒ¨ã€‚ğŸ˜„

*   ğŸ‘â€”å¦‚æœè¿™ä¸ªå¿«é€Ÿçš„æ€»ç»“åœ¨æŸäº›æ–¹é¢å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œè¯·é¼“æŒ
*   ğŸ”—â€”è¯·ä¸å¥½å¥‡çš„äººä»¬åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œå¯»æ‰¾ç­”æ¡ˆ
*   â•â€”â€”æŒ‰ä¸‹**è·Ÿéš**å…³æ³¨æ›´å¤šå…³äº*äº‘*ã€*ç§»åŠ¨åº”ç”¨å¼€å‘*å’Œ*ç³»ç»Ÿ*çš„ç®€åŒ–å†…å®¹

[](https://betterprogramming.pub/the-burger-analogy-for-imperative-vs-declarative-styles-of-programming-3caf026fd553) [## æ±‰å ¡ç±»æ¯”:å‘½ä»¤å¼ä¸å£°æ˜å¼ç¼–ç¨‹é£æ ¼

### ç†è§£å†å²è¯„ä¼°ç³»ç»Ÿè®¾è®¡èŒƒä¾‹çš„åŸºæœ¬æ–¹æ³•

better ç¼–ç¨‹. pub](https://betterprogramming.pub/the-burger-analogy-for-imperative-vs-declarative-styles-of-programming-3caf026fd553) [](https://betterprogramming.pub/streaming-flutter-events-with-mosquitto-mqtt-broker-28998a3b81c2) [## ä½¿ç”¨ Mosquitto MQTT ä»£ç†çš„æµåª’ä½“é¢¤æŒ¯äº‹ä»¶

### é€šè¿‡ counter app ç¤ºä¾‹ç¨‹åºæ¢ç´¢ MQTT æ¶ˆæ¯ä¼ é€’åè®®åœ¨ Flutter ä¸­çš„å¼ºå¤§åŠŸèƒ½

better ç¼–ç¨‹. pub](https://betterprogramming.pub/streaming-flutter-events-with-mosquitto-mqtt-broker-28998a3b81c2)