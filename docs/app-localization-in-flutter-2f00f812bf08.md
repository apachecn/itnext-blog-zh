# é¢¤æŒ¯ä¸­çš„ App æœ¬åœ°åŒ–

> åŸæ–‡ï¼š<https://itnext.io/app-localization-in-flutter-2f00f812bf08?source=collection_archive---------0----------------------->

## é¢¤åŠ¨å®¹æ˜“å®šä½

![](img/b6bdc916f8f6a7d7c90096021a8ce3c4.png)

åº”ç”¨ç¨‹åºæœ¬åœ°åŒ–åœ¨ç§»åŠ¨åº”ç”¨ç¨‹åºå¼€å‘ä¸­éå¸¸å¸¸è§ï¼Œæˆ‘æƒ³å†™ä¸€ä¸ªæˆ‘æœ€å–œæ¬¢çš„ flutter åŒ…ã€‚App å›½é™…åŒ–ç”¨[***easy _ localization***](https://pub.dev/packages/easy_localization)åŒ…å¿«é€Ÿè½»æ¾ã€‚

## ä¸ºä»€ä¹ˆæ˜“ _ æœ¬åœ°åŒ–ï¼Ÿ

*   ğŸš€å¤šç§è¯­è¨€çš„ç®€å•ç¿»è¯‘
*   ğŸ”Œä½¿ç”¨ [Easy Localization Loader](https://github.com/aissat/easy_localization_loader) åŠ è½½ç¿»è¯‘ä¸º JSONã€CSVã€Yamlã€XML
*   ğŸ’¾å¯¹åŒºåŸŸè®¾ç½®æ›´æ”¹åšå‡ºååº”å¹¶ä¿æŒä¸å˜
*   âš¡æ”¯æŒå¤æ•°ã€æ€§åˆ«ã€åµŒå¥—ã€RTL åœ°åŒºç­‰ç­‰
*   â†©ï¸å›é€€åŒºåŸŸè®¾ç½®å¯†é’¥é‡å®šå‘
*   ç¼ºå°‘ç¿»è¯‘çš„â‰ï¸é”™è¯¯å°éƒ¨ä»¶
*   `Text`å’Œ`BuildContext`ä¸Šçš„â¤ï¸æ‰©å±•æ–¹æ³•
*   ğŸ’»æœ¬åœ°åŒ–æ–‡ä»¶å’Œå¯†é’¥çš„ä»£ç ç”Ÿæˆã€‚
*   ğŸ›¡ï¸é›¶å®‰å…¨
*   ğŸ–¨ï¸å¯å®šåˆ¶çš„è®°å½•å™¨ã€‚

## å…¥é—¨æŒ‡å—

*   è®©æˆ‘ä»¬æŠŠè¿™ä¸ªåŒ…æ·»åŠ åˆ°æˆ‘ä»¬çš„`pubspec.yaml`

```
dependencies:
  easy_localization: ^3.0.0
```

*   ç„¶åï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶åƒè¿™æ ·æ·»åŠ ç¿»è¯‘æ–‡ä»¶ğŸ‘‡ğŸ‘‡

![](img/733d29c1bca74be9d360279ee3f87017.png)

*   åœ¨`pubspec.yaml`ä¸­ç”³æŠ¥æ‚¨çš„èµ„äº§æœ¬åœ°åŒ–ç›®å½•:

```
flutter:
  assets:
    - assets/lang/
```

*   è¦åœ¨ iOS ä¸Šè¿›è¡Œç¿»è¯‘ï¼Œæ‚¨éœ€è¦å°†æ”¯æŒçš„åŒºåŸŸè®¾ç½®æ·»åŠ åˆ°`ios/Runner/Info.plist`ä¸­ï¼Œå¦‚å‰æ‰€è¿°

```
<key>CFBundleLocalizations</key>
<array>
	<string>en</string>
	<string>fr</string>
</array>
```

*   ä¹‹åï¼Œè®©æˆ‘ä»¬è¿™æ ·ç¼–è¾‘æˆ‘ä»¬çš„`main.dart`ğŸ‘‡ğŸ‘‡

ç°åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå·²ç»å‡†å¤‡å¥½æ”¹å˜å’Œä¿å­˜é€‰æ‹©çš„è¯­è¨€ã€‚æ‚¨å¯ä»¥å°† HomePage ç±»åˆ›å»ºä¸ºä¸€ä¸ªæœ‰çŠ¶æ€çš„å°éƒ¨ä»¶ï¼Œå¸¦æœ‰æ‚¨æƒ³è¦çš„å°éƒ¨ä»¶å’Œé¦–é€‰çš„ Ui è®¾è®¡ã€‚åœ¨ä½ çš„è¯­è¨€ JSON æ–‡ä»¶ä¸­æ·»åŠ ä½ éœ€è¦ç¿»è¯‘çš„å•è¯ã€‚æ·»åŠ å°½å¯èƒ½å¤šçš„ JSON æ–‡ä»¶ï¼Œå¹¶å°†è¯¥è¯­è¨€æ·»åŠ åˆ°æ”¯æŒçš„è¯­è¨€ç¯å¢ƒä¸­ã€‚æˆ‘åœ¨æ¼”ç¤ºä¸­ä½¿ç”¨çš„é”®å¦‚ä¸‹ã€‚

## æ©ã€‚JSON

## æ³•éƒ JSON

*   è¦å¾—åˆ°çš„è¯ï¼Œåªéœ€å¯¼å…¥åŒ…ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹ä¾‹çš„å…³é”®ã€‚

```
**'title'**.tr()
```

*   æ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„ä¸‹æ‹‰èœå•ã€å•é€‰æŒ‰é’®æˆ–ä»»ä½•å°éƒ¨ä»¶æ¥æ›´æ”¹è¯­è¨€ã€‚æˆ‘åªæ˜¯ä½¿ç”¨äº†è‡ªå®šä¹‰æ ·å¼çš„ä¸‹æ‹‰èœå•ã€‚æ‚¨ä¹Ÿå¯ä»¥ä¿å­˜æœ€åæ›´æ”¹çš„è¯­è¨€ï¼Œå°†å…¶è®¾ç½®ä¸ºé»˜è®¤è¯­è¨€ã€‚
*   åœ¨åˆ›å»ºæˆ‘ä»¬çš„ä¸‹æ‹‰èœå•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆåˆ›å»ºæˆ‘ä»¬çš„åŸºæœ¬è¯­è¨€ç±»ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨å°†æ¥ä½¿ç”¨å®ƒã€‚

*   å¹¶æ·»åŠ è®©æˆ‘ä»¬ç”¨æˆ‘ä»¬çš„ç±»åˆ›å»ºæˆ‘ä»¬çš„`langList`ã€‚

*   é€šè¿‡è¿™ä¸€è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹æ‹‰èœå•ä¸­æœ€åä¿å­˜çš„è¯­è¨€ã€‚

```
Language? selectedLang;selectedLang = languageList.singleWhere((e) => e.locale == context.locale);
```

*   è®©æˆ‘ä»¬åƒè¿™æ ·åˆ›å»ºä¸‹æ‹‰åˆ—è¡¨ã€‚

*   ç„¶ååœ¨æˆ‘ä»¬çš„`homepage.dart`ä¸­ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„ JSON æ–‡ä»¶è¿›è¡Œç¿»è¯‘ã€‚

ä»…æ­¤è€Œå·²ï¼ï¼ï¼è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæ”¹å˜è¯­è¨€ï¼Œçœ‹çœ‹ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„é“¾æ¥æ‰¾åˆ°æ›´å¤šå…³äºè¿™ä¸ªåŒ…çš„ä¿¡æ¯ã€‚

[](https://github.com/SncOne/localization) [## GitHubâ€”SNC one/æœ¬åœ°åŒ–

### æ­¤æ—¶æ‚¨ä¸èƒ½æ‰§è¡Œè¯¥æ“ä½œã€‚æ‚¨å·²ä½¿ç”¨å¦ä¸€ä¸ªæ ‡ç­¾é¡µæˆ–çª—å£ç™»å½•ã€‚æ‚¨å·²åœ¨å¦ä¸€ä¸ªé€‰é¡¹å¡ä¸­æ³¨é”€ï¼Œæˆ–è€…â€¦

github.com](https://github.com/SncOne/localization) 

## å¥–é‡‘

**è®ºæ®ç¤ºä¾‹**

```
{
   "msg":"{} are written in the {} language",
   "msg_named":"Easy localization are written in the {lang} language",
   "msg_mixed":"{} are written in the {lang} language",
   "gender":{
      "male":"Hi man ;) {}",
      "female":"Hello girl :) {}",
      "other":"Hello {}"
   }
}*// args*
Text('msg').tr(args: ['Easy localization', 'Dart']),*// namedArgs*
Text('msg_named').tr(namedArgs: {'lang': 'Dart'}),*// args and namedArgs*
Text('msg_mixed').tr(args: ['Easy localization'], namedArgs: {'lang': 'Dart'}),*// gender*
Text('gender').tr(gender: _gender ? "female" : "male"),
```

ğŸ”¥**å¤æ•°** `**plural()**`

ä½ å¯ä»¥ç”¨å¤æ•°æ¥ç¿»è¯‘ã€‚è¦åœ¨ç¿»è¯‘åçš„å­—ç¬¦ä¸²ä¸­æ’å…¥ä¸€ä¸ªæ•°å­—ï¼Œè¯·ä½¿ç”¨`{}`ã€‚æ”¯æŒæ•°å­—æ ¼å¼ï¼Œæ›´å¤šä¿¡æ¯è¯·é˜…è¯» [NumberFormat](https://pub.dev/documentation/intl/latest/intl/NumberFormat-class.html) ç±»æ–‡æ¡£ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨[String]æˆ–[Text] widget çš„æ‰©å±•æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`plural()`ä½œä¸ºé™æ€å‡½æ•°ã€‚

ç¤ºä¾‹:

```
{
  "day": {
    "zero":"{} Ğ´Ğ½ĞµĞ¹",
    "one": "{} Ğ´ĞµĞ½ÑŒ",
    "two": "{} Ğ´Ğ½Ñ",
    "few": "{} Ğ´Ğ½Ñ",
    "many": "{} Ğ´Ğ½ĞµĞ¹",
    "other": "{} Ğ´Ğ½ĞµĞ¹"
  },
  "money": {
    "zero": "You not have money",
    "one": "You have {} dollar",
    "many": "You have {} dollars",
    "other": "You have {} dollars"
  }
}
```

**æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼**ğŸ‘ğŸ‘

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹å‡»ğŸ‘æŒ‰é’®(ä½ çŸ¥é“ä½ å¯ä»¥å‡åˆ° 50 å—ï¼Ÿ)

å¦å¤–ï¼Œåˆ«å¿˜äº†å…³æ³¨æˆ‘ï¼Œåœ¨ä½ çš„ç¤¾äº¤ç½‘ç«™ä¸Šåˆ†äº«è¿™ç¯‡æ–‡ç« ï¼ä¹Ÿè®©ä½ çš„æœ‹å‹çŸ¥é“å§ï¼ï¼