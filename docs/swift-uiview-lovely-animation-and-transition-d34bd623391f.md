# å¿«é€Ÿ UIView å¯çˆ±çš„åŠ¨ç”»å’Œè¿‡æ¸¡

> åŸæ–‡ï¼š<https://itnext.io/swift-uiview-lovely-animation-and-transition-d34bd623391f?source=collection_archive---------0----------------------->

ä¸ºäº†æ”¹å–„æ•´ä½“ç”¨æˆ·ä½“éªŒï¼Œæ“ä½œç³»ç»Ÿåº”ç”¨ç¨‹åºé€šå¸¸ä½¿ç”¨å¤§é‡å¹³æ»‘çš„åŠ¨ç”»æ¥ä½¿åº”ç”¨ç¨‹åºçœ‹èµ·æ¥æ›´æ¼‚äº®ã€‚å¤§é‡çš„ iOS é»˜è®¤å°éƒ¨ä»¶å·²ç»ç”¨ UIKit åŠ¨ç”»å®ç°äº†ã€‚ä¾‹å¦‚ï¼Œåœ¨ UINavigationController ä¸­çš„é¡µé¢ä¹‹é—´è½¬æ¢æ—¶çš„åŠ¨ç”»ï¼Œå‘ˆç° UIViewController å’Œæ˜¾ç¤ºç³»ç»Ÿé”®ç›˜ç­‰ã€‚åŒæ—¶ï¼Œè‹¹æœå¼€æ”¾ UIView åŠ¨ç”» APIï¼Œä¾›å¼€å‘è€…è½»æ¾åˆ›å»ºè‡ªå®šä¹‰åŠ¨ç”»ã€‚è®©æˆ‘ä»¬ç®€å•çœ‹ä¸€ä¸‹é‚£äº›é»˜è®¤åŠ¨ç”»æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚

![](img/53ca052ba752b590c94d1683904f1e35.png)

æ›²çº¿å’Œè¿‡æ¸¡åŠ¨ç”»

# æ›²çº¿åŠ¨ç”»

UIKit ä¸­æ€»å…±æœ‰ 4 ä¸ªå¸¸ç”¨çš„æ›²çº¿åŠ¨ç”»é€‰é¡¹ï¼Œæ¯ä¸ªé€‰é¡¹åœ¨ä¸åŒçš„æ—¶é—´å¸§ä¸­çš„é€Ÿåº¦éƒ½ä¸åŒã€‚

![](img/cbfc8f33b0d3595d73debd1475756b72.png)

æ‰€æœ‰åŠ¨ç”»éƒ½æœ‰ç›¸åŒçš„æŒç»­æ—¶é—´â€” 1.0 ç§’

![](img/262bdfe1d2139e93249867e4861e4c2f.png)

ä¸‹é¢æ˜¯ç›¸åº”çš„æè¿°:
*(å¦‚æœä½ å·²ç»ä»ä¸Šå›¾ä¸­å¾—åˆ°äº†ä¸»æ—¨ï¼Œå¯ä»¥è·³è¿‡ğŸ˜„)*

1.  **curveEaseIn (Blue)** è™½ç„¶å®ƒçš„åˆé€Ÿåº¦å¾ˆä½ï¼Œä½†åœ¨**æ’å®šåŠ é€Ÿåº¦**ä¸‹ï¼Œå®ƒåœ¨ç»ˆç‚¹è¾¾åˆ°æœ€é«˜é€Ÿåº¦ã€‚
2.  **curveEaseOut(çº¢è‰²)** ä¸€ä¸ª`curveEaseIn`çš„æ°´å¹³ç¿»è½¬ã€‚
3.  **curveEaseInOut(é»„è‰²)** `curveEaseIn`å‰åŠæ®µå’Œ`curveEaseOut`ååŠæ®µçš„ç»„åˆã€‚
4.  **curveLinear(ç»¿è‰²)** éšç€**é›¶åŠ é€Ÿåº¦**ï¼Œå…¶é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»ä¸­å¤§è‡´ä¿æŒä¸å˜ã€‚

## å…¶ä»–æ›²çº¿åŠ¨ç”»é€‰é¡¹:

1.  **allowUserInteraction** ğŸ˜…ï¼å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡è®¾ç½®ä¸€ä¸ªé¢å¤–çš„åŠ¨ç”»é€‰é¡¹`allowUserInteraction`å’ŒåŸæ¥çš„æ›²çº¿åŠ¨ç”»é€‰é¡¹ï¼Œå¯ä»¥å¯ç”¨äº¤äº’ã€‚è§ä¸‹æ–‡:

2.**é‡å¤**

![](img/26172f17a697a24952dc3e7ebabcc105.png)

ä¸è¨€è‡ªæ˜ã€‚ç®€å•åœ°æ— é™é‡å¤åŸå§‹åŠ¨ç”»ã€‚è¦é˜»æ­¢å®ƒ:

3.**è‡ªåŠ¨åè½¬**

![](img/92f8aea4a9f035f5ee4436e93d9c2a20.png)

*   `autoreverse`çš„å®šä¹‰æœ‰ç‚¹æ£˜æ‰‹ã€‚å‘å‰åŠ¨ç”»ä¸å‘ååŠ¨ç”»ç›¸åã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‘å‰åŠ¨ç”»æ˜¯`curveEaseIn`ï¼Œå‘ååŠ¨ç”»æ˜¯`curveEaseOut`ã€‚
*   æ³¨æ„ï¼Œ`autoreverse`å¿…é¡»ä¸`repeat`é…åˆä½¿ç”¨ï¼Œå¦åˆ™åå‘åŠ¨ç”»å®Œæˆåï¼Œè§†å›¾ä¼šç«‹å³ç§»åŠ¨åˆ°æ­£å‘åŠ¨ç”»çš„åŸå§‹ç›®çš„åœ°ã€‚

# æ—æ³¨:å…³æ³¨ NSLayoutConstraint

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨è§‚çœ‹åŠ¨ç”»çš„è¿‡ç¨‹ä¸­ï¼Œä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼ŸğŸ§

```
Q1: What happened to the original leading margin constraint when UIView (e.g. easeInLabel) is horizontally moved? Constantly updating?Q2: If other views' Auto-Layout constraint is pinned to the position of easeInLabel, will they move at the same time? Will there be any chaos? 
```

è‹¹æœå…¬å¸æ˜ç¡®è¡¨ç¤ºï¼Œå³ä½¿æœ‰ä»»ä½•è½¬æ¢åº”ç”¨äºä»»ä½• UIViewï¼Œè‡ªåŠ¨å¸ƒå±€ä¹Ÿä¸ä¼šæ›´æ–°ã€‚è¿™é˜²æ­¢äº†å¯¹å…¶ä»–ç›¸å…³ UIView çš„ä»»ä½•é‡æ–°è°ƒæ•´ï¼Œå› æ­¤ä¸ä¼šå‘ç”Ÿæ··ä¹±ã€‚

> åœ¨ iOS 8.0 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œ`*transform*`å±æ€§ä¸å½±å“è‡ªåŠ¨å¸ƒå±€ã€‚è‡ªåŠ¨å¸ƒå±€æ ¹æ®è§†å›¾æœªå˜æ¢çš„æ¡†æ¶è®¡ç®—è§†å›¾çš„å¯¹é½çŸ©å½¢ã€‚
> å‚è€ƒ:[è½¬æ¢â€” UIView |è‹¹æœå¼€å‘è€…æ–‡æ¡£](https://developer.apple.com/documentation/uikit/uiview/1622459-transform)

# è¿‡æ¸¡

å…±æœ‰ 7 ä¸ªå¸¸è§çš„è¿‡æ¸¡åŠ¨ç”»é€‰é¡¹ï¼Œå¯åˆ†ä¸º 3 ç±»ï¼Œç”± UIKit æä¾›ã€‚å®ƒä»¬æ˜¯:

1.  è½»å¼¹

*   transitionFlipFromLeft
*   transitionFlipFromRight
*   è¿‡æ¸¡è§¦å‘å™¨
*   transitionFlipFromBottom

![](img/e6e73b0e1e45fdc8c20c8ed49d822727.png)

2.å†°ä¸ŠæºœçŸ³æ¸¸æˆ

*   è¿‡æ¸¡æ›²çº¿
*   è¿‡æ¸¡æ›²çº¿ä¸‹é™

![](img/5d9b756376cd6062455105bc29b72345.png)

3.å…¶ä»–çš„

*   è¿‡æ¸¡äº¤å‰æº¶è§£

![](img/aa7910fc5e98111e27effdf0cbc0dd83.png)

## ä¸å…¶ä»–`UIView.AnimationOptions`çš„ç»„åˆ

è¿‡æ¸¡åŠ¨ç”»ä¹Ÿå¯ä»¥åƒä¹‹å‰æ˜¾ç¤ºçš„é‚£æ ·ä¸`allowUserInteraction`ã€`repeat`å’Œ`autoreverse`ä¸€èµ·å·¥ä½œã€‚ä¸‹é¢æ˜¯æ¼”ç¤ºä»£ç :

# ç»“è®º

1.  åŠ¨ç”»æ˜¯è®© iOS app çœ‹èµ·æ¥æœ‰å¸å¼•åŠ›çš„æœ‰åŠ›å·¥å…·ï¼
2.  å¸¸è§çš„åŠ¨ç”»æœ‰ä¸¤ç§ï¼Œå³â€œæ›²çº¿åŠ¨ç”»â€å’Œâ€œè¿‡æ¸¡åŠ¨ç”»â€ã€‚
3.  æ›²çº¿åŠ¨ç”»é€‰é¡¹åŒ…æ‹¬`curveEaseIn`ã€`curveEaseOut`ã€`curveEaseInOut`å’Œ`linear`ã€‚å®ƒä»¬çš„åˆé€Ÿåº¦å’Œç»ˆé€Ÿåº¦ä¸åŒã€‚
4.  è¿‡æ¸¡é€‰é¡¹åŒ…æ‹¬ä¸‰ä¸ªä¸»è¦ç±»åˆ«ï¼Œå³`flipping`ã€`curling`å’Œ`other`ã€‚æ‰€æœ‰é€‰é¡¹ä¸º`transitionFlipFromLeft`ã€`transitionFlipFromRight`ã€`transitionFlipFromTop`ã€`transitionFlipFromBottom`ã€`transitionCurlUp`ã€`transitionCurlDown`å’Œ`transitionCrossDissolve`ã€‚
5.  æ›²çº¿åŠ¨ç”»å’Œè¿‡æ¸¡åŠ¨ç”»éƒ½å¯ä»¥ä¸å…¶ä»–åŠ¨ç”»é€‰é¡¹é…åˆä½¿ç”¨ï¼Œå¦‚`allowUserInteraction`ã€`repeat`å’Œ`autoreverse`ã€‚
6.  å¯¹äº`autoreverse`ï¼Œå¿…é¡»å°†**ä¸`repeat`è®¾ç½®åœ¨ä¸€èµ·ï¼Œå¦åˆ™ä¼šäº§ç”Ÿå¥‡æ€ªçš„åŠ¨ç”»ã€‚**

å¦‚éœ€äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·åœ¨[Twitter @ myrik _ chow](https://twitter.com/myrick_chow)å…³æ³¨æˆ‘ã€‚æ„Ÿè°¢æ‚¨é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚ç¥æ‚¨æ„‰å¿«ï¼ğŸ˜„