<html>
<head>
<title>Raw Manifests, Helm, Kustomize</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åŸå§‹æ¸…å•ï¼Œå¤´ç›”ï¼ŒKustomize</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/k8s-tips-manifests-helm-kustomize-12f72f878022?source=collection_archive---------0-----------------------#2021-04-01">https://itnext.io/k8s-tips-manifests-helm-kustomize-12f72f878022?source=collection_archive---------0-----------------------#2021-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1687" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">åœ¨Kubernetesä¸­éƒ¨ç½²åº”ç”¨ç¨‹åºçš„å‡ ç§æ–¹å¼</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2017c3a1212fbc8746e8880425d12ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jaKfeeRC-UeXXzB3NttAeA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">ç…§ç‰‡ç”±<a class="ae ky" href="https://unsplash.com/@miracleday?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">åŸƒç³å¨œÂ·è«æ—¥ç»´æ´›</a>åœ¨<a class="ae ky" href="https://unsplash.com/s/photos/installation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</figcaption></figure><p id="2b4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç¤ºä¾‹å¾®æœåŠ¡åº”ç”¨ç¨‹åº<a class="ae ky" href="https://gitlab.com/voting-application/votingapp" rel="noopener ugc nofollow" target="_blank"> VotingApp </a>ï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„æ–¹æ³•å’Œå·¥å…·å°†å…¶éƒ¨ç½²åœ¨Kubernetesä¸­ã€‚æˆ‘ä»¬å°†çœ‹åˆ°æ¯ä¸€ä¸ªçš„ç‰¹ç‚¹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æœ‰ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå“ªä¸€ä¸ªæ˜¯æœ€é€‚åˆä½ çš„éœ€æ±‚ã€‚</p><ul class=""><li id="db7a" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">ä½¿ç”¨yamlè§„èŒƒ</li><li id="c7ec" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">é€šè¿‡<a class="ae ky" href="https://helm.sh" rel="noopener ugc nofollow" target="_blank">æŒèˆµ</a>å›¾è¡¨</li><li id="ad68" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">ä½¿ç”¨<a class="ae ky" href="https://kustomize.io/" rel="noopener ugc nofollow" target="_blank"> Kustomize </a></li></ul><p id="3229" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">â„¹ï¸å¦‚æœä½ ä¸çŸ¥é“VotingAppï¼Œè¯·æŸ¥çœ‹è¿™ç¯‡ä»‹ç»è¯¥åº”ç”¨ç¨‹åºåŠå…¶ä¸åŒç‰ˆæœ¬çš„çŸ­æ–‡<a class="ae ky" href="https://lucjuggery.medium.com/the-votingapp-reloaded-e4f237b8f3bf" rel="noopener">ã€‚</a></p><p id="c0ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨ä¸‹é¢çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹<a class="ae ky" href="https://k0sproject.io/" rel="noopener ugc nofollow" target="_blank"> k0s </a> Kubernetesé›†ç¾¤ï¼Œå¹¶å±•ç¤ºå¦‚ä½•ä½¿ç”¨åŸå§‹æ¸…å•ã€<a class="ae ky" href="https://helm.sh" rel="noopener ugc nofollow" target="_blank"> helm </a>å’Œ<a class="ae ky" href="https://kustomize.io" rel="noopener ugc nofollow" target="_blank"> kustomize </a>éƒ¨ç½²ä¸åŒç‰ˆæœ¬çš„VotingAppã€‚</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="96c8" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">k0så•èŠ‚ç‚¹é›†ç¾¤çš„è®¾ç½®</h1><p id="4910" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨æœ¬åœ°æœºå™¨ä¸Šå¿«é€Ÿè®¾ç½®ä¸€ä¸ªKubernetesé›†ç¾¤ã€‚åœ¨æœ¬åœ°è¿è¡ŒKubernetesçœŸçš„å¾ˆå®¹æ˜“ï¼Œå› ä¸ºæœ‰å¾ˆå¤šå¯ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚ä»…ä¸¾å‡ ä¸ªä¾‹å­:</p><ul class=""><li id="0861" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://k0sproject.io/" rel="noopener ugc nofollow" target="_blank"> k0s </a></li><li id="5bbd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://k3s.io" rel="noopener ugc nofollow" target="_blank"> k3s </a></li><li id="0e96" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://microk8s.io/" rel="noopener ugc nofollow" target="_blank"> microK8s </a></li><li id="165e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">è¿·ä½ åº“æ¯”</li><li id="eafe" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://kind.sigs.k8s.io/docs/" rel="noopener ugc nofollow" target="_blank">ç§ç±»</a></li></ul><p id="07a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<a class="ae ky" href="https://k0sproject.io/" rel="noopener ugc nofollow" target="_blank"> k0s </a>å¹¶ä½¿ç”¨<a class="ae ky" href="https://vagrantup.com" rel="noopener ugc nofollow" target="_blank">æµæµªæ±‰</a>å’Œ<a class="ae ky" href="https://virtualbox.org" rel="noopener ugc nofollow" target="_blank"> VirtualBox </a>è¿›è¡Œå®‰è£…ã€‚</p><p id="ae91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä¸‹é¢çš„<code class="fe nn no np nq b">Vagrantfile</code>ã€‚</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="514a" class="nv mr it nq b gy nw nx l ny nz">Vagrant.configure("2") do |config|<br/> config.vm.box = "hashicorp/bionic64"<br/> config.vm.network "private_network", ip: "192.168.33.11"<br/> config.vm.provision "shell", inline: &lt;&lt;-SHELL<br/>  <!-- -->export K0S_VERSION=v0.12.0<br/>  curl -sSLf https://get.k0s.sh | sudo --preserve-env=K0S_VERSION sh<br/>  sudo k0s install controller --single<br/>  sudo systemctl start k0scontroller.service<br/> SHELL<br/>end</span></pre><p id="1941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ¥ä¸‹æ¥ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºå¹¶åœ¨å…¶ä¸­å®‰è£…k0s:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="eae9" class="nv mr it nq b gy nw nx l ny nz">$ vagrant up</span></pre><p id="b517" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ–°åˆ›å»ºçš„è™šæ‹Ÿæœºä¸­è¿è¡Œä¸€ä¸ªæ ¹shell:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="b8f4" class="nv mr it nq b gy nw nx l ny nz">$ vagrant ssh</span><span id="0ce3" class="nv mr it nq b gy oa nx l ny nz">vagrant@vagrant:~$ sudo su -</span></pre><p id="afd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä½¿ç”¨k0sé™„å¸¦çš„<code class="fe nn no np nq b">kubectl</code>å®¢æˆ·æœº(éå¸¸æ–¹ä¾¿çš„BTW ),æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤çœ‹åˆ°æˆ‘ä»¬çš„å•èŠ‚ç‚¹é›†ç¾¤(èŠ‚ç‚¹å¤„äºå°±ç»ªçŠ¶æ€å¤§çº¦éœ€è¦ä¸€åˆ†é’Ÿ):</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="45b8" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl get nodes<br/>NAME      STATUS   ROLES    AGE   VERSION<br/>vagrant   Ready    &lt;none&gt;   40s   v1.20.5-k0s1</span></pre><p id="a604" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åï¼Œæˆ‘ä»¬å…‹éš†VotingAppçš„<a class="ae ky" href="https://gitlab.com/voting-application/config.git" rel="noopener ugc nofollow" target="_blank">é…ç½®åº“</a>ï¼Œå¹¶åœ¨å…¶ä¸­å¯¼èˆª:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="d168" class="nv mr it nq b gy nw nx l ny nz"># git clone https://gitlab.com/voting-application/config.git<br/># cd config</span></pre><p id="465a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨<strong class="lb iu">é…ç½®</strong>ä¸­æœ‰å‡ ä¸ªæ–‡ä»¶å¤¹:æ¯ä¸ªæ–‡ä»¶å¤¹éƒ½ä¸“ç”¨äºä¸€ä¸ªæˆ‘ä»¬å¯ä»¥ç”¨æ¥éƒ¨ç½²VotingAppçš„å·¥å…·:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="7666" class="nv mr it nq b gy nw nx l ny nz"># tree -L 1 .<br/>.<br/>â”œâ”€â”€ README.md<br/>â”œâ”€â”€ compose<br/>â”œâ”€â”€ helm<br/>â”œâ”€â”€ kustomize<br/>â”œâ”€â”€ manifests<br/>â””â”€â”€ utils</span></pre><p id="5aa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°†é¦–å…ˆä½¿ç”¨åŒ…å«åœ¨<strong class="lb iu">manifest</strong>æ–‡ä»¶å¤¹ä¸­çš„åŸå§‹yamlè§„èŒƒæ¥éƒ¨ç½²VotingAppã€‚</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="abbe" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">ä½¿ç”¨åŸå§‹yamlè§„èŒƒè¿›è¡Œéƒ¨ç½²</h1><p id="2c0d" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><em class="ob"> manifests </em>æ–‡ä»¶å¤¹åŒ…å«å‡ ä¸ªå­æ–‡ä»¶å¤¹ï¼Œæ¯ä¸ªå­æ–‡ä»¶å¤¹åŒ…å«ç»™å®šç‰ˆæœ¬çš„VotingApp (v1ã€v2å’Œv3)çš„è§„èŒƒ:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="3553" class="nv mr it nq b gy nw nx l ny nz"># tree manifests<br/>manifests<br/>â”œâ”€â”€ v1<br/>â”‚   â”œâ”€â”€ db-deployment.yaml<br/>â”‚   â”œâ”€â”€ db-service.yaml<br/>â”‚   â”œâ”€â”€ redis-deployment.yaml<br/>â”‚   â”œâ”€â”€ redis-service.yaml<br/>â”‚   â”œâ”€â”€ result-deployment.yaml<br/>â”‚   â”œâ”€â”€ result-service.yaml<br/>â”‚   â”œâ”€â”€ vote-deployment.yaml<br/>â”‚   â”œâ”€â”€ vote-service.yaml<br/>â”‚   â””â”€â”€ worker-deployment.yaml<br/>â”œâ”€â”€ v2<br/>â”‚   â”œâ”€â”€ db-deployment.yaml<br/>â”‚   â”œâ”€â”€ db-service.yaml<br/>â”‚   â”œâ”€â”€ redis-deployment.yaml<br/>â”‚   â”œâ”€â”€ redis-service.yaml<br/>â”‚   â”œâ”€â”€ result-deployment.yaml<br/>â”‚   â”œâ”€â”€ result-service.yaml<br/>â”‚   â”œâ”€â”€ result-ui-deployment.yaml<br/>â”‚   â”œâ”€â”€ result-ui-service.yaml<br/>â”‚   â”œâ”€â”€ vote-deployment.yaml<br/>â”‚   â”œâ”€â”€ vote-service.yaml<br/>â”‚   â”œâ”€â”€ vote-ui-deployment.yaml<br/>â”‚   â”œâ”€â”€ vote-ui-service.yaml<br/>â”‚   â””â”€â”€ worker-deployment.yaml<br/>â””â”€â”€ v3<br/>    â”œâ”€â”€ nats-deployment.yaml<br/>    â”œâ”€â”€ nats-service.yaml<br/>    â”œâ”€â”€ result-deployment.yaml<br/>    â”œâ”€â”€ result-service.yaml<br/>    â”œâ”€â”€ result-ui-deployment.yaml<br/>    â”œâ”€â”€ result-ui-service.yaml<br/>    â”œâ”€â”€ vote-deployment.yaml<br/>    â”œâ”€â”€ vote-service.yaml<br/>    â”œâ”€â”€ vote-ui-deployment.yaml<br/>    â””â”€â”€ vote-ui-service.yaml</span></pre><p id="48f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">manifest</strong>çš„æ¯ä¸ªå­æ–‡ä»¶å¤¹éƒ½åŒ…å«å®šä¹‰ç›¸åº”ç‰ˆæœ¬ç»„ä»¶çš„yamlæ–‡ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°çš„ç¬¬ä¸€ä»¶äº‹æ˜¯:æœ‰ç›¸å½“å¤šçš„é‡å¤ï¼Œå› ä¸ºä¸€äº›èµ„æºæ˜¯å‡ ä¸ªç‰ˆæœ¬å…±æœ‰çš„ã€‚</p><p id="ea3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœæˆ‘ä»¬æƒ³åœ¨v1ç‰ˆæœ¬ä¸­éƒ¨ç½²VotingAppï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="fc1c" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl apply -f manifests/v1</span></pre><blockquote class="oc od oe"><p id="0d12" class="kz la ob lb b lc ld ju le lf lg jx lh of lj lk ll og ln lo lp oh lr ls lt lu im bi translated">æ³¨æ„:å½“ç”¨äºæ–‡ä»¶å¤¹æ—¶ï¼Œå‘½ä»¤<code class="fe nn no np nq b">kubectl apply -f</code>ä¼šè€ƒè™‘è¯¥æ–‡ä»¶å¤¹çš„æ‰€æœ‰è§„æ ¼</p></blockquote><p id="e7fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬ç¡®ä¿ä¸€åˆ‡æ­£å¸¸:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="6b82" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl get deploy,po<br/>NAME                     READY   UP-TO-DATE   AVAILABLE   AGE<br/>deployment.apps/redis    1/1     1            1           19s<br/>deployment.apps/db       1/1     1            1           20s<br/>deployment.apps/worker   1/1     1            1           18s<br/>deployment.apps/vote     1/1     1            1           19s<br/>deployment.apps/result   1/1     1            1           19s</span><span id="a952" class="nv mr it nq b gy oa nx l ny nz">NAME                          READY   STATUS    RESTARTS   AGE<br/>pod/db-5db4758ff-48h2p        1/1     Running   0          20s<br/>pod/redis-7784f964f6-dfnwg    1/1     Running   0          19s<br/>pod/worker-5c44d48c6c-s57ss   1/1     Running   0          18s<br/>pod/vote-6c5bc5687f-m6th6     1/1     Running   0          19s<br/>pod/result-cd89cd84c-rm469    1/1     Running   0          19s</span></pre><p id="9873" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è™šæ‹Ÿæœºçš„IPå’Œåœ¨<em class="ob"> vote-service.yaml </em>å’Œ<em class="ob"> result-service.yaml </em>ä¸­æŒ‡å®šçš„èŠ‚ç‚¹ç«¯å£è®¿é—®webæ¥å£:<code class="fe nn no np nq b">vote</code>åœ¨ç«¯å£31000ä¸Šå¯è®¿é—®ï¼Œ<code class="fe nn no np nq b">result</code>åœ¨ç«¯å£31001ä¸Šå¯è®¿é—®ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºä¸€ä¸ªé¡¹ç›®æŠ•ç¥¨å¹¶æŸ¥çœ‹ç»“æœï¼Œè¿™è¯å®äº†æ•´ä¸ªåº”ç”¨ç¨‹åºè¿è¡Œè‰¯å¥½ã€‚</p><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/befed0cf18f5e6af4ee736481a8e64a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*P1m-Z93MX4DcJRd-ctTdbA.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/cb1ca6f3461752c608775fcd63e8de05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*6DuSkOLbVpixpwn0S_ZnPQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk oo di op oq translated">ä½¿ç”¨åŸå§‹æ¸…å•éƒ¨ç½²çš„VotingApp v1</figcaption></figure></div><p id="7df0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤è¯¥åº”ç”¨ç¨‹åº:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="ed07" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl delete -f manifests/v1</span></pre><p id="5cc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœæˆ‘ä»¬éœ€è¦éƒ¨ç½²VotingAppçš„å¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¿…é¡»è¿è¡Œä¸ä¹‹å‰è¯·æ±‚çš„ç‰ˆæœ¬ç›¸åŒçš„å‘½ä»¤:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="fd91" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl apply -f manifests/VERSION</span></pre><p id="0b04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç›´æ¥ä½¿ç”¨yamlæ¸…å•éƒ¨ç½²åº”ç”¨ç¨‹åºå¾ˆç®€å•ï¼Œä½†å®ƒæ²¡æœ‰æä¾›æ–¹ä¾¿çš„åŠŸèƒ½æ¥å®Œå…¨ç®¡ç†åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸæˆ–åŠ¨æ€é…ç½®åº”ç”¨ç¨‹åºï¼Œè¿™æ˜¯<a class="ae ky" href="https://helm.sh" rel="noopener ugc nofollow" target="_blank"> Helm </a>çœŸæ­£å‘æŒ¥ä½œç”¨çš„é¢†åŸŸã€‚</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8724" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">å¸¦èˆµå±•å¼€</h1><p id="7d1c" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">Helm å…è®¸æˆ‘ä»¬ç®¡ç†(å®šä¹‰ã€å®‰è£…ã€å‡çº§)å¤æ‚çš„Kubernetesåº”ç”¨ç¨‹åºã€‚è¿™ä¸ªå·¥å…·é€šè¿‡Chart(ä¸€ä¸ªåŒ…å«æ•´ä¸ªåº”ç”¨ç¨‹åºè§„èŒƒçš„åŒ…)çš„æ¦‚å¿µï¼Œä½¿å¾—åˆ›å»ºã€ç‰ˆæœ¬åŒ–ã€å…±äº«å’Œå‘å¸ƒæ•´ä¸ªåº”ç”¨ç¨‹åºå˜å¾—å®¹æ˜“ã€‚Helmè¿˜æä¾›äº†ä¸€ç§æ¨¡æ¿è¯­è¨€æ¥åŠ¨æ€é…ç½®åº”ç”¨ç¨‹åºã€‚</p><p id="ea78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨<a class="ae ky" href="https://gitlab.com/voting-application/config" rel="noopener ugc nofollow" target="_blank">é…ç½®å­˜å‚¨åº“</a>ä¸­ï¼Œ<em class="ob"> helm </em>æ–‡ä»¶å¤¹åŒ…å«VotingAppçš„å›¾è¡¨ã€‚</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="06ca" class="nv mr it nq b gy nw nx l ny nz"># tree helm<br/>helm<br/>â”œâ”€â”€ Chart.yaml<br/>â”œâ”€â”€ templates<br/>â”‚   â”œâ”€â”€ _helpers.tpl<br/>â”‚   â”œâ”€â”€ db-deployment.yaml<br/>â”‚   â”œâ”€â”€ db-service.yaml<br/>â”‚   â”œâ”€â”€ nats-deployment.yaml<br/>â”‚   â”œâ”€â”€ nats-service.yaml<br/>â”‚   â”œâ”€â”€ redis-deployment.yaml<br/>â”‚   â”œâ”€â”€ redis-service.yaml<br/>â”‚   â”œâ”€â”€ result-deployment.yaml<br/>â”‚   â”œâ”€â”€ result-service.yaml<br/>â”‚   â”œâ”€â”€ result-ui-deployment.yaml<br/>â”‚   â”œâ”€â”€ result-ui-service.yaml<br/>â”‚   â”œâ”€â”€ vote-deployment.yaml<br/>â”‚   â”œâ”€â”€ vote-service.yaml<br/>â”‚   â”œâ”€â”€ vote-ui-deployment.yaml<br/>â”‚   â”œâ”€â”€ vote-ui-service.yaml<br/>â”‚   â””â”€â”€ worker-deployment.yaml<br/>â””â”€â”€ values.yaml</span></pre><p id="5e07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ob">æ¨¡æ¿</em>æ–‡ä»¶å¤¹åŒ…å«æ¯ä¸ªå¾®æœåŠ¡çš„è§„èŒƒã€‚è¿™äº›æ–‡ä»¶ä¸èƒ½è¢«Kubernetesç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬åŒ…å«ä¸€äº›æ¨¡æ¿è¯­è¨€çš„å…ƒç´ ï¼Œä½¿å¾—è§„èŒƒæ›´åŠ åŠ¨æ€ã€‚è®©æˆ‘ä»¬çœ‹å‡ ä¸ªä¾‹å­ã€‚</p><ul class=""><li id="e8e0" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">æŠ•ç¥¨éƒ¨ç½²çš„è§„èŒƒä½¿ç”¨åŠ¨æ€å€¼æ¥å®šä¹‰å¿…é¡»ä½¿ç”¨çš„å›¾åƒ(æ³¨å†Œè¡¨+æ ‡è®°)ã€‚</li></ul><p id="b7e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ³¨æ„:æ¯ä¸ª<strong class="lb iu"> .Value.xyz </strong>éƒ½æ˜¯å¯¹<em class="ob"> values.yaml </em>ä¸­å®šä¹‰çš„ä¸€ä¸ªå€¼çš„å¼•ç”¨(ç¨åä¼šè¯¦ç»†ä»‹ç»)</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="77ec" class="nv mr it nq b gy nw nx l ny nz"><strong class="nq iu"># cat templates/vote-deployment.yaml</strong><br/>apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>  labels:<br/>    app: vote<br/>  name: vote<br/>spec:<br/>  replicas: 1<br/>  selector:<br/>    matchLabels:<br/>      app: vote<br/>  template:<br/>    metadata:<br/>      labels:<br/>        app: vote<br/>    spec:<br/>      containers:<br/>        - image: <strong class="nq iu">{{ .Values.registry }}/vote:{{ .Values.version }}</strong><br/>          name: vote<br/>          imagePullPolicy: Always<br/>          ports:<br/>            - containerPort: 80<br/>              name: vote</span></pre><ul class=""><li id="17be" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe nn no np nq b">vote</code>å’Œ<code class="fe nn no np nq b">result</code>æœåŠ¡ä½¿ç”¨æ¨¡æ¿è¯­è¨€æ¥ç¡®ä¿åªæœ‰åœ¨éƒ¨ç½²äº†ç‰ˆæœ¬v1çš„æƒ…å†µä¸‹æ‰é€šè¿‡èŠ‚ç‚¹ç«¯å£æœåŠ¡å…¬å¼€å®ƒä»¬(å¯¹äºv2å’Œv3ï¼Œå®ƒä»¬åº”è¯¥æ˜¯ClusterIPç±»å‹)ã€‚</li></ul><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="cfaa" class="nv mr it nq b gy nw nx l ny nz"><strong class="nq iu"># cat templates/vote-service.yaml<br/></strong>apiVersion: v1<br/>kind: Service<br/>metadata:<br/>  labels:<br/>    app: result<br/>  name: result<br/>spec:<br/><strong class="nq iu">  {{ if eq .Values.version "v1" }}</strong><br/><strong class="nq iu">  type: NodePort<br/>  {{ end }}<br/></strong>  ports:<br/>    - name: "result-service"<br/>      port: 80<br/>      targetPort: 80<br/>      <strong class="nq iu">{{ if eq .Values.version "v1" }}<br/>      nodePort: 31001<br/>      {{ end }}</strong><br/>  selector:<br/>    app: result</span><span id="c940" class="nv mr it nq b gy oa nx l ny nz"><strong class="nq iu"># cat templates/result-service.yaml</strong><em class="ob"><br/></em>apiVersion: v1<br/>kind: Service<br/>metadata:<br/>  labels:<br/>    app: result<br/>  name: result<br/>spec:<br/><strong class="nq iu">  {{ if eq .Values.version "v1" }}</strong><br/><strong class="nq iu">  type: NodePort<br/>  {{ end }}</strong><br/>  ports:<br/>    - name: "result-service"<br/>      port: 80<br/>      targetPort: 80<br/>      <strong class="nq iu">{{ if eq .Values.version "v1" }}<br/>      nodePort: 31001<br/>      {{ end }}</strong><br/>  selector:<br/>    app: result</span></pre><ul class=""><li id="57f1" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">æ¨¡æ¿è¯­è¨€åœ¨<code class="fe nn no np nq b">worker</code>ä¸­ä¹Ÿæœ‰ä¸¤ä¸ªç”¨é€”:</li></ul><p id="8f35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">-ç¡®ä¿åªä¸ºç‰ˆæœ¬1å’Œ2éƒ¨ç½²å·¥ä½œè¿›ç¨‹(ç‰ˆæœ¬3ä½¿ç”¨NATS)</p><p id="67f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">-æŒ‡å®šåº”ä½¿ç”¨çš„å›¾åƒæ ‡ç­¾ï¼Œå› ä¸ºæ¯ä¸ªå·¥äººçš„å£å‘³æœ‰ä¸€ä¸ªæ ‡ç­¾(<code class="fe nn no np nq b">java</code>ã€<code class="fe nn no np nq b">go</code>å’Œ<code class="fe nn no np nq b">.dotnet</code>):</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="f21c" class="nv mr it nq b gy nw nx l ny nz"><strong class="nq iu"># cat templates/worker-deployment.yaml<br/>{{ if ne .Values.version "v3" }}<br/></strong>apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>  labels:<br/>    app: worker<br/>  name: worker<br/>spec:<br/>  replicas: 1<br/>  selector:<br/>    matchLabels:<br/>      app: worker<br/>  template:<br/>    metadata:<br/>      labels:<br/>        app: worker<br/>    spec:<br/>      containers:<br/>        - image: <strong class="nq iu">{{.Values.registry}}/worker:{{.Values.worker.lang}}</strong><br/>          name: worker<br/>          imagePullPolicy: Always<br/><strong class="nq iu">{{ end }}</strong></span></pre><p id="2ce6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä»¥ä¸Šæ¨¡æ¿ä¸­å¼•ç”¨çš„æ‰€æœ‰å€¼éƒ½åœ¨<em class="ob"> values.yaml: </em>ä¸­å®šä¹‰</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="1d82" class="nv mr it nq b gy nw nx l ny nz"><strong class="nq iu"># cat values.yaml</strong><br/># Image registry<br/>registry:  registry.gitlab.com/voting-application</span><span id="1493" class="nv mr it nq b gy oa nx l ny nz"># Version of the VotingApp among v1, v2 and v3<br/>version: v2</span><span id="6485" class="nv mr it nq b gy oa nx l ny nz"># Version of the worker among Java, .NET and Go<br/>worker:<br/>  lang: go</span></pre><p id="52d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨Helméƒ¨ç½²VotingApp(éœ€è¦æŒ‰ç…§è¿™äº›æŒ‡ä»¤é¦–å…ˆå®‰è£…<em class="ob"> helm </em>äºŒè¿›åˆ¶æ–‡ä»¶<a class="ae ky" href="https://helm.sh/docs/intro/install/" rel="noopener ugc nofollow" target="_blank">)ã€‚</a></p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="4947" class="nv mr it nq b gy nw nx l ny nz"># helm upgrade voting --install --values values.yaml .</span></pre><p id="9c5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬å¾—åˆ°ç±»ä¼¼äºä¸‹é¢çš„ç»“æœ:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="088e" class="nv mr it nq b gy nw nx l ny nz">Release "voting" does not exist. Installing it now.<br/>NAME: voting<br/>LAST DEPLOYED: Wed Mar 31 21:02:07 2021<br/>NAMESPACE: default<br/>STATUS: deployed<br/>REVISION: 1<br/>TEST SUITE: None</span></pre><p id="15f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨å¹•åï¼Œhelmè¯»å–<code class="fe nn no np nq b">templates</code>æ–‡ä»¶å¤¹ä¸­çš„è§„èŒƒï¼Œä½¿ç”¨<em class="ob"> values.yaml </em>ä¸­çš„å€¼åˆ›å»ºçœŸæ­£çš„yamlæ¸…å•(Kuberneteså¯ä»¥ç†è§£),å¹¶è¯·æ±‚APIæœåŠ¡å™¨åˆ›å»ºç›¸åº”çš„èµ„æºã€‚å› æ­¤ï¼Œå‰é¢çš„å‘½ä»¤éƒ¨ç½²äº†åº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬2ã€‚</p><p id="6b83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬ç¡®ä¿ä¸€åˆ‡è¿è¡Œè‰¯å¥½ï¼Œæ£€æŸ¥æ‰€æœ‰çš„åŠèˆ±éƒ½å¤„äº<strong class="lb iu">è¿è¡Œ</strong>çŠ¶æ€:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="a860" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl get deploy,pod<br/>NAME                        READY   UP-TO-DATE   AVAILABLE   AGE<br/>deployment.apps/redis       1/1     1            1           3m37s<br/>deployment.apps/db          1/1     1            1           3m37s<br/>deployment.apps/worker      1/1     1            1           3m37s<br/>deployment.apps/vote        1/1     1            1           3m37s<br/>deployment.apps/vote-ui     1/1     1            1           3m37s<br/>deployment.apps/result      1/1     1            1           3m37s<br/>deployment.apps/result-ui   1/1     1            1           3m37s</span><span id="e344" class="nv mr it nq b gy oa nx l ny nz">NAME                             READY   STATUS    RESTARTS   AGE<br/>pod/redis-7784f964f6-pst85       1/1     Running   0          3m37s<br/>pod/db-5db4758ff-mqzhk           1/1     Running   0          3m37s<br/>pod/worker-5c44d48c6c-jqnf5      1/1     Running   0          3m37s<br/>pod/vote-7fcd756c98-rckhm        1/1     Running   0          3m37s<br/>pod/vote-ui-78c77c7b8b-s6svv     1/1     Running   0          3m37s<br/>pod/result-6dcc7677fd-r4m25      1/1     Running   0          3m37s<br/>pod/result-ui-67d5445774-6xl9d   1/1     Running   0          3m37s</span></pre><p id="79fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åæˆ‘ä»¬å¯ä»¥è®¿é—®<code class="fe nn no np nq b">vote-ui</code>å’Œ<code class="fe nn no np nq b">result-ui</code>ç•Œé¢:</p><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a2ae174122306949b3f7523cb3753c48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*fDMR0Z8saiPmF7_1YLDvHg.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/b368fada3e7e7c221ff2fea09768e3b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*HFvSe5xh8RAjMeSlOt1h5w.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk oo di op oq translated">ä½¿ç”¨Helméƒ¨ç½²VotingAppç‰ˆæœ¬2</figcaption></figure></div><p id="86cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ³¨æ„:ç¬¬1ç‰ˆå’Œç¬¬2/3ç‰ˆä¹‹é—´çš„å‰ç«¯åªæœ‰å¾®å°çš„å˜åŒ–:ä¸€äº›æ ‡ç­¾æœ‰è½»å¾®çš„ä¿®æ”¹ã€‚</p><p id="e30d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨workerçš„<code class="fe nn no np nq b">Go</code>ç‰ˆæœ¬(åœ¨values.yamlçš„<em class="ob"> worker.lang </em>å±æ€§ä¸­å®šä¹‰)ã€‚æˆ‘ä»¬å¯ä»¥ç¡®ä¿æŸ¥çœ‹å·¥äººè§„èŒƒ:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="ffca" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl get deploy/worker \<br/>  -o jsonpath="{ .spec.template.spec.containers[0].image }"</span><span id="a6cc" class="nv mr it nq b gy oa nx l ny nz">registry.gitlab.com/voting-application/<strong class="nq iu">worker:go</strong></span></pre><p id="141d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœæˆ‘ä»¬æƒ³å°è¯•ä¸€ä¸‹<code class="fe nn no np nq b">dotnet</code>ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹values.yamlæ–‡ä»¶ï¼Œ</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="104b" class="nv mr it nq b gy nw nx l ny nz">...<br/># Version of the worker among java, dotnet and go<br/>worker:<br/>  lang: <strong class="nq iu">dotnet</strong></span></pre><p id="af6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å’Œå‡çº§åº”ç”¨ç¨‹åºï¼ŒHelmå°†æ›´æ–°å—<em class="ob">å€¼å˜åŒ–å½±å“çš„èµ„æºã€‚</em></p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="b145" class="nv mr it nq b gy nw nx l ny nz"># helm upgrade voting --install --values values.yaml .</span></pre><p id="09af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬ç¡®ä¿éƒ¨ç½²å·²æ­£ç¡®æ›´æ–°ï¼Œç°åœ¨ä½¿ç”¨çš„æ˜¯æ˜ åƒçš„<code class="fe nn no np nq b">dotnet</code>ç‰ˆæœ¬:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="8445" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl get deploy/worker \<br/>  -o jsonpath="{ .spec.template.spec.containers[0].image }"</span><span id="6c89" class="nv mr it nq b gy oa nx l ny nz">registry.gitlab.com/voting-application/<strong class="nq iu">worker:dotnet</strong></span></pre><p id="05d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é€šè¿‡è®¿é—®<code class="fe nn no np nq b">vote-ui</code>å’Œ<code class="fe nn no np nq b">result-ui</code>ç½‘ç»œç•Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°éªŒè¯è¿™ä¸ªæ–°ç‰ˆæœ¬æ˜¯å¦å¦‚é¢„æœŸçš„é‚£æ ·å·¥ä½œã€‚</p><p id="4878" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœæˆ‘ä»¬æƒ³å›åˆ°ä»¥å‰çš„ç‰ˆæœ¬ï¼ŒHelmä¹Ÿå¯ä»¥é€šè¿‡<code class="fe nn no np nq b">rollback</code>å‘½ä»¤å¸®åŠ©æˆ‘ä»¬ï¼Œè¯¥å‘½ä»¤ä½¿ç”¨ä»¥å‰çš„å€¼åˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="776f" class="nv mr it nq b gy nw nx l ny nz"># helm rollback voting<br/>Rollback was a success! Happy Helming!</span></pre><p id="b724" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯å·¥äººçš„<code class="fe nn no np nq b">Go</code>å›¾åƒç°åœ¨è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºå·¥ä½œæ­£å¸¸ã€‚</p><p id="88ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœæˆ‘ä»¬æƒ³å®‰è£…ç‰ˆæœ¬3çš„VotingAppï¼Œè¿™æ²¡æœ‰é—®é¢˜ã€‚æˆ‘ä»¬åªéœ€è¦æ›´æ”¹values.yamlä¸­çš„ç‰ˆæœ¬å±æ€§</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="761f" class="nv mr it nq b gy nw nx l ny nz">...<br/># Version of the VotingApp among v1, v2 and v3<br/>version: v3<br/>...</span></pre><p id="2f5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¹¶å‡çº§åº”ç”¨ç¨‹åº:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="b73c" class="nv mr it nq b gy nw nx l ny nz"># helm upgrade voting --install --values values.yaml .</span></pre><p id="2f37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code class="fe nn no np nq b">vote</code>å’Œ<code class="fe nn no np nq b">result</code>çª—æ ¼å·²ç»æ›´æ–°ï¼Œæ–°çš„<code class="fe nn no np nq b">nats</code>çª—æ ¼å·²ç»åˆ›å»ºã€‚æ­¤å¤–ï¼Œ<code class="fe nn no np nq b">redis</code>ã€<code class="fe nn no np nq b">db</code>å’Œ<code class="fe nn no np nq b">worker</code>çª—æ ¼å·²è¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒä»¬åœ¨VotingAppç‰ˆæœ¬3ä¸­ä¸å†ä½¿ç”¨ã€‚</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="c7a8" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl get deploy,po<br/>NAME                        READY   UP-TO-DATE   AVAILABLE   AGE<br/>deployment.apps/result-ui   1/1     1            1           11m<br/>deployment.apps/vote-ui     1/1     1            1           11m<br/>deployment.apps/result      1/1     1            1           11m<br/>deployment.apps/vote        1/1     1            1           11m<br/>deployment.apps/nats        1/1     1            1           42s</span><span id="69ab" class="nv mr it nq b gy oa nx l ny nz">NAME                            READY   STATUS    RESTARTS   AGE<br/>pod/result-ui-6b4b6bdb9-xrjvj   1/1     Running   0          11m<br/>pod/vote-ui-856ddf9d5-px9tl     1/1     Running   0          11m<br/><strong class="nq iu">pod/result-7f6b5d9bb9-c42p5     1/1     Running   0          41s<br/>pod/vote-56db6bd44f-d4dpx       1/1     Running   0          41s<br/>pod/nats-b8dfd96c6-sgqvd        1/1     Running   0          41s</strong></span></pre><p id="0f2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åæˆ‘ä»¬å¯ä»¥åˆ é™¤è¯¥åº”ç”¨ç¨‹åº:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="77fc" class="nv mr it nq b gy nw nx l ny nz"># helm uninstall voting</span></pre><p id="fa92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ­£å¦‚æˆ‘ä»¬åœ¨è¿™äº›ä¾‹å­ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŒä¸€å¥—yamlæ–‡ä»¶ï¼Œæ·»åŠ äº†ä¸€äº›æ¨¡æ¿ï¼Œç„¶åèƒ½å¤ŸåŠ¨æ€é…ç½®æˆ‘ä»¬çš„VotingAppã€‚å¾ˆé…·ï¼Œå¯¹å§ï¼Ÿ</p><p id="e101" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬åªé€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜Helmï¼Œä½†æ˜¯è¿™ä¸ªå·¥å…·ç»å¯¹èƒ½å¤Ÿåšæ›´å¤šçš„äº‹æƒ…ï¼Œæ­£å¦‚ä½ åœ¨<a class="ae ky" href="https://helm.sh" rel="noopener ugc nofollow" target="_blank">æ–‡æ¡£</a>ä¸­çœ‹åˆ°çš„é‚£æ ·ã€‚ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†è¯´æ˜å¦‚ä½•ä½¿ç”¨<a class="ae ky" href="https://kutomize.io" rel="noopener ugc nofollow" target="_blank"> Kustomize </a>éƒ¨ç½²æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="81f5" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">ä½¿ç”¨Kustomizeè¿›è¡Œéƒ¨ç½²</h1><p id="0e7f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><a class="ae ky" href="https://kustomize.io/" rel="noopener ugc nofollow" target="_blank"> Kustomize </a>å¼•å…¥äº†ä¸€ç§æ— æ¨¡æ¿çš„æ–¹å¼æ¥å®šåˆ¶åº”ç”¨é…ç½®ã€‚å®ƒæ—¢å¯ä»¥ä½œä¸ºç‹¬ç«‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½œä¸º<code class="fe nn no np nq b">kubectl</code>çš„åŸç”Ÿç‰¹æ€§ã€‚å®ƒåŸºæœ¬ä¸Šä»yamlè§„èŒƒåˆ—è¡¨ä¸­å®šä¹‰äº†ä¸€ä¸ªåŸºçº¿ï¼Œå¹¶å…è®¸æˆ‘ä»¬ä½¿ç”¨é¢å¤–çš„èµ„æºæ¥è¿‡è½½è¿™ä¸ªåŸºçº¿ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™åœ¨VotingAppçš„ä¸Šä¸‹æ–‡ä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p id="a69b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨<a class="ae ky" href="https://gitlab.com/voting-application/config" rel="noopener ugc nofollow" target="_blank">é…ç½®åº“</a>ä¸­ï¼Œ<em class="ob"> kustomize </em>æ–‡ä»¶å¤¹åŒ…å«å‡ ä¸ªå­æ–‡ä»¶å¤¹:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="e076" class="nv mr it nq b gy nw nx l ny nz"># tree kustomize<br/>kustomize<br/>â”œâ”€â”€ base<br/>â”‚   â”œâ”€â”€ kustomization.yaml<br/>â”‚   â”œâ”€â”€ result-deployment.yaml<br/>â”‚   â”œâ”€â”€ result-service.yaml<br/>â”‚   â”œâ”€â”€ vote-deployment.yaml<br/>â”‚   â””â”€â”€ vote-service.yaml<br/>â””â”€â”€ overlays<br/>    â”œâ”€â”€ v1<br/>    â”‚   â”œâ”€â”€ db-deployment.yaml<br/>    â”‚   â”œâ”€â”€ db-service.yaml<br/>    â”‚   â”œâ”€â”€ kustomization.yaml<br/>    â”‚   â”œâ”€â”€ redis-deployment.yaml<br/>    â”‚   â”œâ”€â”€ redis-service.yaml<br/>    â”‚   â””â”€â”€ worker-deployment.yaml<br/>    â”œâ”€â”€ v2<br/>    â”‚   â”œâ”€â”€ db-deployment.yaml<br/>    â”‚   â”œâ”€â”€ db-service.yaml<br/>    â”‚   â”œâ”€â”€ front-services.yaml<br/>    â”‚   â”œâ”€â”€ kustomization.yaml<br/>    â”‚   â”œâ”€â”€ redis-deployment.yaml<br/>    â”‚   â”œâ”€â”€ redis-service.yaml<br/>    â”‚   â”œâ”€â”€ result-ui-deployment.yaml<br/>    â”‚   â”œâ”€â”€ result-ui-service.yaml<br/>    â”‚   â”œâ”€â”€ vote-ui-deployment.yaml<br/>    â”‚   â”œâ”€â”€ vote-ui-service.yaml<br/>    â”‚   â””â”€â”€ worker-deployment.yaml<br/>    â””â”€â”€ v3<br/>        â”œâ”€â”€ kustomization.yaml<br/>        â”œâ”€â”€ nats-deployment.yaml<br/>        â”œâ”€â”€ nats-service.yaml<br/>        â”œâ”€â”€ result-ui-deployment.yaml<br/>        â”œâ”€â”€ result-ui-service.yaml<br/>        â”œâ”€â”€ vote-ui-deployment.yaml<br/>        â””â”€â”€ vote-ui-service.yaml</span></pre><ul class=""><li id="ceeb" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe nn no np nq b">base</code>å­æ–‡ä»¶å¤¹åŒ…å«ä¸€äº›ä¸åŒç‰ˆæœ¬çš„VotingAppé€šç”¨çš„è§„èŒƒ(æ‰€æœ‰ç‰ˆæœ¬ä¸­åªä½¿ç”¨<code class="fe nn no np nq b">vote</code>å’Œ<code class="fe nn no np nq b">result</code>)ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹è¿˜åŒ…å«<code class="fe nn no np nq b">kustomization.yaml</code>ï¼Œå®ƒåŸºæœ¬ä¸Šåˆ—å‡ºäº†æ„æˆè¿™ä¸ªåŸºçº¿çš„è§„èŒƒã€‚</li></ul><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="a79d" class="nv mr it nq b gy nw nx l ny nz"><strong class="nq iu"># cat base/kustomization.yaml<br/></strong>apiVersion: kustomize.config.k8s.io/v1beta1<br/>kind: Kustomization<br/>resources:<br/>- result-deployment.yaml<br/>- result-service.yaml<br/>- vote-deployment.yaml<br/>- vote-service.yaml</span></pre><p id="0a0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨<code class="fe nn no np nq b">base</code>æ–‡ä»¶å¤¹çš„æ—è¾¹ï¼Œæœ‰ä¸€ä¸ª<code class="fe nn no np nq b">overlays</code>æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«äº†VotingAppæ¯ä¸ªç‰ˆæœ¬çš„å­æ–‡ä»¶å¤¹ã€‚è¿™äº›å­æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸€ä¸ªéƒ½åŒ…å«é¢å¤–çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ç”¨äºé‡è½½å­˜åœ¨äº<code class="fe nn no np nq b">base</code>æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ã€‚</p><ul class=""><li id="ac7b" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe nn no np nq b">overlays/v1</code>æ˜¯éœ€è¦ç”¨æ¥éƒ¨ç½²VotingAppç‰ˆæœ¬1çš„æ–‡ä»¶å¤¹ã€‚å®ƒåœ¨åŸºæœ¬æ–‡ä»¶å¤¹ä¸­çš„ç‰ˆæœ¬1çš„åŸºç¡€ä¸Šå®šä¹‰äº†ç‰ˆæœ¬1æ‰€éœ€çš„èµ„æºã€‚é€šè¿‡ä¸€ä¸ª<em class="ob"> kustomization.yaml </em>æ–‡ä»¶ï¼Œå®ƒè¿˜å®šä¹‰äº†è¦åº”ç”¨äº<code class="fe nn no np nq b">vote</code>å’Œ<code class="fe nn no np nq b">result</code>éƒ¨ç½²çš„è¡¥ä¸ï¼Œå› æ­¤æŠ•ç¥¨å’Œç»“æœå›¾åƒä½¿ç”¨<strong class="lb iu"> v1 </strong>æ ‡ç­¾ã€‚</li></ul><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="db8d" class="nv mr it nq b gy nw nx l ny nz"><strong class="nq iu"># cat overlays/v1/kustomization.yaml<br/></strong>bases:<br/>  - ../../base<br/>resources:<br/>  - redis-deployment.yaml<br/>  - redis-service.yaml<br/>  - worker-deployment.yaml<br/>  - db-deployment.yaml<br/>  - db-service.yaml<br/>patches:<br/>  - target:<br/>      group: apps<br/>      version: v1<br/>      kind: Deployment<br/>      name: vote<br/>    patch: |-<br/>      - op: replace<br/>        path: /spec/template/spec/containers/0/image<br/>        value: registry.gitlab.com/voting-application/vote:v1<br/>  - target:<br/>      group: apps<br/>      version: v1<br/>      kind: Deployment<br/>      name: result<br/>    patch: |-<br/>      - op: replace<br/>        path: /spec/template/spec/containers/0/image<br/>        value: registry.gitlab.com/voting-application/result:v1</span></pre><p id="7dd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¡¥ä¸éƒ¨åˆ†çœ‹èµ·æ¥ç›¸å½“å¤æ‚ï¼Œä½†åŸºæœ¬ä¸Šæ¯ä¸ªè¡¥ä¸â€œåªæ˜¯â€å¼•ç”¨ä¸€ä¸ªèµ„æºï¼Œå¹¶æ²¿å…¶å±‚æ¬¡ç»“æ„æ›´æ”¹å±æ€§å€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒæŠ•ç¥¨å’Œç»“æœå®¹å™¨çš„å›¾åƒè¢«ä¿®æ”¹ã€‚</p><ul class=""><li id="1737" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe nn no np nq b">overlays/v2</code>æ˜¯éœ€è¦ç”¨æ¥éƒ¨ç½²VotingAppç‰ˆæœ¬2çš„æ–‡ä»¶å¤¹ã€‚å®ƒåœ¨åŸºæœ¬æ–‡ä»¶å¤¹ä¸­çš„èµ„æºåŸºç¡€ä¸Šå®šä¹‰äº†ç‰ˆæœ¬2æ‰€éœ€çš„èµ„æºã€‚é€šè¿‡ä¸€ä¸ª<em class="ob"> kustomization.yaml </em>æ–‡ä»¶ï¼Œå®ƒè¿˜å®šä¹‰äº†åº”ç”¨äºåŸºæœ¬æ–‡ä»¶å¤¹ä¸­å®šä¹‰çš„èµ„æºçš„è¡¥ä¸ã€‚åŸºæœ¬ä¸Šï¼Œè¿™äº›è¡¥ä¸å…è®¸ä¸º<code class="fe nn no np nq b">vote</code>å’Œ<code class="fe nn no np nq b">result</code>éƒ¨ç½²æŒ‡å®š<strong class="lb iu"> v2 </strong>æ ‡ç­¾ï¼Œå®ƒè¿˜å°†<code class="fe nn no np nq b">vote</code>å’Œ<code class="fe nn no np nq b">result</code>æœåŠ¡çš„ç±»å‹æ›´æ”¹ä¸º<strong class="lb iu">é›†ç¾¤IP </strong>è€Œä¸æ˜¯<strong class="lb iu">èŠ‚ç‚¹ç«¯å£</strong>ã€‚</li></ul><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="bfc5" class="nv mr it nq b gy nw nx l ny nz"><strong class="nq iu"># cat overlays/v2/kustomization.yaml<br/></strong>bases:<br/>  - ../../base<br/>resources:<br/>  - result-ui-deployment.yaml<br/>  - result-ui-service.yaml<br/>  - vote-ui-deployment.yaml<br/>  - vote-ui-service.yaml<br/>  - redis-deployment.yaml<br/>  - redis-service.yaml<br/>  - worker-deployment.yaml<br/>  - db-deployment.yaml<br/>  - db-service.yaml<br/>patches:<br/>  # Use v2 as image tag for vote Deployment<br/>  - target:<br/>      group: apps<br/>      version: v1<br/>      kind: Deployment<br/>      name: vote<br/>    patch: |-<br/>      - op: replace<br/>        path: /spec/template/spec/containers/0/image<br/>        value: registry.gitlab.com/voting-application/vote:v2<br/>  # Use v2 as image tag for result Deployment<br/>  - target:<br/>      group: apps<br/>      version: v1<br/>      kind: Deployment<br/>      name: result<br/>    patch: |-<br/>      - op: replace<br/>        path: /spec/template/spec/containers/0/image<br/>        value: registry.gitlab.com/voting-application/result:v2<br/>  # Change vote Service to ClusterIP type<br/>  - target:<br/>      kind: Service<br/>      name: vote<br/>    patch: |-<br/>      - op: replace<br/>        path: /spec/type<br/>        value: ClusterIP<br/>      - op: remove<br/>        path: /spec/ports/0/nodePort<br/>  # Change result Service to ClusterIP type<br/>  - target:<br/>      kind: Service<br/>      name: result<br/>    patch: |-<br/>      - op: replace<br/>        path: /spec/type<br/>        value: ClusterIP<br/>      - op: remove<br/>        path: /spec/ports/0/nodePort</span></pre><ul class=""><li id="648d" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe nn no np nq b">overlays/v3</code>æ˜¯éœ€è¦ç”¨æ¥éƒ¨ç½²VotingAppç‰ˆæœ¬3çš„æ–‡ä»¶å¤¹ã€‚å®ƒåœ¨åŸºæœ¬æ–‡ä»¶å¤¹ä¸­çš„èµ„æºåŸºç¡€ä¸Šå®šä¹‰äº†ç‰ˆæœ¬3æ‰€éœ€çš„èµ„æºã€‚é€šè¿‡ä¸€ä¸ª<em class="ob"> kustomization.yaml </em>æ–‡ä»¶ï¼Œå®ƒè¿˜å®šä¹‰äº†åº”ç”¨äºåŸºç¡€æ–‡ä»¶å¤¹ä¸­å®šä¹‰çš„èµ„æºçš„è¡¥ä¸ã€‚è¿™äº›è¡¥ä¸ä¸ä¸Šé¢ç‰ˆæœ¬2ä¸­å®šä¹‰çš„è¡¥ä¸éå¸¸ç›¸ä¼¼ã€‚</li></ul><p id="f256" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æœ‰äº†ä¸Šä¸‹æ–‡è®¾ç½®ï¼Œç°åœ¨è®©æˆ‘ä»¬è¯•ä¸€è¯•ï¼Œç”¨Kustomizeéƒ¨ç½²VotingAppçš„ç¬¬2ç‰ˆã€‚è¿™å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®Œæˆï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯æ ‡å‡†çš„<code class="fe nn no np nq b">kubectl apply</code>ï¼Œåªæ˜¯å®ƒä½¿ç”¨äº†<code class="fe nn no np nq b">-k</code>æ ‡å¿—:</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="449c" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl apply -k overlays/v2/</span></pre><p id="7246" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®VotingAppï¼Œå†æ¬¡ä¸ºæˆ‘ä»¬æœ€å–œæ¬¢çš„åŠ¨ç‰©æŠ•ç¥¨ã€‚</p><p id="d743" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ›å»ºæ—¶ä½¿ç”¨çš„ç›¸åŒçš„<code class="fe nn no np nq b">-k</code>æ ‡å¿—åˆ é™¤åº”ç”¨ç¨‹åºã€‚</p><pre class="kj kk kl km gt nr nq ns nt aw nu bi"><span id="4960" class="nv mr it nq b gy nw nx l ny nz"># k0s kubectl delete -k overlays/v2</span></pre><p id="e7e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¿™ç§æ–¹æ³•éå¸¸ç®€æ´ï¼Œé¿å…äº†å¤ªå¤šçš„é‡å¤ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼ŒåŸºæœ¬èµ„æºä»ä¸è¢«ä¿®æ”¹ï¼Œåªæœ‰è¡¥ä¸è¢«åº”ç”¨äºå®ƒä»¬ä»¥ç”Ÿæˆæ–°çš„èµ„æºã€‚</p><blockquote class="oc od oe"><p id="b73f" class="kz la ob lb b lc ld ju le lf lg jx lh of lj lk ll og ln lo lp oh lr ls lt lu im bi translated">Kustomizeé€šå¸¸ç”¨äºåœ¨ä¸åŒçš„ç¯å¢ƒä¸­éƒ¨ç½²ç›¸åŒçš„åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªè¦†ç›–å±‚çš„å­æ–‡ä»¶å¤¹ã€‚</p></blockquote></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="0bc1" class="nv mr it bd ms or os dn mw ot ou dp na li ov ow nc lm ox oy ne lq oz pa ng pb bi translated">å…³é”®è¦ç‚¹</h2><p id="d494" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¦‚è¿°äº†åœ¨Kubernetesä¸­éƒ¨ç½²åº”ç”¨ç¨‹åºçš„ä¸»è¦æ–¹å¼:</p><ul class=""><li id="7eda" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">ä½¿ç”¨åŸå§‹çš„yamlè§„èŒƒæ˜¯ç®¡ç†åº”ç”¨ç¨‹åºæœ€ç®€å•ä½†å¯é…ç½®æ€§è¾ƒå·®çš„æ–¹æ³•</li><li id="933e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Helmæ˜¯ä¸€ç§æ›´åŠ å¯é…ç½®çš„æ–¹æ³•ã€‚å®ƒä½¿ç”¨ä¸€ç§æ¨¡æ¿è¯­è¨€ï¼ŒåŠ¨æ€å€¼ï¼Œå¹¶ä½¿ç®¡ç†åº”ç”¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå˜å¾—ç®€å•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œèˆµå›¾å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ†å‘ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºéƒ½å¯ä»¥é€šè¿‡èˆµå›¾è·å¾—</li><li id="73c0" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Kustomizeæ˜¯å¦ä¸€ç§æ–¹æ³•ï¼Œå®ƒå…è®¸é€šè¿‡ä¸€ä¸ªåŸºæœ¬æ–‡ä»¶å¤¹å®šä¹‰åŒä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å‡ ä¸ªç‰ˆæœ¬ï¼Œè¯¥åŸºæœ¬æ–‡ä»¶å¤¹å¯ä»¥é€šè¿‡ä½¿ç”¨é¢å¤–çš„èµ„æºè€Œè¿‡è½½ã€‚Kustomizeå¯ä»¥é€šè¿‡å¤šä¸ªè¦†ç›–å­æ–‡ä»¶å¤¹è½»æ¾ç®¡ç†ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªç‰ˆæœ¬</li></ul><p id="cebc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ğŸ”¥VotingAppå·²ç»çŸ¥é“äº†è¿‡å»å‡ å‘¨çš„è®¸å¤šå˜åŒ–ã€‚ä¸è¦çŠ¹è±«ï¼Œçœ‹çœ‹<a class="ae ky" href="https://gitlab.com/voting-application/config" rel="noopener ugc nofollow" target="_blank"> GitLab repo </a>ã€‚åœ¨è¿™ä¸ªæ¼”ç¤ºåº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä½ ä¼šæ‰¾åˆ°æ›´å¤šå…³äºHelmå’ŒKustomizeçš„ä¿¡æ¯å’Œé«˜çº§ç”¨æ³•ã€‚</p></div></div>    
</body>
</html>