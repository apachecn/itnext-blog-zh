<html>
<head>
<title>Creating a Rust Web App with Rocket and Diesel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨Rocketå’ŒDieselåˆ›å»ºRust Webåº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/creating-a-rust-web-app-with-rocket-and-diesel-58f5f6cacd27?source=collection_archive---------0-----------------------#2022-08-05">https://itnext.io/creating-a-rust-web-app-with-rocket-and-diesel-58f5f6cacd27?source=collection_archive---------0-----------------------#2022-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/d8e8333499e538957d6b20e567cdd4bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZvWQHq9zl7Rn0iocKRyvw.jpeg"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">å®‰è¿ªÂ·èµ«å°”æ›¼ä¸‡åœ¨<a class="ae jg" href="https://unsplash.com/s/photos/rocket?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</figcaption></figure><div class=""/><div class=""><h2 id="7fe8" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">æˆ‘ç©å¾—å¾ˆå¼€å¿ƒ</h2></div><p id="080d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lu">å˜æ›´æ—¥å¿—:ã€2022å¹´12æœˆ30æ—¥â€”ä½¿ç”¨Mediumçš„æ–°ä»£ç å—è¿›è¡Œè¯­æ³•çªå‡ºæ˜¾ç¤º</em></p><p id="7ac4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lv translated">D<span class="l lw lx ly bm lz ma mb mc md di">ç‹¬ç«‹çš„ã€åˆ†ç¦»çš„ã€ç®€æ´çš„ã€åŒ…å«ç”µæ± çš„â€”â€”åœ¨å¯¹ç«ç®­è¿›è¡Œä¿®è¡¥åï¼Œæˆ‘ä¼šå°†è¿™äº›å½¢å®¹è¯ä¸å®ƒè”ç³»åœ¨ä¸€èµ·ã€‚æˆ‘ä¼šè¯´æˆ‘çœŸçš„ç©å¾—å¾ˆå¼€å¿ƒã€‚è¯·ç‚¹å‡»æ­¤å¤„å¿«é€ŸæŸ¥çœ‹ã€‚</span></p><p id="b2fb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">è¿™æ˜¯å¦ä¸€ç¯‡å…³äºRust + Rocket + DieselæŠ€æœ¯æ ˆçš„æ–‡ç« ï¼Œæ¯”å¦‚è¿™é‡Œçš„<a class="ae jg" href="https://blog.logrocket.com/create-backend-api-with-rust-postgres/" rel="noopener ugc nofollow" target="_blank"/>å’Œè¿™é‡Œçš„<a class="ae jg" href="https://betterprogramming.pub/using-the-diesel-orm-for-a-web-app-with-rocket-90e610f6a6cf" rel="noopener ugc nofollow" target="_blank"/>ã€‚æœ¬æ–‡åƒå¯¹å¾…ä»»ä½•å…¶ä»–webæ¡†æ¶ä¸€æ ·å¯¹å¾…è¿™ä¸ªæ¡†æ¶â€”â€”ä»hello worldå¼€å§‹ï¼Œç„¶åæ˜¯<strong class="la jk">æ˜ å°„</strong>ï¼Œç„¶åæ˜¯<strong class="la jk">åºåˆ—åŒ–</strong>ï¼Œç„¶åæ˜¯<strong class="la jk">åº”ç”¨é…ç½®</strong>ï¼Œæœ€åæ˜¯<strong class="la jk">æ•°æ®åº“é…ç½®å’Œè®¿é—®</strong>ã€‚</p><p id="3f12" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å› ä¸ºæˆ‘ä»¬æ˜¯åŸå‹åˆ¶ä½œï¼Œæ‰€ä»¥é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™å°†æ‰€æœ‰å†…å®¹éƒ½æ”¾åœ¨<code class="fe me mf mg mh b">main.rs</code>ä¸­ã€‚</p><p id="fa32" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">è¿™æ˜¯æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„å †æ ˆ:</p><ul class=""><li id="fa5e" class="mi mj jj la b lb lc le lf lh mk ll ml lp mm lt mn mo mp mq bi translated">ğŸ¦€é”ˆ</li><li id="22d8" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt mn mo mp mq bi translated">ğŸš€ç«ç®­</li><li id="cfc8" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt mn mo mp mq bi translated">â›½æŸ´æ²¹å…¬å¸</li><li id="954e" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt mn mo mp mq bi translated">ğŸ˜Postgres</li><li id="0f5e" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt mn mo mp mq bi translated">ğŸ³ç å¤´å·¥äºº</li></ul><p id="cbcf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¼€å‘å·¥å…·:</p><ul class=""><li id="2e08" class="mi mj jj la b lb lc le lf lh mk ll ml lp mm lt mn mo mp mq bi translated">visual Studio Code+<a class="ae jg" href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer" rel="noopener ugc nofollow" target="_blank">rust-analyzer</a>æ’ä»¶</li><li id="878e" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt mn mo mp mq bi translated">âœ‰ï¸é‚®é€’å‘˜</li><li id="4669" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt mn mo mp mq bi translated">â¿³æ¡Œæ¸¸</li></ul></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="04de" class="nd ne jj bd nf ng nh ni nj nk nl nm nn kp no kq np ks nq kt nr kv ns kw nt nu bi translated">å†…å®¹</h1><ol class=""><li id="6726" class="mi mj jj la b lb nv le nw lh nx ll ny lp nz lt oa mo mp mq bi translated"><a class="ae jg" href="#aa4a" rel="noopener ugc nofollow">ä½ å¥½ä¸–ç•Œ</a></li><li id="138d" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><code class="fe me mf mg mh b"><a class="ae jg" href="#f510" rel="noopener ugc nofollow">GET /blog-posts/*</a></code> <a class="ae jg" href="#f510" rel="noopener ugc nofollow">ç«¯ç‚¹</a></li><li id="c198" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><code class="fe me mf mg mh b"><a class="ae jg" href="#9027" rel="noopener ugc nofollow">POST /blog-posts</a></code> <a class="ae jg" href="#9027" rel="noopener ugc nofollow">ç»ˆç‚¹</a></li><li id="bfe8" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><a class="ae jg" href="#9415" rel="noopener ugc nofollow">é”™è¯¯</a></li><li id="2645" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><a class="ae jg" href="#856a" rel="noopener ugc nofollow"> Appé…ç½®</a></li><li id="dee4" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><a class="ae jg" href="#0066" rel="noopener ugc nofollow">æŸ´æ²¹è®¾ç½®</a></li><li id="6743" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><a class="ae jg" href="#4501" rel="noopener ugc nofollow">è¿ç§»</a></li><li id="3157" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><a class="ae jg" href="#b4d9" rel="noopener ugc nofollow">æ¨¡å¼&amp;æ¨¡å¼</a></li><li id="d0ec" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><a class="ae jg" href="#ae71" rel="noopener ugc nofollow">æŸ´æ²¹è¿æ¥</a></li><li id="d39e" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><a class="ae jg" href="#5bf5" rel="noopener ugc nofollow">æ›´æ–°</a> <code class="fe me mf mg mh b"><a class="ae jg" href="#5bf5" rel="noopener ugc nofollow">GET /blog-posts</a></code> <a class="ae jg" href="#5bf5" rel="noopener ugc nofollow">ç«¯ç‚¹</a></li><li id="0083" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><a class="ae jg" href="#aa0c" rel="noopener ugc nofollow">æ›´æ–°</a> <code class="fe me mf mg mh b"><a class="ae jg" href="#aa0c" rel="noopener ugc nofollow">POST /blog-posts</a></code> <a class="ae jg" href="#aa0c" rel="noopener ugc nofollow">ç«¯ç‚¹</a></li></ol></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h2 id="e92c" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">0.é”ˆ</h2><p id="c8e7" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">ä½¿ç”¨<code class="fe me mf mg mh b"><a class="ae jg" href="https://www.rust-lang.org/tools/install" rel="noopener ugc nofollow" target="_blank">rustup</a></code>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„Rustå¹¶è¿è¡Œ</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="2107" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">rustup</strong> default stable &amp;&amp; <strong class="mh jk">rustup</strong> update</span></pre><p id="5e3d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç„¶åå®‰è£…<a class="ae jg" href="https://crates.io/crates/cargo-watch" rel="noopener ugc nofollow" target="_blank">è´§è¡¨</a>è¿›è¡Œçƒ­é‡è£…ï¼›</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="1744" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">cargo</strong> install cargo-watch</span></pre><h2 id="aa4a" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">1.ä½ å¥½ä¸–ç•Œ</h2><p id="88ea" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">æˆ‘ä»¬ä»ç®€å•çš„å¼€å§‹ã€‚åˆ›å»ºä¸€ä¸ªåä¸º<code class="fe me mf mg mh b">rocket-diesel</code>çš„æ–°é¡¹ç›®:</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="d707" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">cargo</strong> new rocket-diesel --bin<br/><strong class="mh jk">cd</strong> rocket-diesel</span></pre><p id="b155" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æ·»åŠ ç«ç®­ä¾èµ–é¡¹:</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="5d18" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">cargo</strong> add rocket@0.5.0-rc.2 --features=json</span></pre><p id="2db7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨<code class="fe me mf mg mh b">main.rs</code>ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="34fd" class="pf ne jj mh b be pg ph l pi pb">#[macro_use] extern crate rocket;<br/><br/>#[get("/")]<br/>fn index() -&gt; &amp;'static str {<br/>    "Hello, world!"<br/>}<br/><br/>#[launch]<br/>fn rocket() -&gt; _ {<br/>    let rocket = rocket::build();<br/>    rocket.mount("/", routes![index])<br/>}</span></pre><ol class=""><li id="0f9c" class="mi mj jj la b lb lc le lf lh mk ll ml lp mm lt oa mo mp mq bi translated">å»ºé€ ä¸€æšç«ç®­â€” <code class="fe me mf mg mh b">rocket::build()</code></li><li id="5f64" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><strong class="la jk">åœ¨ç«ç®­ä¸Šå®‰è£…</strong>è·¯çº¿â€” <code class="fe me mf mg mh b">rocket.mount()</code></li><li id="b76f" class="mi mj jj la b lb mr le ms lh mt ll mu lp mv lt oa mo mp mq bi translated"><strong class="la jk">å‘å°„</strong>â€”â€”<code class="fe me mf mg mh b">#[launch]</code></li></ol><p id="4993" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¥”è·‘</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="570b" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">cargo</strong> watch -x run</span></pre><figure class="oq or os ot gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pj"><img src="../Images/9c07f42e232c4d4566af3c628d555f26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W5XMlP_lPWZ3rNr7e_D0bA.png"/></div></div></figure><p id="208c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¤ªå¯çˆ±äº†ã€‚</p><h2 id="f510" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">2.è·å–/åšå®¢å¸–å­/*ç«¯ç‚¹</h2><p id="47d6" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">ä½¿ç”¨<a class="ae jg" href="https://serde.rs/" rel="noopener ugc nofollow" target="_blank"> serde </a>æ¿æ¡ç®±å¯¹dtoè¿›è¡Œåºåˆ—åŒ–å’Œå»åºåˆ—åŒ–ã€‚</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="3722" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">cargo</strong> add serde@1.0.140</span></pre><p id="48bc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åˆ›å»ºä¸€ä¸ªå¯ä»¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ç»“æ„ã€‚</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="5c61" class="pf ne jj mh b be pg ph l pi pb">#[derive(Serialize, Deserialize)]<br/>struct BlogPost {<br/>    id: i32,<br/>    title: String,<br/>    body: String,<br/>    published: bool,<br/>}</span></pre><p id="bdb1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code class="fe me mf mg mh b"><strong class="la jk">GET /blog-posts/random</strong></code>ç«¯ç‚¹ã€‚</p><p id="fb97" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Rocketå¯¹JSONæœ‰ä¸€æµçš„æ”¯æŒ(è¿˜è®°å¾—æˆ‘ä»¬åŠ çš„<code class="fe me mf mg mh b">--features=json</code>ï¼Ÿ)ç”¨ä¸€ä¸ª<code class="fe me mf mg mh b">Json&lt;T&gt;</code>è¿”å›å€¼åˆ›å»ºç«¯ç‚¹ã€‚</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="6f77" class="pf ne jj mh b be pg ph l pi pb">#[get("/random")]<br/>fn get_random_blog_post() -&gt; Json&lt;BlogPost&gt; {<br/>    Json(<br/>        BlogPost {<br/>            id: 1,<br/>            title: "My first post".to_string(),<br/>            body: "This is my first post".to_string(),<br/>            published: true,<br/>        }<br/>    )<br/>}</span></pre><p id="3710" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¹¶å°†å®ƒå®‰è£…åˆ°è·¯çº¿çš„<code class="fe me mf mg mh b">/blog-posts</code>çŸ¢é‡(ç¬¬7è¡Œ)</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="abaf" class="pf ne jj mh b be pg ph l pi pb">#[launch]<br/>fn rocket() -&gt; _ {<br/>    let rocket= rocket::build();<br/>    <br/>    rocket<br/>      .mount("/", routes![index])<br/>      .mount("/blog-posts", routes![get_random_blog_post])<br/>}</span></pre><p id="cfd2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¦‚æœä½ å»<a class="ae jg" href="http://127.0.0.1:8000/blog-posts/random" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/blog-posts/random</a>ï¼Œä½ ä¼šçœ‹åˆ°JSONçš„å“åº”ã€‚</p><p id="7a57" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç°åœ¨æˆ‘ä»¬è¦åˆ›å»º<code class="fe me mf mg mh b"><strong class="la jk">GET /blog-posts/&lt;id&gt;</strong></code>ã€‚</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="9caa" class="pf ne jj mh b be pg ph l pi pb">#[get("/&lt;id&gt;")]<br/>fn get_blog_post(id: i32) -&gt; Json&lt;BlogPost&gt; {<br/>    Json(<br/>      BlogPost {<br/>          id,<br/>          title: "Some title".to_string(),<br/>          body: "Some body".to_string(),<br/>          published: true,<br/>      }<br/>    )<br/>}</span></pre><p id="daa2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å°†<code class="fe me mf mg mh b">get_post</code>æ·»åŠ åˆ°è·¯çº¿çŸ¢é‡ä¸­ã€‚ç„¶ååœ¨<a class="ae jg" href="http://127.0.0.1:8000/blog-posts/1000" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/blog-posts/1000</a>æŸ¥çœ‹å“åº”ã€‚</p><p id="02e5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æœ€åï¼Œæˆ‘ä»¬æƒ³åˆ›å»º<code class="fe me mf mg mh b"><strong class="la jk">GET /blog-posts</strong></code>æ¥æ£€ç´¢æ‰€æœ‰ä¹¦ç±ã€‚ä½ çŸ¥é“è¯¥æ€ä¹ˆåšã€‚å°†å“åº”ç±»å‹æ›´æ”¹ä¸º<code class="fe me mf mg mh b">Json&lt;Vec&lt;Book&gt;&gt;</code>ã€‚</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="00ce" class="pf ne jj mh b be pg ph l pi pb">#[get("/")]<br/>fn get_all_blog_posts() -&gt; Json&lt;Vec&lt;BlogPost&gt;&gt; {<br/>    Json(vec![<br/>        BlogPost {<br/>            id: 0,<br/>            title: "Harry Potter".to_string(),<br/>            body: "There once lived a boy".to_string(),<br/>            published: true,<br/>        },<br/>        BlogPost {<br/>            id: 1,<br/>            title: "Fantastic Beast".to_string(),<br/>            body: "There once lived a beast".to_string(),<br/>            published: true,<br/>        }<br/>      ]<br/>    )<br/>}</span></pre><p id="f3b5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å°†<code class="fe me mf mg mh b">get_all_posts</code>æ·»åŠ åˆ°è·¯çº¿çŸ¢é‡ä¸­ã€‚ç„¶ååœ¨<a class="ae jg" href="http://127.0.0.1:8000/blog-posts" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/blog-posts</a>æŸ¥çœ‹å“åº”ã€‚</p><h2 id="9027" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">3.å¸–å­/åšå®¢-å¸–å­ç«¯ç‚¹</h2><p id="41a6" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">ç”¨<code class="fe me mf mg mh b">application/json</code>æ•°æ®è¿‡å¸æ˜ å°„ï¼Ÿåœ¨å®ä¸­ä½¿ç”¨<code class="fe me mf mg mh b">data = </code>ï¼åˆ«å¿˜äº†<code class="fe me mf mg mh b">Json</code>åŒ…è£…ï¼</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="4b7a" class="pf ne jj mh b be pg ph l pi pb">#[post("/", data = "&lt;blog_post&gt;")]<br/>fn create_blog_post(blog_post: Json&lt;BlogPost&gt;) -&gt; Json&lt;BlogPost&gt; {<br/>    blog_post<br/>}</span></pre><p id="1a80" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨HTTPå®¢æˆ·ç«¯ä¸­å°è¯•ä¸€ä¸‹ã€‚</p><h2 id="9415" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">4.é”™è¯¯</h2><p id="efb5" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">å¦‚æœåœ¨è°ƒç”¨ä¸Šè¿°POSTç«¯ç‚¹æ—¶æ•°æ®ç±»å‹é”™è¯¯ï¼Œå°†è‡ªåŠ¨è¿”å›HTTP 422:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="8fbe" class="pf ne jj mh b be pg ph l pi pb">{<br/>    "error": {<br/>        "code": 422,<br/>        "reason": "Unprocessable Entity",<br/>        "description": "The request was well-formed but was unable to be followed due to semantic errors."<br/>    }<br/>}</span></pre><h2 id="856a" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">5.åº”ç”¨ç¨‹åºé…ç½®</h2><p id="48e9" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">åº”ç”¨ç¨‹åºé…ç½®æ˜¯<a class="ae jg" href="https://12factor.net/" rel="noopener ugc nofollow" target="_blank"> 12å› ç´ åº”ç”¨ç¨‹åº</a>çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¾ˆå¥½å¥‡å®ƒå¦‚ä½•ä¸Rocketä¸€èµ·å·¥ä½œã€‚æç¤º:ä¾èµ–æ³¨å…¥ğŸ˜ã€‚</p><p id="590c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">é…ç½®åœ¨<code class="fe me mf mg mh b">Rocket.toml</code>ä¸­å®šä¹‰ã€‚åˆ›å»ºæ­¤æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="7048" class="pf ne jj mh b be pg ph l pi pb"># ./Rocket.toml<br/><br/>[default]<br/>name = "raimi"<br/>age = 20</span></pre><p id="0177" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨<code class="fe me mf mg mh b">src/main.rs</code>ä¸­å°†è¯¥é…ç½®å®šä¹‰ä¸ºä¸€ä¸ªRustç»“æ„ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å°†è¯¥ç»“æ„å‘½åä¸º<code class="fe me mf mg mh b">Config</code>ã€‚</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="bebc" class="pf ne jj mh b be pg ph l pi pb">#[derive(Deserialize)]<br/>struct Config {<br/>    name: String,<br/>    age: u8,<br/>}</span></pre><p id="1823" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨Rocketä¸­ï¼Œé…ç½®æ˜¯<a class="ae jg" href="https://rocket.rs/v0.5-rc/guide/state/" rel="noopener ugc nofollow" target="_blank">ç®¡ç†çš„çŠ¶æ€</a>ï¼Œå¯ä»¥é€šè¿‡<code class="fe me mf mg mh b">&amp;State&lt;T&gt;</code>æ£€ç´¢ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬è¯•å›¾é€šè¿‡ä½¿ç”¨<code class="fe me mf mg mh b">&amp;State&lt;Config&gt;</code>åœ¨GETç«¯ç‚¹ä¸­ä½¿ç”¨<code class="fe me mf mg mh b">Config</code>å€¼ã€‚ç¾ä¸½çš„â¤ï¸.</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="3356" class="pf ne jj mh b be pg ph l pi pb">// ./src/main.rs<br/><br/>use rocket::State;<br/><br/>#[get("/config")]<br/>fn get_config(config: &amp;State&lt;Config&gt;) -&gt; String {<br/>    format!(<br/>      "Hello, {}! You are {} years old.", config.name, config.age<br/>   )<br/>}</span></pre><p id="c0c4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æœ€åï¼Œåœ¨ç¬¬8è¡Œï¼Œæˆ‘ä»¬å‘Šè¯‰Rocketï¼Œå®ƒå¿…é¡»ä»<code class="fe me mf mg mh b">Rocket.toml</code>(æˆ–å¦ä¸€ä¸ªæä¾›è€…)æå–<code class="fe me mf mg mh b">Config</code>é…ç½®å€¼ï¼Œå¹¶å°†å…¶ç”¨ä½œæ‰˜ç®¡çŠ¶æ€ã€‚åœ¨ç¬¬9è¡Œä¸­ï¼Œæˆ‘ä»¬åŒ…æ‹¬äº†æ–°çš„<code class="fe me mf mg mh b">get_config</code>è·¯çº¿ã€‚</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="9e16" class="pf ne jj mh b be pg ph l pi pb">use rocket::fairing::AdHoc;<br/><br/>#[launch]<br/>fn rocket() -&gt; _ {<br/>    let rocket = rocket::build();<br/><br/>    rocket<br/>        .attach(AdHoc::config::&lt;Config&gt;())<br/>        .mount("/", routes![index, get_config])<br/>        .mount(<br/>            "/blog-posts",<br/>            routes![<br/>                get_random_blog_post,<br/>                get_blog_post,<br/>                get_all_blog_posts,<br/>                create_blog_post<br/>            ],<br/>        )<br/>}</span></pre></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h2 id="1d2a" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">ğŸ³Dockerè®¾ç½®</h2><p id="c42b" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç¨å¾®ä¼‘æ¯ä¸€ä¸‹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨Docker Hubçš„å®˜æ–¹Postgresæ˜ åƒæ¥è®¾ç½®Postgresã€‚åˆ›å»ºä¸€ä¸ª<code class="fe me mf mg mh b">docker-compose.yml</code>æ–‡ä»¶:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="329b" class="pf ne jj mh b be pg ph l pi pb">version: '3.1'<br/>services:<br/>  db:<br/>    image: postgres<br/>    restart: always<br/>    environment:<br/>      POSTGRES_USER: postgres<br/>      POSTGRES_PASSWORD: example<br/>    ports:<br/>      - "5432:5432"</span></pre><p id="2588" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¹¶è¿è¡Œ<code class="fe me mf mg mh b">docker-compose up</code>ã€‚è¯·æ³¨æ„ï¼Œè¿æ¥å­—ç¬¦ä¸²å¦‚ä¸‹æ‰€ç¤º(æˆ‘ä»¬ç¨åå°†ä½¿ç”¨æ­¤ä¿¡æ¯):</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="128a" class="ob ne jj mh b gy oy oz l pa pb">postgresql://postgres:example/localhost:5432/postgres</span></pre></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h2 id="0066" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">6.æŸ´æ²¹è®¾ç½®</h2><p id="18c8" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">æˆ‘ä»¬å°†ä½¿ç”¨Dieselè¿›è¡ŒåŒæ­¥ã€é˜»å¡å¼ORMã€‚è®©æˆ‘ä»¬å®‰è£…å®ƒï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨CLIä¸­ä½¿ç”¨å®ƒ:</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="523a" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">cargo</strong> add diesel_cli@1.4.1 --no-default-features --features postgres</span></pre><h2 id="4501" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">7.ç§»æ°‘</h2><p id="7d3b" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">é»˜è®¤æƒ…å†µä¸‹ï¼ŒDieselåœ¨<code class="fe me mf mg mh b">migrations</code>æ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾è¿ç§»ã€‚æˆ‘ä»¬ä¼šåˆ›é€ å®ƒ</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="175f" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">mkdir</strong> migrations</span></pre><p id="5074" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆæ–°çš„è¿ç§»è„šæœ¬:</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="7eb9" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">diesel</strong> migration generate create_blog_posts</span></pre><p id="c161" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨<code class="fe me mf mg mh b">up.sql</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ </p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="cd64" class="pf ne jj mh b be pg ph l pi pb">-- Your SQL goes here<br/>CREATE TABLE blog_posts (<br/>  id SERIAL PRIMARY KEY,<br/>  title VARCHAR NOT NULL,<br/>  body TEXT NOT NULL,<br/>  published BOOLEAN NOT NULL DEFAULT 'f'<br/>)</span></pre><p id="f9e6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">è€Œåœ¨<code class="fe me mf mg mh b">down.sql</code>ä¸­ï¼Œ</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="7cc5" class="pf ne jj mh b be pg ph l pi pb">-- This file should undo anything in `up.sql`<br/>DROP TABLE blog_posts;</span></pre><p id="1896" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç„¶åè¿è¡Œè¿ç§»ï¼ŒæŒ‡å®šæ•°æ®åº“URLã€‚</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="bf03" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">diesel</strong> migration run \<br/>  --database-url postgresql://postgres:example@localhost:5432/postgres</span></pre><h2 id="b4d9" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">8.æ¨¡å¼å’Œæ¨¡å‹</h2><p id="b7df" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">å°†Dieselä½œä¸ºä¾èµ–é¡¹æ·»åŠ åˆ°åº”ç”¨ç¨‹åºä¸­:</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="15d8" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">cargo</strong> add diesel@1.4.1</span></pre><p id="4017" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç„¶åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œæ›¿æ¢ç°æœ‰çš„<code class="fe me mf mg mh b">BlogPost</code>ç»“æ„:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="0016" class="pf ne jj mh b be pg ph l pi pb">#[macro_use] extern crate diesel;<br/>use diesel::{Insertable, Queryable, table};<br/><br/>table! {<br/>    blog_posts (id) {<br/>        id -&gt; Int4,<br/>        title -&gt; Varchar,<br/>        body -&gt; Text,<br/>        published -&gt; Bool,<br/>    }<br/>}<br/><br/>#[derive(Serialize, Deserialize, Queryable, Debug, Insertable)]<br/>#[table_name = "blog_posts"]<br/>struct BlogPost {<br/>    id: i32,<br/>    title: String,<br/>    body: String,<br/>    published: bool,<br/>}</span></pre><p id="5621" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æ³¨æ„<code class="fe me mf mg mh b">table!</code>å®æ˜¯ä»ä»¥ä¸‹å‘½ä»¤ä¸­æ´¾ç”Ÿå‡ºæ¥çš„:</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="7e2f" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">diesel</strong> print-schema</span></pre><p id="53eb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">è¿™ä¸ªå®æ ¹æ®æ•°æ®åº“æ¨¡å¼æ‰©å±•æˆä¸€å †ä»£ç æ¥è¡¨ç¤º<code class="fe me mf mg mh b">blog_post</code>è¡¨åŠå…¶åˆ—ã€‚è¯¥ä»£ç ç”¨äºå°†<code class="fe me mf mg mh b">BlogPost</code>ç»“æ„ä¸<code class="fe me mf mg mh b">blog_posts</code>è¡¨ç›¸å…³è”ï¼Œå¹¶æ ¹æ®åˆ—<code class="fe me mf mg mh b">id</code>ã€<code class="fe me mf mg mh b">title</code>ã€<code class="fe me mf mg mh b">body</code>å’Œ<code class="fe me mf mg mh b">published</code>éªŒè¯ç»“æ„æˆå‘˜çš„åç§°ã€‚å¤ªæ£’äº†ã€‚</p><h2 id="ae71" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">9.æŸ´æ²¹è¿æ¥</h2><p id="1dc7" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">æ·»åŠ ä¸ºåŒæ­¥ORMæä¾›æ”¯æŒçš„Rocketåº“ã€‚</p><pre class="oq or os ot gt ou mh ov ow aw ox bi"><span id="9199" class="ob ne jj mh b gy oy oz l pa pb"><strong class="mh jk">cargo</strong> add rocket_sync_db_pools@0.1.0-rc.2 \<br/>  --features=diesel_postgres_pool</span></pre><p id="dc45" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨<code class="fe me mf mg mh b">Rocket.toml</code>ä¸­é…ç½®æˆ‘ä»¬çš„æ•°æ®åº“:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="65c9" class="pf ne jj mh b be pg ph l pi pb">[default.databases.my_db]<br/>url = "postgres://postgres:example@localhost:5432/postgres"</span></pre><p id="4ae5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¿™ç§é…ç½®:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="1231" class="pf ne jj mh b be pg ph l pi pb">#[database("my_db")]<br/>pub struct Db(diesel::PgConnection);</span></pre><p id="2adb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç„¶åå°†<code class="fe me mf mg mh b">Db</code>ä½œä¸ºæ•´æµç½©è¿æ¥åˆ°ç¬¬6è¡Œçš„ç«ç®­ä¸Š:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="b5c2" class="pf ne jj mh b be pg ph l pi pb">#[launch]<br/>fn rocket() -&gt; _ {<br/>    let rocket = rocket::build();<br/><br/>    rocket<br/>        .attach(Db::fairing())<br/>        .attach(AdHoc::config::&lt;Config&gt;())<br/>        .mount("/", routes![index, custom])<br/>        .mount(<br/>            "/blog-posts",<br/>            routes![<br/>                get_random_blog_post,<br/>                get_blog_post,<br/>                get_all_blog_posts,<br/>                create_blog_post<br/>            ],<br/>        )<br/>}</span></pre><p id="20cb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå¹¶ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œã€‚</p><h2 id="5bf5" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">10.åˆ›å»ºä¸€ç¯‡åšå®¢æ–‡ç« </h2><p id="faef" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å°†æ›´æ–°æˆ‘ä»¬çš„<code class="fe me mf mg mh b">create_blog_post</code>ï¼Œè¿™æ ·ä»»ä½•æ–°çš„è¯·æ±‚éƒ½å°†ä¿å­˜åœ¨æ•°æ®åº“ä¸­:</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="964c" class="pf ne jj mh b be pg ph l pi pb">#[post("/", data = "&lt;blog_post&gt;")]<br/>async fn create_blog_post(<br/>  connection: Db,<br/>  blog_post: Json&lt;BlogPost&gt;,<br/>) -&gt; Json&lt;BlogPost&gt; {<br/>  <br/>    connection<br/>        .run(move |c| {<br/>            diesel::insert_into(blog_posts::table)<br/>                .values(&amp;blog_post.into_inner())<br/>                .get_result(c)<br/>        })<br/>        .await<br/>        .map(Json)<br/>        .expect("boo")<br/>  <br/>}</span></pre><p id="e8d6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ä½¿ç”¨HTTPå®¢æˆ·ç«¯å¹¶æäº¤POSTè¯·æ±‚ï¼Œç„¶åæŸ¥çœ‹æ•°æ®æ˜¯å¦å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼æˆ‘ç”¨TablePlusåšè¿™ä¸ªã€‚</p><h2 id="aa0c" class="ob ne jj bd nf oc od dn nj oe of dp nn lh og oh np ll oi oj nr lp ok ol nt om bi translated">11.è·å–æ‰€æœ‰åšå®¢æ–‡ç« </h2><p id="bd5f" class="pw-post-body-paragraph ky kz jj la b lb nv kk ld le nw kn lg lh on lj lk ll oo ln lo lp op lr ls lt im bi translated">æœ€åï¼Œæˆ‘ä»¬å°†æ›´æ–°<code class="fe me mf mg mh b">get_all_blog_posts</code>æ¥æ£€ç´¢æˆ‘åˆ›å»ºçš„æ‰€æœ‰åšå®¢æ–‡ç« :</p><pre class="oq or os ot gt ou mh pc bn pd pe bi"><span id="f736" class="pf ne jj mh b be pg ph l pi pb">#[get("/")]<br/>async fn get_all_blog_posts(connection: Db) -&gt; Json&lt;Vec&lt;BlogPost&gt;&gt; {<br/>    connection<br/>        .run(|c| blog_posts::table.load(c))<br/>        .await<br/>        .map(Json)<br/>        .expect("Failed to fetch blog posts")<br/>}</span></pre><p id="d7a0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æ£€æŸ¥æ‚¨æ˜¯å¦åœ¨<a class="ae jg" href="http://localhost:8000/blog-posts" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/blog-posts</a>çœ‹åˆ°äº†æ‰€æœ‰çš„åšå®¢å¸–å­ã€‚</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="1acf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">è¿˜å’Œæˆ‘åœ¨ä¸€èµ·å—ï¼Ÿå¤ªæ£’äº†ï¼Œè°¢è°¢ä½ è¯»åˆ°è¿™é‡Œï¼ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„åº”ç”¨:<a class="ae jg" href="https://github.com/remykarem/rocket-diesel" rel="noopener ugc nofollow" target="_blank">https://github.com/remykarem/rocket-diesel</a>ã€‚ä¸€å®šè¦çœ‹çœ‹æˆ‘åœ¨ä¸‹é¢è´´çš„ä¸€äº›é“¾æ¥ï¼</p><p id="fe39" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘è§‰å¾—ç«ç®­æ€ä¹ˆæ ·ï¼Ÿåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å–œæ¬¢ç«ç®­ã€‚æ„Ÿè§‰åƒæ˜¯Spring Boot + FastAPI(ä½†å¯èƒ½æ˜¯å› ä¸ºæˆ‘åªçŸ¥é“è¿™ä¸¤ä¸ªæ¡†æ¶)ã€‚çœ‹èµ·æ¥Rocketé™„å¸¦äº†å¾ˆå¤šç”µæ± (ä¾‹å¦‚Json)ï¼Œä½œä¸ºè¯¥åº“çš„ç”¨æˆ·ï¼Œæˆ‘å¾ˆæ¬£èµè¿™ä¸€ç‚¹ã€‚æˆ‘è§‰å¾—<a class="ae jg" href="https://rocket.rs/v0.5-rc/guide/state/#managed-state" rel="noopener ugc nofollow" target="_blank">æ‰˜ç®¡çŠ¶æ€</a>å’Œ<a class="ae jg" href="https://rocket.rs/v0.5-rc/guide/state/#request-local-state" rel="noopener ugc nofollow" target="_blank">è¯·æ±‚-æœ¬åœ°çŠ¶æ€</a>çš„æ¦‚å¿µç±»ä¼¼äºåœ¨Spring Bootç®¡ç†beansï¼Œä½†æˆ‘ä¸èƒ½ç¡®å®šï¼Œå½“æˆ‘å†æ¬¡è°ˆåˆ°å®ƒæ—¶ï¼Œæˆ‘ä¼šäº†è§£æ›´å¤šã€‚</p><p id="f899" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘è§‰å¾—æŸ´æ²¹æ€ä¹ˆæ ·ï¼Ÿä½œä¸ºä¸€ä¸ªæŸ¥è¯¢æ„å»ºè€…ï¼Œæˆ‘è®¤ä¸ºAPIå¤ªå†—é•¿äº†ã€‚æˆ‘ç®€è¦åœ°çœ‹äº†ä¸€ä¸‹SQLxæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘æƒ³ä¸‹æ¬¡æˆ‘ä¼šå°è¯•è¿™æ ·åšã€‚</p><p id="15ac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç›´åˆ°é‚£æ—¶ï¼</p><p id="43f9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">å‚è€ƒæ–‡çŒ®</strong></p><p id="4cfe" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" href="https://rocket.rs/" rel="noopener ugc nofollow" target="_blank">https://rocket.rs/</a></p><p id="72ab" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" href="https://diesel.rs/guides/getting-started" rel="noopener ugc nofollow" target="_blank">https://diesel.rs/guides/getting-started</a></p><p id="d8d4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" href="https://github.com/TmLev/crud-rest-api-rust-rocket-diesel-postgres" rel="noopener ugc nofollow" target="_blank">https://github . com/TmLev/crud-rest-API-rust-rocket-diesel-postgres</a></p><p id="9516" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ã€https://dev.to/davidedelpapa/rocket-tutorial-01-basics-4ph9 T4ã€‘</p><p id="9141" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" href="https://github.com/SergioBenitez/Rocket/blob/v0.5-rc/examples/databases/src/diesel_sqlite.rs" rel="noopener ugc nofollow" target="_blank">https://github . com/SergioBenitez/Rocket/blob/v 0.5-RC/examples/databases/src/diesel _ SQLite . RS</a></p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="8f82" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘åœ¨äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€ç¼–ç¨‹è¯­è¨€ã€Webæ¡†æ¶ã€ç”Ÿäº§åŠ›å’Œå­¦ä¹ æ–¹é¢å‘è¡¨æ–‡ç« ã€‚</p><p id="268e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lu">å¦‚æœä½ å–œæ¬¢é˜…è¯»æ›´å¤šå…³äºwebæ¡†æ¶çš„å†…å®¹ï¼Œä½ å¯ä»¥</em> <a class="ae jg" href="https://remykarem.medium.com/subscribe" rel="noopener"> <em class="lu">è®¢é˜…</em> </a> <em class="lu">éšæ—¶æ¥æ”¶æˆ‘å‘å¸ƒçš„æ›´æ–°ï¼Œæˆ–è€…</em> <a class="ae jg" href="https://remykarem.medium.com/membership" rel="noopener"> <em class="lu">é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥æ³¨å†Œ</em> </a> <em class="lu">ï¼è¯·æ³¨æ„ï¼Œæ‚¨çš„ä¼šå‘˜è´¹çš„ä¸€éƒ¨åˆ†å°†ä½œä¸ºä»‹ç»è´¹åˆ†æ‘Šç»™æˆ‘ã€‚</em></p></div></div>    
</body>
</html>