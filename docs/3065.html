<html>
<head>
<title>Kubernetes Volumes: the definitive guide (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åº“ä¼¯å†…ç‰¹å·:æƒå¨æŒ‡å—(ç¬¬äºŒéƒ¨åˆ†)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/tutorial-basics-of-kubernetes-volumes-part-2-b2ea6f397402?source=collection_archive---------2-----------------------#2019-09-27">https://itnext.io/tutorial-basics-of-kubernetes-volumes-part-2-b2ea6f397402?source=collection_archive---------2-----------------------#2019-09-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ed38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¬¢è¿æ¥åˆ°<a class="ae kl" href="https://medium.com/@abhishek1987/kubernetes-in-a-nutshell-blog-series-c3a97fce9445" rel="noopener">â€œKubernetes in theåšæœå£³â€</a>åšå®¢ç³»åˆ—çš„å¦ä¸€éƒ¨åˆ†ï¼Œå®ƒå…³æ³¨Kubernetesçš„â€œå¹¿åº¦â€å¹¶æ¶µç›–åŸºæœ¬ä¸»é¢˜ï¼Œå¦‚<a class="ae kl" href="https://dev.to/itnext/stateless-apps-in-kubernetes-beyond-pods-4p52" rel="noopener ugc nofollow" target="_blank">ç¼–æ’æ— çŠ¶æ€åº”ç”¨</a>ï¼Œå¦‚ä½•<a class="ae kl" href="https://dev.to/itnext/hands-on-guide-configure-your-kubernetes-apps-using-the-configmap-object-44gj" rel="noopener ugc nofollow" target="_blank">ä½¿ç”¨</a> <code class="fe km kn ko kp b"><a class="ae kl" href="https://dev.to/itnext/hands-on-guide-configure-your-kubernetes-apps-using-the-configmap-object-44gj" rel="noopener ugc nofollow" target="_blank">ConfigMap</a></code>é…ç½®Kubernetesåº”ç”¨ç­‰ã€‚æˆ‘å¸Œæœ›ä½ åˆ°ç›®å‰ä¸ºæ­¢å–œæ¬¢å®ƒï¼</p><div class="kq kr gp gr ks kt"><a href="https://medium.com/@abhishek1987/kubernetes-in-a-nutshell-blog-series-c3a97fce9445" rel="noopener follow" target="_blank"><div class="ku ab fo"><div class="kv ab kw cl cj kx"><h2 class="bd ir gy z fp ky fr fs kz fu fw ip bi translated">â€œæœå£³ä¸­çš„åº“ä¼¯å†…ç‰¹â€â€”â€”åšå®¢ç³»åˆ—</h2><div class="la l"><h3 class="bd b gy z fp ky fr fs kz fu fw dk translated">æœ¬ç³»åˆ—å°†æ¶µç›–Kubernetesçš„â€œå¹¿åº¦â€å’Œæ ¸å¿ƒ/åŸºç¡€ä¸»é¢˜(è§ä¸‹ä¸€èŠ‚)ã€‚å®ƒä¼šâ€¦</h3></div><div class="lb l"><p class="bd b dl z fp ky fr fs kz fu fw dk translated">medium.com</p></div></div></div></a></div><p id="3187" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯ä¸Šä¸€ç¯‡åšå®¢çš„å»¶ç»­ï¼Œä¸Šä¸€ç¯‡åšå®¢è®²è¿°äº†Kubernetes <code class="fe km kn ko kp b">Volume</code>çš„åŸºç¡€çŸ¥è¯†ã€‚</p><div class="kq kr gp gr ks kt"><a rel="noopener  ugc nofollow" target="_blank" href="/learn-about-the-basics-of-kubernetes-persistence-part-1-b1fa2847768f"><div class="ku ab fo"><div class="kv ab kw cl cj kx"><h2 class="bd ir gy z fp ky fr fs kz fu fw ip bi translated">äº†è§£KubernetesæŒä¹…æ€§çš„åŸºç¡€çŸ¥è¯†â€”ç¬¬1éƒ¨åˆ†</h2><div class="la l"><h3 class="bd b gy z fp ky fr fs kz fu fw dk translated">æˆ‘ä»¬ç»§ç»­æˆ‘ä»¬çš„â€œæœå£³ä¸­çš„åº“ä¼¯å†…ç‰¹â€ä¹‹æ—…ï¼Œè¿™ä¸€éƒ¨åˆ†å°†æ¶µç›–åº“ä¼¯å†…ç‰¹å·ï¼</h3></div><div class="lb l"><p class="bd b dl z fp ky fr fs kz fu fw dk translated">itnext.io</p></div></div><div class="lc l"><div class="ld l le lf lg lc lh li kt"/></div></div></a></div><p id="dcd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å¯¹å…¶è¿›è¡Œä¸€äº›æ”¹è¿›:</p><ul class=""><li id="cf45" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">äº†è§£<code class="fe km kn ko kp b">PersistentVolume</code>ã€<code class="fe km kn ko kp b">PersistentVolumeClaim</code>ç‰©ä½“ä»¥åŠå®ƒä»¬å¦‚ä½•ååŒå·¥ä½œ</li><li id="a4f9" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">æ·±å…¥äº†è§£Kubernetesä¸­çš„èµ„æºè°ƒé…ç±»å‹â€”é™æ€ã€åŠ¨æ€</li><li id="d382" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">äº†è§£å­˜å‚¨ç±»åˆ«ä»¥åŠå®ƒä»¬å¦‚ä½•æ”¯æŒåŠ¨æ€é…ç½®</li><li id="a628" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">æ¢ç´¢ç›¸å…³ç¤ºä¾‹</li></ul><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/9cd931e2b34723530f2732b9162fdeab.png" data-original-src="https://miro.medium.com/v2/resize:fit:256/format:webp/1*1Cc99RF4vtCSKaHDgz_iyQ.png"/></div></figure><h1 id="1258" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">å…ˆå†³æ¡ä»¶:</h1><p id="c883" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">è¦éµå¾ªè¿™ç¯‡åšå®¢ä¸­çš„ä¾‹å­ï¼Œæ‚¨éœ€è¦ä»¥ä¸‹å†…å®¹:</p><ul class=""><li id="9c3d" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">ä¸€ä¸ª<a class="ae kl" href="https://docs.microsoft.com/azure/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å¾®è½¯Azureè´¦æˆ·</a>â€”<a class="ae kl" href="https://azure.microsoft.com/free/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">æ³¨å†Œä¸€ä¸ªå…è´¹è´¦æˆ·å§ï¼</a></li><li id="c3f7" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><a class="ae kl" href="https://azure.microsoft.com/services/kubernetes-service/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure KubernetesæœåŠ¡(AKS)é›†ç¾¤</a>â€”â€”æœ¬åšå®¢å°†æŒ‡å¯¼æ‚¨åˆ›å»ºä¸€ä¸ªé›†ç¾¤</li><li id="8e8f" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">Azure CLIæˆ–Azure Cloud Shellâ€”â€”å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…Azure CLI ,ä½ å¯ä»¥é€‰æ‹©å®‰è£…å®ƒ(åº”è¯¥å¾ˆå¿«ï¼)æˆ–è€…ç›´æ¥ä»ä½ çš„æµè§ˆå™¨ä½¿ç”¨<a class="ae kl" href="https://azure.microsoft.com/features/cloud-shell/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azureäº‘å£³</a>ã€‚</li><li id="ff37" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" rel="noopener ugc nofollow" target="_blank">kubectl</a></code>ä¸æ‚¨çš„AKSé›†ç¾¤äº’åŠ¨</li></ul><p id="c650" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä»£ç å¯ä»GitHub ä¸Šçš„<a class="ae kl" href="https://github.com/abhirockzz/kubernetes-in-a-nutshell/blob/master/volumes-2" rel="noopener ugc nofollow" target="_blank">è·å¾—</a></p><h1 id="ebca" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">å‰ä¸€é›†â€¦</h1><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/6572d90c42ceb237d60eeecc06aa75dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*q_OS6eEOWrCT7M0e.gif"/></div></figure><p id="e94f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">â€¦æœ€åè®¨è®ºäº†â€œå¯¹æŒä¹…å­˜å‚¨çš„éœ€æ±‚â€,å› ä¸ºæ™®é€šKubernetes <code class="fe km kn ko kp b">Volume</code>çš„ç”Ÿå‘½å‘¨æœŸä¸<code class="fe km kn ko kp b">Pod</code>ç´§å¯†ç›¸å…³ï¼Œè€Œä¸¥è‚ƒçš„åº”ç”¨éœ€è¦æ¯”<code class="fe km kn ko kp b">Pod</code>ç”šè‡³è¿è¡Œ<code class="fe km kn ko kp b">Pod</code>çš„<code class="fe km kn ko kp b">Node</code>æ›´æŒä¹…çš„ç¨³å®šæŒä¹…çš„å­˜å‚¨ã€‚</p><p id="bf53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é•¿æœŸå­˜å‚¨ä»‹è´¨çš„ä¾‹å­æ˜¯ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ(NFSã€Cephã€GlusterFSç­‰)ã€‚)æˆ–è€…åŸºäºäº‘çš„é€‰é¡¹ï¼Œæ¯”å¦‚<a class="ae kl" href="https://azure.microsoft.com/services/storage/disks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Disk </a>ï¼Œäºšé©¬é€ŠEBSï¼ŒGCEæŒä¹…ç›˜ç­‰ã€‚</p><p id="4113" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code class="fe km kn ko kp b">nfs</code>å·ç±»å‹å°†NFS(ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ)æŒ‚è½½åˆ°<code class="fe km kn ko kp b">Pod</code>ä¸­ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe km kn ko kp b">server</code>å±æ€§æŒ‡å‘ä¸€ä¸ªç°æœ‰çš„NFSå®ä¾‹ã€‚</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="8358" class="nm mf iq kp b gy nn no l np nq">spec:<br/>  volumes:<br/>  - name: app-data<br/>    nfs:<br/>      server: nfs://localhost<br/>      path: "/"<br/>  containers:<br/>  - image: myapp-docker-image<br/>    name: myapp<br/>    volumeMounts:<br/>    - mountPath: /data<br/>      name: app-data</span></pre><h1 id="dd40" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">è¿™æ˜¯ğŸ‘†å¤Ÿå¥½å—ï¼Ÿ</h1><p id="aefa" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">åœ¨ä¸Šé¢çš„<code class="fe km kn ko kp b">Pod</code>æ¸…å•ä¸­ï¼Œå­˜å‚¨ä¿¡æ¯(NFS)ç›´æ¥åœ¨<code class="fe km kn ko kp b">Pod</code>ä¸­æŒ‡å®š(ä½¿ç”¨<code class="fe km kn ko kp b">volumes</code>éƒ¨åˆ†)ã€‚è¿™æ„å‘³ç€å¼€å‘è€…éœ€è¦çŸ¥é“NFSæœåŠ¡å™¨çš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬å®ƒçš„ä½ç½®ç­‰ç­‰ã€‚è¿™é‡Œè‚¯å®šæœ‰æ”¹è¿›çš„ä½™åœ°ï¼Œå°±åƒè½¯ä»¶ä¸­çš„å¤§å¤šæ•°äº‹æƒ…ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨æŒä¹…å·å’ŒæŒä¹…å·å£°æ˜çš„æ¦‚å¿µï¼Œé€šè¿‡å¦ä¸€ä¸ªå±‚æ¬¡çš„é—´æ¥æˆ–æŠ½è±¡æ¥å®ç°ã€‚</p><p id="7c7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å…³é”®æ€æƒ³å›´ç»•ç€â€œèŒè´£åˆ†ç¦»â€ä»¥åŠå°†å­˜å‚¨åˆ›å»º/ç®¡ç†ä¸å…¶éœ€æ±‚/è¯·æ±‚åˆ†ç¦»å¼€æ¥ã€‚è¿™å°±æ˜¯<code class="fe km kn ko kp b">PersistentVolumeClaim</code>å’Œ<code class="fe km kn ko kp b">PersistentVolume</code>å‘æŒ¥ä½œç”¨çš„åœ°æ–¹:</p><ul class=""><li id="97ba" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">PersistentVolumeClaim</code>å…è®¸ç”¨æˆ·é€šè¿‡æŒ‡å®šéœ€æ±‚(ä¾‹å¦‚å­˜å‚¨é‡)ä½œä¸º<code class="fe km kn ko kp b">PersistentVolumeClaim</code>è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œä»¥â€œå£°æ˜â€çš„æ–¹å¼è¯·æ±‚æŒä¹…å­˜å‚¨ã€‚</li><li id="a951" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">ä¸€ä¸ª<code class="fe km kn ko kp b">PersistentVolume</code>æ˜¯å¯¹<code class="fe km kn ko kp b">PersistentVolumeClaim</code>çš„è¡¥å……ï¼Œä»£è¡¨Kubernetesé›†ç¾¤ä¸­çš„å­˜å‚¨ä»‹è´¨ã€‚å­˜å‚¨çš„å®é™…ä¾›åº”(ä¾‹å¦‚ï¼Œä½¿ç”¨Azure CLI åˆ›å»º<a class="ae kl" href="https://docs.microsoft.com/cli/azure/disk?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-disk-create" rel="noopener ugc nofollow" target="_blank"> Azureç£ç›˜ã€Azureé—¨æˆ·ç­‰)ã€‚)å¹¶ä¸”é›†ç¾¤ä¸­çš„<code class="fe km kn ko kp b">PersistentVolume</code>çš„åˆ›å»ºé€šå¸¸ç”±ç®¡ç†å‘˜å®Œæˆï¼Œæˆ–è€…åœ¨åŠ¨æ€ä¾›åº”çš„æƒ…å†µä¸‹ï¼Œç”±Kubernetesè‡ªå·±å®Œæˆ(ç¨åå°†ä»‹ç»)</a></li></ul><p id="2397" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é™¤äº†èŒè´£çš„åˆ†ç¦»å’Œåˆ†ç¦»ï¼Œå®ƒè¿˜æä¾›äº†çµæ´»æ€§å’Œå¯ç§»æ¤æ€§ã€‚ä¾‹å¦‚ï¼Œæ‚¨æœ‰å¤šä¸ªç¯å¢ƒï¼Œå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ã€‚ä½¿ç”¨<code class="fe km kn ko kp b">PersistentVolume</code>ï¼Œæ‚¨åªéœ€å£°æ˜ä¸€æ¬¡å­˜å‚¨éœ€æ±‚(ä¾‹å¦‚ï¼Œâ€œæˆ‘çš„åº”ç”¨éœ€è¦5 GBâ€)ï¼Œå¹¶æ ¹æ®ç¯å¢ƒåˆ‡æ¢å®é™…å­˜å‚¨ä»‹è´¨ï¼Œè¿™è¦å½’åŠŸäº<code class="fe km kn ko kp b">PersistentVolumeClaim</code>â€”â€”è¿™å¯ä»¥æ˜¯å¼€å‘ç¯å¢ƒä¸­çš„æœ¬åœ°ç£ç›˜ã€æµ‹è¯•ä¸­çš„æ ‡å‡†ç¡¬ç›˜å’Œç”Ÿäº§ä¸­çš„å›ºæ€ç¡¬ç›˜ã€‚è¿™åŒæ ·é€‚ç”¨äºå¤šäº‘åœºæ™¯ä¸­çš„å¯ç§»æ¤æ€§ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„è¯·æ±‚è§„èŒƒï¼Œä½†æ˜¯æ ¹æ®äº‘æä¾›å•†åˆ‡æ¢<code class="fe km kn ko kp b">PersistentVolume</code></p><blockquote class="nr ns nt"><p id="a626" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><em class="iq">åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¸¾ä¾‹æ¥å¸®åŠ©å·©å›ºè¿™äº›æ¦‚å¿µã€‚</em></p></blockquote><h1 id="84fb" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">æ·±æ½œ</h1><h2 id="0d74" class="nm mf iq bd mg ny nz dn mk oa ob dp mo jy oc od ms kc oe of mw kg og oh na oi bi translated">PersistentVolumeClaim</h2><p id="8efc" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">ä¸€ä¸ª<code class="fe km kn ko kp b">PersistentVolumeClaim</code>åªæ˜¯å¦ä¸€ä¸ªKuberneteså¯¹è±¡(å¦‚<code class="fe km kn ko kp b">Pod</code>ã€<code class="fe km kn ko kp b">Deployment</code>ã€<code class="fe km kn ko kp b">ConfigMap</code>ç­‰)ã€‚).è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="6ee3" class="nm mf iq kp b gy nn no l np nq">apiVersion: v1<br/>kind: PersistentVolumeClaim<br/>metadata:<br/>  name: data-volume-claim<br/>spec:<br/>  accessModes:<br/>    - ReadWriteOnce<br/>  resources:<br/>    requests:<br/>      storage: 2Gi<br/>  storageClassName: volume-class</span></pre><p id="9c35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯<code class="fe km kn ko kp b"><strong class="jp ir">spec</strong></code>ï¼Œå®ƒæ˜¯å¯¹ä¸€ä¸ª<code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.15/#persistentvolumeclaimspec-v1-core" rel="noopener ugc nofollow" target="_blank">PersistentVolumeClaimSpec</a></code>å¯¹è±¡çš„å¼•ç”¨â€”â€”è¿™æ˜¯å®šä¹‰å­˜å‚¨éœ€æ±‚çš„åœ°æ–¹ã€‚éœ€è¦å…³æ³¨çš„é‡è¦å±æ€§åŒ…æ‹¬:</p><ul class=""><li id="e658" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">resources</code> -å·æ‰€éœ€çš„æœ€å°èµ„æº</li><li id="d7ac" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">accessModes</code> -å·å¯ä»¥å®‰è£…çš„æ–¹å¼(æœ‰æ•ˆå€¼ä¸º<code class="fe km kn ko kp b">ReadWriteOnce</code>ã€<code class="fe km kn ko kp b">ReadOnlyMany</code>ã€<code class="fe km kn ko kp b">ReadWriteMany</code>)</li><li id="7480" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">storageClassName</code> -æƒåˆ©è¦æ±‚æ‰€è¦æ±‚çš„<code class="fe km kn ko kp b">StorageClass</code>çš„åç§°(<code class="fe km kn ko kp b">StorageClass</code>å¦èŠ‚)</li></ul><blockquote class="nr ns nt"><p id="27b7" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><code class="fe km kn ko kp b"><em class="iq">PersistentVolumeClaim</em></code> <em class="iq">æœ‰å…¶ä»–å±æ€§</em><code class="fe km kn ko kp b"><em class="iq">apiVersion</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">kind</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">metadata</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">status</em></code><em class="iq">ã€‚è¿™äº›æ˜¯æ‰€æœ‰Kuberneteså¯¹è±¡å…±æœ‰çš„ã€‚</em></p></blockquote><h2 id="2be2" class="nm mf iq bd mg ny nz dn mk oa ob dp mo jy oc od ms kc oe of mw kg og oh na oi bi translated">æŒä¹…å·</h2><p id="0d60" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">è¿™æ˜¯å…¸å‹çš„<code class="fe km kn ko kp b">PersistentVolume</code>è§„æ ¼çš„æ ·å­:</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="55e6" class="nm mf iq kp b gy nn no l np nq">apiVersion: v1<br/>  kind: PersistentVolume<br/>  metadata:<br/>    name: my-pvc<br/>  spec:<br/>    capacity:<br/>      storage: 10Gi<br/>    accessModes:<br/>      - ReadWriteOnce<br/>    persistentVolumeReclaimPolicy: Recycle<br/>    storageClassName: volume-class<br/>    nfs:<br/>      server: nfs://localhost<br/>      path: "/"</span></pre><p id="e0f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±åƒ<code class="fe km kn ko kp b">PersistentVolumeClaim</code>ï¼Œ<code class="fe km kn ko kp b">spec</code> ( <code class="fe km kn ko kp b">PersistentVolumeSpec</code>å¯¹è±¡)æ˜¯<code class="fe km kn ko kp b">PersistentVolume</code>æœ€é‡è¦çš„éƒ¨åˆ†â€”â€”è®©æˆ‘ä»¬è¿›ä¸€æ­¥å‰–æå®ƒ:</p><ul class=""><li id="6060" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">ç‰¹å®šäºæä¾›å•†/å­˜å‚¨â€”å¦‚<code class="fe km kn ko kp b">nfs</code>ã€<code class="fe km kn ko kp b">azureDisk</code>ã€<code class="fe km kn ko kp b">gcePersistentDisk</code>ã€<code class="fe km kn ko kp b">awsElasticBlockStore</code>ç­‰ã€‚å®ƒå…è®¸ä½ æä¾›ç‰¹å®šäºå­˜å‚¨ä»‹è´¨(NFSï¼ŒAzureç£ç›˜ç­‰)çš„ä¿¡æ¯ã€‚)</li><li id="cd61" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">accessModes</code> -å·çš„å®‰è£…æ–¹å¼</li><li id="2c57" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">capacity</code> -æ°¸ä¹…å·çš„èµ„æºå’Œå®¹é‡ä¿¡æ¯ã€‚</li><li id="d358" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">storageClassName</code> -è¯¥æŒä¹…å·æ‰€å±çš„<code class="fe km kn ko kp b">StorageClass</code>çš„åç§°(<code class="fe km kn ko kp b">StorageClass</code>å³å°†è¢«è¦†ç›–)</li><li id="eefb" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">persistentVolumeReclaimPolicy</code> -åˆ é™¤ç›¸åº”çš„<code class="fe km kn ko kp b">PersistentVolumeClaim</code>ä¼šå‘ç”Ÿä»€ä¹ˆ-é€‰é¡¹æœ‰<code class="fe km kn ko kp b">Retain</code>ã€<code class="fe km kn ko kp b">Delete</code>å’Œ<code class="fe km kn ko kp b">Recycle</code>(å·²å¼ƒç”¨)</li></ul><p id="2132" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½œä¸ºä½œä¸šï¼Œè¯·æ¢ç©¶<code class="fe km kn ko kp b">nodeAffinity</code>ã€<code class="fe km kn ko kp b">volumeMode</code>ã€<code class="fe km kn ko kp b">mountOptions</code>å±æ€§ï¼Œç¡®å®šå®ƒä»¬èµ·ä»€ä¹ˆä½œç”¨</p><blockquote class="nr ns nt"><p id="eaa3" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><code class="fe km kn ko kp b"><em class="iq">PersistentVolume</em></code> <em class="iq">æœ‰å…¶ä»–å±æ€§â€”â€”</em><code class="fe km kn ko kp b"><em class="iq">apiVersion</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">kind</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">metadata</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">status</em></code><em class="iq">ã€‚è¿™äº›æ˜¯æ‰€æœ‰Kuberneteså¯¹è±¡å…±æœ‰çš„ã€‚</em></p></blockquote><h2 id="9f1b" class="nm mf iq bd mg ny nz dn mk oa ob dp mo jy oc od ms kc oe of mw kg og oh na oi bi translated">è¿™äº›å¯¹è±¡æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ï¼Ÿ</h2><p id="2ddd" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ä½¿ç”¨è¿™äº›ç»“æ„ä¸ºKubernetesåº”ç”¨ç¨‹åºè·å–å­˜å‚¨â€” <strong class="jp ir">é™æ€</strong>å’Œ<strong class="jp ir">åŠ¨æ€</strong>ã€‚</p><p id="0835" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨â€œé™æ€â€æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·éœ€è¦è´Ÿè´£è°ƒé…å®é™…å­˜å‚¨(äº‘ã€æœ¬åœ°å­˜å‚¨ç­‰))ç„¶ååœ¨<code class="fe km kn ko kp b">Pod</code>è§„èŒƒ(æ‚¨çš„åº”ç”¨ç¨‹åº)ä¸­å¼•ç”¨å®ƒ</p><p id="a244" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨â€œåŠ¨æ€â€æ–¹å¼ä¸­ï¼ŒKubernetesæ‰¿æ‹…äº†å­˜å‚¨ä¾›åº”çš„é‡ä»»ï¼Œå¹¶åˆ›å»ºäº†<code class="fe km kn ko kp b">PersistentVolume</code>ã€‚æ‚¨æ‰€åšçš„å°±æ˜¯é€šè¿‡åœ¨<code class="fe km kn ko kp b">Pod</code>è§„èŒƒä¸­åˆ›å»ºå¹¶å¼•ç”¨ä¸€ä¸ª<code class="fe km kn ko kp b">PersistentVolumeClaim</code>æ¥æä¾›æ‚¨çš„å­˜å‚¨éœ€æ±‚</p><blockquote class="nr ns nt"><p id="9b2c" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><em class="iq">åº”åœ¨ç¾¤é›†ä¸Šå¯ç”¨åŠ¨æ€é¢„é…ç½®â€”åœ¨å¤§å¤šæ•°æä¾›å•†ä¸­ï¼Œè¿™æ˜¯ç°æˆçš„</em></p></blockquote><p id="96d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬æ¢ç´¢ä¸€ä¸‹é™æ€èµ„æºè°ƒé…</p><h1 id="9d1a" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">é™æ€ä¾›åº”</h1><p id="3da1" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">ä½¿ç”¨é™æ€èµ„æºè°ƒé…æœ‰ä¸¤ç§æ–¹å¼:</p><p id="b96b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å…¶ä¸­ä¹‹ä¸€æ˜¯è°ƒé…å­˜å‚¨ï¼Œå¹¶åœ¨<code class="fe km kn ko kp b">Pod</code>è§„èŒƒä¸­ç›´æ¥ä½¿ç”¨å…¶ä¿¡æ¯<strong class="jp ir"/></p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/ad017830bb29558eb19a21edc9e26826.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*MUgB0mfHs-KjiS2A.jpg"/></div></figure><p id="baf1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘å·²ç»æåˆ°äº†è¿™ä¸€ç‚¹ï¼Œä½†è¿™æ˜¯æˆ‘æœ€åä¸€æ¬¡è¿™æ ·åš(åœ¨è¿™ç§æƒ…å†µä¸‹)ï¼Œå¹¶å»ºè®®å°è¯•ä¸€ä¸‹å…³äºå¦‚ä½•<a class="ae kl" href="https://docs.microsoft.com/azure/aks/azure-disk-volume?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">â€œåœ¨Azure KubernetesæœåŠ¡(AKS)ä¸­æ‰‹åŠ¨åˆ›å»ºå’Œä½¿ç”¨å¸¦æœ‰Azureç£ç›˜çš„å·â€</a>çš„ä¼˜ç§€æ•™ç¨‹ã€‚è¿™å°±æ˜¯å®ƒçœ‹èµ·æ¥çš„æ ·å­(æ­£å¦‚ä½ ä¹‹å‰è¯»åˆ°çš„ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰å®ƒçš„å±€é™æ€§)</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="bd90" class="nm mf iq kp b gy nn no l np nq">spec:<br/>  containers:<br/>  - image: nginx<br/>    name: mypod<br/>    volumeMounts:<br/>      - name: azure<br/>        mountPath: /mnt/azure<br/>  volumes:<br/>      - name: azure<br/>        azureDisk:<br/>          kind: Managed<br/>          diskName: myAKSDisk<br/>          diskURI: /subscriptions/&lt;subscriptionID&gt;/resourceGroups/MC_myAKSCluster_myAKSCluster_eastus/providers/Microsoft.Compute/disks/myAKSDisk</span></pre><p id="d221" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ç¬¬äºŒç§æ–¹æ³•ä¸­ï¼Œä¸æ˜¯åˆ›å»ºç£ç›˜å¹¶æä¾›å®ƒçš„ç»†èŠ‚(åœ¨æœ¬ä¾‹ä¸­æ˜¯<code class="fe km kn ko kp b">azureDisk</code>ï¼Œè€Œæ˜¯å°†ä¿¡æ¯å°è£…åœ¨ä¸€ä¸ª<code class="fe km kn ko kp b">PersistentVolume</code>ä¸­ã€‚ç„¶åæ‚¨åˆ›å»ºä¸€ä¸ª<code class="fe km kn ko kp b">PersistentVolumeClaim</code>å¹¶ä»<code class="fe km kn ko kp b">Pod</code>è§„èŒƒä¸­å¼•ç”¨å®ƒï¼Œå¹¶å°†å…¶ç•™ç»™Kubernetesæ¥åŒ¹é…å¯ç”¨çš„å­˜å‚¨éœ€æ±‚</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/c1ebae31b2fd3183c56bfd36ae01fb2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/0*3FOyBnSjlUk8vbKp.jpg"/></div></figure><p id="0861" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œæœ‰ä¸€ä¸ªç‰‡æ®µå¯ä»¥è®©ä½ æœ‰æ‰€äº†è§£</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="6b34" class="nm mf iq kp b gy nn no l np nq">spec:<br/>      volumes:<br/>      - name: app-data<br/>        persistentVolumeClaim:<br/>          claimName: data-volume-claim</span></pre><blockquote class="nr ns nt"><p id="5ffb" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><em class="iq">æŠŠå®ƒæƒ³è±¡æˆæŠŠä¸€ä¸ªé€»è¾‘é‡æ„æˆå®ƒè‡ªå·±çš„æ–¹æ³•â€”â€”ä½ æ¥å—ä¸€å †å­˜å‚¨è¯·æ±‚ä¿¡æ¯ï¼Œå¹¶ä»¥</em> <code class="fe km kn ko kp b"><em class="iq">PersistentVolume</em></code> <em class="iq">(ç±»ä¼¼äºä¸€ä¸ªæ–¹æ³•)çš„å½¢å¼å°†å…¶å…·ä½“åŒ–ã€‚</em></p></blockquote><h1 id="67a9" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">åŠ¨æ€ä¾›åº”</h1><p id="8082" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">å¦‚å‰æ‰€è¿°ï¼Œä½¿ç”¨åŠ¨æ€é¢„é…ç½®ï¼Œæ‚¨å¯ä»¥å°†æ‰€æœ‰ç¹é‡çš„å·¥ä½œäº¤ç»™Kubernetesã€‚åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„å¿«ç…§</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/a76812cc339d7eb98ec1d79568f4e0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/0*h2Z3WRiEv1Ul1qkS.jpg"/></div></figure><p id="209d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸åŠ¨æ€é¢„é…ç½®ç›¸å…³çš„ä¸€ä¸ªå…³é”®æ¦‚å¿µæ˜¯<code class="fe km kn ko kp b">StorageClass</code></p><h2 id="9363" class="nm mf iq bd mg ny nz dn mk oa ob dp mo jy oc od ms kc oe of mw kg og oh na oi bi translated">å­˜å‚¨ç±»</h2><p id="9821" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">å°±åƒ<code class="fe km kn ko kp b">PersistentVolume</code>å°è£…å­˜å‚¨ç»†èŠ‚ä¸€æ ·ï¼Œ<code class="fe km kn ko kp b">StorageClass</code>æä¾›äº†ä¸€ç§æè¿°å­˜å‚¨â€œç±»åˆ«â€çš„æ–¹å¼ã€‚ä¸ºäº†ä½¿ç”¨<code class="fe km kn ko kp b">StorageClass</code>ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯ä»<code class="fe km kn ko kp b">PersistentVolumeClaim</code>ä¸­å¼•ç”¨å®ƒã€‚</p><p id="b7d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬å®é™…ç†è§£ä¸€ä¸‹â€”â€”è¿™æ˜¯ä¸€ä¸ª<a class="ae kl" href="https://azure.microsoft.com/services/storage/disks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azureç£ç›˜</a>çš„<code class="fe km kn ko kp b">StorageClass</code>çš„ä¾‹å­ã€‚</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="56a7" class="nm mf iq kp b gy nn no l np nq">apiVersion: storage.k8s.io/v1<br/>kind: StorageClass<br/>metadata:<br/>  labels:<br/>    kubernetes.io/cluster-service: "true"<br/>  name: default<br/>parameters:<br/>  cachingmode: ReadOnly<br/>  kind: Managed<br/>  storageaccounttype: Standard_LRS<br/>provisioner: kubernetes.io/azure-disk<br/>reclaimPolicy: Delete<br/>volumeBindingMode: Immediate</span></pre><p id="367c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe km kn ko kp b">StorageClass</code>è§„æ ¼ä¸­çš„å…³é”®å‚æ•°æ˜¯:</p><ul class=""><li id="7ec9" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">provisioner</code> -æä¾›å®é™…å­˜å‚¨çš„å·æ’ä»¶(ç»†èŠ‚å¦‚ä¸‹)</li><li id="24d5" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">parameters</code> -å¯åœ¨è¿è¡Œæ—¶ç”¨ä½œä¾›åº”å™¨çš„è‡ªå®šä¹‰é”®å€¼å¯¹</li><li id="9ac0" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">reclaimPolicy</code> -åˆ›å»º<code class="fe km kn ko kp b">PersistentVolume</code>çš„å›æ”¶ç­–ç•¥(<code class="fe km kn ko kp b">Delete</code>åˆ é™¤PVCæ—¶åˆ é™¤PVï¼Œä¿ç•™PV)</li><li id="064b" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">volumeBindingMode</code> -æŒ‡ç¤º<code class="fe km kn ko kp b">PersistentVolumeClaim</code>åº”å¦‚ä½•ä¾›åº”å’Œç»‘å®š(æœ‰æ•ˆå€¼ä¸º<code class="fe km kn ko kp b">Immediate</code>å’Œ<code class="fe km kn ko kp b">WaitForFirstConsumer</code>)</li></ul><p id="69c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™äº›å‚æ•°(ä»¥åŠå…¶ä»–ä¸€äº›å‚æ•°ï¼Œå¦‚<code class="fe km kn ko kp b">allowVolumeExpansion</code>ã€<code class="fe km kn ko kp b">allowedTopologies</code>ã€<code class="fe km kn ko kp b">mountOptions</code>)ä¸­çš„ä¿¡æ¯åœ¨è¿è¡Œæ—¶ç”¨äºåŠ¨æ€é…ç½®å­˜å‚¨å¹¶åˆ›å»ºç›¸åº”çš„<code class="fe km kn ko kp b">PersistentVolume</code>ã€‚</p><blockquote class="nr ns nt"><p id="3360" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><code class="fe km kn ko kp b"><em class="iq">StorageClass</em></code> <em class="iq">ä¹Ÿæœ‰å…¶ä»–å±æ€§â€”â€”</em><code class="fe km kn ko kp b"><em class="iq">apiVersion</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">kind</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">metadata</em></code><em class="iq">ã€‚è¿™äº›æ˜¯æ‰€æœ‰Kuberneteså¯¹è±¡å…±æœ‰çš„ã€‚</em></p></blockquote><h2 id="8a87" class="nm mf iq bd mg ny nz dn mk oa ob dp mo jy oc od ms kc oe of mw kg og oh na oi bi translated">ä»€ä¹ˆæ˜¯<code class="fe km kn ko kp b">provisioner</code>ï¼Ÿ</h2><p id="d6f3" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated"><code class="fe km kn ko kp b">provisioner</code>æ˜¯åŠ¨æ€é¢„é…ç½®çš„æ ¸å¿ƒâ€”â€”å®ƒæ˜¯ä¸€ä¸ªæ’ä»¶ï¼ŒåŒ…å«ç”¨äºåˆ›å»ºç‰¹å®šç±»å‹å­˜å‚¨èµ„æºçš„å®šåˆ¶é€»è¾‘ã€‚Kubernetesé™„å¸¦äº†ä¸€ç³»åˆ—ä¾›åº”å™¨ï¼ŒåŒ…æ‹¬åŸºäºäº‘çš„ä¾›åº”å™¨ï¼Œå¦‚<a class="ae kl" href="https://azure.microsoft.com/services/storage/disks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Disk </a> ( <code class="fe km kn ko kp b">kubernetes.io/azure-disk</code>)ã€Azure File ( <code class="fe km kn ko kp b">kubernetes.io/azure-file</code>)ã€GCEæŒä¹…æ€§ç£ç›˜ã€AWS EBSç­‰ã€‚</p><blockquote class="nr ns nt"><p id="df6c" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><em class="iq">åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ</em> <code class="fe km kn ko kp b"><em class="iq">kubernetes.io/azure-disk</em></code> <em class="iq">è¢«ç”¨ä½œä¾›åº”å™¨</em></p></blockquote><p id="448a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe km kn ko kp b">parameters</code>éƒ¨åˆ†æä¾›äº†ä¸€ç§åœ¨è¿è¡Œæ—¶å°†ä¿¡æ¯ä¼ é€’ç»™å‚æ•°çš„æ–¹æ³•â€”â€”è¿™æ˜¾ç„¶æ˜¯ç‰¹å®šäº<code class="fe km kn ko kp b">provisioner</code>çš„ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code class="fe km kn ko kp b">cachingmode</code>ã€<code class="fe km kn ko kp b">storageaccounttype</code>å’Œ<code class="fe km kn ko kp b">kind</code>ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code class="fe km kn ko kp b">kubernetes.io/azure-disk</code>provisionerâ€”â€”è¿™æä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§ã€‚</p><blockquote class="nr ns nt"><p id="e6c3" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><em class="iq">å¦‚æœå‚æ•°æœªé€šè¿‡ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼</em></p></blockquote><h2 id="bd19" class="nm mf iq bd mg ny nz dn mk oa ob dp mo jy oc od ms kc oe of mw kg og oh na oi bi translated">å…³äºç¼ºçœå­˜å‚¨ç±»çš„ä¸€ä¸ªæ³¨è®°</h2><p id="0a13" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">å¯ä»¥å°†<code class="fe km kn ko kp b">StorageClass</code>æ ‡è®°ä¸ºé»˜è®¤å€¼ï¼Œä»¥ä¾¿åœ¨<code class="fe km kn ko kp b">PersistentVolumeClaim</code>ä¸­æœªæä¾›<code class="fe km kn ko kp b">storageClass</code>å±æ€§æ—¶ä½¿ç”¨å®ƒ(ç”¨äºåŠ¨æ€ä¾›åº”)ã€‚</p><p id="4db3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://azure.microsoft.com/services/kubernetes-service/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure KubernetesæœåŠ¡</a>é€šè¿‡åŒ…å«ä¸¤ä¸ªé¢„æ’­ç§å­˜å‚¨ç±»ï¼Œç®€åŒ–äº†åŠ¨æ€é…ç½®ã€‚æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ<code class="fe km kn ko kp b">kubectl get storageclass</code>å‘½ä»¤è¿›è¡Œæ£€æŸ¥</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="e46a" class="nm mf iq kp b gy nn no l np nq">NAME                PROVISIONER                AGE<br/>default (default)   kubernetes.io/azure-disk   6d10h<br/>managed-premium     kubernetes.io/azure-disk   6d10h</span></pre><ul class=""><li id="9813" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">default</code>å­˜å‚¨ç±»åˆ«:æä¾›ç”±æ ‡å‡†ç¡¬ç›˜æ”¯æŒçš„æ ‡å‡†<a class="ae kl" href="https://docs.microsoft.com/azure/virtual-machines/windows/disks-types?WT.mc_id=medium-blog-abhishgu#standard-hdd" rel="noopener ugc nofollow" target="_blank"> Azureç£ç›˜</a></li><li id="ba4f" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><code class="fe km kn ko kp b">managed-premium</code>å­˜å‚¨ç±»åˆ«:æä¾›ç”±é«˜çº§å›ºæ€ç¡¬ç›˜æ”¯æŒçš„é«˜çº§<a class="ae kl" href="https://docs.microsoft.com/azure/virtual-machines/windows/disks-types?WT.mc_id=medium-blog-abhishgu#premium-ssd" rel="noopener ugc nofollow" target="_blank"> Azureç£ç›˜</a></li></ul><h1 id="8ad9" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">åŠ¨æ‰‹æ“ä½œ:åŠ¨æ€é…ç½®</h1><p id="d7ed" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">æ˜¯æ—¶å€™ä½¿ç”¨<a class="ae kl" href="https://azure.microsoft.com/services/kubernetes-service/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure KubernetesæœåŠ¡</a>å°è¯•åŠ¨æ€é¢„é…ç½®äº†ã€‚æ‚¨å°†åˆ›å»ºä¸€ä¸ª<code class="fe km kn ko kp b">PersistenceVolumeClaim</code>ï¼Œä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åº(<code class="fe km kn ko kp b">Deployment</code>)ï¼Œå®ƒå¼•ç”¨è¯¥å£°æ˜å¹¶æŸ¥çœ‹äº‹æƒ…åœ¨å®è·µä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p id="9301" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ è¿˜æ²¡æœ‰ä¸€ä¸ªAzureå¸æˆ·ï¼Œç°åœ¨æ˜¯æ—¶å€™æ³¨å†Œä¸€ä¸ªå…è´¹å¸æˆ·äº†ã€‚</p><h1 id="a29a" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">Kubernetesé›†ç¾¤è®¾ç½®</h1><p id="a0a8" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">ä½ åªéœ€è¦ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥åœ¨Azureä¸Šå»ºç«‹ä¸€ä¸ªKubernetesé›†ç¾¤ã€‚ä½†æ˜¯ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªèµ„æºç»„</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="0c3a" class="nm mf iq kp b gy nn no l np nq">export AZURE_SUBSCRIPTION_ID=[to be filled]<br/>export AZURE_RESOURCE_GROUP=[to be filled]<br/>export AZURE_REGION=[to be filled] (e.g. southeastasia)</span></pre><p id="b905" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ‡æ¢åˆ°æ‚¨çš„è®¢é˜…å¹¶è°ƒç”¨<code class="fe km kn ko kp b">az group create</code></p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="03b6" class="nm mf iq kp b gy nn no l np nq">az account set -s $AZURE_SUBSCRIPTION_ID<br/>az group create -l $AZURE_REGION -n $AZURE_RESOURCE_GROUP</span></pre><p id="1313" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨ç°åœ¨å¯ä»¥è°ƒç”¨<code class="fe km kn ko kp b">az aks create</code>æ¥åˆ›å»ºæ–°çš„é›†ç¾¤</p><blockquote class="nr ns nt"><p id="5c18" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><em class="iq">ä¸ºäº†ç®€å•èµ·è§ï¼Œä¸‹é¢çš„å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤ã€‚è¯·æ ¹æ®æ‚¨çš„è¦æ±‚éšæ„æ›´æ”¹è§„æ ¼</em></p></blockquote><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="81de" class="nm mf iq kp b gy nn no l np nq">export AKS_CLUSTER_NAME=[to be filled]</span><span id="f98b" class="nm mf iq kp b gy om no l np nq">az aks create --resource-group $AZURE_RESOURCE_GROUP --name $AKS_CLUSTER_NAME --node-count 1 --node-vm-size Standard_B2s --node-osdisk-size 30 --generate-ssh-keys</span></pre><p id="65a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½¿ç”¨<code class="fe km kn ko kp b">az aks get-credentials</code>è·å–AKSé›†ç¾¤å‡­è¯â€”â€”å› æ­¤ï¼Œ<code class="fe km kn ko kp b">kubectl</code>ç°åœ¨å°†æŒ‡å‘æ‚¨çš„æ–°é›†ç¾¤ã€‚ä½ å¯ä»¥è¯å®è¿™ä¸€ç‚¹</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="7853" class="nm mf iq kp b gy nn no l np nq">az aks get-credentials --resource-group $AZURE_RESOURCE_GROUP --name $AKS_CLUSTER_NAME<br/>kubectl get nodes</span></pre><blockquote class="nr ns nt"><p id="e306" class="jn jo nu jp b jq jr js jt ju jv jw jx nv jz ka kb nw kd ke kf nx kh ki kj kk ij bi translated"><em class="iq">å¦‚æœä½ æœ‰å…´è¶£ä½¿ç”¨</em><a class="ae kl" href="https://azure.microsoft.com/services/kubernetes-service/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"><em class="iq">Azure</em></a><em class="iq">å­¦ä¹ Kuberneteså’ŒContainersï¼Œä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹æ˜¯ä½¿ç”¨æ–‡æ¡£ä¸­çš„</em> <a class="ae kl" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">å¿«é€Ÿå…¥é—¨ã€æ•™ç¨‹å’Œä»£ç ç¤ºä¾‹</em> </a> <em class="iq">æ¥ç†Ÿæ‚‰è¿™é¡¹æœåŠ¡ã€‚æˆ‘ä¹Ÿå¼ºçƒˆæ¨èæŸ¥çœ‹ä¸€ä¸‹</em> <a class="ae kl" href="https://azure.microsoft.com/resources/kubernetes-learning-path/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> 50å¤©Kuberneteså­¦ä¹ è·¯å¾„</em> </a> <em class="iq">ã€‚é«˜çº§ç”¨æˆ·å¯èƒ½å¸Œæœ›å‚è€ƒ</em> <a class="ae kl" href="https://docs.microsoft.com/azure/aks/best-practices?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Kubernetesæœ€ä½³å®è·µ</em> </a> <em class="iq">æˆ–è§‚çœ‹ä¸€äº›</em> <a class="ae kl" href="https://azure.microsoft.com/resources/videos/index/?services=kubernetes-service&amp;WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">è§†é¢‘</em> </a> <em class="iq">ä»¥äº†è§£æ¼”ç¤ºã€ä¸»è¦åŠŸèƒ½å’ŒæŠ€æœ¯ä¼šè®®ã€‚</em></p></blockquote><h1 id="f397" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">åˆ›å»ºPersistentVolumeClaimï¼Œç„¶åéƒ¨ç½²åº”ç”¨ç¨‹åº</h1><p id="f021" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">è¿™æ˜¯æˆ‘ä»¬å°†ä½¿ç”¨çš„<code class="fe km kn ko kp b">PersistentVolumeClaim</code>è§„æ ¼</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="5873" class="nm mf iq kp b gy nn no l np nq">apiVersion: v1<br/>kind: PersistentVolumeClaim<br/>metadata:<br/>  name: azure-disk-pvc<br/>spec:<br/>  accessModes:<br/>    - ReadWriteOnce<br/>  resources:<br/>    requests:<br/>      storage: 2Gi</span></pre><p id="8b8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ³¨æ„ï¼Œ<code class="fe km kn ko kp b">PersistenceVolumeClaim</code>æ²¡æœ‰ä½¿ç”¨<code class="fe km kn ko kp b">storageClass</code>â€”â€”è¿™æ˜¯ä¸ºäº†ç¡®ä¿<code class="fe km kn ko kp b">default</code>å­˜å‚¨ç±»ç”¨äºåŠ¨æ€ä¾›åº”ã€‚</p><p id="b5c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›é€ äº†<code class="fe km kn ko kp b">PersistenceVolumeClaim</code></p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="ee00" class="nm mf iq kp b gy nn no l np nq">kubectl apply -f <a class="ae kl" href="https://raw.githubusercontent.com/abhirockzz/kubernetes-in-a-nutshell/master/volumes-2/azure-disk-pvc.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/abhirockzz/kubernetes-in-a-nutshell/master/volumes-2/azure-disk-pvc.yaml</a></span></pre><p id="ae3b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ æ£€æŸ¥ä¸€ä¸‹ï¼Œä½ ä¼šçœ‹åˆ°è¿™æ ·çš„ä¸œè¥¿(<code class="fe km kn ko kp b">STATUS</code> = <code class="fe km kn ko kp b">Pending</code>)</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="48c4" class="nm mf iq kp b gy nn no l np nq">kubectl get pvc</span><span id="2400" class="nm mf iq kp b gy om no l np nq">NAME             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   AGE<br/>azure-disk-pvc   Pending                                      default        11s</span></pre><p id="914d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸€æ®µæ—¶é—´åï¼Œå®ƒåº”è¯¥å˜æˆ(<code class="fe km kn ko kp b">STATUS</code>=<code class="fe km kn ko kp b">Bound</code>)â€”â€”è¿™æ˜¯å› ä¸ºAzureç£ç›˜å’Œ<code class="fe km kn ko kp b">PersistenceVolume</code>æ˜¯è‡ªåŠ¨åˆ›å»ºçš„</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="19a9" class="nm mf iq kp b gy nn no l np nq">NAME             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE<br/>azure-disk-pvc   Bound    pvc-7b0e2911-df74-11e9-93ab-025752f370d3   2Gi        RWO            default        36s</span></pre><p id="84a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨ä¹Ÿå¯ä»¥æ£€æŸ¥åŠ¨æ€é…ç½®çš„<code class="fe km kn ko kp b">PersistenceVolume</code>-<code class="fe km kn ko kp b">kubectl get pv</code></p><p id="e230" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¡®è®¤Azureç£ç›˜å·²åˆ›å»º</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="e032" class="nm mf iq kp b gy nn no l np nq">AKS_NODE_RESOURCE_GROUP=$(az aks show --resource-group $AZURE_RESOURCE_GROUP --name $AKS_CLUSTER_NAME --query nodeResourceGroup -o tsv)</span><span id="3d3c" class="nm mf iq kp b gy om no l np nq">az disk list -g $AKS_NODE_RESOURCE_GROUP</span></pre><p id="f803" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe km kn ko kp b">tags</code>éƒ¨åˆ†çœ‹èµ·æ¥ç±»ä¼¼äº</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="6345" class="nm mf iq kp b gy nn no l np nq">"tags": {<br/>      "created-by": "kubernetes-azure-dd",<br/>      "kubernetes.io-created-for-pv-name": "pvc-7b0e2911-df74-11e9-93ab-025752f370d3",<br/>      "kubernetes.io-created-for-pvc-name": "azure-disk-pvc",<br/>      "kubernetes.io-created-for-pvc-namespace": "default"<br/>}</span></pre><p id="804a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›å»ºåº”ç”¨ç¨‹åº<code class="fe km kn ko kp b">Deployment</code></p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="53f9" class="nm mf iq kp b gy nn no l np nq">kubectl apply -f <a class="ae kl" href="https://raw.githubusercontent.com/abhirockzz/kubernetes-in-a-nutshell/master/volumes-2/app.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/abhirockzz/kubernetes-in-a-nutshell/master/volumes-2/app.yaml</a></span></pre><p id="a699" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†æµ‹è¯•å®ƒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªç®€å•çš„Goåº”ç”¨ç¨‹åºã€‚å®ƒæ‰€åšçš„åªæ˜¯å°†æ—¥å¿—è¯­å¥æ¨é€åˆ°<code class="fe km kn ko kp b">/mnt/logs</code>ä¸­çš„ä¸€ä¸ªæ–‡ä»¶<code class="fe km kn ko kp b">logz.out</code>â€”â€”è¿™æ˜¯å®‰è£…åˆ°<code class="fe km kn ko kp b">Pod</code>ä¸­çš„è·¯å¾„</p><p id="493e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä½¿éƒ¨ç½²å¤„äº<code class="fe km kn ko kp b">Running</code>çŠ¶æ€</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="f696" class="nm mf iq kp b gy nn no l np nq">kubectl get pods -l=app=logz</span><span id="086e" class="nm mf iq kp b gy om no l np nq">NAME                               READY   STATUS    RESTARTS   AGE<br/>logz-deployment-59b75bc786-wt98d   1/1     Running   0          15s</span></pre><p id="a433" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†ç¡®è®¤ï¼Œæ£€æŸ¥<code class="fe km kn ko kp b">Pod</code>ä¸­çš„<code class="fe km kn ko kp b">mnt/logs/logz.out</code></p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="fb59" class="nm mf iq kp b gy nn no l np nq">kubectl exec -it $(kubectl get pods -l=app=logz --output=jsonpath={.items..metadata.name}) -- tail -f /mnt/logs/logz.out</span></pre><p id="bf46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å°†æ¯3ç§’é’Ÿçœ‹åˆ°ä¸€æ¬¡æ—¥å¿—(åªæœ‰æ—¶é—´æˆ³)</p><pre class="ly lz ma mb gt ni kp nj nk aw nl bi"><span id="d9a3" class="nm mf iq kp b gy nn no l np nq">2019-09-25 09:17:11.960671937 +0000 UTC m=+84.002677518<br/>2019-09-25 09:17:14.961347341 +0000 UTC m=+87.003352922<br/>2019-09-25 09:17:17.960697766 +0000 UTC m=+90.002703347<br/>2019-09-25 09:17:20.960666399 +0000 UTC m=+93.002671980</span></pre></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><p id="005a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™å°±æ˜¯æˆ‘ä»¬å…³äºKuberneteså·çš„ä¸¤éƒ¨åˆ†ç³»åˆ—çš„ç»“å°¾ã€‚ä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æ€ä¹ˆæ ·ï¼Ÿä½ ä»ä¸­å­¦åˆ°äº†ä»€ä¹ˆå—ï¼Ÿå®ƒæ˜¯å¦æœ‰åŠ©äºè§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œè§£å†³æ‚¨ä¸€ç›´ä»¥æ¥çš„ç–‘é—®ï¼ŸğŸ˜ƒğŸ˜ƒæˆ–è€…å®ƒéœ€è¦æ”¹è¿›ğŸ˜¡è¯·æä¾›æ‚¨çš„åé¦ˆâ€”â€”å®ƒéå¸¸æœ‰ä»·å€¼ï¼Œæˆ‘å°†éå¸¸æ„Ÿè°¢ï¼ä½ å¯ä»¥é€šè¿‡æ¨ç‰¹æˆ–è€…ç›´æ¥åœ¨ä¸‹é¢ç•™è¨€æ¥å¼€å§‹è®¨è®ºã€‚</p><p id="f024" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ­£å¦‚æˆ‘å‰é¢æåˆ°çš„ï¼Œè¿™æ˜¯æ›´å¤§çš„åšå®¢ç³»åˆ—<a class="ae kl" href="https://medium.com/@abhishek1987/kubernetes-in-a-nutshell-blog-series-c3a97fce9445" rel="noopener">â€œKubernetes in throughâ€</a>çš„ä¸€ä¸ªå­éƒ¨åˆ†ï¼Œè¿˜æœ‰æ›´å¤šï¼è¯·ä¸è¦å¿˜è®°å–œæ¬¢å’Œå…³æ³¨ğŸ˜‰</p></div></div>    
</body>
</html>