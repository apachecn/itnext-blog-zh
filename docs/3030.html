<html>
<head>
<title>Learn how to configure Kubernetes apps using ConfigMap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">äº†è§£å¦‚ä½•ä½¿ç”¨ConfigMapé…ç½®Kubernetesåº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://itnext.io/learn-how-to-configure-your-kubernetes-apps-using-the-configmap-object-d8f30f99abeb?source=collection_archive---------0-----------------------#2019-09-18">https://itnext.io/learn-how-to-configure-your-kubernetes-apps-using-the-configmap-object-d8f30f99abeb?source=collection_archive---------0-----------------------#2019-09-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="117d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">â€œé…ç½®ä¸ä»£ç åˆ†ç¦»â€æ˜¯<a class="ae kl" href="https://12factor.net/config" rel="noopener ugc nofollow" target="_blank"> 12å› ç´ åº”ç”¨</a>çš„åŸåˆ™ä¹‹ä¸€ã€‚æˆ‘ä»¬å°†å¯ä»¥æ”¹å˜çš„ä¸œè¥¿å…·ä½“åŒ–ï¼Œè¿™åè¿‡æ¥æœ‰åŠ©äºä¿æŒæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„å¯ç§»æ¤æ€§ã€‚è¿™åœ¨Kubernetesä¸–ç•Œä¸­æ˜¯è‡³å…³é‡è¦çš„ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè¢«æ‰“åŒ…æˆDockeræ˜ åƒã€‚Kubernetes <code class="fe km kn ko kp b">ConfigMap</code>å…è®¸æˆ‘ä»¬ä»ä»£ç ä¸­æŠ½è±¡å‡ºé…ç½®ï¼Œæœ€ç»ˆæŠ½è±¡å‡ºDockeræ˜ åƒã€‚</p><p id="dcb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™ç¯‡åšæ–‡å°†ä¸ºKubernetesä¸­å¯ç”¨çš„åº”ç”¨é…ç½®ç›¸å…³é€‰é¡¹æä¾›å®è·µæŒ‡å—ã€‚</p><p id="fd61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å’Œå¾€å¸¸ä¸€æ ·ï¼Œä»£ç åœ¨GitHub ä¸Š<a class="ae kl" href="https://github.com/abhirockzz/kubernetes-in-a-nutshell" rel="noopener ugc nofollow" target="_blank">å¯ç”¨ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§â€¦</a></p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi kq"><img src="../Images/8f22ecbedd5cd81331c4c760fd6fdc58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*ERExm8kI7oBl4e05.gif"/></div></figure><p id="1974" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¦åœ¨Kubernetesä¸­é…ç½®æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨:</p><ul class=""><li id="56e9" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">å¥½çš„æ—§ç¯å¢ƒå˜é‡</li><li id="1a68" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated"><code class="fe km kn ko kp b">ConfigMap</code></li><li id="ed16" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated"><code class="fe km kn ko kp b">Secret</code>â€”â€”è¿™å°†åœ¨åç»­çš„åšå®¢æ–‡ç« ä¸­æ¶‰åŠ</li></ul><p id="0cec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é¦–å…ˆï¼Œæ‚¨éœ€è¦ä¸€ä¸ªKubernetesé›†ç¾¤ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨<code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/setup/learning-environment/minikube/" rel="noopener ugc nofollow" target="_blank">minikube</a></code>ã€<code class="fe km kn ko kp b"><a class="ae kl" href="https://blog.docker.com/2018/01/docker-mac-kubernetes/" rel="noopener ugc nofollow" target="_blank">Docker for Mac</a></code>ç­‰çš„å•èŠ‚ç‚¹æœ¬åœ°é›†ç¾¤ã€‚æˆ–è€…æ¥è‡ª<a class="ae kl" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">Azure</a>ã€<a class="ae kl" href="https://cloud.google.com/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank"> Google </a>ã€<a class="ae kl" href="https://aws.amazon.com/eks/" rel="noopener ugc nofollow" target="_blank"> AWS </a>ç­‰çš„æ‰˜ç®¡KubernetesæœåŠ¡ã€‚è¦è®¿é—®æ‚¨çš„Kubernetesé›†ç¾¤ï¼Œæ‚¨éœ€è¦<code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/reference/kubectl/overview/" rel="noopener ugc nofollow" target="_blank">kubectl</a></code>ï¼Œå®ƒå¾ˆå®¹æ˜“å®‰è£…ã€‚</p><p id="0cf2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¾‹å¦‚ï¼Œè¦ä¸ºMacå®‰è£…<code class="fe km kn ko kp b">kubectl</code>,æ‚¨åªéœ€</p><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="54b1" class="lq lr iq kp b gy ls lt l lu lv">curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/darwin/amd64/kubectl &amp;&amp; \<br/>chmod +x ./kubectl &amp;&amp; \<br/>sudo mv ./kubectl /usr/local/bin/kubectl</span></pre><h1 id="6104" class="lw lr iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">ä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®</h1><p id="fa11" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œçœ‹çœ‹å¦‚ä½•é€šè¿‡åœ¨æˆ‘ä»¬çš„<code class="fe km kn ko kp b">Pod</code>è§„èŒƒä¸­ç›´æ¥æŒ‡å®šç¯å¢ƒå˜é‡æ¥ä½¿ç”¨å®ƒä»¬ã€‚</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="d198" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ³¨æ„æˆ‘ä»¬å¦‚ä½•åœ¨<code class="fe km kn ko kp b">spec.containers.env</code> â€” <code class="fe km kn ko kp b">ENVVAR1</code>å’Œ<code class="fe km kn ko kp b">ENVVAR2</code>ä¸­åˆ†åˆ«ç”¨å€¼<code class="fe km kn ko kp b">value1</code>å’Œ<code class="fe km kn ko kp b">value2</code>å®šä¹‰ä¸¤ä¸ªå˜é‡ã€‚</p><p id="c779" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬ä»ä½¿ç”¨ä¸Šé¢æŒ‡å®šçš„YAMLåˆ›å»º<code class="fe km kn ko kp b">Pod</code>å¼€å§‹ã€‚</p><blockquote class="na nb nc"><p id="98df" class="jn jo nd jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated"><code class="fe km kn ko kp b"><em class="iq">Pod</em></code> <em class="iq">åªæ˜¯ä¸€ä¸ªåº“ä¼¯å†…ç‰¹çš„èµ„æºæˆ–å¯¹è±¡ã€‚YAMLæ–‡ä»¶æ˜¯æè¿°å…¶æœŸæœ›çŠ¶æ€ä»¥åŠä¸€äº›åŸºæœ¬ä¿¡æ¯çš„ä¸œè¥¿â€”â€”å®ƒä¹Ÿè¢«ç§°ä¸º</em><code class="fe km kn ko kp b"><em class="iq">manifest</em></code><em class="iq"/><code class="fe km kn ko kp b"><em class="iq">spec</em></code><em class="iq">(è§„èŒƒçš„ç®€å†™)æˆ–</em> <code class="fe km kn ko kp b"><em class="iq">definition</em></code> <em class="iq">ã€‚</em></p></blockquote><p id="3f50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½¿ç”¨<code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#apply" rel="noopener ugc nofollow" target="_blank">kubectl apply</a></code>å‘½ä»¤å‘Kubernetesæäº¤<code class="fe km kn ko kp b">Pod</code>ä¿¡æ¯ã€‚</p><blockquote class="na nb nc"><p id="013b" class="jn jo nd jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated"><em class="iq">ä¸ºäº†ç®€å•èµ·è§ï¼ŒYAMLæ–‡ä»¶ç›´æ¥ä»</em><a class="ae kl" href="https://github.com/abhirockzz/kubernetes-in-a-nutshell" rel="noopener ugc nofollow" target="_blank"><em class="iq">GitHub repo</em></a><em class="iq">ä¸­å¼•ç”¨ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥æŠŠæ–‡ä»¶ä¸‹è½½åˆ°ä½ çš„æœ¬åœ°æœºå™¨ä¸Šï¼Œä»¥åŒæ ·çš„æ–¹å¼ä½¿ç”¨å®ƒã€‚</em></p></blockquote><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="dbb4" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl apply -f   https://raw.githubusercontent.com/abhirockzz/kubernetes-in-a-nutshell/master/configuration/kin-config-envvar-in-pod.yaml</span><span id="5307" class="lq lr iq kp b gy nh lt l lu lv">pod/pod1 created</span></pre><p id="bf79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºäº†æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code class="fe km kn ko kp b">kubectl exec</code>åœ¨Podçš„â€œå†…éƒ¨â€æ‰§è¡Œä¸€ä¸ªå‘½ä»¤â€”â€”æ‚¨åº”è¯¥çœ‹åˆ°åœ¨<code class="fe km kn ko kp b">Pod</code>å®šä¹‰ä¸­æ’­ç§çš„é‚£äº›å˜é‡ã€‚</p><p id="03de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†<code class="fe km kn ko kp b">grep</code>æ¥è¿‡æ»¤æˆ‘ä»¬æ„Ÿå…´è¶£çš„å˜é‡</p><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="45fe" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl exec pod1 -it -- env | grep ENVVAR</span><span id="1647" class="lq lr iq kp b gy nh lt l lu lv">ENVVAR1=value1<br/>ENVVAR2=value2</span></pre><blockquote class="na nb nc"><p id="e3e7" class="jn jo nd jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq">ä»€ä¹ˆæ˜¯</em> </strong> <code class="fe km kn ko kp b"><strong class="jp ir"><em class="iq">kubectl exec</em></strong></code> <strong class="jp ir"> <em class="iq">ï¼Ÿ</em> </strong> <em class="iq">ç®€å•æ¥è¯´ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ª</em> <code class="fe km kn ko kp b"><em class="iq">Pod</em></code> <em class="iq">å†…çš„ç‰¹å®šå®¹å™¨ä¸­æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„</em> <code class="fe km kn ko kp b"><em class="iq">Pod</em></code> <em class="iq">æœ‰ä¸€ä¸ªå•ç‹¬çš„å®¹å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æŒ‡å®šä¸€ä¸ª</em></p></blockquote><p id="e396" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¥½äº†ï¼Œæœ‰äº†è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥æ¢ç´¢ä¸€ä¸‹ã€‚</p><h1 id="a760" class="lw lr iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">ä½¿ç”¨<code class="fe km kn ko kp b">ConfigMap</code></h1><p id="9152" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">å®ƒçš„å·¥ä½œæ–¹å¼æ˜¯åœ¨ä¸€ä¸ª<code class="fe km kn ko kp b">ConfigMap</code>å¯¹è±¡ä¸­å®šä¹‰æ‚¨çš„é…ç½®ï¼Œç„¶ååœ¨ä¸€ä¸ª<code class="fe km kn ko kp b">Pod</code>(æˆ–<code class="fe km kn ko kp b">Deployment</code>)ä¸­å¼•ç”¨è¯¥å¯¹è±¡ã€‚</p><p id="3f5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬æ¥çœ‹çœ‹åˆ›å»º<code class="fe km kn ko kp b">ConfigMap</code>çš„æŠ€å·§</p><h2 id="2d87" class="lq lr iq bd lx ni nj dn mb nk nl dp mf jy nm nn mj kc no np mn kg nq nr mr ns bi translated">ä½¿ç”¨æ¸…å•æ–‡ä»¶</h2><p id="650f" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">å¯ä»¥åœ¨å®šä¹‰çš„<code class="fe km kn ko kp b">data</code>éƒ¨åˆ†åˆ›å»ºä¸€ä¸ª<code class="fe km kn ko kp b">ConfigMap</code>ä»¥åŠä½œä¸ºé”®å€¼å¯¹å­˜å‚¨çš„é…ç½®æ•°æ®ã€‚</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="3cbd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ä¸Šé¢çš„æ¸…å•ä¸­:</p><ul class=""><li id="ef9c" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">åä¸º<code class="fe km kn ko kp b">simpleconfig</code>çš„<code class="fe km kn ko kp b">ConfigMap</code>åŒ…å«ä¸¤ä¸ª(é”®å€¼)æ•°æ®â€” <code class="fe km kn ko kp b">hello=world</code>å’Œ<code class="fe km kn ko kp b">foo=bar</code></li><li id="0e53" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated"><code class="fe km kn ko kp b">simpleconfig</code>è¢«ä¸€ä¸ª<code class="fe km kn ko kp b">Pod</code> ( <code class="fe km kn ko kp b">pod2</code>)å¼•ç”¨ï¼›é”®<code class="fe km kn ko kp b">hello</code>å’Œ<code class="fe km kn ko kp b">foo</code>åˆ†åˆ«ä½œä¸ºç¯å¢ƒå˜é‡<code class="fe km kn ko kp b">HELLO_ENV_VAR</code>å’Œ<code class="fe km kn ko kp b">FOO_ENV_VAR</code>ä½¿ç”¨ã€‚</li></ul><blockquote class="na nb nc"><p id="89d6" class="jn jo nd jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated"><em class="iq">æ³¨æ„ï¼Œæˆ‘ä»¬å·²ç»æŠŠ</em> <code class="fe km kn ko kp b"><em class="iq">Pod</em></code> <em class="iq">å’Œ</em> <code class="fe km kn ko kp b"><em class="iq">ConfigMap</em></code> <em class="iq">å®šä¹‰åŒ…å«åœ¨åŒä¸€ä¸ªYAMLä¸­ï¼Œä¸­é—´ç”¨ä¸€ä¸ª</em> <code class="fe km kn ko kp b"><em class="iq">---</em></code>éš”å¼€</p></blockquote><p id="a460" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›å»º<code class="fe km kn ko kp b">ConfigMap</code>å¹¶ç¡®è®¤ç¯å¢ƒå˜é‡å·²è¢«æ¤å…¥</p><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="3d50" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl apply -f   https://raw.githubusercontent.com/abhirockzz/kubernetes-in-a-nutshell/master/configuration/kin-config-envvar-configmap.yaml</span><span id="80af" class="lq lr iq kp b gy nh lt l lu lv">configmap/config1 created<br/>pod/pod2 created</span><span id="b59b" class="lq lr iq kp b gy nh lt l lu lv">$ kubectl get configmap/config1</span><span id="c777" class="lq lr iq kp b gy nh lt l lu lv">NAME      DATA   AGE<br/>config1   2      18s</span><span id="7185" class="lq lr iq kp b gy nh lt l lu lv">$ kubectl exec pod2 -it -- env | grep _ENV_</span><span id="0f1a" class="lq lr iq kp b gy nh lt l lu lv">FOO_ENV_VAR=bar<br/>HELLO_ENV_VAR=world</span></pre><h2 id="e976" class="lq lr iq bd lx ni nj dn mb nk nl dp mf jy nm nn mj kc no np mn kg nq nr mr ns bi translated">ä½¿ç”¨<code class="fe km kn ko kp b">envVar</code>çš„å¿«æ·æ–¹å¼</h2><p id="ce44" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">æˆ‘ä»¬é€šè¿‡åˆ†åˆ«å¼•ç”¨é…ç½®æ•°æ®(<code class="fe km kn ko kp b">foo</code>å’Œ<code class="fe km kn ko kp b">hello</code>)æ¥ä½¿ç”¨å®ƒä»¬ï¼Œä½†æ˜¯æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼æˆ‘ä»¬å¯ä»¥åœ¨æ¸…å•ä¸­ä½¿ç”¨<code class="fe km kn ko kp b">envFrom</code>æ¥ç›´æ¥å¼•ç”¨<code class="fe km kn ko kp b">ConfigMap</code>ä¸­çš„æ‰€æœ‰é”®å€¼æ•°æ®ã€‚</p><blockquote class="na nb nc"><p id="bfaf" class="jn jo nd jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated"><em class="iq">å½“ä½¿ç”¨</em> <code class="fe km kn ko kp b"><em class="iq">ConfigMap</em></code> <em class="iq">æ•°æ®è¿™ç§æ–¹å¼æ—¶ï¼Œkeyç›´æ¥ç”¨ä½œç¯å¢ƒå˜é‡åã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ éœ€è¦éµå¾ª</em> <a class="ae kl" href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.15/#configmap-v1-core" rel="noopener ugc nofollow" target="_blank"> <em class="iq">å‘½åçº¦å®š</em> </a> <em class="iq">å³æ¯ä¸ªé”®å¿…é¡»ç”±å­—æ¯æ•°å­—å­—ç¬¦ã€â€œ-â€ã€â€œ_â€æˆ–â€œ.â€ç»„æˆ</em></p></blockquote><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="1991" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±åƒä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º<code class="fe km kn ko kp b">Pod</code>å’Œ<code class="fe km kn ko kp b">ConfigMap</code>å¹¶ç¡®è®¤ç¯å¢ƒå˜é‡çš„å­˜åœ¨</p><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="191c" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl apply -f   https://raw.githubusercontent.com/abhirockzz/kubernetes-in-a-nutshell/master/configuration/kin-config-envvar-with-envFrom.yaml</span><span id="2d1d" class="lq lr iq kp b gy nh lt l lu lv">configmap/config2 created<br/>pod/pod3 created</span><span id="5e2d" class="lq lr iq kp b gy nh lt l lu lv">$ kubectl get configmap/config2</span><span id="d479" class="lq lr iq kp b gy nh lt l lu lv">NAME      DATA   AGE<br/>config2   2      25s</span><span id="2a5a" class="lq lr iq kp b gy nh lt l lu lv">$ kubectl exec pod3 -it -- env | grep _ENV</span><span id="d6ed" class="lq lr iq kp b gy nh lt l lu lv">HELLO_ENV=world<br/>FOO_ENV=bar</span></pre><p id="5b2a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸é”™çš„å°æŠŠæˆå“ˆï¼Ÿ:-)</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/6814dd0d502aa059c3c830953ca3e7af.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/0*NjkY1GS3Fmgs8DYx.gif"/></div></figure><h2 id="e584" class="lq lr iq bd lx ni nj dn mb nk nl dp mf jy nm nn mj kc no np mn kg nq nr mr ns bi translated">ä½œä¸ºæ–‡ä»¶çš„é…ç½®æ•°æ®</h2><p id="fc20" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">å¦ä¸€ç§ä½¿ç”¨é…ç½®æ•°æ®çš„æœ‰è¶£æ–¹å¼æ˜¯æŒ‡å‘<code class="fe km kn ko kp b">Deployment</code>æˆ–<code class="fe km kn ko kp b">Pod</code>è§„èŒƒçš„<code class="fe km kn ko kp b">spec.volumes</code>éƒ¨åˆ†ä¸­çš„<code class="fe km kn ko kp b">ConfigMap</code>ã€‚</p><blockquote class="na nb nc"><p id="5bf1" class="jn jo nd jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated"><em class="iq">å¦‚æœä½ ä¸çŸ¥é“</em> <code class="fe km kn ko kp b"><em class="iq">Volumes</em></code> <em class="iq">(åœ¨Kubernetesä¸­)æ˜¯ä»€ä¹ˆï¼Œä¸è¦ç€æ€¥ã€‚ä»–ä»¬å°†åœ¨å³å°†åˆ°æ¥çš„åšå®¢ä¸­è®¨è®ºã€‚ç°åœ¨ï¼Œåªéœ€è¦ç†è§£å·æ˜¯ä¸€ç§ä»åº•å±‚å­˜å‚¨ç³»ç»ŸæŠ½è±¡å®¹å™¨çš„æ–¹å¼ï¼Œä¾‹å¦‚ï¼Œå®ƒå¯ä»¥æ˜¯æœ¬åœ°ç£ç›˜æˆ–äº‘ä¸­çš„ç£ç›˜ï¼Œå¦‚</em> <a class="ae kl" href="https://docs.microsoft.com/azure/virtual-machines/windows/managed-disks-overview?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Azureç£ç›˜</em></a><em class="iq"/><a class="ae kl" href="https://cloud.google.com/persistent-disk/" rel="noopener ugc nofollow" target="_blank"><em class="iq">GCPæŒä¹…ç£ç›˜</em> </a> <em class="iq">ç­‰ã€‚</em></p></blockquote><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="a3fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ä¸Šé¢çš„è§„èŒƒä¸­ï¼Œæ³¨æ„<code class="fe km kn ko kp b">spec.volumes</code>éƒ¨åˆ†â€”â€”æ³¨æ„å®ƒæŒ‡çš„æ˜¯ç°æœ‰çš„<code class="fe km kn ko kp b">ConfigMap</code>ã€‚<code class="fe km kn ko kp b">ConfigMap</code>ä¸­çš„æ¯ä¸ªé”®éƒ½ä½œä¸ºä¸€ä¸ªæ–‡ä»¶æ·»åŠ åˆ°è§„èŒƒä¸­æŒ‡å®šçš„ç›®å½•ï¼Œå³<code class="fe km kn ko kp b">spec.containers.volumeMount.mountPath</code>ï¼Œå…¶å€¼å°±æ˜¯æ–‡ä»¶çš„å†…å®¹ã€‚</p><blockquote class="na nb nc"><p id="50b5" class="jn jo nd jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated"><em class="iq">æ³¨æ„ï¼Œå¦‚æœ</em> <code class="fe km kn ko kp b"><em class="iq">ConfigMap</em></code> <em class="iq">æ”¹å˜ï¼Œå·ä¸­çš„æ–‡ä»¶ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</em></p></blockquote><p id="520f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é™¤äº†ä¼ ç»Ÿçš„åŸºäºå­—ç¬¦ä¸²çš„å€¼ï¼Œæ‚¨è¿˜å¯ä»¥åŒ…æ‹¬æˆç†Ÿçš„æ–‡ä»¶(JSONã€æ–‡æœ¬ã€YAMLç­‰ã€‚)ä½œä¸º<code class="fe km kn ko kp b">ConfigMap</code>è§„æ ¼ä¸­çš„å€¼ã€‚</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="03c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å·²ç»åœ¨æˆ‘ä»¬çš„<code class="fe km kn ko kp b">ConfigMap</code>çš„æ•°æ®éƒ¨åˆ†ä¸­åµŒå…¥äº†ä¸€ä¸ªå®Œæ•´çš„JSONã€‚ä¸ºäº†è¿›è¡Œè¯•éªŒï¼Œåˆ›å»º<code class="fe km kn ko kp b">Pod</code>å’Œ<code class="fe km kn ko kp b">ConfigMap</code></p><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="ef45" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl apply -f   https://raw.githubusercontent.com/abhirockzz/kubernetes-in-a-nutshell/master/configuration/kin-config-envvar-json.yaml</span><span id="236b" class="lq lr iq kp b gy nh lt l lu lv">configmap/config3 created<br/>pod/pod4 created</span><span id="85db" class="lq lr iq kp b gy nh lt l lu lv">$ kubectl get configmap/config3</span><span id="671e" class="lq lr iq kp b gy nh lt l lu lv">NAME      DATA   AGE<br/>config3   1     11s</span></pre><p id="2812" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½œä¸ºç»ƒä¹ ï¼Œç¡®è®¤ç¯å¢ƒå˜é‡å·²ç»æ¤å…¥<code class="fe km kn ko kp b">Pod</code>ã€‚å‡ ä¸ªæŒ‡é’ˆ:</p><ul class=""><li id="90f7" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated"><code class="fe km kn ko kp b">Pod</code>çš„åç§°æ˜¯<code class="fe km kn ko kp b">pod4</code></li><li id="e6c1" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">ä»”ç»†æ£€æŸ¥æ‚¨åº”è¯¥å¯»æ‰¾çš„ç¯å¢ƒå˜é‡çš„åç§°</li></ul><p id="991a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code class="fe km kn ko kp b">kubectl</code> CLIåˆ›å»ºä¸€ä¸ª<code class="fe km kn ko kp b">ConfigMap</code>ã€‚å®ƒå¯èƒ½å¹¶ä¸é€‚åˆæ‰€æœ‰çš„ç”¨ä¾‹ï¼Œä½†æ˜¯å®ƒç¡®å®è®©äº‹æƒ…å˜å¾—ç®€å•å¤šäº†</p><h1 id="8c5a" class="lw lr iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">ä½¿ç”¨<code class="fe km kn ko kp b">kubectl</code></h1><p id="0651" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">æœ‰å¤šç§é€‰æ‹©:</p><h2 id="f1f6" class="lq lr iq bd lx ni nj dn mb nk nl dp mf jy nm nn mj kc no np mn kg nq nr mr ns bi translated">ä½¿ç”¨<code class="fe km kn ko kp b">--from-literal</code>æ¤å…¥é…ç½®æ•°æ®</h2><p id="7e4e" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">æˆ‘ä»¬å°†ä¸‹é¢çš„é”®å€¼å¯¹æ¤å…¥<code class="fe km kn ko kp b">ConfigMap</code> â€” <code class="fe km kn ko kp b">foo_env=bar</code>å’Œ<code class="fe km kn ko kp b">hello_env=world</code></p><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="6745" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl create configmap config4 --from-literal=foo_env=bar --from-literal=hello_env=world</span></pre><h2 id="4b5d" class="lq lr iq bd lx ni nj dn mb nk nl dp mf jy nm nn mj kc no np mn kg nq nr mr ns bi translated">ä½¿ç”¨<code class="fe km kn ko kp b">--from-file</code></h2><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="01a2" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl create configmap config5 --from-file=/config/app-config.properties</span></pre><p id="173d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™å°†åˆ›å»ºä¸€ä¸ª<code class="fe km kn ko kp b">ConfigMap</code> ( <code class="fe km kn ko kp b">config5</code>)ä¸</p><ul class=""><li id="e589" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">ä¸æ–‡ä»¶åŒåçš„å¯†é’¥ï¼Œå³æœ¬ä¾‹ä¸­çš„<code class="fe km kn ko kp b">app-config.properties</code></li><li id="9cb2" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">å’Œå€¼ä½œä¸ºæ–‡ä»¶çš„å†…å®¹</li></ul><p id="1047" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„é”®(è€Œä¸æ˜¯æ–‡ä»¶å)æ¥è¦†ç›–é»˜è®¤è¡Œä¸º</p><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="a168" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl create configmap config6 --from-file=CONFIG_DATA=/config/app-config.properties</span></pre><p id="223c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code class="fe km kn ko kp b">CONFIG_DATA</code>å°†æ˜¯å…³é”®</p><h2 id="46d4" class="lq lr iq bd lx ni nj dn mb nk nl dp mf jy nm nn mj kc no np mn kg nq nr mr ns bi translated">ä»ç›®å½•ä¸­çš„æ–‡ä»¶</h2><p id="910e" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">æ‚¨å¯ä»¥ä¸€æ¬¡å°†å¤šä¸ªæ–‡ä»¶(åœ¨ä¸€ä¸ªç›®å½•ä¸­)ä¸­çš„æ•°æ®æ¤å…¥ä¸€ä¸ª<code class="fe km kn ko kp b">ConfigMap</code></p><pre class="kr ks kt ku gt lm kp ln lo aw lp bi"><span id="f078" class="lq lr iq kp b gy ls lt l lu lv">$ kubectl create configmap config7 --from-file=/home/foo/config/</span></pre><p id="e75a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ æœ€ç»ˆä¼šå¾—åˆ°</p><ul class=""><li id="70f3" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">å¤šä¸ªå¯†é’¥å°†ä¸å•ä¸ªæ–‡ä»¶åç›¸åŒ</li><li id="0430" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">è¯¥å€¼å°†æ˜¯ç›¸åº”æ–‡ä»¶çš„å†…å®¹</li></ul><h1 id="1f46" class="lw lr iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">å¾ˆé«˜å…´çŸ¥é“</h1><p id="50e9" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">ä»¥ä¸‹æ˜¯æ‚¨åœ¨ä½¿ç”¨<code class="fe km kn ko kp b">ConfigMap</code> sæ—¶åº”è°¨è®°çš„äº‹é¡¹(éè¯¦å°½åˆ—è¡¨):</p><ul class=""><li id="5793" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">ä¸€æ—¦æ‚¨å®šä¹‰äº†ç¯å¢ƒå˜é‡<code class="fe km kn ko kp b">ConfigMap</code>ï¼Œæ‚¨å°±å¯ä»¥åœ¨<code class="fe km kn ko kp b">Pod</code>è§„èŒƒçš„å‘½ä»¤éƒ¨åˆ†ä½¿ç”¨å®ƒä»¬ï¼Œå³ä½¿ç”¨<code class="fe km kn ko kp b">$(VARIABLE_NAME)</code>æ ¼å¼çš„<code class="fe km kn ko kp b">spec.containers.command</code></li><li id="c398" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">æ‚¨éœ€è¦ç¡®ä¿åœ¨<code class="fe km kn ko kp b">Pod</code>ä¸­è¢«å¼•ç”¨çš„<code class="fe km kn ko kp b">ConfigMap</code>å·²ç»è¢«åˆ›å»ºâ€”â€”å¦åˆ™ï¼Œ<code class="fe km kn ko kp b">Pod</code>å°†<em class="nd">ä¸ä¼šå¯åŠ¨</em>ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„å”¯ä¸€æ–¹æ³•æ˜¯å°†<code class="fe km kn ko kp b">ConfigMap</code>æ ‡è®°ä¸º<code class="fe km kn ko kp b">optional</code>ã€‚</li><li id="9e01" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">å¦ä¸€ç§å¯èƒ½é˜»æ­¢<code class="fe km kn ko kp b">Pod</code>å¯åŠ¨çš„æƒ…å†µæ˜¯å½“æ‚¨å¼•ç”¨äº†ä¸€ä¸ªå®é™…ä¸Šåœ¨<code class="fe km kn ko kp b">ConfigMap</code>ä¸­ä¸å­˜åœ¨çš„é”®ã€‚</li></ul><blockquote class="na nb nc"><p id="b2cb" class="jn jo nd jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated"><em class="iq">ä½ ä¹Ÿå¯ä»¥å‚è€ƒ</em> <code class="fe km kn ko kp b"><a class="ae kl" href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.15/#configmap-v1-core" rel="noopener ugc nofollow" target="_blank"><em class="iq">ConfigMap API</em></a></code></p></blockquote><p id="1aa7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™å°±æ˜¯æœ¬æœŸâ€œæœå£³ä¸­çš„åº“ä¼¯å†…ç‰¹â€ç³»åˆ—çš„å…¨éƒ¨å†…å®¹ã€‚æ•¬è¯·å…³æ³¨æ›´å¤šå†…å®¹ï¼</p><p id="69ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ å¯¹ä½¿ç”¨<a class="ae kl" href="https://azure.microsoft.com/services/kubernetes-service/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure </a>å­¦ä¹ Kuberneteså’ŒContainersæ„Ÿå…´è¶£ï¼Œåªéœ€<a class="ae kl" href="https://azure.microsoft.com/en-us/free/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">åˆ›å»ºä¸€ä¸ª<strong class="jp ir">å…è´¹</strong>è´¦æˆ·</a>å°±å¯ä»¥å¼€å§‹äº†ï¼ä¸€ä¸ªå¥½çš„èµ·ç‚¹æ˜¯ä½¿ç”¨æ–‡æ¡£ä¸­çš„<a class="ae kl" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">å¿«é€Ÿå…¥é—¨ã€æ•™ç¨‹å’Œä»£ç ç¤ºä¾‹</a>æ¥ç†Ÿæ‚‰è¿™é¡¹æœåŠ¡ã€‚æˆ‘ä¹Ÿå¼ºçƒˆæ¨èæŸ¥çœ‹<a class="ae kl" href="https://azure.microsoft.com/resources/kubernetes-learning-path/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> 50å¤©Kuberneteså­¦ä¹ è·¯å¾„</a>ã€‚é«˜çº§ç”¨æˆ·å¯èƒ½å¸Œæœ›å‚è€ƒ<a class="ae kl" href="https://docs.microsoft.com/azure/aks/best-practices?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Kubernetesæœ€ä½³å®è·µ</a>æˆ–è§‚çœ‹ä¸€äº›<a class="ae kl" href="https://azure.microsoft.com/resources/videos/index/?services=kubernetes-service&amp;WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">è§†é¢‘</a>ä»¥äº†è§£æ¼”ç¤ºã€ä¸»è¦åŠŸèƒ½å’ŒæŠ€æœ¯ä¼šè®®ã€‚</p><p id="e255" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘çœŸçš„å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå¹¶ä»ä¸­å­¦åˆ°äº†ä¸€äº›ä¸œè¥¿ï¼å¦‚æœä½ åšäº†ï¼Œè¯·å–œæ¬¢å¹¶è·Ÿéšã€‚å¾ˆé«˜å…´é€šè¿‡<a class="ae kl" href="https://twitter.com/abhi_tweeter" rel="noopener ugc nofollow" target="_blank"> @abhi_tweeter </a>è·å¾—åé¦ˆæˆ–å‘è¡¨è¯„è®ºã€‚</p><div class="nu nv gp gr nw nx"><a href="https://twitter.com/abhi_tweeter" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd ir gy z fp oc fr fs od fu fw ip bi translated">é˜¿å¸ƒèˆå…‹</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">Abhishekçš„æœ€æ–°æ¨æ–‡(@abhi_tweeter)ã€‚äº‘å¼€å‘è€…ğŸ¥‘@Microsoft @azureadvocates |â€¦</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">twitter.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol kw nx"/></div></div></a></div></div></div>    
</body>
</html>